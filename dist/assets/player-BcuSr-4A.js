import{s as f}from"./index-Bks-6_9g.js";import{u as se,a as oe,g as ie,c as j,o as de,y as _,r as w,B as c,d as u,e as g,f as a,w as t,p as z,j as s,i as m,m as i,t as o,k as h,F as V,v as W,X as re}from"./index-BhMAzN__.js";const ue={class:"page-div"},ce={class:"card-header"},pe={key:0},me={key:1},ge={class:"card-header"},fe={key:0},_e={style:{"margin-top":"20px"}},he={class:"card-header"},be={key:0},ye={style:{"margin-top":"20px"}},ve={class:"card-header"},ke={key:0},we={style:{"margin-top":"20px"}},$e=re({name:"settingsPlayer"}),xe=Object.assign($e,{setup(Ce){const{t:r}=se(),{isMobile:$}=oe(),N=ie(),b=j(()=>N.isDark),I=j(()=>N.language);de(()=>{p()});const p=(e=!1)=>{f.player.list.get().then(l=>{A.value=l.data.players,y.value=[];for(let d of l.data.adminList)d!==""&&y.value.push(d);v.value=[];for(let d of l.data.blockList)d!==""&&v.value.push(d);k.value=[];for(let d of l.data.whiteList)d!==""&&k.value.push(d);if(e){let d;I.value==="zh"?d="刷新成功":d="Refresh Success",_(d)}})},T=w("players"),A=w([]),y=w([]),v=w([]),k=w([]),M=e=>{for(let l of y.value)if(l===e)return!0},U=e=>{for(let l of v.value)if(l===e)return!0},E=e=>{for(let l of k.value)if(l===e)return!0},K=e=>{switch(e.type){case"admin":O(e.uid);break;case"block":X(e.uid);break;case"white":G(e.uid);break;case"kick":J(e.uid);break}},O=e=>{f.player.addAdmin.post({uid:e}).then(l=>{_(l.message),p()})},R=e=>{f.player.deleteAdmin.post({uid:e}).then(l=>{_(l.message),p()})},X=e=>{f.player.addBlock.post({uid:e}).then(l=>{_(l.message),p()})},q=e=>{f.player.deleteBlock.post({uid:e}).then(l=>{_(l.message),p()})},G=e=>{f.player.addWhite.post({uid:e}).then(l=>{_(l.message),p()})},H=e=>{f.player.deleteWhite.post({uid:e}).then(l=>{_(l.message),p()})},J=e=>{f.player.kick.post({uid:e}).then(l=>{_(l.message)})};return(e,l)=>{const d=c("el-button"),C=c("el-table-column"),Q=c("arrow-down"),Y=c("el-icon"),L=c("el-dropdown-item"),Z=c("el-dropdown-menu"),ee=c("el-dropdown"),te=c("el-table"),D=c("el-result"),x=c("el-card"),B=c("el-tab-pane"),S=c("el-alert"),F=c("el-tag"),le=c("el-tabs"),ae=c("el-col"),ne=c("el-row");return u(),g("div",ue,[a(ne,{gutter:10},{default:t(()=>[a(ae,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:t(()=>[a(le,{modelValue:T.value,"onUpdate:modelValue":l[4]||(l[4]=n=>T.value=n)},{default:t(()=>[a(B,{label:e.$t("setting.players"),name:"players"},{default:t(()=>[a(x,{shadow:"never",style:z(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",ce,[i(o(s(r)("setting.players"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[0]||(l[0]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[A.value?(u(),h(te,{key:0,data:A.value,border:"",style:{width:"100%"},size:"small"},{default:t(()=>[a(C,{prop:"nickName",label:e.$t("setting.nickName")},null,8,["label"]),a(C,{prop:"prefab",label:e.$t("setting.role")},{default:t(n=>[n.row.prefab===""?(u(),g("span",pe,o(s(r)("setting.roleFail")),1)):(u(),g("span",me,o(n.row.prefab),1))]),_:1},8,["label"]),a(C,{prop:"uid",label:"UID"}),a(C,{prop:"actions",label:e.$t("setting.button.actions")},{default:t(n=>[a(ee,{onCommand:K,trigger:"hover"},{dropdown:t(()=>[a(Z,null,{default:t(()=>[a(L,{command:{type:"admin",uid:n.row.uid},disabled:M(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"block",uid:n.row.uid},disabled:U(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"white",uid:n.row.uid},disabled:E(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"kick",uid:n.row.uid},disabled:M(n.row.uid),divided:""},{default:t(()=>[i(o(s(r)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:t(()=>[a(d,{link:"",type:"primary"},{default:t(()=>[i(o(s(r)("setting.button.actions")),1),a(Y,{class:"el-icon--right"},{default:t(()=>[a(Q)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noPlayersFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(B,{label:e.$t("setting.adminList"),name:"adminList"},{default:t(()=>[a(x,{shadow:"never",style:z(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",ge,[i(o(s(r)("setting.adminList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[1]||(l[1]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[y.value.length>0?(u(),g("div",fe,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",_e,[(u(!0),g(V,null,W(y.value,n=>(u(),h(F,{size:"large",closable:"",onClose:P=>R(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noAdminFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(B,{label:e.$t("setting.blockList"),name:"blockList"},{default:t(()=>[a(x,{shadow:"never",style:z(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",he,[i(o(s(r)("setting.blockList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[2]||(l[2]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[v.value.length>0?(u(),g("div",be,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",ye,[(u(!0),g(V,null,W(v.value,n=>(u(),h(F,{size:"large",closable:"",onClose:P=>q(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noBlockFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(B,{label:e.$t("setting.whiteList"),name:"whiteList"},{default:t(()=>[a(x,{shadow:"never",style:z(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",ve,[i(o(s(r)("setting.whiteList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[3]||(l[3]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[k.value.length>0?(u(),g("div",ke,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",we,[(u(!0),g(V,null,W(k.value,n=>(u(),h(F,{size:"large",closable:"",onClose:P=>H(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noWhiteFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{xe as default};
