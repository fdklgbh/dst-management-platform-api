import{s as _}from"./index-m5hZX8yr.js";import{u as ie,a as de,g as re,c as E,o as ue,y as h,r as y,B as c,d,e as f,f as n,w as t,p as A,j as o,i as g,m as i,t as s,k as m,F as W,v as M,X as ce}from"./index--Cvz-kQY.js";const pe={class:"page-div"},ge={class:"card-header"},me={key:0},fe={key:1},_e={class:"card-header"},he={key:0},be={style:{"margin-top":"20px"}},ye={class:"card-header"},ve={key:0},ke={style:{"margin-top":"20px"}},we={class:"card-header"},$e={key:0},Ce={style:{"margin-top":"20px"}},Le=ce({name:"settingsPlayer"}),Be=Object.assign(Le,{setup(De){const{t:r}=ie(),{isMobile:L}=de(),T=re(),b=E(()=>T.isDark),P=E(()=>T.language);ue(()=>{p()});const p=(e=!1)=>{_.player.list.get().then(l=>{F.value=l.data.players,S.value=l.data.uidMap,v.value=[];for(let u of l.data.adminList)u!==""&&v.value.push(u);k.value=[];for(let u of l.data.blockList)u!==""&&k.value.push(u);w.value=[];for(let u of l.data.whiteList)u!==""&&w.value.push(u);if(e){let u;P.value==="zh"?u="刷新成功":u="Refresh Success",h(u)}})},j=y("players"),F=y([]),S=y({}),v=y([]),k=y([]),w=y([]),I=e=>{for(let l of v.value)if(l===e)return!0},K=e=>{for(let l of k.value)if(l===e)return!0},O=e=>{for(let l of w.value)if(l===e)return!0},R=e=>{switch(e.type){case"admin":X(e.uid);break;case"block":G(e.uid);break;case"white":J(e.uid);break;case"kick":Y(e.uid);break}},X=e=>{_.player.addAdmin.post({uid:e}).then(l=>{h(l.message),p()})},q=e=>{_.player.deleteAdmin.post({uid:e}).then(l=>{h(l.message),p()})},G=e=>{_.player.addBlock.post({uid:e}).then(l=>{h(l.message),p()})},H=e=>{_.player.deleteBlock.post({uid:e}).then(l=>{h(l.message),p()})},J=e=>{_.player.addWhite.post({uid:e}).then(l=>{h(l.message),p()})},Q=e=>{_.player.deleteWhite.post({uid:e}).then(l=>{h(l.message),p()})},Y=e=>{_.player.kick.post({uid:e}).then(l=>{h(l.message)})},N=e=>e in S.value?" ["+S.value[e]+"]":P.value==="zh"?" [暂未获取到]":" [Not yet obtained]";return(e,l)=>{const u=c("el-button"),$=c("el-table-column"),C=c("el-tag"),Z=c("arrow-down"),ee=c("el-icon"),D=c("el-dropdown-item"),te=c("el-dropdown-menu"),le=c("el-dropdown"),ae=c("el-table"),x=c("el-result"),z=c("el-card"),B=c("el-tab-pane"),V=c("el-alert"),ne=c("el-tabs"),se=c("el-col"),oe=c("el-row");return d(),f("div",pe,[n(oe,{gutter:10},{default:t(()=>[n(se,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:t(()=>[n(ne,{modelValue:j.value,"onUpdate:modelValue":l[4]||(l[4]=a=>j.value=a)},{default:t(()=>[n(B,{label:e.$t("setting.players"),name:"players"},{default:t(()=>[n(z,{shadow:"never",style:A(o(L)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[g("div",ge,[i(s(o(r)("setting.players"))+" ",1),g("div",null,[n(u,{size:"default",onClick:l[0]||(l[0]=a=>p(!0))},{default:t(()=>[i(s(o(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[F.value?(d(),m(ae,{key:0,data:F.value,border:"",style:{width:"100%"},size:"small"},{default:t(()=>[n($,{prop:"nickName",label:e.$t("setting.nickName")},null,8,["label"]),n($,{prop:"prefab",label:e.$t("setting.role")},{default:t(a=>[a.row.prefab===""?(d(),f("span",me,s(o(r)("setting.roleFail")),1)):(d(),f("span",fe,s(a.row.prefab),1))]),_:1},8,["label"]),n($,{prop:"age",label:e.$t("setting.age")},{default:t(a=>[a.row.age?(d(),m(C,{key:0,type:"success"},{default:t(()=>[i(s(a.row.age),1)]),_:2},1024)):(d(),m(C,{key:1,type:"warning"},{default:t(()=>[i(s(o(r)("setting.button.roleFail")),1)]),_:1}))]),_:1},8,["label"]),n($,{prop:"uid",label:"UID"}),n($,{prop:"actions",label:e.$t("setting.button.actions")},{default:t(a=>[n(le,{onCommand:R,trigger:"hover"},{dropdown:t(()=>[n(te,null,{default:t(()=>[n(D,{command:{type:"admin",uid:a.row.uid},disabled:I(a.row.uid)},{default:t(()=>[i(s(o(r)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),n(D,{command:{type:"block",uid:a.row.uid},disabled:K(a.row.uid)},{default:t(()=>[i(s(o(r)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),n(D,{command:{type:"white",uid:a.row.uid},disabled:O(a.row.uid)},{default:t(()=>[i(s(o(r)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),n(D,{command:{type:"kick",uid:a.row.uid},disabled:I(a.row.uid),divided:""},{default:t(()=>[i(s(o(r)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:t(()=>[n(u,{link:"",type:"primary"},{default:t(()=>[i(s(o(r)("setting.button.actions")),1),n(ee,{class:"el-icon--right"},{default:t(()=>[n(Z)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):(d(),m(x,{key:1,icon:"warning",title:e.$t("setting.noPlayersFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),n(B,{label:e.$t("setting.adminList"),name:"adminList"},{default:t(()=>[n(z,{shadow:"never",style:A(o(L)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[g("div",_e,[i(s(o(r)("setting.adminList"))+" ",1),g("div",null,[n(u,{size:"default",onClick:l[1]||(l[1]=a=>p(!0))},{default:t(()=>[i(s(o(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[v.value.length>0?(d(),f("div",he,[n(V,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(s(o(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",be,[(d(!0),f(W,null,M(v.value,a=>(d(),m(C,{size:"large",closable:"",onClose:U=>q(a),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(s(a+N(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(d(),m(x,{key:1,icon:"warning",title:e.$t("setting.noAdminFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),n(B,{label:e.$t("setting.blockList"),name:"blockList"},{default:t(()=>[n(z,{shadow:"never",style:A(o(L)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[g("div",ye,[i(s(o(r)("setting.blockList"))+" ",1),g("div",null,[n(u,{size:"default",onClick:l[2]||(l[2]=a=>p(!0))},{default:t(()=>[i(s(o(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[k.value.length>0?(d(),f("div",ve,[n(V,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(s(o(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",ke,[(d(!0),f(W,null,M(k.value,a=>(d(),m(C,{size:"large",closable:"",onClose:U=>H(a),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(s(a+N(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(d(),m(x,{key:1,icon:"warning",title:e.$t("setting.noBlockFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),n(B,{label:e.$t("setting.whiteList"),name:"whiteList"},{default:t(()=>[n(z,{shadow:"never",style:A(o(L)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[g("div",we,[i(s(o(r)("setting.whiteList"))+" ",1),g("div",null,[n(u,{size:"default",onClick:l[3]||(l[3]=a=>p(!0))},{default:t(()=>[i(s(o(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[w.value.length>0?(d(),f("div",$e,[n(V,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(s(o(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",Ce,[(d(!0),f(W,null,M(w.value,a=>(d(),m(C,{size:"large",closable:"",onClose:U=>Q(a),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(s(a+N(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(d(),m(x,{key:1,icon:"warning",title:e.$t("setting.noWhiteFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{Be as default};
