import{a as j,c as x,r as A,A as l,d as y,e as I,f as e,w as t,i as s,m as a,t as c,j as r,p as M,l as P,n as q,F as E,x as O}from"./index-CjVQdqiy.js";import{f as R}from"./tools-CuQXwsJG.js";import{s as $}from"./index-DdAR7hD9.js";const G={style:{display:"flex","align-items":"center",margin:"5px",width:"280px"}},H={style:{width:"200px"}},J={class:"fcc"},K={style:{margin:"5px 0"},class:"fcc"},L={class:"fcc"},Q={style:{"min-height":"50vh","margin-top":"20px"}},W={class:"fcc"},X={class:"fcc"},Y={class:"fcc"},Z={style:{"margin-top":"20px"}},le={__name:"modInfo",props:{mod:{type:Object,default:{}}},setup(b){const{isMobile:_}=j(),o=b,u=x(()=>parseFloat((o.mod.vote_data.score*5).toFixed(2))),V=x(()=>o.mod.name.length>20?o.mod.name.slice(0,20)+"...":o.mod.name),f=A(!1),F=()=>{const h={id:o.mod.id,file_url:o.mod.file_url};$.mod.download.post(h).then(n=>{O(n.message)})};return(h,n)=>{const v=l("el-image"),m=l("el-tag"),S=l("el-tooltip"),g=l("el-rate"),w=l("el-button"),k=l("el-card"),z=l("PictureFilled"),p=l("el-icon"),i=l("el-descriptions-item"),B=l("sc-icon-ThumbUpFill"),C=l("sc-icon-ThumbDownFill"),D=l("sc-icon-StarFill"),N=l("el-descriptions"),T=l("el-scrollbar"),U=l("el-dialog");return y(),I(E,null,[e(k,{shadow:"never"},{default:t(()=>[s("div",G,[e(v,{src:o.mod.preview_url,fit:"fill",style:{width:"80px",height:"80px"}},null,8,["src"]),s("div",H,[s("div",J,[e(S,{effect:"light","show-after":500,content:o.mod.name,placement:"top"},{default:t(()=>[e(m,{size:"small"},{default:t(()=>[a(c(V.value),1)]),_:1})]),_:1},8,["content"])]),s("div",K,[e(g,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=d=>u.value=d),max:5,disabled:"","allow-half":"","show-score":""},null,8,["modelValue"])]),s("div",L,[e(w,{type:"primary",size:"small",onClick:n[1]||(n[1]=d=>f.value=!0)},{default:t(()=>n[4]||(n[4]=[a("详情")])),_:1}),e(w,{type:"success",size:"small",onClick:F},{default:t(()=>n[5]||(n[5]=[a("下载")])),_:1})])])])]),_:1}),e(U,{modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=d=>f.value=d),title:o.mod.name,width:"80vw"},{default:t(()=>[s("div",Q,[e(N,{column:2,border:"",direction:r(_)?"vertical":"horizontal"},{default:t(()=>[e(i,{rowspan:r(_)?1:2,width:140,align:"center"},{label:t(()=>[e(p,null,{default:t(()=>[e(z)]),_:1})]),default:t(()=>[e(v,{style:M(r(_)?"width: 60px; height: 60px":"width: 120px; height: 120px"),src:o.mod.preview_url},null,8,["style","src"])]),_:1},8,["rowspan"]),e(i,{label:"ID",align:"center"},{default:t(()=>[e(m,{type:"info"},{default:t(()=>[a(c(o.mod.id),1)]),_:1})]),_:1}),e(i,{label:"size",align:"center"},{default:t(()=>[e(m,{type:"info"},{default:t(()=>[a(c(r(R)(o.mod.size)),1)]),_:1})]),_:1}),e(i,{align:"center"},{label:t(()=>[s("div",W,[e(p,null,{default:t(()=>[e(B)]),_:1})])]),default:t(()=>[e(m,{type:"info"},{default:t(()=>[a(c(o.mod.vote_data.votes_up),1)]),_:1})]),_:1}),r(_)?(y(),P(i,{key:0})):q("",!0),e(i,{align:"center"},{label:t(()=>[s("div",X,[e(p,null,{default:t(()=>[e(C)]),_:1})])]),default:t(()=>[e(m,{type:"info"},{default:t(()=>[a(c(o.mod.vote_data.votes_down),1)]),_:1})]),_:1}),e(i,null,{label:t(()=>[s("div",Y,[e(p,null,{default:t(()=>[e(D)]),_:1})])]),default:t(()=>[e(g,{modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=d=>u.value=d),max:5,disabled:"","allow-half":"","show-score":"","score-template":"({value}/5)"},null,8,["modelValue"])]),_:1})]),_:1},8,["direction"]),s("div",Z,[e(T,{"max-height":"20vh"},{default:t(()=>[a(c(o.mod.file_description),1)]),_:1})])])]),_:1},8,["modelValue","title"])],64)}}};export{le as default};
