import{_ as P,r as $,X as U,o as C,d as k,e as I,i as d,Y as N,j as c,Z as j,u as B,g as F,c as H,J as M,A as p,f as t,w as r,t as i,m as R,V as q,Q as E,x as Z,$ as D,a0 as J,a1 as v}from"./index-Lmh5sJJi.js";import{S as L,a as S}from"./tools-BEjKDLTT.js";const O={class:"sc-password-strength"},Q={__name:"index",props:{modelValue:{type:String,default:""}},setup(x){const m=x;let e=$(0);const f=o=>{let s=0,w=o.length>=6,l=/\d/.test(o),g=/[a-z]/.test(o),h=/[A-Z]/.test(o),n=!/(\w)\1{2}/.test(o),a=/[`~!@#$%^&*()_+<>?:"{},./;'[\]]/.test(o);if(o.length<=0)return s=0,e.value=s,!1;if(!w)return s=1,e.value=s,!1;l&&(s+=1),g&&(s+=1),h&&(s+=1),n&&(s+=1),a&&(s+=1),e.value=s};return U(()=>m.modelValue,(o,s)=>{f(o)},{immediate:!0}),C(()=>{f(m.modelValue)}),(o,s)=>(k(),I("div",O,[d("div",{class:N([`sc-password-strength-level-${c(e)}`,"sc-password-strength-bar"])},null,2)]))}},W=P(Q,[["__scopeId","data-v-e34f7d17"]]),X={class:"page-div"},Y={class:"card-header"},G={class:"parent"},K={class:"child",style:{"font-size":"28px"}},ee={class:"child",style:{"font-size":"14px",color:"#73767a","margin-top":"5px"}},se={class:"card-header"},oe={class:"el-form-item-msg"},ae={style:{display:"flex","justify-content":"flex-end","padding-top":"80px"}},te=q({name:"profile"}),le=Object.assign(te,{setup(x){const m=j(),{t:e}=B(),f=m.userInfo,o=F(),s=H(()=>o.language),w=$(),l=M({password:"",passwordTwice:""}),g={password:[{required:!0,message:e("profile.plzInputPassword")}],passwordTwice:[{required:!0,message:e("profile.plzInputAgainPassword")},{validator:(n,a,u)=>{a!==l.password?u(new Error(e("profile.passwordNotMatch"))):u()}}]},h=()=>{w.value.validate(n=>{n&&E.updatePassword.post({password:L(l.password)}).then(async a=>{Z(a.message),await S(1e3),D(e("profile.passwordUpdated"),e("profile.passwordUpdatedTitle"),3e3),await S(3e3),J.clear(),v.remove("user"),v.remove("keepAlive"),v.remove("tabs"),window.location.replace("/")})})};return(n,a)=>{const u=p("el-card"),y=p("el-col"),V=p("el-input"),b=p("el-form-item"),T=p("el-button"),z=p("el-form"),A=p("el-row");return k(),I("div",X,[t(A,{gutter:10},{default:r(()=>[t(y,{span:12,lg:12,md:12,sm:24,xs:24,style:{"margin-top":"10px"}},{default:r(()=>[t(u,{style:{"min-height":"500px"}},{header:r(()=>[d("div",Y,i(c(e)("profile.cardHeaderInfo")),1)]),default:r(()=>[d("div",G,[d("div",K,i(s.value==="zh"?"管理员":"Admin"),1),d("div",ee,i(c(f).username),1)])]),_:1})]),_:1}),t(y,{span:12,lg:12,md:12,sm:24,xs:24,style:{"margin-top":"10px"}},{default:r(()=>[t(u,{style:{"min-height":"500px"}},{header:r(()=>[d("div",se,i(c(e)("profile.cardHeaderPassword")),1)]),default:r(()=>[t(z,{ref_key:"updatePasswordFormRef",ref:w,model:l,rules:g,"label-width":"150","label-position":"top",style:{"margin-top":"20px"}},{default:r(()=>[t(b,{label:n.$t("profile.password"),prop:"password"},{default:r(()=>[t(V,{modelValue:l.password,"onUpdate:modelValue":a[0]||(a[0]=_=>l.password=_),"show-password":""},null,8,["modelValue"]),t(W,{modelValue:l.password,"onUpdate:modelValue":a[1]||(a[1]=_=>l.password=_)},null,8,["modelValue"]),d("div",oe,i(c(e)("profile.suggestedPassword")),1)]),_:1},8,["label"]),t(b,{label:n.$t("profile.passwordTwice"),prop:"passwordTwice"},{default:r(()=>[t(V,{modelValue:l.passwordTwice,"onUpdate:modelValue":a[2]||(a[2]=_=>l.passwordTwice=_),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),d("div",ae,[t(T,{type:"primary",onClick:h},{default:r(()=>[R(i(c(e)("profile.update")),1)]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}}),ne=P(le,[["__scopeId","data-v-4f214ebb"]]);export{ne as default};
