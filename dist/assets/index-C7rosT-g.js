import{o as L,u as E,g as G,D as H,G as J,b as M,H as O,c as K,r as u,a1 as j,w as $,I as B,J as p,K as F,e as i,f as I,l as y,t as s,i as o,n as V,m,k as e,j as l,p as d,q as Q,a0 as U}from"./index-xsEJLFvK.js";const X={class:"page-div"},Y={class:"tip_warning"},Z={class:"tip_success",style:{"margin-top":"20px"}},ee={class:"fcc",style:{"font-size":"20px"}},te={key:0},le=U({name:"Clusters"}),oe=Object.assign(le,{setup(ae){L(()=>{T(),W()});const{t:a}=E(),h=G(),_=H();J();const w=M(),N=O("refresh"),R=K(()=>h.isDark),v=u(!1),b=u(!1),k=K(()=>v.value||b.value),P=u([]),T=()=>{v.value=!0,j.clusters.get().then(c=>{P.value=c.data}).finally(()=>{v.value=!1})},g=u([]),C=u(0),D=u(0),W=()=>{b.value=!0,j.clustersWorldPort.get().then(c=>{g.value=c.data;let f=[];for(let r of g.value)if(r.worldPort!==null)for(let n of r.worldPort)f.push(n);C.value=f.length,D.value=new Set(f).size}).finally(()=>{b.value=!1})},q=()=>{setTimeout(()=>{_.meta.isKeepAlive&&w.removeKeepAliveName(_.name),N(!1),B(()=>{_.meta.isKeepAlive&&w.addKeepAliveName(_.name),N(!0)})},0)};return $(()=>h.selectedDstCluster,c=>{c&&B(()=>{q()})},{immediate:!1}),(c,f)=>{const r=p("el-tag"),n=p("el-table-column"),x=p("el-table"),z=p("el-alert"),A=F("loading");return i(),I("div",X,[y("div",Y,s(o(a)("clusters.tip1")),1),V((i(),m(x,{data:P.value,border:""},{default:e(()=>[l(n,{label:o(a)("clusters.table.name")},{default:e(t=>[l(r,{type:"primary"},{default:e(()=>[d(s(t.row.clusterName),1)]),_:2},1024)]),_:1},8,["label"]),l(n,{label:o(a)("clusters.table.displayName")},{default:e(t=>[l(r,{type:"success"},{default:e(()=>[d(s(t.row.clusterDisplayName),1)]),_:2},1024)]),_:1},8,["label"]),l(n,{label:o(a)("clusters.table.world")},{default:e(t=>[l(r,{type:"info"},{default:e(()=>{var S;return[d(s(((S=t.row.worlds)==null?void 0:S.length)||0),1)]}),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[A,k.value]]),y("div",Z,s(o(a)("clusters.tip2")),1),D.value!==C.value?(i(),m(z,{key:0,effect:R.value?"light":"dark",type:"error",closable:!1,style:{"margin-bottom":"10px"}},{title:e(()=>[y("div",ee,s(o(a)("clusters.tip3")),1)]),_:1},8,["effect"])):Q("",!0),V((i(),m(x,{data:g.value,border:""},{default:e(()=>[l(n,{label:o(a)("clusters.table.name")},{default:e(t=>[l(r,{type:"primary"},{default:e(()=>[d(s(t.row.clusterName),1)]),_:2},1024)]),_:1},8,["label"]),l(n,{label:o(a)("clusters.table.displayName")},{default:e(t=>[l(r,{type:"success"},{default:e(()=>[d(s(t.row.clusterDisplayName),1)]),_:2},1024)]),_:1},8,["label"]),l(n,{label:o(a)("clusters.table.port")},{default:e(t=>[t.row.worldPort?(i(),I("span",te,s(t.row.worldPort.join(", ")),1)):(i(),m(r,{key:1,type:"info"},{default:e(()=>[d(s(o(a)("clusters.table.none")),1)]),_:1}))]),_:1},8,["label"])]),_:1},8,["data"])),[[A,k.value]])])}}});export{oe as default};
