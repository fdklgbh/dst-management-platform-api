import{a3 as Vt,a4 as tn,_ as nn,u as on,o as ln,r as Ae,a as an,g as rn,c as un,A as ye,d as R,e as Z,f as F,w as A,j as c,l as ie,p as ft,m as re,t as q,i as j,n as Ue,F as _e,s as ke,V as sn,z as Tt,x as Ft}from"./index-BQC0DO2f.js";import{s as Bt}from"./index-CcCvMdWn.js";import{s as yt}from"./index-C12zlIQX.js";import{g as et,_ as Se,o as G,a as ct,c as mt,b as _t,d as kt}from"./levelDataSetting-BFpaYTQS.js";var St={exports:{}};St.exports;(function(je,$){(function(fe,k,N){var be=$&&!$.nodeType&&$,ue=je&&!je.nodeType&&je,de=be&&ue&&typeof Vt=="object"&&Vt,ce=ue&&ue.exports===be&&be;de&&(de.global===de||de.window===de||de.self===de)&&(fe=de),N(be&&ue?ce?ue.exports:be:fe[k]={})})(Vt,"luaparse",function(fe){fe.version="0.3.1";var k,N,be,ue,de,ce=fe.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function xe(n,l){return l=l||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(l|192|n>>6,l|128|n&63):n<65536?String.fromCharCode(l|224|n>>12,l|128|n>>6&63,l|128|n&63):n<1114112?String.fromCharCode(l|240|n>>18,l|128|n>>12&63,l|128|n>>6&63,l|128|n&63):null}function He(n,l){for(var _=n.toString(16);_.length<l;)_="0"+_;return _}function it(n){return function(l){var _=n.exec(l);if(!_)return l;ee(null,J.invalidCodeUnit,He(_[0].charCodeAt(0),4).toUpperCase())}}var lt={"pseudo-latin1":{fixup:it(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return xe(n)}},"x-user-defined":{fixup:it(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return xe(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},Q=1,Pe=2,$e=4,Te=8,We=16,De=32,Le=64,Ke=128,Je=256;fe.tokenTypes={EOF:Q,StringLiteral:Pe,Keyword:$e,Identifier:Te,NumericLiteral:We,Punctuator:De,BooleanLiteral:Le,NilLiteral:Ke,VarargLiteral:Je};var J=fe.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},oe=fe.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,l){return{type:"IfClause",condition:n,body:l}},elseifClause:function(n,l){return{type:"ElseifClause",condition:n,body:l}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,l){return{type:"WhileStatement",condition:n,body:l}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,l){return{type:"RepeatStatement",condition:n,body:l}},localStatement:function(n,l){return{type:"LocalStatement",variables:n,init:l}},assignmentStatement:function(n,l){return{type:"AssignmentStatement",variables:n,init:l}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,l,_,E){return{type:"FunctionDeclaration",identifier:n,isLocal:_,parameters:l,body:E}},forNumericStatement:function(n,l,_,E,P){return{type:"ForNumericStatement",variable:n,start:l,end:_,step:E,body:P}},forGenericStatement:function(n,l,_){return{type:"ForGenericStatement",variables:n,iterators:l,body:_}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,l,_){return n=n===Pe?"StringLiteral":n===We?"NumericLiteral":n===Le?"BooleanLiteral":n===Ke?"NilLiteral":"VarargLiteral",{type:n,value:l,raw:_}},tableKey:function(n,l){return{type:"TableKey",key:n,value:l}},tableKeyString:function(n,l){return{type:"TableKeyString",key:n,value:l}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,l,_){var E=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:E,operator:n,left:l,right:_}},unaryExpression:function(n,l){return{type:"UnaryExpression",operator:n,argument:l}},memberExpression:function(n,l,_){return{type:"MemberExpression",indexer:l,identifier:_,base:n}},indexExpression:function(n,l){return{type:"IndexExpression",base:n,index:l}},callExpression:function(n,l){return{type:"CallExpression",base:n,arguments:l}},tableCallExpression:function(n,l){return{type:"TableCallExpression",base:n,arguments:l}},stringCallExpression:function(n,l){return{type:"StringCallExpression",base:n,argument:l}},comment:function(n,l){return{type:"Comment",value:n,raw:l}}};function Y(n){if(V){var l=I.pop();l.complete(),l.bless(n)}return N.onCreateNode&&N.onCreateNode(n),n}var ze=Array.prototype.slice,tt=function(n,l){for(var _=0,E=n.length;_<E;++_)if(n[_]===l)return _;return-1};Array.prototype.indexOf&&(tt=function(n,l){return n.indexOf(l)});function rt(n,l,_){for(var E=0,P=n.length;E<P;++E)if(n[E][l]===_)return E;return-1}function Ze(n){var l=ze.call(arguments,1);return n=n.replace(/%(\d)/g,function(_,E){return""+l[E-1]||""}),n}var Xe=function(n){for(var l=ze.call(arguments,1),_,E,P=0,se=l.length;P<se;++P){_=l[P];for(E in _)Object.prototype.hasOwnProperty.call(_,E)&&(n[E]=_[E])}return n};Object.assign&&(Xe=Object.assign),fe.SyntaxError=SyntaxError;function nt(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function ee(n){var l=Ze.apply(null,ze.call(arguments,1)),_,E;throw n===null||typeof n.line>"u"?(E=y-f+1,_=nt(new SyntaxError(Ze("[%1:%2] %3",a,E,l))),_.index=y,_.line=a,_.column=E):(E=n.range[0]-n.lineStart,_=nt(new SyntaxError(Ze("[%1:%2] %3",n.line,E,l))),_.line=n.line,_.index=n.range[0],_.column=E),_}function D(n){var l=k.slice(n.range[0],n.range[1]);return l||n.value}function Ve(n,l){ee(l,J.expectedToken,n,D(l))}function Oe(n){var l=D(ve);if(typeof n.type<"u"){var _;switch(n.type){case Pe:_="string";break;case $e:_="keyword";break;case Te:_="identifier";break;case We:_="number";break;case De:_="symbol";break;case Le:_="boolean";break;case Ke:return ee(n,J.unexpected,"symbol","nil",l);case Q:return ee(n,J.unexpectedEOF)}return ee(n,J.unexpected,_,D(n),l)}return ee(n,J.unexpected,"symbol",n,l)}var y,O,pe,ve,U,i,a,f;fe.lex=g;function g(){for(e();k.charCodeAt(y)===45&&k.charCodeAt(y+1)===45;)Ee(),e();if(y>=be)return{type:Q,value:"<eof>",line:a,lineStart:f,range:[y,y]};var n=k.charCodeAt(y),l=k.charCodeAt(y+1);if(i=y,dt(n))return h();switch(n){case 39:case 34:return p();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t();case 46:return Ie(l)?t():l===46?k.charCodeAt(y+2)===46?d():m(".."):m(".");case 61:return m(l===61?"==":"=");case 62:return ue.bitwiseOperators&&l===62?m(">>"):m(l===61?">=":">");case 60:return ue.bitwiseOperators&&l===60?m("<<"):m(l===61?"<=":"<");case 126:if(l===61)return m("~=");if(!ue.bitwiseOperators)break;return m("~");case 58:return ue.labels&&l===58?m("::"):m(":");case 91:return l===91||l===61?S():m("[");case 47:return ue.integerDivision&&l===47?m("//"):m("/");case 38:case 124:if(!ue.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return m(k.charAt(y))}return Oe(k.charAt(y))}function T(){var n=k.charCodeAt(y),l=k.charCodeAt(y+1);return Qe(n)?(n===10&&l===13&&++y,n===13&&l===10&&++y,++a,f=++y,!0):!1}function e(){for(;y<be;){var n=k.charCodeAt(y);if(ut(n))++y;else if(!T())break}}function h(){for(var n,l;u(k.charCodeAt(++y)););return n=de.fixup(k.slice(i,y)),H(n)?l=$e:n==="true"||n==="false"?(l=Le,n=n==="true"):n==="nil"?(l=Ke,n=null):l=Te,{type:l,value:n,line:a,lineStart:f,range:[i,y]}}function m(n){return y+=n.length,{type:De,value:n,line:a,lineStart:f,range:[i,y]}}function d(){return y+=3,{type:Je,value:"...",line:a,lineStart:f,range:[i,y]}}function p(){for(var n=k.charCodeAt(y++),l=a,_=f,E=y,P=de.discardStrings?null:"",se;se=k.charCodeAt(y++),n!==se;)if((y>be||Qe(se))&&(P+=k.slice(E,y-1),ee(null,J.unfinishedString,k.slice(i,y-1))),se===92){if(!de.discardStrings){var he=k.slice(E,y-1);P+=de.fixup(he)}var we=ne();de.discardStrings||(P+=we),E=y}return de.discardStrings||(P+=de.encodeByte(null),P+=de.fixup(k.slice(E,y-1))),{type:Pe,value:P,line:l,lineStart:_,lastLine:a,lastLineStart:f,range:[i,y]}}function S(){var n=a,l=f,_=le(!1);return _===!1&&ee(O,J.expected,"[",D(O)),{type:Pe,value:de.discardStrings?null:de.fixup(_),line:n,lineStart:l,lastLine:a,lastLineStart:f,range:[i,y]}}function t(){var n=k.charAt(y),l=k.charAt(y+1),_=n==="0"&&"xX".indexOf(l||null)>=0?s():C(),E=o(),P=r();return P&&(E||_.hasFractionPart)&&ee(null,J.malformedNumber,k.slice(i,y)),{type:We,value:_.value,line:a,lineStart:f,range:[i,y]}}function o(){if(ue.imaginaryNumbers)return"iI".indexOf(k.charAt(y)||null)>=0?(++y,!0):!1}function r(){if(ue.integerSuffixes){if("uU".indexOf(k.charAt(y)||null)>=0)if(++y,"lL".indexOf(k.charAt(y)||null)>=0){if(++y,"lL".indexOf(k.charAt(y)||null)>=0)return++y,"ULL";ee(null,J.malformedNumber,k.slice(i,y))}else ee(null,J.malformedNumber,k.slice(i,y));else if("lL".indexOf(k.charAt(y)||null)>=0){if(++y,"lL".indexOf(k.charAt(y)||null)>=0)return++y,"LL";ee(null,J.malformedNumber,k.slice(i,y))}}}function s(){var n=0,l=1,_=1,E,P,se,he;for(he=y+=2,qe(k.charCodeAt(y))||ee(null,J.malformedNumber,k.slice(i,y));qe(k.charCodeAt(y));)++y;E=parseInt(k.slice(he,y),16);var we=!1;if(k.charAt(y)==="."){for(we=!0,P=++y;qe(k.charCodeAt(y));)++y;n=k.slice(P,y),n=P===y?0:parseInt(n,16)/Math.pow(16,y-P)}var ht=!1;if("pP".indexOf(k.charAt(y)||null)>=0){for(ht=!0,++y,"+-".indexOf(k.charAt(y)||null)>=0&&(_=k.charAt(y++)==="+"?1:-1),se=y,Ie(k.charCodeAt(y))||ee(null,J.malformedNumber,k.slice(i,y));Ie(k.charCodeAt(y));)++y;l=k.slice(se,y),l=Math.pow(2,l*_)}return{value:(E+n)*l,hasFractionPart:we||ht}}function C(){for(;Ie(k.charCodeAt(y));)++y;var n=!1;if(k.charAt(y)===".")for(n=!0,++y;Ie(k.charCodeAt(y));)++y;var l=!1;if("eE".indexOf(k.charAt(y)||null)>=0)for(l=!0,++y,"+-".indexOf(k.charAt(y)||null)>=0&&++y,Ie(k.charCodeAt(y))||ee(null,J.malformedNumber,k.slice(i,y));Ie(k.charCodeAt(y));)++y;return{value:parseFloat(k.slice(i,y)),hasFractionPart:n||l}}function X(){var n=y++;for(k.charAt(y++)!=="{"&&ee(null,J.braceExpected,"{","\\"+k.slice(n,y)),qe(k.charCodeAt(y))||ee(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,y));k.charCodeAt(y)===48;)++y;for(var l=y;qe(k.charCodeAt(y));)++y,y-l>6&&ee(null,J.tooLargeCodepoint,"\\"+k.slice(n,y));var _=k.charAt(y++);_!=="}"&&(_==='"'||_==="'"?ee(null,J.braceExpected,"}","\\"+k.slice(n,y--)):ee(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,y)));var E=parseInt(k.slice(l,y-1)||"0",16),P="\\"+k.slice(n,y);return E>1114111&&ee(null,J.tooLargeCodepoint,P),de.encodeUTF8(E,P)}function ne(){var n=y;switch(k.charAt(y)){case"a":return++y,"\x07";case"n":return++y,`
`;case"r":return++y,"\r";case"t":return++y,"	";case"v":return++y,"\v";case"b":return++y,"\b";case"f":return++y,"\f";case"\r":case`
`:return T(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Ie(k.charCodeAt(y))&&y-n<3;)++y;var l=k.slice(n,y),_=parseInt(l,10);return _>255&&ee(null,J.decimalEscapeTooLarge,"\\"+_),de.encodeByte(_,"\\"+l);case"z":if(ue.skipWhitespaceEscape)return++y,e(),"";break;case"x":if(ue.hexEscapes){if(qe(k.charCodeAt(y+1))&&qe(k.charCodeAt(y+2)))return y+=3,de.encodeByte(parseInt(k.slice(n+1,y),16),"\\"+k.slice(n,y));ee(null,J.hexadecimalDigitExpected,"\\"+k.slice(n,y+2))}break;case"u":if(ue.unicodeEscapes)return X();break;case"\\":case'"':case"'":return k.charAt(y++)}return ue.strictEscapes&&ee(null,J.invalidEscape,"\\"+k.slice(n,y+1)),k.charAt(y++)}function Ee(){i=y,y+=2;var n=k.charAt(y),l="",_=!1,E=y,P=f,se=a;if(n==="["&&(l=le(!0),l===!1?l=n:_=!0),!_){for(;y<be&&!Qe(k.charCodeAt(y));)++y;N.comments&&(l=k.slice(E,y))}if(N.comments){var he=oe.comment(l,k.slice(i,y));N.locations&&(he.loc={start:{line:se,column:i-P},end:{line:a,column:y-f}}),N.ranges&&(he.range=[i,y]),N.onCreateNode&&N.onCreateNode(he),U.push(he)}}function le(n){var l=0,_="",E=!1,P,se,he=a;for(++y;k.charAt(y+l)==="=";)++l;if(k.charAt(y+l)!=="[")return!1;for(y+=l+1,Qe(k.charCodeAt(y))&&T(),se=y;y<be;){for(;Qe(k.charCodeAt(y));)T();if(P=k.charAt(y++),P==="]"){E=!0;for(var we=0;we<l;++we)k.charAt(y+we)!=="="&&(E=!1);k.charAt(y+l)!=="]"&&(E=!1)}if(E)return _+=k.slice(se,y-1),y+=l+1,_}ee(null,n?J.unfinishedLongComment:J.unfinishedLongString,he,"<eof>")}function z(){pe=O,O=ve,ve=g()}function x(n){return n===O.value?(z(),!0):!1}function W(n){n===O.value?z():ee(O,J.expected,n,D(O))}function ut(n){return n===9||n===32||n===11||n===12}function Qe(n){return n===10||n===13}function Ie(n){return n>=48&&n<=57}function qe(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function dt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||ue.extendedIdentifiers&&n>=128)}function u(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||ue.extendedIdentifiers&&n>=128)}function H(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:ue.labels&&!ue.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function bt(n){return De===n.type?"#-~".indexOf(n.value)>=0:$e===n.type?n.value==="not":!1}function Lt(n){if(Q===n.type)return!0;if($e!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Ye,ot,st;function Me(){var n=Ye[ot++].slice();Ye.push(n),N.onCreateScope&&N.onCreateScope()}function L(){Ye.pop(),--ot,N.onDestroyScope&&N.onDestroyScope()}function w(n){N.onLocalDeclaration&&N.onLocalDeclaration(n),tt(Ye[ot],n)===-1&&Ye[ot].push(n)}function v(n){w(n.name),b(n,!0)}function b(n,l){!l&&rt(st,"name",n.name)===-1&&st.push(n),n.isLocal=l}function B(n){return tt(Ye[ot],n)!==-1}var I=[],V;function M(){return new K(O)}function K(n){N.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),N.ranges&&(this.range=[n.range[0],0])}K.prototype.complete=function(){N.locations&&(this.loc.end.line=pe.lastLine||pe.line,this.loc.end.column=pe.range[1]-(pe.lastLineStart||pe.lineStart)),N.ranges&&(this.range[1]=pe.range[1])},K.prototype.bless=function(n){if(this.loc){var l=this.loc;n.loc={start:{line:l.start.line,column:l.start.column},end:{line:l.end.line,column:l.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ae(){V&&I.push(M())}function te(n){V&&I.push(n)}function ge(){this.scopes=[],this.pendingGotos=[]}ge.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},ge.prototype.pushScope=function(n){var l={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(l)},ge.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var l=this.pendingGotos[n];l.maxDepth>=this.scopes.length&&--l.maxDepth<=0&&ee(l.token,J.labelNotVisible,l.target)}this.scopes.pop()},ge.prototype.addGoto=function(n,l){for(var _=[],E=0;E<this.scopes.length;++E){var P=this.scopes[E];if(_.push(P.locals.length),Object.prototype.hasOwnProperty.call(P.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:l,localCounts:_})},ge.prototype.addLabel=function(n,l){var _=this.currentScope();if(Object.prototype.hasOwnProperty.call(_.labels,n))ee(l,J.labelAlreadyDefined,n,_.labels[n].line);else{for(var E=[],P=0;P<this.pendingGotos.length;++P){var se=this.pendingGotos[P];if(se.maxDepth>=this.scopes.length&&se.target===n){se.localCounts[this.scopes.length-1]<_.locals.length&&_.deferredGotos.push(se);continue}E.push(se)}this.pendingGotos=E}_.labels[n]={localCount:_.locals.length,line:l.line}},ge.prototype.addLocal=function(n,l){this.currentScope().locals.push({name:n,token:l})},ge.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},ge.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),l=n.deferredGotos,_=0;_<l.length;++_){var E=l[_];ee(E.token,J.gotoJumpInLocalScope,E.target,n.locals[E.localCounts[this.scopes.length-1]].name)}};function Ge(){this.level=0,this.loopLevels=[]}Ge.prototype.isInLoop=function(){return!!this.loopLevels.length},Ge.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},Ge.prototype.popScope=function(){var n=this.loopLevels,l=n.length;l&&n[l-1]===this.level&&n.pop(),--this.level},Ge.prototype.addGoto=Ge.prototype.addLabel=function(){throw new Error("This should never happen")},Ge.prototype.addLocal=Ge.prototype.raiseDeferredErrors=function(){};function me(){return ue.labels?new ge:new Ge}function Ne(){z(),ae(),N.scope&&Me();var n=me();n.allowVararg=!0,n.pushScope();var l=Fe(n);return n.popScope(),N.scope&&L(),Q!==O.type&&Oe(O),V&&!l.length&&(pe=O),Y(oe.chunk(l))}function Fe(n){for(var l=[],_;!Lt(O);){if(O.value==="return"||!ue.relaxedBreak&&O.value==="break"){l.push(Be(n));break}_=Be(n),x(";"),_&&l.push(_)}return l}function Be(n){if(ae(),De===O.type&&x("::"))return Mt(n);if(ue.emptyStatement&&x(";")){V&&I.pop();return}if(n.raiseDeferredErrors(),$e===O.type)switch(O.value){case"local":return z(),Jt(n);case"if":return z(),jt(n);case"return":return z(),Kt(n);case"function":z();var l=Xt();return vt(l);case"while":return z(),qt(n);case"for":return z(),Ht(n);case"repeat":return z(),Wt(n);case"break":return z(),n.isInLoop()||ee(O,J.noLoopToBreak,O.value),xt();case"do":return z(),zt(n);case"goto":return z(),At(n)}return ue.contextualGoto&&O.type===Te&&O.value==="goto"&&ve.type===Te&&ve.value!=="goto"?(z(),At(n)):(V&&I.pop(),Zt(n))}function Mt(n){var l=O,_=Re();return N.scope&&(w("::"+l.value+"::"),b(_,!0)),W("::"),n.addLabel(l.value,l),Y(oe.labelStatement(_))}function xt(){return Y(oe.breakStatement())}function At(n){var l=O.value,_=pe,E=Re();return n.addGoto(l,_),Y(oe.gotoStatement(E))}function zt(n){N.scope&&Me(),n.pushScope();var l=Fe(n);return n.popScope(),N.scope&&L(),W("end"),Y(oe.doStatement(l))}function qt(n){var l=Ce(n);W("do"),N.scope&&Me(),n.pushScope(!0);var _=Fe(n);return n.popScope(),N.scope&&L(),W("end"),Y(oe.whileStatement(l,_))}function Wt(n){N.scope&&Me(),n.pushScope(!0);var l=Fe(n);W("until"),n.raiseDeferredErrors();var _=Ce(n);return n.popScope(),N.scope&&L(),Y(oe.repeatStatement(_,l))}function Kt(n){var l=[];if(O.value!=="end"){var _=gt(n);for(_!=null&&l.push(_);x(",");)_=Ce(n),l.push(_);x(";")}return Y(oe.returnStatement(l))}function jt(n){var l=[],_,E,P;for(V&&(P=I[I.length-1],I.push(P)),_=Ce(n),W("then"),N.scope&&Me(),n.pushScope(),E=Fe(n),n.popScope(),N.scope&&L(),l.push(Y(oe.ifClause(_,E))),V&&(P=M());x("elseif");)te(P),_=Ce(n),W("then"),N.scope&&Me(),n.pushScope(),E=Fe(n),n.popScope(),N.scope&&L(),l.push(Y(oe.elseifClause(_,E))),V&&(P=M());return x("else")&&(V&&(P=new K(pe),I.push(P)),N.scope&&Me(),n.pushScope(),E=Fe(n),n.popScope(),N.scope&&L(),l.push(Y(oe.elseClause(E)))),W("end"),Y(oe.ifStatement(l))}function Ht(n){var l=Re(),_;if(N.scope&&(Me(),v(l)),x("=")){var E=Ce(n);W(",");var P=Ce(n),se=x(",")?Ce(n):null;return W("do"),n.pushScope(!0),_=Fe(n),n.popScope(),W("end"),N.scope&&L(),Y(oe.forNumericStatement(l,E,P,se,_))}else{for(var he=[l];x(",");)l=Re(),N.scope&&v(l),he.push(l);W("in");var we=[];do{var ht=Ce(n);we.push(ht)}while(x(","));return W("do"),n.pushScope(!0),_=Fe(n),n.popScope(),W("end"),N.scope&&L(),Y(oe.forGenericStatement(he,we,_))}}function Jt(n){var l,_=pe;if(Te===O.type){var E=[],P=[];do l=Re(),E.push(l),n.addLocal(l.name,_);while(x(","));if(x("="))do{var se=Ce(n);P.push(se)}while(x(","));if(N.scope)for(var he=0,we=E.length;he<we;++he)v(E[he]);return Y(oe.localStatement(E,P))}if(x("function"))return l=Re(),n.addLocal(l.name,_),N.scope&&(v(l),Me()),vt(l,!0);Ve("<name>",O)}function Zt(n){var l,_,E,P,se,he=[];V&&(_=M());do{if(V&&(l=M()),Te===O.type)se=O.value,P=Re(),N.scope&&b(P,B(se)),E=!0;else if(O.value==="(")z(),P=Ce(n),W(")"),E=!1;else return Oe(O);e:for(;;){switch(Pe===O.type?'"':O.value){case".":case"[":E=!0;break;case":":case"(":case"{":case'"':E=null;break;default:break e}P=Nt(P,l,n)}if(he.push(P),O.value!==",")break;if(!E)return Oe(O);z()}while(!0);if(he.length===1&&E===null)return te(l),Y(oe.callStatement(he[0]));if(!E)return Oe(O);W("=");var we=[];do we.push(Ce(n));while(x(","));return te(_),Y(oe.assignmentStatement(he,we))}function Re(){ae();var n=O.value;return Te!==O.type&&Ve("<name>",O),z(),Y(oe.identifier(n))}function vt(n,l){var _=me();_.pushScope();var E=[];if(W("("),!x(")"))for(;;){if(Te===O.type){var P=Re();if(N.scope&&v(P),E.push(P),x(","))continue}else Je===O.type?(_.allowVararg=!0,E.push(wt(_))):Ve("<name> or '...'",O);W(")");break}var se=Fe(_);return _.popScope(),W("end"),N.scope&&L(),l=l||!1,Y(oe.functionStatement(n,E,l,se))}function Xt(){var n,l,_;for(V&&(_=M()),n=Re(),N.scope&&(b(n,B(n.name)),Me());x(".");)te(_),l=Re(),n=Y(oe.memberExpression(n,".",l));return x(":")&&(te(_),l=Re(),n=Y(oe.memberExpression(n,":",l)),N.scope&&w("self")),n}function It(n){for(var l=[],_,E;;){if(ae(),De===O.type&&x("["))_=Ce(n),W("]"),W("="),E=Ce(n),l.push(Y(oe.tableKey(_,E)));else if(Te===O.type)ve.value==="="?(_=Re(),z(),E=Ce(n),l.push(Y(oe.tableKeyString(_,E)))):(E=Ce(n),l.push(Y(oe.tableValue(E))));else{if((E=gt(n))==null){I.pop();break}l.push(Y(oe.tableValue(E)))}if(",;".indexOf(O.value)>=0){z();continue}break}return W("}"),Y(oe.tableConstructorExpression(l))}function gt(n){var l=Et(0,n);return l}function Ce(n){var l=gt(n);if(l==null)Ve("<expression>",O);else return l}function Qt(n){var l=n.charCodeAt(0),_=n.length;if(_===1)switch(l){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(_===2)switch(l){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(l===97&&n==="and")return 2;return 0}function Et(n,l){var _=O.value,E,P;if(V&&(P=M()),bt(O)){ae(),z();var se=Et(10,l);se==null&&Ve("<expression>",O),E=Y(oe.unaryExpression(_,se))}if(E==null&&(E=wt(l),E==null&&(E=Yt(l))),E==null)return null;for(var he;_=O.value,he=De===O.type||$e===O.type?Qt(_):0,!(he===0||he<=n);){(_==="^"||_==="..")&&--he,z();var we=Et(he,l);we==null&&Ve("<expression>",O),V&&I.push(P),E=Y(oe.binaryExpression(_,E,we))}return E}function Nt(n,l,_){var E,P;if(De===O.type)switch(O.value){case"[":return te(l),z(),E=Ce(_),W("]"),Y(oe.indexExpression(n,E));case".":return te(l),z(),P=Re(),Y(oe.memberExpression(n,".",P));case":":return te(l),z(),P=Re(),n=Y(oe.memberExpression(n,":",P)),te(l),Ct(n,_);case"(":case"{":return te(l),Ct(n,_)}else if(Pe===O.type)return te(l),Ct(n,_);return null}function Yt(n){var l,_,E;if(V&&(E=M()),Te===O.type)_=O.value,l=Re(),N.scope&&b(l,B(_));else if(x("("))l=Ce(n),W(")");else return null;for(;;){var P=Nt(l,E,n);if(P===null)break;l=P}return l}function Ct(n,l){if(De===O.type)switch(O.value){case"(":ue.emptyStatement||O.line!==pe.line&&ee(null,J.ambiguousSyntax,O.value),z();var _=[],E=gt(l);for(E!=null&&_.push(E);x(",");)E=Ce(l),_.push(E);return W(")"),Y(oe.callExpression(n,_));case"{":ae(),z();var P=It(l);return Y(oe.tableCallExpression(n,P))}else if(Pe===O.type)return Y(oe.stringCallExpression(n,wt(l)));Ve("function arguments",O)}function wt(n){var l=Pe|We|Le|Ke|Je,_=O.value,E=O.type,P;if(V&&(P=M()),E===Je&&!n.allowVararg&&ee(O,J.cannotUseVararg,O.value),E&l){te(P);var se=k.slice(O.range[0],O.range[1]);return z(),Y(oe.literal(E,_,se))}else{if($e===E&&_==="function")return te(P),z(),N.scope&&Me(),vt(null);if(x("{"))return te(P),It(n)}}fe.parse=en;var Ut={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function en(n,l){if(typeof l>"u"&&typeof n=="object"&&(l=n,n=void 0),l||(l={}),k=n||"",N=Xe({},ce,l),y=0,a=1,f=0,be=k.length,Ye=[[]],ot=0,st=[],I=[],!Object.prototype.hasOwnProperty.call(Ut,N.luaVersion))throw new Error(Ze("Lua version '%1' not supported",N.luaVersion));if(ue=Xe({},Ut[N.luaVersion]),N.extendedIdentifiers!==void 0&&(ue.extendedIdentifiers=!!N.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(lt,N.encodingMode))throw new Error(Ze("Encoding mode '%1' not supported",N.encodingMode));return de=lt[N.encodingMode],N.comments&&(U=[]),N.wait?fe:$t()}fe.write=Pt;function Pt(n){return k+=String(n),be=k.length,fe}fe.end=$t;function $t(n){typeof n<"u"&&Pt(n),k&&k.substr(0,2)==="#!"&&(k=k.replace(/^.*/,function(_){return _.replace(/./g," ")})),be=k.length,V=N.locations||N.ranges,ve=g();var l=Ne();if(N.comments&&(l.comments=U),N.scope&&(l.globals=st),I.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return l}})})(St,St.exports);var fn=St.exports;const at=tn(fn);var pt={},Gt={exports:{}};Gt.exports;(function(je){function $(U){for(var i=0,a=U.length;a--;)i+=U.charCodeAt(a),i+=i<<10,i^=i>>6;return i+=i<<3,i^=i>>11,i+=i<<15,i}const fe=console.log,k=function(U,i){if(!U)throw i};function N(U,i){if(!U)return 0;var a=U.toString().split(".");return a.length>1?parseInt(a[0],i)+parseInt(a[1],i)/Math.pow(i,a[1].length):parseInt(a[0],i)}let be=[" ",`
`,"	","\r"],ue={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const de=new Proxy(ue,{get(U,i){return N(i)}});let ce=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],xe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],He=["0","1","2","3","4","5","6","7","8","9"],it=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],lt=["0","1"],Q=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Pe=["~","=",">","<"],$e=["+","-","*","/","^","..","%","//"],Te=["+=","-=","*=","/=","^=","..=","%=","//="],We=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],De=["else","elseif","until","end"],Le=["-","not","#","~"],Ke=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],Je=11,J={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function oe(U){let i=0,a=U.length,f=[];function g(t){return t=t||0,i<=a?U.substr(i+t,1):""}function T(){if(i<=a){let t=U.substr(i,1);return i++,t}else return""}function e(t){let o=0,r=1,s=1;for(;o<=i;)U.substr(o,1)==`
`?(r++,s=1):s++;let C;for(C=0;C<f.length;C++){let X=f[C];fe(`${X.Type}<${X.Source}>`)}throw`file<${r}:${s}>: ${t}`}function h(t){for(;;){let o=T();if(o=="")e("Unfinished long string.");else if(o=="]"){let r=!0,s;for(s=1;s<=t;s++)if(g()=="=")i++;else{r=!1;break}if(r&&T()=="]")return}}}function m(){let t=i;for(;g()=="=";)i++;if(g()=="[")return i++,i-t-1;i=t}let d=0,p=0;function S(t){let o=U.substr(p,i-p),r=null;t=="Number"&&(o.substr(0,2).toLowerCase()=="0x"?(r="hex",parseInt(o,16)<999999999999&&(o=parseInt(o,16))):o.substr(0,2).toLowerCase()=="0b"&&(r="bin",parseInt(o.substr(2),2)<999999999999&&(o=parseInt(o.substr(2),2))));let s={Type:t,LeadingWhite:U.substr(d,p-d),Source:o};return r!==null&&(s.NType=r),f.push(s),d=i,p=i,s}for(;;){for(d=i;;){let o=g();if(o=="")break;if(o=="-")if(g(1)=="-")if(i+=2,g()=="["){i++;let r=m();if(r!=null)h(r),d=i;else for(;;){let s=T();if(s==""||s==`
`)break}}else for(;;){let r=T();if(r==""||r==`
`)break}else break;else if(be.includes(o))i++;else break}U.substr(d,i-d),p=i;let t=T();if(t==""){S("Eof");break}else if(t=="'"||t=='"'){for(;;){let o=T();if(o=="\\"){let r=T();if(de[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(o==t)break;if(o=="")throw"Unfinished string!"}}S("String")}else if(t=="`"){for(;;){let o=T();if(o=="\\"){let r=T();if(de[r]==null)throw`Invalid Escape Sequence \`${r}\`.`}else{if(o==t)break;if(o=="")throw"Unfinished string!"}}S("Hash")}else if(ce.includes(t)){for(;xe.includes(g());)i++;We.includes(U.substr(p,i-p))?S("Keyword"):S("Ident")}else if(He.includes(t)||t=="."&&He.includes(g())){if(t=="0"&&g().toLowerCase()=="x")for(i++;it.includes(g())||g()==="_";)i++;else if(t=="0"&&g().toLowerCase()=="b")for(i++;lt.includes(g())||g()==="_";)i++;else{for(;He.includes(g())||g()==="_";)i++;if(g()==".")for(i++;He.includes(g());)i++;if(g()=="e"||g()=="E")for(i++,(g()=="-"||g()=="+")&&i++;He.includes(g());)i++}S("Number")}else if(t=="["){let o=m();o!=null?(h(o),S("String")):S("Symbol")}else if(t==".")g()=="."&&(T(),(g()=="."||g()=="=")&&T()),S("Symbol");else if(t+g()=="//")T(),g()=="="&&T(),S("Symbol");else if(t+g()=="::")T(),S("Symbol");else if(Ke.includes(t+g()))T(),S("Symbol");else if(Pe.includes(t))g()=="="&&i++,S("Symbol");else if($e.includes(t)&&g()=="=")T(),S("Symbol");else if(Q.includes(t))S("Symbol");else throw`Bad symbol \`${t}\` in source. ${i}`}return f}function Y(U){let i=oe(U),a=0;function f(){let L=i[a];return a<i.length&&a++,L}function g(L){return L=a+(L||0),i[L]||i[i.length-1]}function T(L){let w=1,v=0,b=0;for(;;){let B=i[b],I;B==L?I=B.LeadingWhite:I=B.LeadingWhite+B.Source;let V;for(V=0;V<=I.length;V++)I.substr(V,1)==`
`?(w++,v=0):v++;if(B==L)break;b++}return`${w}:${v+1}`}function e(){let L=g();return`<${L.Type} \`${L.Source}\`> at: ${T(L)}`}function h(){let L=g();return L.Type=="Eof"||L.Type=="Keyword"&&De.includes(L.Source)}function m(){return Le.includes(g().Source)||!1}function d(){return Ke.includes(g().Source)||!1}function p(L,w){let v=g();if(v.Type==L&&(w==null||v.Source==w))return f();{let b;for(b=-3;b<=3;b++)fe(`Tokens[${b}] = \`${g(b).Source}\``);throw w?`${T(v)}: \`${w}\` expected.`:`${T(v)}: ${L} expected.`}}function S(L){let w=L.GetFirstToken,v=L.GetLastToken,b=L;return L.GetFirstToken=function(){let B=w(b);return k(B),B},L.GetLastToken=function(){let B=v(b);return k(B),B},L}let t,o;function r(L,w){let v=[o(L,w)],b=[];for(;g().Source==",";)b.push(f()),v.push(o(L,w));return[v,b]}function s(L,w){var b,B,I,V;let v=g();if(v.Source=="("){let M=f(),K=o(L,w),ae=p("Symbol",")"),te;return te=S({Type:"ParenExpr",Expression:K,Token_OpenParen:M,Token_CloseParen:ae,GetFirstToken:()=>te.Token_OpenParen,GetLastToken:()=>te.Token_CloseParen}),te}else if(v.Type=="Ident"){let M;return M=S({Type:"VariableExpr",Token:f(),GetFirstToken:()=>M.Token,GetLastToken:()=>M.Token}),L[M.Token.Source]!=null&&((B=(b=L[M.Token.Source])==null?void 0:b.Tokens)==null?void 0:B.push)!=null?(L[M.Token.Source].Tokens.push(M.Token),L[M.Token.Source].UseCountIncrease()):w[M.Token.Source]!=null&&((V=(I=w[M.Token.Source])==null?void 0:I.Tokens)==null?void 0:V.push)!=null&&(w[M.Token.Source].Tokens.push(M.Token),w[M.Token.Source].UseCountIncrease()),M}else throw fe(e()),`${T(v)}: Unexpected symbol. ${v.Type} ${v.Source}`}function C(L,w){let v=p("Symbol","{"),b=[],B=[];for(;g().Source!="}";){if(g().Source=="["){let M=f(),K=o(L,w),ae=p("Symbol","]"),te=p("Symbol","="),ge=o(L,w);K.Token&&K.Token.Source,b.push({EntryType:"Index",Index:K,Value:ge,Token_OpenBracket:M,Token_CloseBracket:ae,Token_Equals:te})}else if(g().Type=="Ident"&&g(1).Source=="="){let M=f(),K=f(),ae=o(L,w);b.push({EntryType:"Field",Field:M,Value:ae,Token_Equals:K})}else{let M=o(L,w);b.push({EntryType:"Value",Value:M})}if(g().Source==","||g().Source==";")B.push(f());else break}let I=p("Symbol","}"),V;return V=S({Type:"TableLiteral",EntryList:b,Token_SeperatorList:B,Token_OpenBrace:v,Token_CloseBrace:I,GetFirstToken:()=>V.Token_OpenBrace,GetLastToken:()=>V.Token_CloseBrace}),V}function X(L,w){let v=[],b=[];if(g().Type=="Ident"){let B=f();if(w&&g().Source=="<"&&g(2).Source==">"){let I=g(1).Source;B.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${I}>`},f(),f(),f()}v.push(B)}else if(g().Source=="..."&&L)return[v,b,f()];for(;g().Source==",";){if(b.push(f()),g().Source=="..."&&L)return[v,b,f()];{let B=p("Ident");if(w&&g().Source=="<"&&g(2).Source==">"){let I=g(1).Source;B.Attribute={LeadingWhite:g().LeadingWhite,Source:`<${I}>`},f(),f(),f()}v.push(B)}}return[v,b]}function ne(L,w,v){let b=t(w,v),B=g();if(B.Type=="Keyword"&&B.Source==L)return f(),[b,B];throw fe(B.Type,B.Source),`${T(B)}: ${L} expected.`}function Ee(L,w,v,b){let B=f(),I,V;if(!L){I=[],V=[];let Fe=p("Ident");for(I.push(Fe);g().Source==".";)V.push(f()),I.push(p("Ident"));g().Source==":"&&(V.push(f()),I.push(p("Ident")))}let M=p("Symbol","("),[K,ae,te]=X(!0),ge=p("Symbol",")"),[Ge,me]=ne("end",w,v),Ne;return Ne=S({Type:L==!0?"FunctionLiteral":"FunctionStat",NameChain:I,ArgList:K,Body:Ge,Token_Function:B,Token_NameChainSeperator:V,Token_OpenParen:M,Token_Varg:te,Token_ArgCommaList:ae,Token_CloseParen:ge,Token_End:me,GetFirstToken:()=>Ne.Token_Function,GetLastToken:()=>Ne.Token_End}),Ne}function le(L,w){let v=g();if(v.Source=="("){let b=f(),B=[],I=[];for(;g().Source!=")"&&(B.push(o(L,w)),g().Source==",");)I.push(f());let V=p("Symbol",")"),M;return M=S({CallType:"ArgCall",ArgList:B,Token_CommaList:I,Token_OpenParen:b,Token_CloseParen:V,GetFirstToken:()=>M.Token_OpenParen,GetLastToken:()=>M.Token_CloseParen}),M}else if(v.Source=="{"){let b;return b=S({CallType:"TableCall",TableExpr:o(L,w),GetFirstToken:()=>b.TableExpr.GetFirstToken(),GetLastToken:()=>b.TableExpr.GetLastToken()}),b}else if(v.Type=="String"){let b;return b=S({CallType:"StringCall",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else throw"Function arguments expected."}function z(L,w){let v=s(L,w);for(k(v,"nil prefixexpr");;){let b=g();if(b.Source=="."){let B=f(),I=p("Ident"),V;V=S({Type:"FieldExpr",Base:v,Field:I,Token_Dot:B,GetFirstToken:()=>V.Base.GetFirstToken(),GetLastToken:()=>V.Field}),v=V}else if(b.Source==":"){let B=f(),I=p("Ident"),V=le(L,w),M;M=S({Type:"MethodExpr",Base:v,Method:I,FunctionArguments:V,Token_Colon:B,GetFirstToken:()=>M.Base.GetFirstToken(),GetLastToken:()=>M.FunctionArguments.GetLastToken()}),v=M}else if(b.Source=="["){let B=f(),I=o(L,w),V=p("Symbol","]"),M;M=S({Type:"IndexExpr",Base:v,Index:I,Token_OpenBracket:B,Token_CloseBracket:V,GetFirstToken:()=>M.Base.GetFirstToken(),GetLastToken:()=>M.Token_CloseBracket}),v=M}else if(b.Source=="{"||b.Source=="("||b.Type=="String"){let B;B=S({Type:"CallExpr",Base:v,FunctionArguments:le(L,w),GetFirstToken:()=>B.Base.GetFirstToken(),GetLastToken:()=>B.FunctionArguments.GetLastToken()}),v=B}else if(Te.includes(b.Source)){let B=f(),I=o(L,w),V;V=S({Type:"CompoundStat",Base:v,Token_Compound:B,Rhs:I,Lhs:v,GetFirstToken:()=>V.Base.GetFirstToken(),GetLastToken:()=>V.Rhs.GetLastToken()}),v=V}else return v}}function x(L,w){let v=g();if(v.Type=="Number"){let b;return b=S({Type:"NumberLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(v.Type=="String"){let b;return b=S({Type:"StringLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(v.Type=="Hash"){let b;return b=S({Type:"HashLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(v.Source=="nil"){let b;return b=S({Type:"NilLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(v.Source=="true"||v.Source=="false"){let b;return b=S({Type:"BooleanLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else if(v.Source=="..."){let b;return b=S({Type:"VargLiteral",Token:f(),GetFirstToken:()=>b.Token,GetLastToken:()=>b.Token}),b}else return v.Source=="{"?C(L,w):v.Source=="function"?Ee(!0,L,w):z(L,w)}function W(L,w,v){let b;if(m()){let B=f(),I=W(Je,w,v),V;V=S({Type:"UnopExpr",Token_Op:B,Rhs:I,GetFirstToken:()=>V.Token_Op,GetLastToken:()=>V.Rhs.GetLastToken()}),b=V}else b=x(w,v),k(b,"nil sipleexpr");for(;d()&&J[g().Source]!=null&&J[g().Source][0]>L;){let B=f(),I=W(J[B.Source][1],w,v);k(I,"RhsNeeded");let V;V=S({Type:"BinopExpr",Lhs:b,Rhs:I,Token_Op:B,GetFirstToken:()=>V.Lhs.GetFirstToken(),GetLastToken:()=>V.Rhs.GetLastToken()}),b=V}return b}o=(L,w)=>W(0,L,w);function ut(L,w){let v=z(L,w);if(v.Type=="MethodExpr"||v.Type=="CallExpr"){let b;return b=S({Type:"CallExprStat",Expression:v,GetFirstToken:()=>b.Expression.GetFirstToken(),GetLastToken:()=>b.Expression.GetLastToken()}),b}else{if(v.Type=="CompoundStat")return v;{let b=[v],B=[];for(;g().Source==",";){B.push(f());let ae=z(L,w);if(ae.Type=="MethodExpr"||ae.Type=="CallExpr")throw"Bad left hand side of asignment";b.push(ae)}let I=p("Symbol","="),V=[o(L,w)],M=[];for(;g().Source==",";)M.push(f()),V.push(o(L,w));let K;return K=S({Type:"AssignmentStat",Rhs:V,Lhs:b,Token_Equals:I,Token_LhsSeperatorList:B,Token_RhsSeperatorList:M,GetFirstToken:()=>K.Lhs[0].GetFirstToken(),GetLastToken:()=>K.Rhs[K.Rhs.length-1].GetLastToken()}),K}}}function Qe(L,w){let v=f(),b=o(L,w),B=p("Keyword","then"),I=t(L,w),V=[];for(;g().Source=="elseif"||g().Source=="else";){let ae=f(),te,ge;ae.Source=="elseif"&&(te=o(L,w),ge=p("Keyword","then"));let Ge=t(L,w);if(V.push({Condition:te,Body:Ge,ClauseType:ae.Source,Token:ae,Token_Then:ge}),ae.Source=="else")break}let M=p("Keyword","end"),K;return K=S({Type:"IfStat",Condition:b,Body:I,ElseClauseList:V,Token_If:v,Token_Then:B,Token_End:M,GetFirstToken:()=>K.Token_If,GetLastToken:()=>K.Token_End}),K}function Ie(L,w){let v=f(),[b,B]=ne("end",L,w),I;return I=S({Type:"DoStat",Body:b,Token_Do:v,Token_End:B,GetFirstToken:()=>I.Token_Do,GetLastToken:()=>I.Token_End}),I}function qe(L,w){let v=f(),b=o(L,w),B=p("Keyword","do"),[I,V]=ne("end",L,w),M;return M=S({Type:"WhileStat",Condition:b,Body:I,Token_While:v,Token_Do:B,Token_End:V,GetFirstToken:()=>M.Token_While,GetLastToken:()=>M.Token_End}),M}function dt(L,w){let v=f(),[b,B]=X();if(g().Source=="="){let I=f(),[V,M]=r(L,w);if(V.length<2||V.length>3)throw"Expected 2 or 3 values for range bounds";let K=p("Keyword","do"),[ae,te]=ne("end",L,w),ge;return ge=S({Type:"NumericForStat",VarList:b,RangeList:V,Body:ae,Token_For:v,Token_VarCommaList:B,Token_Equals:I,Token_RangeCommaList:M,Token_Do:K,Token_End:te,GetFirstToken:()=>ge.Token_For,GetLastToken:()=>ge.Token_End}),ge}else if(g().Source=="in"){let I=f(),[V,M]=r(L,w),K=p("Keyword","do"),[ae,te]=ne("end",L,w),ge;return ge=S({Type:"GenericForStat",VarList:b,GeneratorList:V,Body:ae,Token_For:v,Token_VarCommaList:B,Token_In:I,Token_GeneratorCommaList:M,Token_Do:K,Token_End:te,GetFirstToken:()=>ge.Token_For,GetLastToken:()=>ge.Token_End}),ge}}function u(L,w){let v=f(),[b,B]=ne("until",L),I=o(L,w),V;return V=S({Type:"RepeatStat",Body:b,Condition:I,Token_Repeat:v,Token_Until:B,GetFirstToken:()=>V.Token_Repeat,GetLastToken:()=>V.Condition.GetLastToken()}),V}function H(L,w){let v=f();if(g().Source=="function"){let b=Ee(!1,L,w);if(b.NameChain.length>1)throw T(b.Token_NameChainSeperator[0])+": `(` expected.";let B;return B=S({Type:"LocalFunctionStat",FunctionStat:b,Token_Local:v,GetFirstToken:()=>B.Token_Local,GetLastToken:()=>B.FunctionStat.GetLastToken()}),B}else if(g().Type=="Ident"){let[b,B]=X(!1,!0),I=[],V=[],M;if(g().Source=="="){M=f();let[ae,te]=r(L,w);I=ae,V=te}let K;return K=S({Type:"LocalVarStat",VarList:b,ExprList:I,Token_Local:v,Token_Equals:M,Token_VarCommaList:B,Token_ExprCommaList:V,GetFirstToken:()=>K.Token_Local,GetLastToken:function(){return K.ExprList.length>0?K.ExprList[K.ExprList.length-1].GetLastToken():K.VarList[K.VarList.length-1]}}),K}else throw"`function` or ident expected"}function bt(L,w){let v=f(),b,B;h()||g().Source==";"?(b=[],B=[]):[b,B]=r(L,w);let I;return I={Type:"ReturnStat",ExprList:b,Token_Return:v,Token_CommaList:B,GetFirstToken:()=>I.Token_Return,GetLastToken:function(){return I.ExprList.length>0?I.ExprList[I.ExprList.length-1].GetLastToken():I.Token_Return}},I}function Lt(L,w){let v=f(),b;return b={Type:"BreakStat",Token_Break:v,GetFirstToken:()=>b.Token_Break,GetLastToken:()=>b.Token_Break},b}function Ye(L,w){let v=f(),b;return b={Type:"ContinueStat",Token_Continue:v,GetFirstToken:()=>b.Token_Continue,GetLastToken:()=>b.Token_Continue},b}function ot(){let L=f(),w;g().Type=="Keyword"?w=p("Keyword"):w=p("Ident");let v;return v={Type:"GotoStat",Token_Goto:L,Token_Label:w,GetFirstToken:()=>v.Token_Goto,GetLastToken:()=>v.Token_Label},v}function st(){let L=f(),w;g().Type=="Keyword"?w=p("Keyword"):w=p("Ident");let v=p("Symbol","::"),b;return b={Type:"LabelStat",Token_ColonsLeft:L,Token_Label:w,Token_ColonsRight:v,GetFirstToken:()=>b.Token_ColonsLeft,GetLastToken:()=>b.Token_ColonsRight},b}function Me(L,w){let v=g();return v.Source=="if"?[!1,Qe(L,w)]:v.Source=="while"?[!1,qe(L,w)]:v.Source=="do"?[!1,Ie(L,w)]:v.Source=="for"?[!1,dt(L,w)]:v.Source=="repeat"?[!1,u(L,w)]:v.Source=="function"?[!1,Ee(!1,L,w)]:v.Source=="local"?[!1,H(L,w)]:v.Source=="return"?[!0,bt(L,w)]:v.Source=="break"?[!0,Lt()]:v.Source=="continue"?[!0,Ye()]:v.Source=="goto"?[!1,ot()]:v.Source=="::"?[!1,st()]:[!1,ut(L,w)]}return t=function(L,w){let v=[],b=[],B={},I={};if(w!=null)for(let[ae,te]of Object.entries(w))I[ae]=te;if(L!=null)for(let[ae,te]of Object.entries(L))I[ae]=te;let V,M=0;for(;!h();){V&&V==g()&&fe(`INFINITE LOOP POSSIBLE ON STATEMENT ${V.Source} :`,V),V=g();let[ae,te]=Me(B,I);if(te)switch(v.push(te),te.Type){case"LocalVarStat":te.VarList.forEach(me=>{me.UseCount=0,me.Number=M++,B[me.Source]=me;let Ne=[];function Fe(){me.UseCount++,Ne.forEach(Be=>{Be.UseCount=me.UseCount})}me.Tokens={},me.Tokens.push=Be=>{Be.UseCountIncrease=Fe,Be.UseCount=me.UseCount,Be.Tokens=me.Tokens,Ne.push(Be)},me.Tokens.get=()=>Ne,me.UseCountIncrease=Fe});break;case"LocalFunctionStat":let Ge=te.FunctionStat.NameChain;if(Ge.length===1){let Fe=function(){me.UseCount++,Ne.forEach(Be=>{Be.UseCount=me.UseCount})},me=Ge[0];me.UseCount=0,me.Number=M++,B[me.Source]=me;let Ne=[];me.Tokens={},me.Tokens.push=Be=>{Be.UseCountIncrease=Fe,Be.UseCount=me.UseCount,Be.Tokens=me.Tokens,Ne.push(Be)},me.Tokens.get=()=>Ne,me.UseCountIncrease=Fe}break}let ge=g();ge.Type=="Symbol"&&ge.Source==";"&&(b[v.length-1]=f())}let K;return K={Type:"StatList",StatementList:v,SemicolonList:b,GetFirstToken:function(){var ae;if(K.StatementList.length!=0)return(ae=K.StatementList[0])==null?void 0:ae.GetFirstToken()},GetLastToken:function(){if(K.StatementList.length!=0)return K.SemicolonList[K.StatementList.length-1]?K.SemicolonList[K.StatementList.length-1]:K.StatementList[K.StatementList.length-1].GetLastToken()}},K},t([],[])}function ze(U,i){let a={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},f={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[g,T]of Object.entries(i))if(!f[g]&&!a[g])throw`Invalid visitor target: \`${g}\``;function e(p){if(p!=null){let S=i[p.Type];if(typeof S=="function")return S(p);if(S&&S.Pre)return S.Pre(p)}}function h(p){let S=i[p.Type];if(S&&typeof S=="object"&&S.Post)return S.Post(p)}let m,d;m=function(p){if(!e(p)){if(p.Type=="BinopExpr")m(p.Lhs),m(p.Rhs);else if(p.Type=="UnopExpr")m(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")m(p.Base);else if(p.Type=="IndexExpr")m(p.Base),m(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")m(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((S,t)=>{m(S)}):p.FunctionArguments.CallType=="TableCall"&&m(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")d(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")m(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((S,t)=>{if(S.EntryType=="Field")m(S.Value);else if(S.EntryType=="Index")m(S.Index),m(S.Value);else if(S.EntryType=="Value")m(S.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")m(p.Lhs),m(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}h(p)}},d=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((S,t)=>{if(S!=null){if(S===null||S.Type===null)return;S.Remove=()=>{p.StatementList[t]=null},d(S)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((S,t)=>{m(S)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((S,t)=>{m(S)});else if(p.Type=="LocalFunctionStat")d(p.FunctionStat.Body);else if(p.Type=="FunctionStat")d(p.Body);else if(p.Type=="RepeatStat")d(p.Body),m(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((S,t)=>{m(S)}),d(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((S,t)=>{m(S)}),d(p.Body);else if(p.Type=="WhileStat")m(p.Condition),d(p.Body);else if(p.Type=="DoStat")d(p.Body);else if(p.Type=="IfStat")m(p.Condition),d(p.Body),p.ElseClauseList.forEach(S=>{S.Condition!=null&&m(S.Condition),d(S.Body)});else if(p.Type=="CallExprStat")m(p.Expression);else if(p.Type=="CompoundStat")m(p.Lhs),m(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(S=>{m(S)}),p.Rhs.forEach(S=>{m(S)});else throw"unreachable"}}}h(p)}},f[U.Type]?d(U):m(U)}function tt(U){let i=[],a,f=0;function g(){return f++,f}function T(){a={ParentScope:a,ChildScopeList:[],VariableList:[],BeginLocation:g(),Depth:null,GetVar:null},a.ParentScope?(a.Depth=a.ParentScope.Depth+1,a.ParentScope.ChildScopeList.push(a)):a.Depth=1;let o=a;a.GetVar=function(r){for(const s of o.VariableList)if(s.Name==r)return s;if(o.ParentScope)return o.ParentScope.GetVar(r);for(const s of i)if(s.Name==r)return s}}function e(){let o=a;return o.EndLocation=g(),o.VariableList.forEach(r=>{r.ScopeEndLocation=o.EndLocation}),a=o.ParentScope,o}T();function h(o,r,s){k(s,"MIssing localInfo"),k(o,"Missing local var name");let C={Type:"Local",Name:o,RenameList:[r],AssignedTo:!1,Info:s,Scope:a,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[g()]};return C.Rename=function(X){C.Name=X,C.RenameList.forEach(ne=>{ne(X)})},a.VariableList.push(C),C}function m(o){for(const s of i)if(s.Name==o)return s;let r={Type:"Global",Name:o,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:g(),EndLocation:g(),ReferenceLocationList:[]};return r.Rename=function(s){r.Name=s,r.RenameList.forEach(C=>{C(s)})},i.push(r),r}function d(o,r){k(o,"Missing var name");let s=m(o);return s.RenameList.push(r),s}function p(o,r){let s;for(s=o.VariableList.length-1;s>=0;s--)if(o.VariableList[s].Name==r)return o.VariableList[s];if(o.ParentScope){let C=p(o.ParentScope,r);if(C)return C}}function S(o,r){k(o,"Missing var name");let s=p(a,o);s?s.RenameList.push(r):s=d(o,r);let C=g();return s.EndLocation=C,s.ReferenceLocationList.push(s.EndLocation),s}let t={};return t.FunctionLiteral={Pre:function(o){T(),o.ArgList.forEach((r,s)=>{let C=h(r.Source,function(X,ne){ne||(r.Source=X)},{Type:"Argument",Index:s});r.var=C})},Post:function(o){e()}},t.VariableExpr=function(o){o.Variable=S(o.Token.Source,function(r){o.Token.Source=r})},t.StatList={Pre:function(o){T()},Post:function(o){o.SkipPop||e()}},t.LocalVarStat={Post:function(o){o.VarList.forEach((r,s)=>{h(r.Source,function(C){o.VarList[s].Source=C},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(o){h(o.FunctionStat.NameChain[0].Source,function(r){o.FunctionStat.NameChain[0].Source=r},{Type:"LocalFunction"}),T(),o.FunctionStat.ArgList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"Argument",Index:s})})},Post:function(){e()}},t.FunctionStat={Pre:function(o){let r=o.NameChain,s;r.length==1?p(a,r[0].Source)?s=S(r[0].Source,function(C){r[0].Source=C}):s=d(r[0].Source,function(C){r[0].Source=C}):s=S(r[0].Source,function(C){r[0].Source=C}),s.AssignedTo=!0,T(),o.ArgList.forEach((C,X)=>{h(C.Source,function(ne){C.Source=ne},{Type:"Argument",Index:X})})},Post:function(){e()}},t.GenericForStat={Pre:function(o){return o.GeneratorList.forEach(r=>{ze(r,t)}),T(),o.VarList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"ForRange",Index:s})}),ze(o.Body,t),e(),!0}},t.NumericForStat={Pre:function(o){return o.RangeList.forEach(r=>{ze(r,t)}),T(),o.VarList.forEach((r,s)=>{h(r.Source,function(C){r.Source=C},{Type:"ForRange",Index:s})}),ze(o.Body,t),e(),!0}},t.RepeatStat={Pre:function(o){o.Body.SkipPop=!0},Post:function(o){e()}},t.AssignmentStat={Post:function(o){o.Lhs.forEach(r=>{r.Variable!=null&&(r.Variable.AssignedTo=!0)})}},ze(U,t),[i,e()]}function rt(U){let i,a,f="",g=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function T(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;f=`${f}${e.LeadingWhite}${e.Source}`}return a=function(e){if(e.Type=="BinopExpr")a(e.Lhs),T(e.Token_Op),a(e.Rhs);else if(e.Type=="UnopExpr")T(e.Token_Op),a(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")T(e.Token);else if(e.Type=="FieldExpr")a(e.Base),T(e.Token_Dot),T(e.Field);else if(e.Type=="IndexExpr")a(e.Base),T(e.Token_OpenBracket),a(e.Index),T(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")a(e.Base),e.Type=="MethodExpr"&&(T(e.Token_Colon),T(e.Method)),e.FunctionArguments.CallType=="StringCall"?T(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(T(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,m)=>{a(h);let d=e.FunctionArguments.Token_CommaList[m];d!=null&&T(d)}),T(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&a(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")T(e.Token_Function),T(e.Token_OpenParen),e.ArgList.forEach((h,m)=>{T(h);let d=e.Token_ArgCommaList[m];d!=null&&T(d)}),e.Token_Varg!=null&&T(e.Token_Varg),T(e.Token_CloseParen),i(e.Body),T(e.Token_End);else if(e.Type=="VariableExpr")T(e.Token);else if(e.Type=="ParenExpr")T(e.Token_OpenParen),a(e.Expression),T(e.Token_CloseParen);else if(e.Type=="TableLiteral")T(e.Token_OpenBrace),e.EntryList.forEach((h,m)=>{if(h.EntryType=="Field")T(h.Field),T(h.Token_Equals),a(h.Value);else if(h.EntryType=="Index")T(h.Token_OpenBracket),a(h.Index),T(h.Token_CloseBracket),T(h.Token_Equals),a(h.Value);else if(h.EntryType=="Value")a(h.Value);else throw"unreachable";let d=e.Token_SeperatorList[m];d!=null&&T(d)}),T(e.Token_CloseBrace);else if(e.Type=="CompoundStat")i(e);else throw`unreachable, type: ${e.Type}: ${e}`},i=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let h=g(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",f+=`${h}do `}e.Type=="StatList"?e.StatementList.forEach((h,m)=>{h===null||h.Type===null||(h.Remove=()=>{e.StatementList[m]=null},i(h),e.SemicolonList[m]&&T(e.SemicolonList[m]))}):e.Type=="BreakStat"?T(e.Token_Break):e.Type=="ContinueStat"?T(e.Token_Continue):e.Type=="GotoStat"?(T(e.Token_Goto),T(e.Token_Label)):e.Type=="LabelStat"?(T(e.Token_ColonsLeft),T(e.Token_Label),T(e.Token_ColonsRight)):e.Type=="ReturnStat"?(T(e.Token_Return),e.ExprList.forEach((h,m)=>{a(h),e.Token_CommaList[m]&&T(e.Token_CommaList[m])})):e.Type=="LocalVarStat"?(T(e.Token_Local),e.VarList.forEach((h,m)=>{T(h),h.Attribute!=null&&T(h.Attribute);let d=e.Token_VarCommaList[m];d!=null&&T(d)}),e.Token_Equals!=null&&(T(e.Token_Equals),e.ExprList.forEach((h,m)=>{a(h);let d=e.Token_ExprCommaList[m];d!=null&&T(d)}))):e.Type=="LocalFunctionStat"?(T(e.Token_Local),T(e.FunctionStat.Token_Function),T(e.FunctionStat.NameChain[0]),T(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,m)=>{T(h);let d=e.FunctionStat.Token_ArgCommaList[m];d!=null&&T(d)}),e.FunctionStat.Token_Varg&&T(e.FunctionStat.Token_Varg),T(e.FunctionStat.Token_CloseParen),i(e.FunctionStat.Body),T(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(T(e.Token_Function),e.NameChain.forEach((h,m)=>{T(h);let d=e.Token_NameChainSeperator[m];d!=null&&T(d)}),T(e.Token_OpenParen),e.ArgList.forEach((h,m)=>{T(h);let d=e.Token_ArgCommaList[m];d!=null&&T(d)}),e.Token_Varg&&T(e.Token_Varg),T(e.Token_CloseParen),i(e.Body),T(e.Token_End)):e.Type=="RepeatStat"?(T(e.Token_Repeat),i(e.Body),T(e.Token_Until),a(e.Condition)):e.Type=="GenericForStat"?(T(e.Token_For),e.VarList.forEach((h,m)=>{T(h);let d=e.Token_VarCommaList[m];d!=null&&T(d)}),T(e.Token_In),e.GeneratorList.forEach((h,m)=>{a(h);let d=e.Token_GeneratorCommaList[m];d!=null&&T(d)}),T(e.Token_Do),i(e.Body),T(e.Token_End)):e.Type=="NumericForStat"?(T(e.Token_For),e.VarList.forEach((h,m)=>{T(h);let d=e.Token_VarCommaList[m];d!=null&&T(d)}),T(e.Token_Equals),e.RangeList.forEach((h,m)=>{a(h);let d=e.Token_RangeCommaList[m];d!=null&&T(d)}),T(e.Token_Do),i(e.Body),T(e.Token_End)):e.Type=="WhileStat"?(T(e.Token_While),a(e.Condition),T(e.Token_Do),i(e.Body),T(e.Token_End)):e.Type=="DoStat"?(T(e.Token_Do),i(e.Body),T(e.Token_End)):e.Type=="IfStat"?(T(e.Token_If),a(e.Condition),T(e.Token_Then),i(e.Body),e.ElseClauseList.forEach(h=>{T(h.Token),h.Condition!=null&&(a(h.Condition),T(h.Token_Then)),i(h.Body)}),T(e.Token_End)):e.Type=="CallExprStat"?a(e.Expression):e.Type=="CompoundStat"?(a(e.Lhs),T(e.Token_Compound),a(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((h,m)=>{a(h);let d=e.Token_LhsSeperatorList[m];d!=null&&T(d)}),T(e.Token_Equals),e.Rhs.forEach((h,m)=>{a(h);let d=e.Token_RhsSeperatorList[m];d!=null&&T(d)})):k(!1,"unreachable"),e.WrapInDo&&(f+=" end ")}},i(U),f}function Ze(U){let i,a,f=0;function g(t){if(t===void 0)return;let o=`
${"	".repeat(f)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-o.length,o.length)!=o){let r="",s;for(s=t.LeadingWhite.length;s>=0;s--){let C=t.LeadingWhite.substr(s,1);if(!(C==""||C.match(/\s/g))){r=t.LeadingWhite.substr(0,s+1);break}}t.LeadingWhite=`${r}${o}`}}function T(){f++}function e(){f--,k(f>=0,"Undented too far")}function h(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function m(t){t.LeadingWhite=t.LeadingWhite.trim()}function d(t){m(t),be.includes(h(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){d(t.GetFirstToken())}function S(t,o,r){T(),i(o),e(),g(r)}a=function(t){if(t.Type=="BinopExpr")a(t.Lhs),a(t.Rhs),p(t.Rhs),d(t.Token_Op);else if(t.Type=="UnopExpr")m(t.Token_Op),a(t.Rhs),t.Token_Op.Source[0]&&d(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")m(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+$(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")a(t.Base);else if(t.Type=="IndexExpr")a(t.Base),a(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")a(t.Base),m(t.FunctionArguments.GetFirstToken()),m(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((o,r)=>{a(o),r>0&&p(o);let s=t.FunctionArguments.Token_CommaList[r];s!=null&&m(s)}):t.FunctionArguments.CallType=="TableCall"&&a(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((o,r)=>{r>0&&d(o),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg!=null&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")m(t.Token_OpenParen),m(t.Token_CloseParen),a(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){T();let o=100;t.EntryList.forEach((r,s)=>{r.EntryType=="Field"?(t.EntryList.length>o?Xe(r.Value):g(r.Field),d(r.Token_Equals),a(r.Value),p(r.Value)):r.EntryType=="Index"?(t.EntryList.length>o?m(r.Token_OpenBracket):g(r.Token_OpenBracket),a(r.Index),d(r.Token_Equals),a(r.Value),p(r.Value)):r.EntryType=="Value"?(a(r.Value),t.EntryList.length>o?Xe(r.Value):g(r.Value.GetFirstToken())):k(!1,"unreachable");let C=t.Token_SeperatorList[s];C!=null&&(t.EntryList.length>o?C.LeadingWhite="":m(C))}),e(),t.EntryList.length>o?t.Token_CloseBrace.LeadingWhite="":g(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")i(t);else throw fe(t),`unreachable, type: ${t.Type}:`+t},i=function(t){if(t.Type=="StatList")t.StatementList.forEach((o,r)=>{o===null||o.Type===null||o.Type==="StatList"&&o.StatementList.length===0||(o.Remove=()=>{o.StatementList[r]=null},i(o),g(o.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((o,r)=>{a(o),p(o),t.Token_CommaList[r]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((o,r)=>{d(o),o.Attribute&&(o.Attribute.LeadingWhite=" "),t.Token_VarCommaList[r]}),t.Token_Equals){m(t.Token_Equals),d(t.Token_Equals);let o=[],r=[];t.ExprList.forEach((s,C)=>{s!=null&&(C<t.VarList.length||s.Type=="CallExpr"||s.Type=="ParenExpr"||s.Type=="VargLiteral"||s.Type=="BinopExpr"||s.Type=="UnopExpr")&&(o.push(s),r.push(t.Token_ExprCommaList[C]))}),t.ExprList=o,t.CommaList=r,t.ExprList.forEach((s,C)=>{s!=null&&(a(s),p(s),t.Token_ExprCommaList[C]!=null&&t.ExprList.length-1==C&&(t.Token_ExprCommaList[C]=null))})}}else if(t.Type=="LocalFunctionStat")d(t.FunctionStat.Token_Function),d(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((o,r)=>{r>0?d(o):m(o);let s=t.FunctionStat.Token_ArgCommaList[r];s&&m(s)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(m(t.FunctionStat.Token_Varg),d(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&m(t.FunctionStat.Token_Varg),m(t.FunctionStat.Token_OpenParen),m(t.FunctionStat.Token_CloseParen),S(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((o,r)=>{r==0&&d(o),t.Token_NameChainSeperator[r]}),t.ArgList.forEach((o,r)=>{r>0&&d(o),t.Token_ArgCommaList[r]}),t.ArgList.length>0&&t.Token_Varg&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")S(t.Token_Repeat,t.Body,t.Token_Until),a(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((o,r)=>{d(o),t.Token_VarCommaList[r]}),d(t.Token_In),t.GeneratorList.forEach((o,r)=>{a(o),p(o),t.Token_GeneratorCommaList[r]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((o,r)=>{d(o),t.Token_VarCommaList[r]}),d(t.Token_Equals),t.RangeList.forEach((o,r)=>{a(o),p(o),t.Token_RangeCommaList[r]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")a(t.Condition),p(t.Condition),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){a(t.Condition),p(t.Condition),d(t.Token_Then);let o=t.Token_Then,r=t.Body;t.ElseClauseList.forEach(s=>{S(o,r,s.Token),o=s.Token,s.Condition!=null&&(a(s.Condition),p(s.Condition),d(s.Token_Then),o=s.Token_Then),r=s.Body}),S(o,r,t.Token_End)}else t.Type=="CallExprStat"?a(t.Expression):t.Type=="CompoundStat"?(a(t.Lhs),a(t.Rhs),p(t.Lhs),p(t.Rhs),d(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((o,r)=>{a(o),r>0&&p(o),t.Token_LhsSeperatorList[r]}),d(t.Token_Equals),t.Rhs.forEach((o,r)=>{a(o),p(o),t.Token_RhsSeperatorList[r]})):k(!1,"Unreachable")}}}},i(U)}function Xe(U){let i,a;function f(e){e&&(e.LeadingWhite="")}function g(e,h,m=!1){f(h);let d=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof h.Source=="string"?h.Source:h.Source.toString()).substr(0,1);d=="-"&&p=="-"||xe.includes(d)&&xe.includes(p)||m&&d==")"&&p=="("?h.LeadingWhite=m?";":" ":h.LeadingWhite=""}function T(e,h,m){i(h),f(m);let d=h.GetFirstToken(),p=h.GetLastToken();d!=null?(g(e,d),g(p,m)):g(e,m)}a=function(e){if(e.Type==="BinopExpr")a(e.Lhs),a(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(f(e.Token_Op),g(e.Lhs.GetLastToken(),e.Token_Op)),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")f(e.Token_Op),a(e.Rhs),g(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")f(e.Token);else if(e.Type=="FieldExpr")a(e.Base),f(e.Token_Dot),f(e.Field);else if(e.Type=="IndexExpr")a(e.Base),f(e.Token_OpenBracket),a(e.Index),f(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")a(e.Base),e.Type=="MethodExpr"&&(f(e.Token_Colon),f(e.Method)),e.FunctionArguments.CallType=="StringCall"?f(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(f(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((h,m)=>{a(h);let d=e.FunctionArguments.Token_CommaList[m];d!=null&&f(d)}),f(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&a(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")f(e.Token_Function),f(e.Token_OpenParen),e.ArgList.forEach((h,m)=>{f(h);let d=e.Token_ArgCommaList[m];d!=null&&f(d)}),e.Token_Varg!=null&&f(e.Token_Varg),f(e.Token_CloseParen),T(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")f(e.Token);else if(e.Type=="ParenExpr")f(e.Token_OpenParen),a(e.Expression),f(e.Token_CloseParen);else if(e.Type=="TableLiteral")f(e.Token_OpenBrace),e.EntryList.forEach((h,m)=>{h.EntryType=="Field"?(f(h.Field),f(h.Token_Equals),a(h.Value)):h.EntryType=="Index"?(f(h.Token_OpenBracket),a(h.Index),f(h.Token_CloseBracket),f(h.Token_Equals),a(h.Value)):h.EntryType=="Value"?a(h.Value):k(!1,"unreachable");let d=e.Token_SeperatorList[m];d!=null&&f(d)}),e.Token_SeperatorList[e.EntryList.length-1]=null,f(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},i=function(e){if(e.Type=="StatList"){let h;for(h=0;h<=e.StatementList.length;h++){let m=e.StatementList[h];if(m==null)continue;i(m),f(m.GetFirstToken());let d=e.StatementList[h-1];if(d!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[h-1]){let S=d.GetLastToken().Source,t=m.GetFirstToken().Source;(p[S]===null||p[S]===void 0||!p[S].includes(t))&&(e.SemicolonList[h-1]=null)}e.SemicolonList[h-1]||g(d.GetLastToken(),m.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&f(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")f(e.Token_Break);else if(e.Type=="ContinueStat")f(e.Token_Continue);else if(e.Type=="GotoStat")f(e.Token_Goto),g(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")f(e.Token_ColonsLeft),f(e.Token_Label),f(e.Token_ColonsRight);else if(e.Type=="ReturnStat")f(e.Token_Return),e.ExprList.forEach((h,m)=>{a(h),e.Token_CommaList[m]!=null&&f(e.Token_CommaList[m])}),e.ExprList.length>0&&g(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){f(e.Token_Local);let h=!1;e.VarList.forEach((m,d)=>{d==0?g(e.Token_Local,m):f(m),m.Attribute&&(f(m.Attribute),d+1==e.VarList.length&&(h=!0));let p=e.Token_VarCommaList[d];p!=null&&f(p)}),e.Token_Equals!=null&&(h||f(e.Token_Equals),e.ExprList.forEach((m,d)=>{a(m);let p=e.Token_ExprCommaList[d];p!=null&&f(p)}))}else if(e.Type=="LocalFunctionStat")f(e.Token_Local),g(e.Token_Local,e.FunctionStat.Token_Function),g(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),g(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((h,m)=>{f(h);let d=e.FunctionStat.Token_ArgCommaList[m];d!=null&&f(d)}),e.FunctionStat.Token_Varg&&f(e.FunctionStat.Token_Varg),f(e.FunctionStat.Token_CloseParen),T(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")f(e.Token_Function),e.NameChain.forEach((h,m)=>{m==0?g(e.Token_Function,h):f(h);let d=e.Token_NameChainSeperator[m];d!=null&&f(d)}),f(e.Token_OpenParen),e.ArgList.forEach((h,m)=>{f(h);let d=e.Token_ArgCommaList[m];d!=null&&f(d)}),e.Token_Varg&&f(e.Token_Varg),f(e.Token_CloseParen),T(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")f(e.Token_Repeat),T(e.Token_Repeat,e.Body,e.Token_Until),a(e.Condition),g(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")f(e.Token_For),e.VarList.forEach((h,m)=>{m==0?g(e.Token_For,h):f(h);let d=e.Token_VarCommaList[m];d!=null&&f(d)}),g(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((h,m)=>{a(h),m==0&&g(e.Token_In,h.GetFirstToken());let d=e.Token_GeneratorCommaList[m];d!=null&&f(d)}),g(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")f(e.Token_For),e.VarList.forEach((h,m)=>{m==0?g(e.Token_For,h):f(h);let d=e.Token_VarCommaList[m];d!=null&&f(d)}),g(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((h,m)=>{a(h),m==0&&g(e.Token_Equals,h.GetFirstToken());let d=e.Token_RangeCommaList[m];d!=null&&f(d)}),g(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")f(e.Token_While),a(e.Condition),f(e.Token_Do),g(e.Token_While,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Do),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")f(e.Token_Do),f(e.Token_End),T(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){f(e.Token_If),a(e.Condition),g(e.Token_If,e.Condition.GetFirstToken()),g(e.Condition.GetLastToken(),e.Token_Then);let h=e.Token_Then,m=e.Body;e.ElseClauseList.forEach((d,p)=>{T(h,m,d.Token),h=d.Token,d.Condition!=null&&(a(d.Condition),g(d.Token,d.Condition.GetFirstToken()),g(d.Condition.GetLastToken(),d.Token_Then),h=d.Token_Then),i(d.Body),m=d.Body}),T(h,m,e.Token_End)}else if(e.Type=="CallExprStat")a(e.Expression);else if(e.Type=="CompoundStat")a(e.Lhs),f(e.Token_Compound),a(e.Rhs),g(e.Lhs.GetLastToken(),e.Token_Compound),g(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((h,m)=>{a(h);let d=e.Token_LhsSeperatorList[m];d!=null&&f(d)}),f(e.Token_Equals),e.Rhs.forEach((h,m)=>{a(h);let d=e.Token_RhsSeperatorList[m];d!=null&&f(d)});else return a(e)},i(U)}function nt(U){let i,a,f={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function g(t,o,r=null){let s;return s={Type:t,Token:{Type:r??"Number",LeadingWhite:"",Source:o},GetFirstToken:()=>s.Token,GetLastToken:()=>s.Token},s}function T(t,o,r){let s;return s={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:o,Rhs:r,GetFirstToken:()=>s.Lhs.GetFirstToken(),GetLastToken:()=>s.Rhs.GetLastToken()},s}function e(t,o){let r;return r={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:o,GetFirstToken:()=>r.Token_Op,GetLastToken:()=>r.Rhs.GetLastToken()},r}function h(t,o){if(o!=null)for(var[r,s]of Object.entries(o))t[r]=s}function m(t){if(t==null||t.substr==null)return;let o=t.substr(0,1),r;if((o=='"'||o=="'")&&(r=t.substr(1,t.length-2)),o=="["){let X=0,ne=1;for(;t.substr(ne,1)=="=";)X++,ne++;r=t.substr(2+X,t.length-4-X-2)}if(r==null)return"";let s="",C;for(C=0;C<=r.length;C++){let X=r.substr(C,1);X=="'"||X=='"'?s+=`\\${X}`:s+=X}return s}function d(t){if(typeof t=="object"&&t.Type=="ParenExpr")return h(t,t.Expression)}function p(t,o,r){let s=o,C=r;if(o&&o.Type=="ParenExpr"&&(s=o.Expression),r&&r.Type=="ParenExpr"&&(C=r.Expression),s==null||C==null||s.Type==null||C.Type==null||s.Type=="VariableExpr"||s.Type=="CallExpr"||s.Type=="BinopExpr"||C.Type=="CallExpr"||C.Type=="BinopExpr"||C.Type=="VariableExpr")return;let X=s.Token||s.Expression!=null&&s.Expression.Token||null,ne=C.Token||C.Expression!=null&&C.Expression.Token||null,Ee=X!=null?X.Source:null,le=ne!=null?ne.Source:null,z,x;if(s.Type=="BooleanLiteral"&&(z=Ee=="true"),C.Type=="BooleanLiteral"&&(x=le=="true"),!(s.Type=="NumberLiteral"&&(z=N(Ee),z==null))&&!(C.Type=="NumberLiteral"&&(x=N(le),x==null))&&((s.Type=="StringLiteral"||s.Type=="HashLiteral")&&(z=Ee.toString()),(C.Type=="StringLiteral"||C.Type=="HashLiteral")&&(x=le.toString()),z!=null&&x!=null)){if(t=="==")return z==x;if(t=="~=")return z!=x;if(t=="and")return z&&x;if(t=="or")return z||x;if(t==".."&&s.Type=="StringLiteral"&&C.Type=="StringLiteral")return`"${m(Ee)+m(le)}"`;if(s.Type=="StringLiteral"&&(z=N(m(z))),C.Type=="StringLiteral"&&(x=N(m(x))),z==null||x==null)return;let W;if(t=="+"&&(W=z+x),t=="-"&&(W=z-x),t=="*"&&(W=z*x),t=="/"&&(W=z/x),t=="^"&&(W=z**x),t=="%"&&(W=z%x),t==">"&&(W=z>x),t=="<"&&(W=z<x),t==">="&&(W=z>=x),t=="<="&&(W=z<=x),W==!1||W==!0||isFinite(W)&&W>-(10**6)&&W<10**6)return W}}function S(t,o){let r=o.Token||o.Expression||o.EntryList||o;if(r==null||r.Source==null&&o.Type!="TableLiteral"||o.Type=="VariableExpr"||o.Type=="CallExpr"||o.Type=="BinopExpr")return;let s=r.Source,C;if(o.Type=="TableLiteral"&&r!=null){let X=[],ne=0,Ee=!1,le=!1,z=0;if(r.forEach((x,W)=>{if(Ee)X.push(x);else if(x.EntryType=="Value"||x.EntryType=="Index")if((x.Index==null||x.Index.Type=="NumberLiteral")&&x.Value){if((x.Index!=null&&x.Index.Token!=null&&x.Index.Token.Source!==null?x.Index.Token.Source:z+1).toString()!==(++z).toString())return Ee=!0,le=!0,X.push(x);x.Value.Type!="CallExpr"?ne++:(Ee=!0,X.push(x))}else X.push(x)}),le)return;if(t=="#")return o.EntryList=X,o.EntryList.length<=0?g("NumberLiteral",ne!==null?ne:o.EntryList.length):ne<=0?e("#",o):T("+",g("NumberLiteral",ne),e("#",o))}if(o.Type=="BooleanLiteral"&&(C=s=="true"),!(o.Type=="NumberLiteral"&&(C=N(s),C===null))){if(o.Type=="StringLiteral"&&(C=s.substr(1,s.length-2)),t=="not"&&o.Type!==null)return o.Type=="NilLiteral"||o.Type=="BooleanLiteral"&&C===!1;if(C!=null){if(t=="#")return C.length;if(t=="-")return-C}}}a=function(t){if(t.Type=="BinopExpr"){if(a(t.Lhs),a(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let o=t.Token_Op;if(o!=null&&o.Source!=null){let r=p(o.Source,t.Lhs,t.Rhs);if(r!=null){if(typeof r=="boolean"){let s=g("BooleanLiteral",r.toString(),"Keyword");h(t,s);return}else if(typeof r=="number"){if(isFinite(r)==!0){let s=g("NumberLiteral",r.toString(),"Number");h(t,s);return}}else if(typeof r=="string"){let s=g("StringLiteral",r,"String");h(t,s);return}else if(typeof r=="object"){h(t,r);return}return}}if(t.Lhs.Type=="ParenExpr"){let s=t.Lhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let s=t.Rhs.Expression;s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(a(t.Rhs),t.Rhs!=null&&f[t.Rhs.Type]==!0){let o=t.Token_Op;if(o!=null&&o.Source!=null){let r=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,s=S(o.Source,r);if(s!=null){if(typeof s=="boolean"){let C=g("BooleanLiteral",s.toString(),"Keyword");h(t,C);return}else if(typeof s=="number"){if(isFinite(s)==!0){let C=g("NumberLiteral",s,"Number");h(t,C);return}}else if(typeof s=="string"){let C=g("StringLiteral",s,"String");h(t,C);return}else if(typeof s=="object"){h(t,s);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let o=t.Token;if(o!=null){if(o.Type=="Number"){let r=o.Source.toString().split("e");if(r.length===2){let s=N(r[0]),C=N(r[1]);isFinite(s)&&isFinite(C)&&s**C<999999999&&!o.Source.includes("+")&&o.Source.includes(".")&&!o.Source.includes("-")&&(o.Source=(s**C).toString())}}o.Type=="String"&&(o.Source=o.Source.replace(/\\\d+/gi,r=>{let s=N(r.substr(1,r.length-1));return s&&isFinite(s)&&(s>=97&&s<=122||s>=65&&s<=90||s>=33&&s<=47||s>=58&&s<=64||s>=91&&s<=96||s>=123&&s<=126)&&s!==34&&s!==39&&s!==92?String.fromCharCode(s):r}))}}else if(t.Type=="FieldExpr")a(t.Base);else if(t.Type=="IndexExpr")a(t.Base),a(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(a(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((o,r)=>{a(o)}):t.FunctionArguments.CallType=="TableCall"&&a(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let o=t.Base.Expression;t.FunctionArguments.ArgList.forEach((r,s)=>{let C=t.FunctionArguments.ArgList[s];if(C!==void 0&&(C.Type=="NumberLiteral"||C.Type=="StringLiteral"||C.Type=="NilLiteral"||C.Type=="BooleanLiteral"||C.Type=="HashLiteral")){let X=o.ArgList[s];X&&X.var.RenameList.forEach(ne=>{ne(C.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")i(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let o=t.Expression;o!=null&&o.Type=="ParenExpr"&&(t.Expression=o.Expression),a(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&d(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((o,r)=>{o.EntryType=="Field"?a(o.Value):o.EntryType=="Index"?(a(o.Index),a(o.Value)):o.EntryType=="Value"?a(o.Value):k(!1,"unreachable")})},i=function(t){if(t.Type=="StatList")t.StatementList.forEach((o,r)=>{o===null||o.Type===null||(o.Remove=()=>{t.StatementList[r]=null},i(o))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((o,r)=>{a(o)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((o,r)=>{a(o)});else if(t.Type=="LocalFunctionStat")i(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")i(t.Body);else if(t.Type=="RepeatStat")i(t.Body),a(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((o,r)=>{a(o)}),i(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((x,W)=>{a(x)}),i(t.Body);let o=t.RangeList[0],r=t.RangeList[1],s=t.RangeList[2];if(o==null||r==null)return t.Remove();if(d(o),d(r),d(s),o.Type!="NumberLiteral"||r.Type!="NumberLiteral"||s!=null&&s.Type!="NumberLiteral"||s==null)return;let C=N(o.Token.Source),X=N(r.Token.Source),ne=s!=null&&N(s.Token.Source)||1,Ee=ne>0&&C<=X||ne<0&&C>=X,le=(X-C+ne)/ne;if(!(Ee&&le>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){a(t.Condition),i(t.Body);let o=t.Condition;switch(o.Type){case"ParenExpr":o=o.Expression;case"BooleanLiteral":if(o==null||o.Token==null||o.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(i(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let o=t.Body.StatementList[0];o.Type!=="ContinueStat"&&o.Type!=="BreakStat"&&o.Type!=="ReturnStat"&&h(t,o)}}else if(t.Type=="IfStat"){a(t.Condition),i(t.Body),t.ElseClauseList.forEach((r,s)=>{r.Condition!=null&&a(r.Condition),i(r.Body)});let o=t.Condition;switch(o.Type){case"ParenExpr":o=o.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||o==null||o.Token==null||o.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?a(t.Expression):t.Type=="CompoundStat"?(a(t.Lhs),a(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((o,r)=>{a(o)}),t.Rhs.forEach((o,r)=>{a(o)}))}},i(U)}let ee=[],D;for(D=97;D<=122;D++)ee.push(String.fromCharCode(D));for(D=65;D<=90;D++)ee.push(String.fromCharCode(D));for(D=48;D<=57;D++)ee.push(String.fromCharCode(D));ee.push("_");let Ve=[];for(D=97;D<=122;D++)Ve.push(String.fromCharCode(D));for(D=65;D<=90;D++)Ve.push(String.fromCharCode(D));function Oe(U){let i="",a=U%Ve.length;for(U=(U-a)/Ve.length,i=`${i}${Ve[a]}`;U>0;){let f=U%ee.length;U=(U-f)/ee.length,i=`${i}${ee[f]}`}return i}function y(U,i,a){let f=[];for(var[g,T]of Object.entries(We))f[g]=!0;let e=[];U.forEach(S=>{S.AssignedTo&&a?e.push(S):f[S.Name]=!0});function h(S){S.VariableList.forEach(t=>{e.push(t)}),S.ChildScopeList.forEach(t=>{h(t)})}h(i),e.forEach(S=>{S.UsedNameArray=[]}),e.sort((S,t)=>S-t);let m=0,d=[];function p(S){let t=d[S];if(t==null){for(t=Oe(m),m++;f[t];)t=Oe(m),m++;d[S]=t}return t}e.forEach((S,t)=>{S.Renamed=!0;let o=0;for(;S.UsedNameArray[o];)o++;S.Rename(p(o)),S.Scope?e.forEach(r=>{r.Renamed||(!r.Scope||r.Scope.Depth<S.Scope.Depth?r.ReferenceLocationList.some(s=>s>=S.BeginLocation&&s<=S.ScopeEndLocation?(r.UsedNameArray[o]=!0,!0):!1):r.Scope.Depth>S.Scope.Depth?S.ReferenceLocationList.some(s=>s>=r.BeginLocation&&s<=r.ScopeEndLocation?(r.UsedNameArray[o]=!0,!0):!1):S.BeginLocation<r.EndLocation&&S.EndLocation>r.BeginLocation&&(r.UsedNameArray[o]=!0))}):e.forEach(r=>{if(!r.Renamed)if(r.Type=="Global")r.UsedNameArray[o]=!0;else if(r.Type=="Local")S.ReferenceLocationList.some(s=>s>=r.BeginLocation&&s<=r.ScopeEndLocation?(r.UsedNameArray[o]=!0,!0):!1);else throw"Unreachable"})})}function O(U,i,a){let f=[];U.forEach(m=>{(!m.AssignedTo||!a)&&(f[m.Name]=!0)});let g=1,T=1;function e(m,d){m.Name=d,m.RenameList.forEach(p=>{p(d)})}if(a){let m={};U.forEach(d=>{d.AssignedTo&&!d.ChangedName&&(m[d.Name]=m[d.Name]||`G_${T}_`,d.ChangedName=!0,e(d,m[d.Name]),T++)})}function h(m){m.VariableList.forEach(d=>{let p=`L_${g}_`;d.Info.Type=="Argument"?p=`${p}arg${d.Info.Index}`:d.Info.Type=="LocalFunction"?p=`${p}func`:d.Info.Type=="ForRange"&&(p=`${p}forvar${d.Info.Index}`),e(d,p),g++}),m.ChildScopeList.forEach(d=>{h(d)})}h(i)}let pe=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,ve={};ve.Minify=function(U,i){let a=Y(U),[f,g]=tt(a);i.RenameVariables==!0&&y(f,g,i.RenameGlobals),i.SolveMath==!0&&nt(a),Xe(a);let T=rt(a);return T=`${pe}

${T}`,T},ve.Beautify=function(U,i){let a=Y(U),[f,g]=tt(a);return i.RenameVariables&&O(f,g,i.RenameGlobals),i.SolveMath==!0&&nt(a),Ze(a),rt(a)};try{je!=null&&je.exports!=null&&(je.exports.Beautify=ve.Beautify,je.exports.Minify=ve.Minify)}catch{}})(Gt);var dn=Gt.exports;const Rt=dn;pt.Beautify=Rt.Beautify;pt.Minify=Rt.Minify;pt.Uglify=Rt.Uglify;const Dt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Ot={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},cn={class:"page-div"},mn={class:"el-form-item-msg"},pn={style:{"font-weight":"bolder"}},gn={class:"item-container"},hn={style:{"font-weight":"bolder"}},Tn={class:"item-container"},yn={style:{"font-weight":"bolder"}},_n={class:"item-container"},kn={style:{"font-weight":"bolder"}},Sn={class:"item-container"},bn={style:{"font-weight":"bolder"}},Ln={class:"item-container"},vn={style:{"font-weight":"bolder"}},En={class:"item-container"},Cn={style:{"font-weight":"bolder"}},wn={class:"item-container"},Vn={style:{"font-weight":"bolder"}},Fn={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Gn={class:"item-container"},Rn={style:{"font-weight":"bolder"}},An={class:"item-container"},In={style:{"font-weight":"bolder"}},Nn={class:"item-container"},Un={style:{"font-weight":"bolder"}},Pn={class:"item-container"},$n={style:{"font-weight":"bolder"}},Dn={class:"item-container"},On={style:{"font-weight":"bolder"}},Mn={class:"item-container"},xn={style:{"margin-top":"10px"}},zn={style:{"font-weight":"bolder"}},qn={class:"item-container"},Wn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Zn={class:"item-container"},Xn={style:{"font-weight":"bolder"}},Qn={class:"item-container"},Yn={style:{"font-weight":"bolder"}},eo={class:"item-container"},to={style:{"font-weight":"bolder"}},no={class:"item-container"},oo={style:{"font-weight":"bolder"}},lo={class:"item-container"},ao={style:{"font-weight":"bolder"}},io={class:"item-container"},ro={style:{display:"flex","justify-content":"flex-end"}},uo=sn({name:"settingsRoom"}),so=Object.assign(uo,{setup(je){const{t:$}=on();ln(()=>{ze()});const fe=Ae(!1),{isMobile:k}=an(),N=rn(),be=un(()=>N.isDark),ue=Ae(),de=Ae(),ce=Ae(0),xe=i=>{ce.value>i&&(i===1&&Ve(),i===2&&Oe(),ce.value=i)},He=()=>{ce.value===2&&Ve(),ce.value===3&&Oe(),ce.value--},it=()=>{if(ce.value===0)lt.value.validate(i=>{if(i){if(Q.value.masterPort===Q.value.cavesPort){Tt($("setting.roomBaseFormRules.samePort"));return}Ve(),ce.value++}});else if(ce.value===1)$e.value.validate(i=>{if(i)try{at.parse(Te.value.groundSetting),Oe(),ce.value++}catch{Tt($("setting.luaError"))}});else if(ce.value===2)if(Le.value)try{at.parse(Le.value.caveSetting),ce.value++}catch{Tt($("setting.luaError"))}else ce.value++;else if(ce.value===3)if(J.value)try{at.parse(J.value.modSetting),ce.value++}catch{Tt($("setting.luaError"))}else ce.value++},lt=Ae(),Q=Ae({name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!0,password:"",token:"",masterPort:0,cavesPort:0}),Pe={name:[{required:!0,message:$("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:$("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:$("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],token:[{required:!0,message:$("setting.roomBaseFormRules.token"),trigger:"blur"}]},$e=Ae(),Te=Ae({groundSetting:""}),We={groundSetting:[{required:!0,message:$("setting.roomGroundFormRules.groundSetting"),trigger:"blur"}]},De=Ae(),Le=Ae({caveSetting:""}),Ke={caveSetting:[{required:!0,message:$("setting.roomCaveFormRules.caveSetting"),trigger:"blur"}]},Je=Ae(),J=Ae({modSetting:""}),oe={modSetting:[{required:!0,message:$("setting.roomModFormRules.modSetting"),trigger:"blur"}]},Y=(i,a)=>{i==="master"&&(a==="endless"&&(Te.value.groundSetting=Dt.master),a==="survival"&&(Te.value.groundSetting=Ot.master),Ve()),i==="caves"&&(a==="endless"&&(Le.value.caveSetting=Dt.caves),a==="survival"&&(Le.value.caveSetting=Ot.caves),Oe())},ze=()=>{yt.room.get().then(i=>{Q.value=i.data.base,Te.value.groundSetting=i.data.ground,Le.value.caveSetting=i.data.cave,J.value.modSetting=i.data.mod})},tt=i=>{switch(i){case"save":rt();break;case"saveAndRestart":Ze();break;case"generateNewWorld":Xe();break}},rt=()=>{const i={base:Q.value,ground:Te.value.groundSetting,cave:Le.value.caveSetting,mod:J.value.modSetting};fe.value=!0,yt.save.post(i).then(a=>{Ft(a.message),fe.value=!1}).finally(()=>{fe.value=!1})},Ze=()=>{const i={base:Q.value,ground:Te.value.groundSetting,cave:Le.value.caveSetting,mod:J.value.modSetting};fe.value=!0,yt.saveAndRestart.post(i).then(a=>{Ft(a.message),fe.value=!1}).finally(()=>{fe.value=!1})},Xe=()=>{const i={base:Q.value,ground:Te.value.groundSetting,cave:Le.value.caveSetting,mod:J.value.modSetting};fe.value=!0,yt.saveAndGenerate.post(i).then(a=>{fe.value=!1,Ft(a.message)}).finally(()=>{fe.value=!1})},nt=Ae("Code"),ee=Ae("Code"),D=Ae({}),Ve=()=>{const i=at.parse(Te.value.groundSetting),a=y(i);D.value=O(a)},Oe=()=>{const i=at.parse(Le.value.caveSetting),a=y(i);D.value=O(a)};function y(i){const f=i.body[0].arguments[0];for(const g of f.fields)if(g.key.type==="Identifier"&&g.key.name==="overrides")return g.value;return null}function O(i){const a={};for(const f of i.fields){const g=f.key.name;a[g]=f.value.raw.replace(/"/g,"")}return a}const pe=i=>{const a=i.name,f=i.value,g=at.parse(Te.value.groundSetting),T=y(g);for(let h of T.fields)h.key.name===a&&(h.value.raw=`"${f}"`);const e=U(g);Te.value.groundSetting=pt.Beautify(e,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),ue.value&&ue.value.refresh()},ve=i=>{const a=i.name,f=i.value,g=at.parse(Le.value.caveSetting),T=y(g);for(let h of T.fields)h.key.name===a&&(h.value.raw=`"${f}"`);const e=U(g);Le.value.caveSetting=pt.Beautify(e,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),de.value&&de.value.refresh()};function U(i,a=0){const f="    ".repeat(a);switch(i.type){case"Chunk":return i.body.map(g=>U(g,a)).join(`
`);case"LocalStatement":return`${f}local ${i.variables.map(U).join(", ")} = ${i.init.map(U).join(", ")}`;case"FunctionDeclaration":return`${f}function ${U(i.identifier)}(${i.parameters.map(U).join(", ")}) 
${U(i.body,a+1)}
${f}end`;case"ReturnStatement":return`${f}return ${i.arguments.map(U).join(", ")}`;case"BinaryExpression":return`${U(i.left)} ${i.operator} ${U(i.right)}`;case"CallStatement":return`${f}${U(i.expression)}`;case"Identifier":return i.name;case"StringLiteral":return`${i.raw}`;case"NumericLiteral":return i.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${f}{ ${i.fields.map(g=>U(g,a+1)).join(`,
`+f)} }`;case"Field":return i.key?`${U(i.key)} = ${U(i.value)}`:U(i.value);case"AssignmentStatement":return`${f}${i.variables.map(U).join(", ")} = ${i.init.map(U).join(", ")}`;case"CallExpression":return`${U(i.base)}(${i.arguments.map(U).join(", ")})`;case"TableKeyString":return`${U(i.key)} = ${U(i.value)}`;case"BooleanLiteral":return i.raw;case"TableValue":return U(i.value);default:throw new Error(`Unsupported node type: ${i.type}`)}}return(i,a)=>{const f=ye("el-step"),g=ye("el-steps"),T=ye("el-card"),e=ye("el-col"),h=ye("el-row"),m=ye("el-input"),d=ye("el-form-item"),p=ye("el-tooltip"),S=ye("el-input-number"),t=ye("el-radio"),o=ye("el-radio-group"),r=ye("el-switch"),s=ye("el-slider"),C=ye("el-link"),X=ye("el-form"),ne=ye("el-button"),Ee=ye("el-tab-pane"),le=ye("el-divider"),z=ye("el-tabs"),x=ye("el-alert"),W=ye("el-result"),ut=ye("arrow-down"),Qe=ye("el-icon"),Ie=ye("el-dropdown-item"),qe=ye("el-dropdown-menu"),dt=ye("el-dropdown");return R(),Z("div",cn,[F(h,{gutter:10},{default:A(()=>[F(e,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:A(()=>[F(T,{shadow:"never"},{default:A(()=>[F(g,{active:ce.value,"align-center":"","finish-status":"success"},{default:A(()=>[F(f,{title:c(k)?i.$t("setting.roomSettingMobile"):i.$t("setting.roomSetting"),onClick:a[0]||(a[0]=u=>xe(0))},null,8,["title"]),F(f,{title:c(k)?i.$t("setting.groundSettingMobile"):i.$t("setting.groundSetting"),onClick:a[1]||(a[1]=u=>xe(1))},null,8,["title"]),F(f,{title:c(k)?i.$t("setting.caveSettingMobile"):i.$t("setting.caveSetting"),onClick:a[2]||(a[2]=u=>xe(2))},null,8,["title"]),F(f,{title:c(k)?i.$t("setting.modSettingMobile"):i.$t("setting.modSetting"),onClick:a[3]||(a[3]=u=>xe(3))},null,8,["title"]),F(f,{title:c(k)?i.$t("setting.finishSettingMobile"):i.$t("setting.finishSetting"),onClick:a[4]||(a[4]=u=>xe(4))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),F(h,{gutter:10,style:{"margin-top":"5px"}},{default:A(()=>[F(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:A(()=>[ce.value===0?(R(),ie(T,{key:0,style:ft(c(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:A(()=>[F(X,{ref_key:"roomBaseFormRef",ref:lt,"label-position":c(k)?"top":"left","label-width":c(k)?"70":"auto",model:Q.value,rules:Pe,size:c(k)?"small":"large"},{default:A(()=>[F(d,{label:i.$t("setting.baseForm.room"),prop:"name"},{default:A(()=>[F(m,{modelValue:Q.value.name,"onUpdate:modelValue":a[5]||(a[5]=u=>Q.value.name=u)},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.description"),prop:"description"},{default:A(()=>[F(m,{modelValue:Q.value.description,"onUpdate:modelValue":a[6]||(a[6]=u=>Q.value.description=u)},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{prop:"masterPort"},{label:A(()=>[F(p,{content:c($)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:A(()=>[re(q(c($)("setting.baseForm.masterPort")),1)]),_:1},8,["content"])]),default:A(()=>[F(S,{modelValue:Q.value.masterPort,"onUpdate:modelValue":a[7]||(a[7]=u=>Q.value.masterPort=u),max:65535,min:1,size:c(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),F(d,{prop:"cavesPort"},{label:A(()=>[F(p,{content:c($)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:A(()=>[re(q(c($)("setting.baseForm.cavesPort")),1)]),_:1},8,["content"])]),default:A(()=>[F(S,{modelValue:Q.value.cavesPort,"onUpdate:modelValue":a[8]||(a[8]=u=>Q.value.cavesPort=u),max:65535,min:1,size:c(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),F(d,{label:i.$t("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:A(()=>[F(o,{modelValue:Q.value.gameMode,"onUpdate:modelValue":a[9]||(a[9]=u=>Q.value.gameMode=u)},{default:A(()=>[F(t,{label:i.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),F(t,{label:i.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),F(t,{label:i.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),F(t,{label:i.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.pvp"),prop:"pvp"},{default:A(()=>[F(r,{modelValue:Q.value.pvp,"onUpdate:modelValue":a[10]||(a[10]=u=>Q.value.pvp=u)},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.playerNum"),prop:"playerNum"},{default:A(()=>[F(s,{modelValue:Q.value.playerNum,"onUpdate:modelValue":a[11]||(a[11]=u=>Q.value.playerNum=u),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.backDays"),prop:"backDays"},{default:A(()=>[F(s,{modelValue:Q.value.backDays,"onUpdate:modelValue":a[12]||(a[12]=u=>Q.value.backDays=u),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.vote"),prop:"vote"},{default:A(()=>[F(r,{modelValue:Q.value.vote,"onUpdate:modelValue":a[13]||(a[13]=u=>Q.value.vote=u)},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.password")},{default:A(()=>[F(m,{modelValue:Q.value.password,"onUpdate:modelValue":a[14]||(a[14]=u=>Q.value.password=u)},null,8,["modelValue"])]),_:1},8,["label"]),F(d,{label:i.$t("setting.baseForm.token"),prop:"token"},{default:A(()=>[F(m,{modelValue:Q.value.token,"onUpdate:modelValue":a[15]||(a[15]=u=>Q.value.token=u),"show-password":""},null,8,["modelValue"]),j("div",mn,[F(C,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:A(()=>[re(q(c($)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Ue("",!0),ce.value===1?(R(),ie(T,{key:1,style:ft(c(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:A(()=>[F(z,{modelValue:nt.value,"onUpdate:modelValue":a[19]||(a[19]=u=>nt.value=u)},{default:A(()=>[F(Ee,{label:"Code",name:"Code"},{default:A(()=>[Q.value.gameMode==="endless"?(R(),ie(ne,{key:0,type:"primary",onClick:a[16]||(a[16]=u=>Y("master","endless"))},{default:A(()=>a[25]||(a[25]=[re("标准无尽")])),_:1})):Ue("",!0),Q.value.gameMode==="survival"?(R(),ie(ne,{key:1,type:"primary",onClick:a[17]||(a[17]=u=>Y("master","survival"))},{default:A(()=>a[26]||(a[26]=[re("标准生存")])),_:1})):Ue("",!0),F(X,{ref_key:"roomGroundFormRef",ref:$e,"label-width":c(k)?"70":"100",model:Te.value,rules:We,size:c(k)?"small":"large",style:{"margin-top":"10px"}},{default:A(()=>[F(d,{"label-position":"top",prop:"groundSetting"},{default:A(()=>[F(Bt,{ref_key:"editorGroundSettingRef",ref:ue,modelValue:Te.value.groundSetting,"onUpdate:modelValue":a[18]||(a[18]=u=>Te.value.groundSetting=u),height:c(k)?320:500,theme:be.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1}),Q.value.gameMode==="endless"||Q.value.gameMode==="survival"?(R(),ie(Ee,{key:0,label:"Visualization",name:"Visualization"},{default:A(()=>[F(le,{"content-position":"center"},{default:A(()=>[j("span",pn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),j("div",gn,[(R(!0),Z(_e,null,ke(c(et).global,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",hn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),j("div",Tn,[(R(!0),Z(_e,null,ke(c(et).events,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",yn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),j("div",_n,[(R(!0),Z(_e,null,ke(c(et).survivors,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",kn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),j("div",Sn,[(R(!0),Z(_e,null,ke(c(et).world,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",bn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),j("div",Ln,[(R(!0),Z(_e,null,ke(c(et).resourceRegrowth,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",vn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),j("div",En,[(R(!0),Z(_e,null,ke(c(et).unnaturalPortalResource,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Cn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),j("div",wn,[(R(!0),Z(_e,null,ke(c(et).creatures,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Vn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),j("div",Fn,[(R(!0),Z(_e,null,ke(c(et).hostileCreatures,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Bn,q(c($)("setting.groundVisualizationRule")),1),re(" - "+q(c($)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),j("div",Gn,[(R(!0),Z(_e,null,ke(c(et).giants,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Rn,q(c($)("setting.groundVisualizationGeneration")),1),re(" - "+q(c($)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),j("div",An,[(R(!0),Z(_e,null,ke(c(ct).global,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",In,q(c($)("setting.groundVisualizationGeneration")),1),re(" - "+q(c($)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),j("div",Nn,[(R(!0),Z(_e,null,ke(c(ct).world,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Un,q(c($)("setting.groundVisualizationGeneration")),1),re(" - "+q(c($)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),j("div",Pn,[(R(!0),Z(_e,null,ke(c(ct).resources,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",$n,q(c($)("setting.groundVisualizationGeneration")),1),re(" - "+q(c($)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),j("div",Dn,[(R(!0),Z(_e,null,ke(c(ct).creaturesAndSpawners,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",On,q(c($)("setting.groundVisualizationGeneration")),1),re(" - "+q(c($)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),j("div",Mn,[(R(!0),Z(_e,null,ke(c(ct).hostileCreaturesAndSpawners,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:pe},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1})):Ue("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ue("",!0),ce.value===2?(R(),ie(T,{key:2,style:ft(c(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:A(()=>[F(z,{modelValue:ee.value,"onUpdate:modelValue":a[23]||(a[23]=u=>ee.value=u)},{default:A(()=>[F(Ee,{label:"Code",name:"Code"},{default:A(()=>[F(x,{closable:!1,effect:be.value?"light":"dark",type:"success"},{default:A(()=>[re(q(c($)("setting.cavesTip")),1)]),_:1},8,["effect"]),j("div",xn,[Q.value.gameMode==="endless"?(R(),ie(ne,{key:0,type:"primary",onClick:a[20]||(a[20]=u=>Y("caves","endless"))},{default:A(()=>a[27]||(a[27]=[re("标准无尽")])),_:1})):Ue("",!0),Q.value.gameMode==="survival"?(R(),ie(ne,{key:1,type:"primary",onClick:a[21]||(a[21]=u=>Y("caves","survival"))},{default:A(()=>a[28]||(a[28]=[re("标准生存")])),_:1})):Ue("",!0)]),F(X,{ref_key:"roomCaveFormRef",ref:De,"label-width":c(k)?"70":"100",model:Le.value,rules:Ke,size:c(k)?"small":"large",style:{"margin-top":"10px"}},{default:A(()=>[F(d,{"label-position":"top",prop:"caveSetting"},{default:A(()=>[F(Bt,{ref_key:"editorCavesSettingRef",ref:de,modelValue:Le.value.caveSetting,"onUpdate:modelValue":a[22]||(a[22]=u=>Le.value.caveSetting=u),height:c(k)?320:500,theme:be.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1}),Q.value.gameMode==="endless"||Q.value.gameMode==="survival"?(R(),ie(Ee,{key:0,label:"Visualization",name:"Visualization"},{default:A(()=>[F(le,{"content-position":"center"},{default:A(()=>[j("span",zn,q(c($)("setting.cavesVisualizationRule")),1),re(" - "+q(c($)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),j("div",qn,[(R(!0),Z(_e,null,ke(c(mt).world,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Wn,q(c($)("setting.cavesVisualizationRule")),1),re(" - "+q(c($)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),j("div",Kn,[(R(!0),Z(_e,null,ke(c(mt).resourceRegrowth,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",jn,q(c($)("setting.cavesVisualizationRule")),1),re(" - "+q(c($)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),j("div",Hn,[(R(!0),Z(_e,null,ke(c(mt).creatures,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Jn,q(c($)("setting.cavesVisualizationRule")),1),re(" - "+q(c($)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),j("div",Zn,[(R(!0),Z(_e,null,ke(c(mt).hostileCreatures,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Xn,q(c($)("setting.cavesVisualizationRule")),1),re(" - "+q(c($)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),j("div",Qn,[(R(!0),Z(_e,null,ke(c(mt).giants,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",Yn,q(c($)("setting.cavesVisualizationGeneration")),1),re(" - "+q(c($)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),j("div",eo,[(R(!0),Z(_e,null,ke(c(_t).world,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(kt)[u].configs,customConfigsValue:c(kt)[u].customConfigsValue,i18n:c(kt)[u].i18n,image:c(kt)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",to,q(c($)("setting.cavesVisualizationGeneration")),1),re(" - "+q(c($)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),j("div",no,[(R(!0),Z(_e,null,ke(c(_t).resources,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",oo,q(c($)("setting.cavesVisualizationGeneration")),1),re(" - "+q(c($)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),j("div",lo,[(R(!0),Z(_e,null,ke(c(_t).creaturesAndSpawners,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),F(le,{"content-position":"center"},{default:A(()=>[j("span",ao,q(c($)("setting.cavesVisualizationGeneration")),1),re(" - "+q(c($)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),j("div",io,[(R(!0),Z(_e,null,ke(c(_t).hostileCreaturesAndSpawners,u=>(R(),Z("div",null,[(R(),ie(Se,{modelValue:D.value[u],"onUpdate:modelValue":H=>D.value[u]=H,configs:c(G)[u].configs,customConfigsValue:c(G)[u].customConfigsValue,i18n:c(G)[u].i18n,image:c(G)[u].image,name:u,key:new Date().getTime(),onChangeModelValue:ve},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1})):Ue("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ue("",!0),ce.value===3?(R(),ie(T,{key:3,style:ft(c(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:A(()=>[F(X,{ref_key:"roomModFormRef",ref:Je,"label-width":c(k)?"70":"100",model:J.value,rules:oe,size:c(k)?"small":"large"},{default:A(()=>[F(d,{"label-position":"top",prop:"modSetting"},{default:A(()=>[F(Bt,{ref:"editor",modelValue:J.value.modSetting,"onUpdate:modelValue":a[24]||(a[24]=u=>J.value.modSetting=u),height:c(k)?320:500,theme:be.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Ue("",!0),ce.value===4?(R(),ie(T,{key:4,style:ft(c(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:A(()=>[j("div",{style:ft(c(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[F(W,{"sub-title":i.$t("setting.finish.description"),title:i.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Ue("",!0)]),_:1})]),_:1}),F(h,{gutter:10},{default:A(()=>[F(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:A(()=>[F(T,{shadow:"never"},{default:A(()=>[j("div",ro,[ce.value>0?(R(),ie(ne,{key:0,onClick:He},{default:A(()=>[re(q(c($)("setting.button.prev")),1)]),_:1})):Ue("",!0),ce.value<4?(R(),ie(ne,{key:1,type:"primary",onClick:it},{default:A(()=>[re(q(c($)("setting.button.next")),1)]),_:1})):Ue("",!0),ce.value===4?(R(),ie(dt,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:tt},{dropdown:A(()=>[F(qe,null,{default:A(()=>[F(Ie,{command:"save"},{default:A(()=>[re(q(c($)("setting.button.save")),1)]),_:1}),F(Ie,{command:"saveAndRestart"},{default:A(()=>[re(q(c($)("setting.button.saveAndRestart")),1)]),_:1}),F(Ie,{command:"generateNewWorld"},{default:A(()=>[re(q(c($)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:A(()=>[F(ne,{loading:fe.value,type:"warning"},{default:A(()=>[re(q(c($)("setting.button.actions"))+" ",1),F(Qe,{class:"el-icon--right"},{default:A(()=>[F(ut)]),_:1})]),_:1},8,["loading"])]),_:1})):Ue("",!0)])]),_:1})]),_:1})]),_:1})])}}}),go=nn(so,[["__scopeId","data-v-c9fbb603"]]);export{go as default};
