import{_ as X,r as c,L as T,c as M,u as Y,g as Z,M as ee,N as se,b as le,O as N,P as F,e as $,f as ae,j as e,k as l,l as a,Q as te,R as oe,i as n,t as i,s as re,S as ne,T as ie,n as de,m as A,p as v,U as ue,G as me,V as D,W as C,A as K,J as m,K as pe,X as ge,Y as ce,Z as fe,$ as _e}from"./index-C-KsYsfv.js";import{S as ve}from"./index-DzzMnio3.js";const we={class:"h-full"},xe={class:"absolute top-10px right-10px flex flex-items-center"},be={class:"absolute text-center select-none"},ye={class:"font-bold text-3xl chroma-text mb-6px text-center <lg:text-2xl <md:hidden"},he={class:"chroma-text text-lg text-center <md:hidden"},ke={style:{"margin-bottom":"-50px"}},Ve={class:"flex items-center"},Re={class:"ml-6px font-bold text-xl"},Se={class:"flex items-center space-x-3 text-gray-400 mt-16px mb-16px"},Te={class:"text-center"},Fe={class:"tip"},$e={class:"tip_error"},qe={class:"el-form-item-msg"},Ue={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},Le={__name:"index",setup(Me){const k=c(T.loginTitle);k.value=M(()=>ue(V.language,T.loginTitle,T.loginEnTitle));const{t}=Y(),V=Z(),w=ee(),j=se(),B=le(),q=me(),I=N("images/logo/logo.svg"),E=N("images/login/bg.png"),R=c(),x=c(!1),p=F({username:"",password:""}),O=M(()=>V.language==="en"?F({username:[{required:!0,message:"The user name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"The password cannot be empty",trigger:"blur"}]}):F({username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]})),U=()=>{R.value&&R.value.validate(async(d,s)=>{const f=D(p.password);if(d){x.value=!0;try{const _={username:p.username,password:f},u=await C.login.post({loginForm:_});if(K(u.message),w.setToken(u.data.token),w!=null&&w.token)await ge();else{ce(V.language==="zh"?"登录失败":"Login Failed"),await q.replace(fe);return}await j.setTab([]),await B.setKeepAliveName([]),await q.replace(_e)}catch{let u=1;setInterval(()=>{u--,u===0&&(x.value=!1)},1e3)}}})},b=c(!1),y=c(),o=c({username:"",nickname:"",role:"想什么呢",password:"",disabled:!1}),P={username:[{required:!0,message:t("profile.formValidateMsg.username")}],nickname:[{required:!0,message:t("profile.formValidateMsg.nickname")}],password:[{required:!0,message:t("profile.formValidateMsg.password")}],disabled:[{required:!0,message:t("profile.formValidateMsg.disabled")}]},G=()=>{o.value={username:"",nickname:"",password:""}},H=()=>{y.value&&y.value.clearValidate(),b.value=!0},S=c(!1),W=()=>{y.value.validate(d=>{if(d){S.value=!0;const s={role:"想什么呢",disabled:!1,username:o.value.username,nickname:o.value.nickname,password:D(o.value.password)};C.register.post(s).then(f=>{b.value=!1,K(f.message)}).finally(()=>{S.value=!1})}})};return(d,s)=>{const f=m("el-image"),_=m("el-col"),u=m("el-input"),g=m("el-form-item"),h=m("el-button"),L=m("el-form"),z=m("el-row"),J=m("el-dialog"),Q=pe("throttle");return $(),ae("div",we,[e(z,{class:"h-100%"},{default:l(()=>[a("div",xe,[e(te),e(oe)]),e(_,{lg:16,md:12,sm:15,xs:0,class:"flex items-center justify-center"},{default:l(()=>[s[7]||(s[7]=a("div",{class:"login-background w-85% h-100%"},null,-1)),a("div",be,[e(f,{src:n(E),class:"w-400px h-360px mb-50px animate-float <md:hidden <lg:w-360px h-320px"},null,8,["src"]),a("div",ye,i(d.$t("login.welcome"))+" "+i(k.value),1),a("div",he,i(d.$t("login.description")),1)])]),_:1}),e(_,{lg:8,md:12,sm:9,xs:24,class:"dark:bg-#161616 bg-gray-100 flex items-center justify-center flex-col"},{default:l(()=>[a("div",ke,[e(f,{src:n(I),style:{width:"200px"}},null,8,["src"])]),a("div",Ve,[a("div",Re,i(k.value),1)]),a("div",Se,[s[8]||(s[8]=a("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1)),a("span",Te,i(d.$t("login.account")),1),s[9]||(s[9]=a("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1))]),e(L,{ref_key:"loginFormRef",ref:R,model:p,rules:O.value,"validate-on-rule-change":!1,class:"w-260px",onKeyup:re(U,["enter"])},{default:l(()=>[e(g,{prop:"username"},{default:l(()=>[e(u,{modelValue:p.username,"onUpdate:modelValue":s[0]||(s[0]=r=>p.username=r),placeholder:d.$t("login.loginName"),"prefix-icon":n(ne),type:"text"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),e(g,{prop:"password"},{default:l(()=>[e(u,{modelValue:p.password,"onUpdate:modelValue":s[1]||(s[1]=r=>p.password=r),placeholder:d.$t("login.password"),"prefix-icon":n(ie),"show-password":"",type:"password"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),e(g,null,{default:l(()=>[x.value?($(),A(h,{key:1,loading:x.value,round:"",type:"primary",style:{width:"100%"}},{default:l(()=>[v(i(d.$t("login.center")),1)]),_:1},8,["loading"])):de(($(),A(h,{key:0,round:"",type:"primary",style:{width:"100%"}},{default:l(()=>[v(i(d.$t("login.in")),1)]),_:1})),[[Q,U,"3000"]])]),_:1}),e(g,{style:{"margin-top":"-3%"}},{default:l(()=>[e(h,{round:"",onClick:H,style:{width:"100%"}},{default:l(()=>[v(i(n(t)("login.register")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1}),e(J,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=r=>b.value=r),width:"60%",onClosed:G},{header:l(()=>[v(i(n(t)("login.register")),1)]),default:l(()=>[a("div",Fe,i(n(t)("login.registerTip")),1),a("div",$e,i(n(t)("login.registerTip2")),1),e(L,{ref_key:"registerFormRef",ref:y,model:o.value,"label-width":"100",rules:P,"validate-on-rule-change":!1,style:{margin:"20px"}},{default:l(()=>[e(g,{label:n(t)("profile.username"),prop:"username"},{default:l(()=>[e(u,{modelValue:o.value.username,"onUpdate:modelValue":s[2]||(s[2]=r=>o.value.username=r)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n(t)("profile.nickname"),prop:"nickname"},{default:l(()=>[e(u,{modelValue:o.value.nickname,"onUpdate:modelValue":s[3]||(s[3]=r=>o.value.nickname=r)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n(t)("profile.password"),prop:"password"},{default:l(()=>[e(u,{modelValue:o.value.password,"onUpdate:modelValue":s[4]||(s[4]=r=>o.value.password=r),autocomplete:"new-password","show-password":""},null,8,["modelValue"]),e(ve,{modelValue:o.value.password,"onUpdate:modelValue":s[5]||(s[5]=r=>o.value.password=r)},null,8,["modelValue"]),a("div",qe,i(n(t)("profile.suggestedPassword")),1)]),_:1},8,["label"]),a("div",Ue,[e(h,{type:"primary",loading:S.value,onClick:W},{default:l(()=>[v(i(n(t)("profile.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},De=X(Le,[["__scopeId","data-v-7f60cb4d"]]);export{De as default};
