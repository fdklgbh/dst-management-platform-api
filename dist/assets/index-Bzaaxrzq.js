import{_ as P,r as k,a1 as U,o as C,d as I,e as T,i as d,a2 as N,j as c,a3 as B,u as R,g as j,c as F,K as H,B as p,f as t,w as r,t as i,m as M,X as q,R as E,S as D,y as K,a4 as S,a5 as L,a6 as O,a7 as v}from"./index-DLH8rKkR.js";const W={class:"sc-password-strength"},X={__name:"index",props:{modelValue:{type:String,default:""}},setup(x){const m=x;let e=k(0);const f=a=>{let s=0,w=a.length>=6,l=/\d/.test(a),g=/[a-z]/.test(a),h=/[A-Z]/.test(a),n=!/(\w)\1{2}/.test(a),o=/[`~!@#$%^&*()_+<>?:"{},./;'[\]]/.test(a);if(a.length<=0)return s=0,e.value=s,!1;if(!w)return s=1,e.value=s,!1;l&&(s+=1),g&&(s+=1),h&&(s+=1),n&&(s+=1),o&&(s+=1),e.value=s};return U(()=>m.modelValue,(a,s)=>{f(a)},{immediate:!0}),C(()=>{f(m.modelValue)}),(a,s)=>(I(),T("div",W,[d("div",{class:N([`sc-password-strength-level-${c(e)}`,"sc-password-strength-bar"])},null,2)]))}},Z=P(X,[["__scopeId","data-v-bc1b4291"]]),G={class:"page-div"},J={class:"card-header"},Q={class:"parent"},Y={class:"child",style:{"font-size":"28px"}},ee={class:"child",style:{"font-size":"14px",color:"#73767a","margin-top":"5px"}},se={class:"card-header"},ae={class:"el-form-item-msg"},oe={style:{display:"flex","justify-content":"flex-end","padding-top":"80px"}},te=q({name:"profile"}),le=Object.assign(te,{setup(x){const m=B(),{t:e}=R(),f=m.userInfo,a=j(),s=F(()=>a.language),w=k(),l=H({password:"",passwordTwice:""}),g={password:[{required:!0,message:e("profile.plzInputPassword")}],passwordTwice:[{required:!0,message:e("profile.plzInputAgainPassword")},{validator:(n,o,u)=>{o!==l.password?u(new Error(e("profile.passwordNotMatch"))):u()}}]},h=()=>{w.value.validate(n=>{n&&E.updatePassword.post({password:D(l.password)}).then(async o=>{K(o.message),await S(1e3),L(e("profile.passwordUpdated"),e("profile.passwordUpdatedTitle"),3e3),await S(3e3),O.clear(),v.remove("user"),v.remove("keepAlive"),v.remove("tabs"),window.location.replace("/")})})};return(n,o)=>{const u=p("el-card"),y=p("el-col"),V=p("el-input"),b=p("el-form-item"),$=p("el-button"),z=p("el-form"),A=p("el-row");return I(),T("div",G,[t(A,{gutter:10},{default:r(()=>[t(y,{span:12,lg:12,md:12,sm:24,xs:24,style:{"margin-top":"10px"}},{default:r(()=>[t(u,{style:{"min-height":"500px"}},{header:r(()=>[d("div",J,i(c(e)("profile.cardHeaderInfo")),1)]),default:r(()=>[d("div",Q,[d("div",Y,i(s.value==="zh"?"管理员":"Admin"),1),d("div",ee,i(c(f).username),1)])]),_:1})]),_:1}),t(y,{span:12,lg:12,md:12,sm:24,xs:24,style:{"margin-top":"10px"}},{default:r(()=>[t(u,{style:{"min-height":"500px"}},{header:r(()=>[d("div",se,i(c(e)("profile.cardHeaderPassword")),1)]),default:r(()=>[t(z,{ref_key:"updatePasswordFormRef",ref:w,model:l,rules:g,"label-width":"150","label-position":"top",style:{"margin-top":"20px"}},{default:r(()=>[t(b,{label:n.$t("profile.password"),prop:"password"},{default:r(()=>[t(V,{modelValue:l.password,"onUpdate:modelValue":o[0]||(o[0]=_=>l.password=_),"show-password":""},null,8,["modelValue"]),t(Z,{modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=_=>l.password=_)},null,8,["modelValue"]),d("div",ae,i(c(e)("profile.suggestedPassword")),1)]),_:1},8,["label"]),t(b,{label:n.$t("profile.passwordTwice"),prop:"passwordTwice"},{default:r(()=>[t(V,{modelValue:l.passwordTwice,"onUpdate:modelValue":o[2]||(o[2]=_=>l.passwordTwice=_),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),d("div",oe,[t($,{type:"primary",onClick:h},{default:r(()=>[M(i(c(e)("profile.update")),1)]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}}),de=P(le,[["__scopeId","data-v-55948cdf"]]);export{de as default};
