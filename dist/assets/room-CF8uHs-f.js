import{a9 as Ft,aa as tn,_ as nn,u as ln,o as an,r as Be,a as on,g as rn,c as un,B as Le,d as v,e as z,F as le,f as m,w as T,j as t,k as K,p as Qe,i as I,t as R,m as j,n as Ve,v as oe,X as sn,A as mt,y as Mt}from"./index--Cvz-kQY.js";import{s as yt}from"./index-D9W0FsOG.js";import{s as _t}from"./index-m5hZX8yr.js";import{g as Ae,_ as ie,o as f,a as lt,c as at,b as dt,d as ft}from"./levelDataSetting-BGku7Jua.js";var St={exports:{}};St.exports;(function(ot,h){(function(pe,k,O){var Ce=h&&!h.nodeType&&h,me=ot&&!ot.nodeType&&ot,Te=Ce&&me&&typeof Ft=="object"&&Ft,ne=me&&me.exports===Ce&&Ce;Te&&(Te.global===Te||Te.window===Te||Te.self===Te)&&(pe=Te),O(Ce&&me?ne?me.exports:Ce:pe[k]={})})(Ft,"luaparse",function(pe){pe.version="0.3.1";var k,O,Ce,me,Te,ne=pe.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function Ge(a,u){return u=u||0,a<128?String.fromCharCode(a):a<2048?String.fromCharCode(u|192|a>>6,u|128|a&63):a<65536?String.fromCharCode(u|224|a>>12,u|128|a>>6&63,u|128|a&63):a<1114112?String.fromCharCode(u|240|a>>18,u|128|a>>12&63,u|128|a>>6&63,u|128|a&63):null}function Ye(a,u){for(var S=a.toString(16);S.length<u;)S="0"+S;return S}function ct(a){return function(u){var S=a.exec(u);if(!S)return u;re(null,Y.invalidCodeUnit,Ye(S[0].charCodeAt(0),4).toUpperCase())}}var Ke={"pseudo-latin1":{fixup:ct(/[^\x00-\xff]/),encodeByte:function(a){return a===null?"":String.fromCharCode(a)},encodeUTF8:function(a){return Ge(a)}},"x-user-defined":{fixup:ct(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(a){return a===null?"":a>=128?String.fromCharCode(a|63232):String.fromCharCode(a)},encodeUTF8:function(a){return Ge(a,63232)}},none:{discardStrings:!0,fixup:function(a){return a},encodeByte:function(a){return""},encodeUTF8:function(a){return""}}},F=1,Ne=2,$e=4,fe=8,He=16,Oe=32,ye=64,Je=128,et=256;pe.tokenTypes={EOF:F,StringLiteral:Ne,Keyword:$e,Identifier:fe,NumericLiteral:He,Punctuator:Oe,BooleanLiteral:ye,NilLiteral:Je,VarargLiteral:et};var Y=pe.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},de=pe.ast={labelStatement:function(a){return{type:"LabelStatement",label:a}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(a){return{type:"GotoStatement",label:a}},returnStatement:function(a){return{type:"ReturnStatement",arguments:a}},ifStatement:function(a){return{type:"IfStatement",clauses:a}},ifClause:function(a,u){return{type:"IfClause",condition:a,body:u}},elseifClause:function(a,u){return{type:"ElseifClause",condition:a,body:u}},elseClause:function(a){return{type:"ElseClause",body:a}},whileStatement:function(a,u){return{type:"WhileStatement",condition:a,body:u}},doStatement:function(a){return{type:"DoStatement",body:a}},repeatStatement:function(a,u){return{type:"RepeatStatement",condition:a,body:u}},localStatement:function(a,u){return{type:"LocalStatement",variables:a,init:u}},assignmentStatement:function(a,u){return{type:"AssignmentStatement",variables:a,init:u}},callStatement:function(a){return{type:"CallStatement",expression:a}},functionStatement:function(a,u,S,G){return{type:"FunctionDeclaration",identifier:a,isLocal:S,parameters:u,body:G}},forNumericStatement:function(a,u,S,G,W){return{type:"ForNumericStatement",variable:a,start:u,end:S,step:G,body:W}},forGenericStatement:function(a,u,S){return{type:"ForGenericStatement",variables:a,iterators:u,body:S}},chunk:function(a){return{type:"Chunk",body:a}},identifier:function(a){return{type:"Identifier",name:a}},literal:function(a,u,S){return a=a===Ne?"StringLiteral":a===He?"NumericLiteral":a===ye?"BooleanLiteral":a===Je?"NilLiteral":"VarargLiteral",{type:a,value:u,raw:S}},tableKey:function(a,u){return{type:"TableKey",key:a,value:u}},tableKeyString:function(a,u){return{type:"TableKeyString",key:a,value:u}},tableValue:function(a){return{type:"TableValue",value:a}},tableConstructorExpression:function(a){return{type:"TableConstructorExpression",fields:a}},binaryExpression:function(a,u,S){var G=a==="and"||a==="or"?"LogicalExpression":"BinaryExpression";return{type:G,operator:a,left:u,right:S}},unaryExpression:function(a,u){return{type:"UnaryExpression",operator:a,argument:u}},memberExpression:function(a,u,S){return{type:"MemberExpression",indexer:u,identifier:S,base:a}},indexExpression:function(a,u){return{type:"IndexExpression",base:a,index:u}},callExpression:function(a,u){return{type:"CallExpression",base:a,arguments:u}},tableCallExpression:function(a,u){return{type:"TableCallExpression",base:a,arguments:u}},stringCallExpression:function(a,u){return{type:"StringCallExpression",base:a,argument:u}},comment:function(a,u){return{type:"Comment",value:a,raw:u}}};function ae(a){if(D){var u=$.pop();u.complete(),u.bless(a)}return O.onCreateNode&&O.onCreateNode(a),a}var Xe=Array.prototype.slice,it=function(a,u){for(var S=0,G=a.length;S<G;++S)if(a[S]===u)return S;return-1};Array.prototype.indexOf&&(it=function(a,u){return a.indexOf(u)});function gt(a,u,S){for(var G=0,W=a.length;G<W;++G)if(a[G][u]===S)return G;return-1}function rt(a){var u=Xe.call(arguments,1);return a=a.replace(/%(\d)/g,function(S,G){return""+u[G-1]||""}),a}var ut=function(a){for(var u=Xe.call(arguments,1),S,G,W=0,he=u.length;W<he;++W){S=u[W];for(G in S)Object.prototype.hasOwnProperty.call(S,G)&&(a[G]=S[G])}return a};Object.assign&&(ut=Object.assign),pe.SyntaxError=SyntaxError;function tt(a){return Object.create?Object.create(a,{line:{writable:!0,value:a.line},index:{writable:!0,value:a.index},column:{writable:!0,value:a.column}}):a}function re(a){var u=rt.apply(null,Xe.call(arguments,1)),S,G;throw a===null||typeof a.line>"u"?(G=b-p+1,S=tt(new SyntaxError(rt("[%1:%2] %3",y,G,u))),S.index=b,S.line=y,S.column=G):(G=a.range[0]-a.lineStart,S=tt(new SyntaxError(rt("[%1:%2] %3",a.line,G,u))),S.line=a.line,S.index=a.range[0],S.column=G),S}function A(a){var u=k.slice(a.range[0],a.range[1]);return u||a.value}function we(a,u){re(u,Y.expectedToken,a,A(u))}function xe(a){var u=A(_e);if(typeof a.type<"u"){var S;switch(a.type){case Ne:S="string";break;case $e:S="keyword";break;case fe:S="identifier";break;case He:S="number";break;case Oe:S="symbol";break;case ye:S="boolean";break;case Je:return re(a,Y.unexpected,"symbol","nil",u);case F:return re(a,Y.unexpectedEOF)}return re(a,Y.unexpected,S,A(a),u)}return re(a,Y.unexpected,"symbol",a,u)}var b,q,ue,_e,x,V,y,p;pe.lex=_;function _(){for(l();k.charCodeAt(b)===45&&k.charCodeAt(b+1)===45;)Se(),l();if(b>=Ce)return{type:F,value:"<eof>",line:y,lineStart:p,range:[b,b]};var a=k.charCodeAt(b),u=k.charCodeAt(b+1);if(V=b,vt(a))return r();switch(a){case 39:case 34:return g();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n();case 46:return Z(u)?n():u===46?k.charCodeAt(b+2)===46?c():o(".."):o(".");case 61:return o(u===61?"==":"=");case 62:return me.bitwiseOperators&&u===62?o(">>"):o(u===61?">=":">");case 60:return me.bitwiseOperators&&u===60?o("<<"):o(u===61?"<=":"<");case 126:if(u===61)return o("~=");if(!me.bitwiseOperators)break;return o("~");case 58:return me.labels&&u===58?o("::"):o(":");case 91:return u===91||u===61?C():o("[");case 47:return me.integerDivision&&u===47?o("//"):o("/");case 38:case 124:if(!me.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return o(k.charAt(b))}return xe(k.charAt(b))}function L(){var a=k.charCodeAt(b),u=k.charCodeAt(b+1);return Ie(a)?(a===10&&u===13&&++b,a===13&&u===10&&++b,++y,p=++b,!0):!1}function l(){for(;b<Ce;){var a=k.charCodeAt(b);if(Pe(a))++b;else if(!L())break}}function r(){for(var a,u;pt(k.charCodeAt(++b)););return a=Te.fixup(k.slice(V,b)),ht(a)?u=$e:a==="true"||a==="false"?(u=ye,a=a==="true"):a==="nil"?(u=Je,a=null):u=fe,{type:u,value:a,line:y,lineStart:p,range:[V,b]}}function o(a){return b+=a.length,{type:Oe,value:a,line:y,lineStart:p,range:[V,b]}}function c(){return b+=3,{type:et,value:"...",line:y,lineStart:p,range:[V,b]}}function g(){for(var a=k.charCodeAt(b++),u=y,S=p,G=b,W=Te.discardStrings?null:"",he;he=k.charCodeAt(b++),a!==he;)if((b>Ce||Ie(he))&&(W+=k.slice(G,b-1),re(null,Y.unfinishedString,k.slice(V,b-1))),he===92){if(!Te.discardStrings){var be=k.slice(G,b-1);W+=Te.fixup(be)}var Me=ge();Te.discardStrings||(W+=Me),G=b}return Te.discardStrings||(W+=Te.encodeByte(null),W+=Te.fixup(k.slice(G,b-1))),{type:Ne,value:W,line:u,lineStart:S,lastLine:y,lastLineStart:p,range:[V,b]}}function C(){var a=y,u=p,S=Ee(!1);return S===!1&&re(q,Y.expected,"[",A(q)),{type:Ne,value:Te.discardStrings?null:Te.fixup(S),line:a,lineStart:u,lastLine:y,lastLineStart:p,range:[V,b]}}function n(){var a=k.charAt(b),u=k.charAt(b+1),S=a==="0"&&"xX".indexOf(u||null)>=0?d():w(),G=i(),W=s();return W&&(G||S.hasFractionPart)&&re(null,Y.malformedNumber,k.slice(V,b)),{type:He,value:S.value,line:y,lineStart:p,range:[V,b]}}function i(){if(me.imaginaryNumbers)return"iI".indexOf(k.charAt(b)||null)>=0?(++b,!0):!1}function s(){if(me.integerSuffixes){if("uU".indexOf(k.charAt(b)||null)>=0)if(++b,"lL".indexOf(k.charAt(b)||null)>=0){if(++b,"lL".indexOf(k.charAt(b)||null)>=0)return++b,"ULL";re(null,Y.malformedNumber,k.slice(V,b))}else re(null,Y.malformedNumber,k.slice(V,b));else if("lL".indexOf(k.charAt(b)||null)>=0){if(++b,"lL".indexOf(k.charAt(b)||null)>=0)return++b,"LL";re(null,Y.malformedNumber,k.slice(V,b))}}}function d(){var a=0,u=1,S=1,G,W,he,be;for(be=b+=2,We(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(V,b));We(k.charCodeAt(b));)++b;G=parseInt(k.slice(be,b),16);var Me=!1;if(k.charAt(b)==="."){for(Me=!0,W=++b;We(k.charCodeAt(b));)++b;a=k.slice(W,b),a=W===b?0:parseInt(a,16)/Math.pow(16,b-W)}var Vt=!1;if("pP".indexOf(k.charAt(b)||null)>=0){for(Vt=!0,++b,"+-".indexOf(k.charAt(b)||null)>=0&&(S=k.charAt(b++)==="+"?1:-1),he=b,Z(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(V,b));Z(k.charCodeAt(b));)++b;u=k.slice(he,b),u=Math.pow(2,u*S)}return{value:(G+a)*u,hasFractionPart:Me||Vt}}function w(){for(;Z(k.charCodeAt(b));)++b;var a=!1;if(k.charAt(b)===".")for(a=!0,++b;Z(k.charCodeAt(b));)++b;var u=!1;if("eE".indexOf(k.charAt(b)||null)>=0)for(u=!0,++b,"+-".indexOf(k.charAt(b)||null)>=0&&++b,Z(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(V,b));Z(k.charCodeAt(b));)++b;return{value:parseFloat(k.slice(V,b)),hasFractionPart:a||u}}function Q(){var a=b++;for(k.charAt(b++)!=="{"&&re(null,Y.braceExpected,"{","\\"+k.slice(a,b)),We(k.charCodeAt(b))||re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(a,b));k.charCodeAt(b)===48;)++b;for(var u=b;We(k.charCodeAt(b));)++b,b-u>6&&re(null,Y.tooLargeCodepoint,"\\"+k.slice(a,b));var S=k.charAt(b++);S!=="}"&&(S==='"'||S==="'"?re(null,Y.braceExpected,"}","\\"+k.slice(a,b--)):re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(a,b)));var G=parseInt(k.slice(u,b-1)||"0",16),W="\\"+k.slice(a,b);return G>1114111&&re(null,Y.tooLargeCodepoint,W),Te.encodeUTF8(G,W)}function ge(){var a=b;switch(k.charAt(b)){case"a":return++b,"\x07";case"n":return++b,`
`;case"r":return++b,"\r";case"t":return++b,"	";case"v":return++b,"\v";case"b":return++b,"\b";case"f":return++b,"\f";case"\r":case`
`:return L(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Z(k.charCodeAt(b))&&b-a<3;)++b;var u=k.slice(a,b),S=parseInt(u,10);return S>255&&re(null,Y.decimalEscapeTooLarge,"\\"+S),Te.encodeByte(S,"\\"+u);case"z":if(me.skipWhitespaceEscape)return++b,l(),"";break;case"x":if(me.hexEscapes){if(We(k.charCodeAt(b+1))&&We(k.charCodeAt(b+2)))return b+=3,Te.encodeByte(parseInt(k.slice(a+1,b),16),"\\"+k.slice(a,b));re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(a,b+2))}break;case"u":if(me.unicodeEscapes)return Q();break;case"\\":case'"':case"'":return k.charAt(b++)}return me.strictEscapes&&re(null,Y.invalidEscape,"\\"+k.slice(a,b+1)),k.charAt(b++)}function Se(){V=b,b+=2;var a=k.charAt(b),u="",S=!1,G=b,W=p,he=y;if(a==="["&&(u=Ee(!0),u===!1?u=a:S=!0),!S){for(;b<Ce&&!Ie(k.charCodeAt(b));)++b;O.comments&&(u=k.slice(G,b))}if(O.comments){var be=de.comment(u,k.slice(V,b));O.locations&&(be.loc={start:{line:he,column:V-W},end:{line:y,column:b-p}}),O.ranges&&(be.range=[V,b]),O.onCreateNode&&O.onCreateNode(be),x.push(be)}}function Ee(a){var u=0,S="",G=!1,W,he,be=y;for(++b;k.charAt(b+u)==="=";)++u;if(k.charAt(b+u)!=="[")return!1;for(b+=u+1,Ie(k.charCodeAt(b))&&L(),he=b;b<Ce;){for(;Ie(k.charCodeAt(b));)L();if(W=k.charAt(b++),W==="]"){G=!0;for(var Me=0;Me<u;++Me)k.charAt(b+Me)!=="="&&(G=!1);k.charAt(b+u)!=="]"&&(G=!1)}if(G)return S+=k.slice(he,b-1),b+=u+1,S}re(null,a?Y.unfinishedLongComment:Y.unfinishedLongString,be,"<eof>")}function X(){ue=q,q=_e,_e=_()}function H(a){return a===q.value?(X(),!0):!1}function ee(a){a===q.value?X():re(q,Y.expected,a,A(q))}function Pe(a){return a===9||a===32||a===11||a===12}function Ie(a){return a===10||a===13}function Z(a){return a>=48&&a<=57}function We(a){return a>=48&&a<=57||a>=97&&a<=102||a>=65&&a<=70}function vt(a){return!!(a>=65&&a<=90||a>=97&&a<=122||a===95||me.extendedIdentifiers&&a>=128)}function pt(a){return!!(a>=65&&a<=90||a>=97&&a<=122||a===95||a>=48&&a<=57||me.extendedIdentifiers&&a>=128)}function ht(a){switch(a.length){case 2:return a==="do"||a==="if"||a==="in"||a==="or";case 3:return a==="and"||a==="end"||a==="for"||a==="not";case 4:return a==="else"||a==="then"?!0:me.labels&&!me.contextualGoto?a==="goto":!1;case 5:return a==="break"||a==="local"||a==="until"||a==="while";case 6:return a==="elseif"||a==="repeat"||a==="return";case 8:return a==="function"}return!1}function Tt(a){return Oe===a.type?"#-~".indexOf(a.value)>=0:$e===a.type?a.value==="not":!1}function nt(a){if(F===a.type)return!0;if($e!==a.type)return!1;switch(a.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var je,Ze,e;function U(){var a=je[Ze++].slice();je.push(a),O.onCreateScope&&O.onCreateScope()}function M(){je.pop(),--Ze,O.onDestroyScope&&O.onDestroyScope()}function P(a){O.onLocalDeclaration&&O.onLocalDeclaration(a),it(je[Ze],a)===-1&&je[Ze].push(a)}function B(a){P(a.name),E(a,!0)}function E(a,u){!u&&gt(e,"name",a.name)===-1&&e.push(a),a.isLocal=u}function N(a){return it(je[Ze],a)!==-1}var $=[],D;function J(){return new te(q)}function te(a){O.locations&&(this.loc={start:{line:a.line,column:a.range[0]-a.lineStart},end:{line:0,column:0}}),O.ranges&&(this.range=[a.range[0],0])}te.prototype.complete=function(){O.locations&&(this.loc.end.line=ue.lastLine||ue.line,this.loc.end.column=ue.range[1]-(ue.lastLineStart||ue.lineStart)),O.ranges&&(this.range[1]=ue.range[1])},te.prototype.bless=function(a){if(this.loc){var u=this.loc;a.loc={start:{line:u.start.line,column:u.start.column},end:{line:u.end.line,column:u.end.column}}}this.range&&(a.range=[this.range[0],this.range[1]])};function ce(){D&&$.push(J())}function se(a){D&&$.push(a)}function ke(){this.scopes=[],this.pendingGotos=[]}ke.prototype.isInLoop=function(){for(var a=this.scopes.length;a-- >0;)if(this.scopes[a].isLoop)return!0;return!1},ke.prototype.pushScope=function(a){var u={labels:{},locals:[],deferredGotos:[],isLoop:!!a};this.scopes.push(u)},ke.prototype.popScope=function(){for(var a=0;a<this.pendingGotos.length;++a){var u=this.pendingGotos[a];u.maxDepth>=this.scopes.length&&--u.maxDepth<=0&&re(u.token,Y.labelNotVisible,u.target)}this.scopes.pop()},ke.prototype.addGoto=function(a,u){for(var S=[],G=0;G<this.scopes.length;++G){var W=this.scopes[G];if(S.push(W.locals.length),Object.prototype.hasOwnProperty.call(W.labels,a))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:a,token:u,localCounts:S})},ke.prototype.addLabel=function(a,u){var S=this.currentScope();if(Object.prototype.hasOwnProperty.call(S.labels,a))re(u,Y.labelAlreadyDefined,a,S.labels[a].line);else{for(var G=[],W=0;W<this.pendingGotos.length;++W){var he=this.pendingGotos[W];if(he.maxDepth>=this.scopes.length&&he.target===a){he.localCounts[this.scopes.length-1]<S.locals.length&&S.deferredGotos.push(he);continue}G.push(he)}this.pendingGotos=G}S.labels[a]={localCount:S.locals.length,line:u.line}},ke.prototype.addLocal=function(a,u){this.currentScope().locals.push({name:a,token:u})},ke.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},ke.prototype.raiseDeferredErrors=function(){for(var a=this.currentScope(),u=a.deferredGotos,S=0;S<u.length;++S){var G=u[S];re(G.token,Y.gotoJumpInLocalScope,G.target,a.locals[G.localCounts[this.scopes.length-1]].name)}};function ze(){this.level=0,this.loopLevels=[]}ze.prototype.isInLoop=function(){return!!this.loopLevels.length},ze.prototype.pushScope=function(a){++this.level,a&&this.loopLevels.push(this.level)},ze.prototype.popScope=function(){var a=this.loopLevels,u=a.length;u&&a[u-1]===this.level&&a.pop(),--this.level},ze.prototype.addGoto=ze.prototype.addLabel=function(){throw new Error("This should never happen")},ze.prototype.addLocal=ze.prototype.raiseDeferredErrors=function(){};function ve(){return me.labels?new ke:new ze}function qe(){X(),ce(),O.scope&&U();var a=ve();a.allowVararg=!0,a.pushScope();var u=Re(a);return a.popScope(),O.scope&&M(),F!==q.type&&xe(q),D&&!u.length&&(ue=q),ae(de.chunk(u))}function Re(a){for(var u=[],S;!nt(q);){if(q.value==="return"||!me.relaxedBreak&&q.value==="break"){u.push(Ue(a));break}S=Ue(a),H(";"),S&&u.push(S)}return u}function Ue(a){if(ce(),Oe===q.type&&H("::"))return $t(a);if(me.emptyStatement&&H(";")){D&&$.pop();return}if(a.raiseDeferredErrors(),$e===q.type)switch(q.value){case"local":return X(),Jt(a);case"if":return X(),jt(a);case"return":return X(),Kt(a);case"function":X();var u=Zt();return Lt(u);case"while":return X(),Wt(a);case"for":return X(),Ht(a);case"repeat":return X(),qt(a);case"break":return X(),a.isInLoop()||re(q,Y.noLoopToBreak,q.value),Ot();case"do":return X(),xt(a);case"goto":return X(),Bt(a)}return me.contextualGoto&&q.type===fe&&q.value==="goto"&&_e.type===fe&&_e.value!=="goto"?(X(),Bt(a)):(D&&$.pop(),Xt(a))}function $t(a){var u=q,S=De();return O.scope&&(P("::"+u.value+"::"),E(S,!0)),ee("::"),a.addLabel(u.value,u),ae(de.labelStatement(S))}function Ot(){return ae(de.breakStatement())}function Bt(a){var u=q.value,S=ue,G=De();return a.addGoto(u,S),ae(de.gotoStatement(G))}function xt(a){O.scope&&U(),a.pushScope();var u=Re(a);return a.popScope(),O.scope&&M(),ee("end"),ae(de.doStatement(u))}function Wt(a){var u=Fe(a);ee("do"),O.scope&&U(),a.pushScope(!0);var S=Re(a);return a.popScope(),O.scope&&M(),ee("end"),ae(de.whileStatement(u,S))}function qt(a){O.scope&&U(),a.pushScope(!0);var u=Re(a);ee("until"),a.raiseDeferredErrors();var S=Fe(a);return a.popScope(),O.scope&&M(),ae(de.repeatStatement(S,u))}function Kt(a){var u=[];if(q.value!=="end"){var S=bt(a);for(S!=null&&u.push(S);H(",");)S=Fe(a),u.push(S);H(";")}return ae(de.returnStatement(u))}function jt(a){var u=[],S,G,W;for(D&&(W=$[$.length-1],$.push(W)),S=Fe(a),ee("then"),O.scope&&U(),a.pushScope(),G=Re(a),a.popScope(),O.scope&&M(),u.push(ae(de.ifClause(S,G))),D&&(W=J());H("elseif");)se(W),S=Fe(a),ee("then"),O.scope&&U(),a.pushScope(),G=Re(a),a.popScope(),O.scope&&M(),u.push(ae(de.elseifClause(S,G))),D&&(W=J());return H("else")&&(D&&(W=new te(ue),$.push(W)),O.scope&&U(),a.pushScope(),G=Re(a),a.popScope(),O.scope&&M(),u.push(ae(de.elseClause(G)))),ee("end"),ae(de.ifStatement(u))}function Ht(a){var u=De(),S;if(O.scope&&(U(),B(u)),H("=")){var G=Fe(a);ee(",");var W=Fe(a),he=H(",")?Fe(a):null;return ee("do"),a.pushScope(!0),S=Re(a),a.popScope(),ee("end"),O.scope&&M(),ae(de.forNumericStatement(u,G,W,he,S))}else{for(var be=[u];H(",");)u=De(),O.scope&&B(u),be.push(u);ee("in");var Me=[];do{var Vt=Fe(a);Me.push(Vt)}while(H(","));return ee("do"),a.pushScope(!0),S=Re(a),a.popScope(),ee("end"),O.scope&&M(),ae(de.forGenericStatement(be,Me,S))}}function Jt(a){var u,S=ue;if(fe===q.type){var G=[],W=[];do u=De(),G.push(u),a.addLocal(u.name,S);while(H(","));if(H("="))do{var he=Fe(a);W.push(he)}while(H(","));if(O.scope)for(var be=0,Me=G.length;be<Me;++be)B(G[be]);return ae(de.localStatement(G,W))}if(H("function"))return u=De(),a.addLocal(u.name,S),O.scope&&(B(u),U()),Lt(u,!0);we("<name>",q)}function Xt(a){var u,S,G,W,he,be=[];D&&(S=J());do{if(D&&(u=J()),fe===q.type)he=q.value,W=De(),O.scope&&E(W,N(he)),G=!0;else if(q.value==="(")X(),W=Fe(a),ee(")"),G=!1;else return xe(q);e:for(;;){switch(Ne===q.type?'"':q.value){case".":case"[":G=!0;break;case":":case"(":case"{":case'"':G=null;break;default:break e}W=It(W,u,a)}if(be.push(W),q.value!==",")break;if(!G)return xe(q);X()}while(!0);if(be.length===1&&G===null)return se(u),ae(de.callStatement(be[0]));if(!G)return xe(q);ee("=");var Me=[];do Me.push(Fe(a));while(H(","));return se(S),ae(de.assignmentStatement(be,Me))}function De(){ce();var a=q.value;return fe!==q.type&&we("<name>",q),X(),ae(de.identifier(a))}function Lt(a,u){var S=ve();S.pushScope();var G=[];if(ee("("),!H(")"))for(;;){if(fe===q.type){var W=De();if(O.scope&&B(W),G.push(W),H(","))continue}else et===q.type?(S.allowVararg=!0,G.push(Et(S))):we("<name> or '...'",q);ee(")");break}var he=Re(S);return S.popScope(),ee("end"),O.scope&&M(),u=u||!1,ae(de.functionStatement(a,G,u,he))}function Zt(){var a,u,S;for(D&&(S=J()),a=De(),O.scope&&(E(a,N(a.name)),U());H(".");)se(S),u=De(),a=ae(de.memberExpression(a,".",u));return H(":")&&(se(S),u=De(),a=ae(de.memberExpression(a,":",u)),O.scope&&P("self")),a}function Gt(a){for(var u=[],S,G;;){if(ce(),Oe===q.type&&H("["))S=Fe(a),ee("]"),ee("="),G=Fe(a),u.push(ae(de.tableKey(S,G)));else if(fe===q.type)_e.value==="="?(S=De(),X(),G=Fe(a),u.push(ae(de.tableKeyString(S,G)))):(G=Fe(a),u.push(ae(de.tableValue(G))));else{if((G=bt(a))==null){$.pop();break}u.push(ae(de.tableValue(G)))}if(",;".indexOf(q.value)>=0){X();continue}break}return ee("}"),ae(de.tableConstructorExpression(u))}function bt(a){var u=Ct(0,a);return u}function Fe(a){var u=bt(a);if(u==null)we("<expression>",q);else return u}function Qt(a){var u=a.charCodeAt(0),S=a.length;if(S===1)switch(u){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(S===2)switch(u){case 47:return 10;case 46:return 8;case 60:case 62:return a==="<<"||a===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(u===97&&a==="and")return 2;return 0}function Ct(a,u){var S=q.value,G,W;if(D&&(W=J()),Tt(q)){ce(),X();var he=Ct(10,u);he==null&&we("<expression>",q),G=ae(de.unaryExpression(S,he))}if(G==null&&(G=Et(u),G==null&&(G=Yt(u))),G==null)return null;for(var be;S=q.value,be=Oe===q.type||$e===q.type?Qt(S):0,!(be===0||be<=a);){(S==="^"||S==="..")&&--be,X();var Me=Ct(be,u);Me==null&&we("<expression>",q),D&&$.push(W),G=ae(de.binaryExpression(S,G,Me))}return G}function It(a,u,S){var G,W;if(Oe===q.type)switch(q.value){case"[":return se(u),X(),G=Fe(S),ee("]"),ae(de.indexExpression(a,G));case".":return se(u),X(),W=De(),ae(de.memberExpression(a,".",W));case":":return se(u),X(),W=De(),a=ae(de.memberExpression(a,":",W)),se(u),wt(a,S);case"(":case"{":return se(u),wt(a,S)}else if(Ne===q.type)return se(u),wt(a,S);return null}function Yt(a){var u,S,G;if(D&&(G=J()),fe===q.type)S=q.value,u=De(),O.scope&&E(u,N(S));else if(H("("))u=Fe(a),ee(")");else return null;for(;;){var W=It(u,G,a);if(W===null)break;u=W}return u}function wt(a,u){if(Oe===q.type)switch(q.value){case"(":me.emptyStatement||q.line!==ue.line&&re(null,Y.ambiguousSyntax,q.value),X();var S=[],G=bt(u);for(G!=null&&S.push(G);H(",");)G=Fe(u),S.push(G);return ee(")"),ae(de.callExpression(a,S));case"{":ce(),X();var W=Gt(u);return ae(de.tableCallExpression(a,W))}else if(Ne===q.type)return ae(de.stringCallExpression(a,Et(u)));we("function arguments",q)}function Et(a){var u=Ne|He|ye|Je|et,S=q.value,G=q.type,W;if(D&&(W=J()),G===et&&!a.allowVararg&&re(q,Y.cannotUseVararg,q.value),G&u){se(W);var he=k.slice(q.range[0],q.range[1]);return X(),ae(de.literal(G,S,he))}else{if($e===G&&S==="function")return se(W),X(),O.scope&&U(),Lt(null);if(H("{"))return se(W),Gt(a)}}pe.parse=en;var Ut={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function en(a,u){if(typeof u>"u"&&typeof a=="object"&&(u=a,a=void 0),u||(u={}),k=a||"",O=ut({},ne,u),b=0,y=1,p=0,Ce=k.length,je=[[]],Ze=0,e=[],$=[],!Object.prototype.hasOwnProperty.call(Ut,O.luaVersion))throw new Error(rt("Lua version '%1' not supported",O.luaVersion));if(me=ut({},Ut[O.luaVersion]),O.extendedIdentifiers!==void 0&&(me.extendedIdentifiers=!!O.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(Ke,O.encodingMode))throw new Error(rt("Encoding mode '%1' not supported",O.encodingMode));return Te=Ke[O.encodingMode],O.comments&&(x=[]),O.wait?pe:zt()}pe.write=Pt;function Pt(a){return k+=String(a),Ce=k.length,pe}pe.end=zt;function zt(a){typeof a<"u"&&Pt(a),k&&k.substr(0,2)==="#!"&&(k=k.replace(/^.*/,function(S){return S.replace(/./g," ")})),Ce=k.length,D=O.locations||O.ranges,_e=_();var u=qe();if(O.comments&&(u.comments=x),O.scope&&(u.globals=e),$.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return u}})})(St,St.exports);var dn=St.exports;const st=tn(dn);var kt={},Rt={exports:{}};Rt.exports;(function(ot){function h(x){for(var V=0,y=x.length;y--;)V+=x.charCodeAt(y),V+=V<<10,V^=V>>6;return V+=V<<3,V^=V>>11,V+=V<<15,V}const pe=console.log,k=function(x,V){if(!x)throw V};function O(x,V){if(!x)return 0;var y=x.toString().split(".");return y.length>1?parseInt(y[0],V)+parseInt(y[1],V)/Math.pow(V,y[1].length):parseInt(y[0],V)}let Ce=[" ",`
`,"	","\r"],me={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const Te=new Proxy(me,{get(x,V){return O(V)}});let ne=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ge=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Ye=["0","1","2","3","4","5","6","7","8","9"],ct=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],Ke=["0","1"],F=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Ne=["~","=",">","<"],$e=["+","-","*","/","^","..","%","//"],fe=["+=","-=","*=","/=","^=","..=","%=","//="],He=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],Oe=["else","elseif","until","end"],ye=["-","not","#","~"],Je=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],et=11,Y={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function de(x){let V=0,y=x.length,p=[];function _(n){return n=n||0,V<=y?x.substr(V+n,1):""}function L(){if(V<=y){let n=x.substr(V,1);return V++,n}else return""}function l(n){let i=0,s=1,d=1;for(;i<=V;)x.substr(i,1)==`
`?(s++,d=1):d++;let w;for(w=0;w<p.length;w++){let Q=p[w];pe(`${Q.Type}<${Q.Source}>`)}throw`file<${s}:${d}>: ${n}`}function r(n){for(;;){let i=L();if(i=="")l("Unfinished long string.");else if(i=="]"){let s=!0,d;for(d=1;d<=n;d++)if(_()=="=")V++;else{s=!1;break}if(s&&L()=="]")return}}}function o(){let n=V;for(;_()=="=";)V++;if(_()=="[")return V++,V-n-1;V=n}let c=0,g=0;function C(n){let i=x.substr(g,V-g),s=null;n=="Number"&&(i.substr(0,2).toLowerCase()=="0x"?(s="hex",parseInt(i,16)<999999999999&&(i=parseInt(i,16))):i.substr(0,2).toLowerCase()=="0b"&&(s="bin",parseInt(i.substr(2),2)<999999999999&&(i=parseInt(i.substr(2),2))));let d={Type:n,LeadingWhite:x.substr(c,g-c),Source:i};return s!==null&&(d.NType=s),p.push(d),c=V,g=V,d}for(;;){for(c=V;;){let i=_();if(i=="")break;if(i=="-")if(_(1)=="-")if(V+=2,_()=="["){V++;let s=o();if(s!=null)r(s),c=V;else for(;;){let d=L();if(d==""||d==`
`)break}}else for(;;){let s=L();if(s==""||s==`
`)break}else break;else if(Ce.includes(i))V++;else break}x.substr(c,V-c),g=V;let n=L();if(n==""){C("Eof");break}else if(n=="'"||n=='"'){for(;;){let i=L();if(i=="\\"){let s=L();if(Te[s]==null)throw`Invalid Escape Sequence \`${s}\`.`}else{if(i==n)break;if(i=="")throw"Unfinished string!"}}C("String")}else if(n=="`"){for(;;){let i=L();if(i=="\\"){let s=L();if(Te[s]==null)throw`Invalid Escape Sequence \`${s}\`.`}else{if(i==n)break;if(i=="")throw"Unfinished string!"}}C("Hash")}else if(ne.includes(n)){for(;Ge.includes(_());)V++;He.includes(x.substr(g,V-g))?C("Keyword"):C("Ident")}else if(Ye.includes(n)||n=="."&&Ye.includes(_())){if(n=="0"&&_().toLowerCase()=="x")for(V++;ct.includes(_())||_()==="_";)V++;else if(n=="0"&&_().toLowerCase()=="b")for(V++;Ke.includes(_())||_()==="_";)V++;else{for(;Ye.includes(_())||_()==="_";)V++;if(_()==".")for(V++;Ye.includes(_());)V++;if(_()=="e"||_()=="E")for(V++,(_()=="-"||_()=="+")&&V++;Ye.includes(_());)V++}C("Number")}else if(n=="["){let i=o();i!=null?(r(i),C("String")):C("Symbol")}else if(n==".")_()=="."&&(L(),(_()=="."||_()=="=")&&L()),C("Symbol");else if(n+_()=="//")L(),_()=="="&&L(),C("Symbol");else if(n+_()=="::")L(),C("Symbol");else if(Je.includes(n+_()))L(),C("Symbol");else if(Ne.includes(n))_()=="="&&V++,C("Symbol");else if($e.includes(n)&&_()=="=")L(),C("Symbol");else if(F.includes(n))C("Symbol");else throw`Bad symbol \`${n}\` in source. ${V}`}return p}function ae(x){let V=de(x),y=0;function p(){let M=V[y];return y<V.length&&y++,M}function _(M){return M=y+(M||0),V[M]||V[V.length-1]}function L(M){let P=1,B=0,E=0;for(;;){let N=V[E],$;N==M?$=N.LeadingWhite:$=N.LeadingWhite+N.Source;let D;for(D=0;D<=$.length;D++)$.substr(D,1)==`
`?(P++,B=0):B++;if(N==M)break;E++}return`${P}:${B+1}`}function l(){let M=_();return`<${M.Type} \`${M.Source}\`> at: ${L(M)}`}function r(){let M=_();return M.Type=="Eof"||M.Type=="Keyword"&&Oe.includes(M.Source)}function o(){return ye.includes(_().Source)||!1}function c(){return Je.includes(_().Source)||!1}function g(M,P){let B=_();if(B.Type==M&&(P==null||B.Source==P))return p();{let E;for(E=-3;E<=3;E++)pe(`Tokens[${E}] = \`${_(E).Source}\``);throw P?`${L(B)}: \`${P}\` expected.`:`${L(B)}: ${M} expected.`}}function C(M){let P=M.GetFirstToken,B=M.GetLastToken,E=M;return M.GetFirstToken=function(){let N=P(E);return k(N),N},M.GetLastToken=function(){let N=B(E);return k(N),N},M}let n,i;function s(M,P){let B=[i(M,P)],E=[];for(;_().Source==",";)E.push(p()),B.push(i(M,P));return[B,E]}function d(M,P){var E,N,$,D;let B=_();if(B.Source=="("){let J=p(),te=i(M,P),ce=g("Symbol",")"),se;return se=C({Type:"ParenExpr",Expression:te,Token_OpenParen:J,Token_CloseParen:ce,GetFirstToken:()=>se.Token_OpenParen,GetLastToken:()=>se.Token_CloseParen}),se}else if(B.Type=="Ident"){let J;return J=C({Type:"VariableExpr",Token:p(),GetFirstToken:()=>J.Token,GetLastToken:()=>J.Token}),M[J.Token.Source]!=null&&((N=(E=M[J.Token.Source])==null?void 0:E.Tokens)==null?void 0:N.push)!=null?(M[J.Token.Source].Tokens.push(J.Token),M[J.Token.Source].UseCountIncrease()):P[J.Token.Source]!=null&&((D=($=P[J.Token.Source])==null?void 0:$.Tokens)==null?void 0:D.push)!=null&&(P[J.Token.Source].Tokens.push(J.Token),P[J.Token.Source].UseCountIncrease()),J}else throw pe(l()),`${L(B)}: Unexpected symbol. ${B.Type} ${B.Source}`}function w(M,P){let B=g("Symbol","{"),E=[],N=[];for(;_().Source!="}";){if(_().Source=="["){let J=p(),te=i(M,P),ce=g("Symbol","]"),se=g("Symbol","="),ke=i(M,P);te.Token&&te.Token.Source,E.push({EntryType:"Index",Index:te,Value:ke,Token_OpenBracket:J,Token_CloseBracket:ce,Token_Equals:se})}else if(_().Type=="Ident"&&_(1).Source=="="){let J=p(),te=p(),ce=i(M,P);E.push({EntryType:"Field",Field:J,Value:ce,Token_Equals:te})}else{let J=i(M,P);E.push({EntryType:"Value",Value:J})}if(_().Source==","||_().Source==";")N.push(p());else break}let $=g("Symbol","}"),D;return D=C({Type:"TableLiteral",EntryList:E,Token_SeperatorList:N,Token_OpenBrace:B,Token_CloseBrace:$,GetFirstToken:()=>D.Token_OpenBrace,GetLastToken:()=>D.Token_CloseBrace}),D}function Q(M,P){let B=[],E=[];if(_().Type=="Ident"){let N=p();if(P&&_().Source=="<"&&_(2).Source==">"){let $=_(1).Source;N.Attribute={LeadingWhite:_().LeadingWhite,Source:`<${$}>`},p(),p(),p()}B.push(N)}else if(_().Source=="..."&&M)return[B,E,p()];for(;_().Source==",";){if(E.push(p()),_().Source=="..."&&M)return[B,E,p()];{let N=g("Ident");if(P&&_().Source=="<"&&_(2).Source==">"){let $=_(1).Source;N.Attribute={LeadingWhite:_().LeadingWhite,Source:`<${$}>`},p(),p(),p()}B.push(N)}}return[B,E]}function ge(M,P,B){let E=n(P,B),N=_();if(N.Type=="Keyword"&&N.Source==M)return p(),[E,N];throw pe(N.Type,N.Source),`${L(N)}: ${M} expected.`}function Se(M,P,B,E){let N=p(),$,D;if(!M){$=[],D=[];let Re=g("Ident");for($.push(Re);_().Source==".";)D.push(p()),$.push(g("Ident"));_().Source==":"&&(D.push(p()),$.push(g("Ident")))}let J=g("Symbol","("),[te,ce,se]=Q(!0),ke=g("Symbol",")"),[ze,ve]=ge("end",P,B),qe;return qe=C({Type:M==!0?"FunctionLiteral":"FunctionStat",NameChain:$,ArgList:te,Body:ze,Token_Function:N,Token_NameChainSeperator:D,Token_OpenParen:J,Token_Varg:se,Token_ArgCommaList:ce,Token_CloseParen:ke,Token_End:ve,GetFirstToken:()=>qe.Token_Function,GetLastToken:()=>qe.Token_End}),qe}function Ee(M,P){let B=_();if(B.Source=="("){let E=p(),N=[],$=[];for(;_().Source!=")"&&(N.push(i(M,P)),_().Source==",");)$.push(p());let D=g("Symbol",")"),J;return J=C({CallType:"ArgCall",ArgList:N,Token_CommaList:$,Token_OpenParen:E,Token_CloseParen:D,GetFirstToken:()=>J.Token_OpenParen,GetLastToken:()=>J.Token_CloseParen}),J}else if(B.Source=="{"){let E;return E=C({CallType:"TableCall",TableExpr:i(M,P),GetFirstToken:()=>E.TableExpr.GetFirstToken(),GetLastToken:()=>E.TableExpr.GetLastToken()}),E}else if(B.Type=="String"){let E;return E=C({CallType:"StringCall",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else throw"Function arguments expected."}function X(M,P){let B=d(M,P);for(k(B,"nil prefixexpr");;){let E=_();if(E.Source=="."){let N=p(),$=g("Ident"),D;D=C({Type:"FieldExpr",Base:B,Field:$,Token_Dot:N,GetFirstToken:()=>D.Base.GetFirstToken(),GetLastToken:()=>D.Field}),B=D}else if(E.Source==":"){let N=p(),$=g("Ident"),D=Ee(M,P),J;J=C({Type:"MethodExpr",Base:B,Method:$,FunctionArguments:D,Token_Colon:N,GetFirstToken:()=>J.Base.GetFirstToken(),GetLastToken:()=>J.FunctionArguments.GetLastToken()}),B=J}else if(E.Source=="["){let N=p(),$=i(M,P),D=g("Symbol","]"),J;J=C({Type:"IndexExpr",Base:B,Index:$,Token_OpenBracket:N,Token_CloseBracket:D,GetFirstToken:()=>J.Base.GetFirstToken(),GetLastToken:()=>J.Token_CloseBracket}),B=J}else if(E.Source=="{"||E.Source=="("||E.Type=="String"){let N;N=C({Type:"CallExpr",Base:B,FunctionArguments:Ee(M,P),GetFirstToken:()=>N.Base.GetFirstToken(),GetLastToken:()=>N.FunctionArguments.GetLastToken()}),B=N}else if(fe.includes(E.Source)){let N=p(),$=i(M,P),D;D=C({Type:"CompoundStat",Base:B,Token_Compound:N,Rhs:$,Lhs:B,GetFirstToken:()=>D.Base.GetFirstToken(),GetLastToken:()=>D.Rhs.GetLastToken()}),B=D}else return B}}function H(M,P){let B=_();if(B.Type=="Number"){let E;return E=C({Type:"NumberLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Type=="String"){let E;return E=C({Type:"StringLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Type=="Hash"){let E;return E=C({Type:"HashLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="nil"){let E;return E=C({Type:"NilLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="true"||B.Source=="false"){let E;return E=C({Type:"BooleanLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="..."){let E;return E=C({Type:"VargLiteral",Token:p(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else return B.Source=="{"?w(M,P):B.Source=="function"?Se(!0,M,P):X(M,P)}function ee(M,P,B){let E;if(o()){let N=p(),$=ee(et,P,B),D;D=C({Type:"UnopExpr",Token_Op:N,Rhs:$,GetFirstToken:()=>D.Token_Op,GetLastToken:()=>D.Rhs.GetLastToken()}),E=D}else E=H(P,B),k(E,"nil sipleexpr");for(;c()&&Y[_().Source]!=null&&Y[_().Source][0]>M;){let N=p(),$=ee(Y[N.Source][1],P,B);k($,"RhsNeeded");let D;D=C({Type:"BinopExpr",Lhs:E,Rhs:$,Token_Op:N,GetFirstToken:()=>D.Lhs.GetFirstToken(),GetLastToken:()=>D.Rhs.GetLastToken()}),E=D}return E}i=(M,P)=>ee(0,M,P);function Pe(M,P){let B=X(M,P);if(B.Type=="MethodExpr"||B.Type=="CallExpr"){let E;return E=C({Type:"CallExprStat",Expression:B,GetFirstToken:()=>E.Expression.GetFirstToken(),GetLastToken:()=>E.Expression.GetLastToken()}),E}else{if(B.Type=="CompoundStat")return B;{let E=[B],N=[];for(;_().Source==",";){N.push(p());let ce=X(M,P);if(ce.Type=="MethodExpr"||ce.Type=="CallExpr")throw"Bad left hand side of asignment";E.push(ce)}let $=g("Symbol","="),D=[i(M,P)],J=[];for(;_().Source==",";)J.push(p()),D.push(i(M,P));let te;return te=C({Type:"AssignmentStat",Rhs:D,Lhs:E,Token_Equals:$,Token_LhsSeperatorList:N,Token_RhsSeperatorList:J,GetFirstToken:()=>te.Lhs[0].GetFirstToken(),GetLastToken:()=>te.Rhs[te.Rhs.length-1].GetLastToken()}),te}}}function Ie(M,P){let B=p(),E=i(M,P),N=g("Keyword","then"),$=n(M,P),D=[];for(;_().Source=="elseif"||_().Source=="else";){let ce=p(),se,ke;ce.Source=="elseif"&&(se=i(M,P),ke=g("Keyword","then"));let ze=n(M,P);if(D.push({Condition:se,Body:ze,ClauseType:ce.Source,Token:ce,Token_Then:ke}),ce.Source=="else")break}let J=g("Keyword","end"),te;return te=C({Type:"IfStat",Condition:E,Body:$,ElseClauseList:D,Token_If:B,Token_Then:N,Token_End:J,GetFirstToken:()=>te.Token_If,GetLastToken:()=>te.Token_End}),te}function Z(M,P){let B=p(),[E,N]=ge("end",M,P),$;return $=C({Type:"DoStat",Body:E,Token_Do:B,Token_End:N,GetFirstToken:()=>$.Token_Do,GetLastToken:()=>$.Token_End}),$}function We(M,P){let B=p(),E=i(M,P),N=g("Keyword","do"),[$,D]=ge("end",M,P),J;return J=C({Type:"WhileStat",Condition:E,Body:$,Token_While:B,Token_Do:N,Token_End:D,GetFirstToken:()=>J.Token_While,GetLastToken:()=>J.Token_End}),J}function vt(M,P){let B=p(),[E,N]=Q();if(_().Source=="="){let $=p(),[D,J]=s(M,P);if(D.length<2||D.length>3)throw"Expected 2 or 3 values for range bounds";let te=g("Keyword","do"),[ce,se]=ge("end",M,P),ke;return ke=C({Type:"NumericForStat",VarList:E,RangeList:D,Body:ce,Token_For:B,Token_VarCommaList:N,Token_Equals:$,Token_RangeCommaList:J,Token_Do:te,Token_End:se,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}else if(_().Source=="in"){let $=p(),[D,J]=s(M,P),te=g("Keyword","do"),[ce,se]=ge("end",M,P),ke;return ke=C({Type:"GenericForStat",VarList:E,GeneratorList:D,Body:ce,Token_For:B,Token_VarCommaList:N,Token_In:$,Token_GeneratorCommaList:J,Token_Do:te,Token_End:se,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}}function pt(M,P){let B=p(),[E,N]=ge("until",M),$=i(M,P),D;return D=C({Type:"RepeatStat",Body:E,Condition:$,Token_Repeat:B,Token_Until:N,GetFirstToken:()=>D.Token_Repeat,GetLastToken:()=>D.Condition.GetLastToken()}),D}function ht(M,P){let B=p();if(_().Source=="function"){let E=Se(!1,M,P);if(E.NameChain.length>1)throw L(E.Token_NameChainSeperator[0])+": `(` expected.";let N;return N=C({Type:"LocalFunctionStat",FunctionStat:E,Token_Local:B,GetFirstToken:()=>N.Token_Local,GetLastToken:()=>N.FunctionStat.GetLastToken()}),N}else if(_().Type=="Ident"){let[E,N]=Q(!1,!0),$=[],D=[],J;if(_().Source=="="){J=p();let[ce,se]=s(M,P);$=ce,D=se}let te;return te=C({Type:"LocalVarStat",VarList:E,ExprList:$,Token_Local:B,Token_Equals:J,Token_VarCommaList:N,Token_ExprCommaList:D,GetFirstToken:()=>te.Token_Local,GetLastToken:function(){return te.ExprList.length>0?te.ExprList[te.ExprList.length-1].GetLastToken():te.VarList[te.VarList.length-1]}}),te}else throw"`function` or ident expected"}function Tt(M,P){let B=p(),E,N;r()||_().Source==";"?(E=[],N=[]):[E,N]=s(M,P);let $;return $={Type:"ReturnStat",ExprList:E,Token_Return:B,Token_CommaList:N,GetFirstToken:()=>$.Token_Return,GetLastToken:function(){return $.ExprList.length>0?$.ExprList[$.ExprList.length-1].GetLastToken():$.Token_Return}},$}function nt(M,P){let B=p(),E;return E={Type:"BreakStat",Token_Break:B,GetFirstToken:()=>E.Token_Break,GetLastToken:()=>E.Token_Break},E}function je(M,P){let B=p(),E;return E={Type:"ContinueStat",Token_Continue:B,GetFirstToken:()=>E.Token_Continue,GetLastToken:()=>E.Token_Continue},E}function Ze(){let M=p(),P;_().Type=="Keyword"?P=g("Keyword"):P=g("Ident");let B;return B={Type:"GotoStat",Token_Goto:M,Token_Label:P,GetFirstToken:()=>B.Token_Goto,GetLastToken:()=>B.Token_Label},B}function e(){let M=p(),P;_().Type=="Keyword"?P=g("Keyword"):P=g("Ident");let B=g("Symbol","::"),E;return E={Type:"LabelStat",Token_ColonsLeft:M,Token_Label:P,Token_ColonsRight:B,GetFirstToken:()=>E.Token_ColonsLeft,GetLastToken:()=>E.Token_ColonsRight},E}function U(M,P){let B=_();return B.Source=="if"?[!1,Ie(M,P)]:B.Source=="while"?[!1,We(M,P)]:B.Source=="do"?[!1,Z(M,P)]:B.Source=="for"?[!1,vt(M,P)]:B.Source=="repeat"?[!1,pt(M,P)]:B.Source=="function"?[!1,Se(!1,M,P)]:B.Source=="local"?[!1,ht(M,P)]:B.Source=="return"?[!0,Tt(M,P)]:B.Source=="break"?[!0,nt()]:B.Source=="continue"?[!0,je()]:B.Source=="goto"?[!1,Ze()]:B.Source=="::"?[!1,e()]:[!1,Pe(M,P)]}return n=function(M,P){let B=[],E=[],N={},$={};if(P!=null)for(let[ce,se]of Object.entries(P))$[ce]=se;if(M!=null)for(let[ce,se]of Object.entries(M))$[ce]=se;let D,J=0;for(;!r();){D&&D==_()&&pe(`INFINITE LOOP POSSIBLE ON STATEMENT ${D.Source} :`,D),D=_();let[ce,se]=U(N,$);if(se)switch(B.push(se),se.Type){case"LocalVarStat":se.VarList.forEach(ve=>{ve.UseCount=0,ve.Number=J++,N[ve.Source]=ve;let qe=[];function Re(){ve.UseCount++,qe.forEach(Ue=>{Ue.UseCount=ve.UseCount})}ve.Tokens={},ve.Tokens.push=Ue=>{Ue.UseCountIncrease=Re,Ue.UseCount=ve.UseCount,Ue.Tokens=ve.Tokens,qe.push(Ue)},ve.Tokens.get=()=>qe,ve.UseCountIncrease=Re});break;case"LocalFunctionStat":let ze=se.FunctionStat.NameChain;if(ze.length===1){let Re=function(){ve.UseCount++,qe.forEach(Ue=>{Ue.UseCount=ve.UseCount})},ve=ze[0];ve.UseCount=0,ve.Number=J++,N[ve.Source]=ve;let qe=[];ve.Tokens={},ve.Tokens.push=Ue=>{Ue.UseCountIncrease=Re,Ue.UseCount=ve.UseCount,Ue.Tokens=ve.Tokens,qe.push(Ue)},ve.Tokens.get=()=>qe,ve.UseCountIncrease=Re}break}let ke=_();ke.Type=="Symbol"&&ke.Source==";"&&(E[B.length-1]=p())}let te;return te={Type:"StatList",StatementList:B,SemicolonList:E,GetFirstToken:function(){var ce;if(te.StatementList.length!=0)return(ce=te.StatementList[0])==null?void 0:ce.GetFirstToken()},GetLastToken:function(){if(te.StatementList.length!=0)return te.SemicolonList[te.StatementList.length-1]?te.SemicolonList[te.StatementList.length-1]:te.StatementList[te.StatementList.length-1].GetLastToken()}},te},n([],[])}function Xe(x,V){let y={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},p={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[_,L]of Object.entries(V))if(!p[_]&&!y[_])throw`Invalid visitor target: \`${_}\``;function l(g){if(g!=null){let C=V[g.Type];if(typeof C=="function")return C(g);if(C&&C.Pre)return C.Pre(g)}}function r(g){let C=V[g.Type];if(C&&typeof C=="object"&&C.Post)return C.Post(g)}let o,c;o=function(g){if(!l(g)){if(g.Type=="BinopExpr")o(g.Lhs),o(g.Rhs);else if(g.Type=="UnopExpr")o(g.Rhs);else if(!(g.Type=="NumberLiteral"||g.Type=="StringLiteral"||g.Type=="NilLiteral"||g.Type=="BooleanLiteral"||g.Type=="VargLiteral"||g.Type=="HashLiteral")){if(g.Type=="FieldExpr")o(g.Base);else if(g.Type=="IndexExpr")o(g.Base),o(g.Index);else if(g.Type=="MethodExpr"||g.Type=="CallExpr")o(g.Base),g.FunctionArguments.CallType=="ArgCall"?g.FunctionArguments.ArgList.forEach((C,n)=>{o(C)}):g.FunctionArguments.CallType=="TableCall"&&o(g.FunctionArguments.TableExpr);else if(g.Type=="FunctionLiteral")c(g.Body);else if(g.Type!="VariableExpr")if(g.Type=="ParenExpr")o(g.Expression);else if(g.Type=="TableLiteral")g.EntryList.forEach((C,n)=>{if(C.EntryType=="Field")o(C.Value);else if(C.EntryType=="Index")o(C.Index),o(C.Value);else if(C.EntryType=="Value")o(C.Value);else throw"unreachable"});else if(g.Type=="CompoundStat")o(g.Lhs),o(g.Rhs);else throw`unreachable, type: ${g.Type}: ${g}`}r(g)}},c=function(g){if(!l(g)){if(g.Type=="StatList")g.StatementList.forEach((C,n)=>{if(C!=null){if(C===null||C.Type===null)return;C.Remove=()=>{g.StatementList[n]=null},c(C)}});else if(g.Type!="BreakStat"){if(g.Type!="ContinueStat"){if(g.Type!="GotoStat"){if(g.Type!="LabelStat")if(g.Type=="ReturnStat")g.ExprList.forEach((C,n)=>{o(C)});else if(g.Type=="LocalVarStat")g.Token_Equals&&g.ExprList.forEach((C,n)=>{o(C)});else if(g.Type=="LocalFunctionStat")c(g.FunctionStat.Body);else if(g.Type=="FunctionStat")c(g.Body);else if(g.Type=="RepeatStat")c(g.Body),o(g.Condition);else if(g.Type=="GenericForStat")g.GeneratorList.forEach((C,n)=>{o(C)}),c(g.Body);else if(g.Type=="NumericForStat")g.RangeList.forEach((C,n)=>{o(C)}),c(g.Body);else if(g.Type=="WhileStat")o(g.Condition),c(g.Body);else if(g.Type=="DoStat")c(g.Body);else if(g.Type=="IfStat")o(g.Condition),c(g.Body),g.ElseClauseList.forEach(C=>{C.Condition!=null&&o(C.Condition),c(C.Body)});else if(g.Type=="CallExprStat")o(g.Expression);else if(g.Type=="CompoundStat")o(g.Lhs),o(g.Rhs);else if(g.Type=="AssignmentStat")g.Lhs.forEach(C=>{o(C)}),g.Rhs.forEach(C=>{o(C)});else throw"unreachable"}}}r(g)}},p[x.Type]?c(x):o(x)}function it(x){let V=[],y,p=0;function _(){return p++,p}function L(){y={ParentScope:y,ChildScopeList:[],VariableList:[],BeginLocation:_(),Depth:null,GetVar:null},y.ParentScope?(y.Depth=y.ParentScope.Depth+1,y.ParentScope.ChildScopeList.push(y)):y.Depth=1;let i=y;y.GetVar=function(s){for(const d of i.VariableList)if(d.Name==s)return d;if(i.ParentScope)return i.ParentScope.GetVar(s);for(const d of V)if(d.Name==s)return d}}function l(){let i=y;return i.EndLocation=_(),i.VariableList.forEach(s=>{s.ScopeEndLocation=i.EndLocation}),y=i.ParentScope,i}L();function r(i,s,d){k(d,"MIssing localInfo"),k(i,"Missing local var name");let w={Type:"Local",Name:i,RenameList:[s],AssignedTo:!1,Info:d,Scope:y,BeginLocation:_(),EndLocation:_(),ReferenceLocationList:[_()]};return w.Rename=function(Q){w.Name=Q,w.RenameList.forEach(ge=>{ge(Q)})},y.VariableList.push(w),w}function o(i){for(const d of V)if(d.Name==i)return d;let s={Type:"Global",Name:i,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:_(),EndLocation:_(),ReferenceLocationList:[]};return s.Rename=function(d){s.Name=d,s.RenameList.forEach(w=>{w(d)})},V.push(s),s}function c(i,s){k(i,"Missing var name");let d=o(i);return d.RenameList.push(s),d}function g(i,s){let d;for(d=i.VariableList.length-1;d>=0;d--)if(i.VariableList[d].Name==s)return i.VariableList[d];if(i.ParentScope){let w=g(i.ParentScope,s);if(w)return w}}function C(i,s){k(i,"Missing var name");let d=g(y,i);d?d.RenameList.push(s):d=c(i,s);let w=_();return d.EndLocation=w,d.ReferenceLocationList.push(d.EndLocation),d}let n={};return n.FunctionLiteral={Pre:function(i){L(),i.ArgList.forEach((s,d)=>{let w=r(s.Source,function(Q,ge){ge||(s.Source=Q)},{Type:"Argument",Index:d});s.var=w})},Post:function(i){l()}},n.VariableExpr=function(i){i.Variable=C(i.Token.Source,function(s){i.Token.Source=s})},n.StatList={Pre:function(i){L()},Post:function(i){i.SkipPop||l()}},n.LocalVarStat={Post:function(i){i.VarList.forEach((s,d)=>{r(s.Source,function(w){i.VarList[d].Source=w},{Type:"Local"})})}},n.LocalFunctionStat={Pre:function(i){r(i.FunctionStat.NameChain[0].Source,function(s){i.FunctionStat.NameChain[0].Source=s},{Type:"LocalFunction"}),L(),i.FunctionStat.ArgList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"Argument",Index:d})})},Post:function(){l()}},n.FunctionStat={Pre:function(i){let s=i.NameChain,d;s.length==1?g(y,s[0].Source)?d=C(s[0].Source,function(w){s[0].Source=w}):d=c(s[0].Source,function(w){s[0].Source=w}):d=C(s[0].Source,function(w){s[0].Source=w}),d.AssignedTo=!0,L(),i.ArgList.forEach((w,Q)=>{r(w.Source,function(ge){w.Source=ge},{Type:"Argument",Index:Q})})},Post:function(){l()}},n.GenericForStat={Pre:function(i){return i.GeneratorList.forEach(s=>{Xe(s,n)}),L(),i.VarList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"ForRange",Index:d})}),Xe(i.Body,n),l(),!0}},n.NumericForStat={Pre:function(i){return i.RangeList.forEach(s=>{Xe(s,n)}),L(),i.VarList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"ForRange",Index:d})}),Xe(i.Body,n),l(),!0}},n.RepeatStat={Pre:function(i){i.Body.SkipPop=!0},Post:function(i){l()}},n.AssignmentStat={Post:function(i){i.Lhs.forEach(s=>{s.Variable!=null&&(s.Variable.AssignedTo=!0)})}},Xe(x,n),[V,l()]}function gt(x){let V,y,p="",_=l=>typeof(l==null?void 0:l.LeadingWhite)!="string"?" ":l.LeadingWhite;function L(l){if(l.LeadingWhite==null||l.Source==null)throw`Bad token: tk=${l} | lwhite=${l.LeadingWhite} | source=${l.Source}`;p=`${p}${l.LeadingWhite}${l.Source}`}return y=function(l){if(l.Type=="BinopExpr")y(l.Lhs),L(l.Token_Op),y(l.Rhs);else if(l.Type=="UnopExpr")L(l.Token_Op),y(l.Rhs);else if(l.Type=="NumberLiteral"||l.Type=="StringLiteral"||l.Type=="NilLiteral"||l.Type=="BooleanLiteral"||l.Type=="VargLiteral"||l.Type=="HashLiteral")L(l.Token);else if(l.Type=="FieldExpr")y(l.Base),L(l.Token_Dot),L(l.Field);else if(l.Type=="IndexExpr")y(l.Base),L(l.Token_OpenBracket),y(l.Index),L(l.Token_CloseBracket);else if(l.Type=="MethodExpr"||l.Type=="CallExpr")y(l.Base),l.Type=="MethodExpr"&&(L(l.Token_Colon),L(l.Method)),l.FunctionArguments.CallType=="StringCall"?L(l.FunctionArguments.Token):l.FunctionArguments.CallType=="ArgCall"?(L(l.FunctionArguments.Token_OpenParen),l.FunctionArguments.ArgList.forEach((r,o)=>{y(r);let c=l.FunctionArguments.Token_CommaList[o];c!=null&&L(c)}),L(l.FunctionArguments.Token_CloseParen)):l.FunctionArguments.CallType=="TableCall"&&y(l.FunctionArguments.TableExpr);else if(l.Type=="FunctionLiteral")L(l.Token_Function),L(l.Token_OpenParen),l.ArgList.forEach((r,o)=>{L(r);let c=l.Token_ArgCommaList[o];c!=null&&L(c)}),l.Token_Varg!=null&&L(l.Token_Varg),L(l.Token_CloseParen),V(l.Body),L(l.Token_End);else if(l.Type=="VariableExpr")L(l.Token);else if(l.Type=="ParenExpr")L(l.Token_OpenParen),y(l.Expression),L(l.Token_CloseParen);else if(l.Type=="TableLiteral")L(l.Token_OpenBrace),l.EntryList.forEach((r,o)=>{if(r.EntryType=="Field")L(r.Field),L(r.Token_Equals),y(r.Value);else if(r.EntryType=="Index")L(r.Token_OpenBracket),y(r.Index),L(r.Token_CloseBracket),L(r.Token_Equals),y(r.Value);else if(r.EntryType=="Value")y(r.Value);else throw"unreachable";let c=l.Token_SeperatorList[o];c!=null&&L(c)}),L(l.Token_CloseBrace);else if(l.Type=="CompoundStat")V(l);else throw`unreachable, type: ${l.Type}: ${l}`},V=function(l){if(l==null)throw`STAT IS NIL! ${l}`;if(!(l.Type==="StatList"&&l.StatementList.length===0)){if(l.WrapInDo){let r=_(l.GetFirstToken());l.GetFirstToken().LeadingWhite="",p+=`${r}do `}l.Type=="StatList"?l.StatementList.forEach((r,o)=>{r===null||r.Type===null||(r.Remove=()=>{l.StatementList[o]=null},V(r),l.SemicolonList[o]&&L(l.SemicolonList[o]))}):l.Type=="BreakStat"?L(l.Token_Break):l.Type=="ContinueStat"?L(l.Token_Continue):l.Type=="GotoStat"?(L(l.Token_Goto),L(l.Token_Label)):l.Type=="LabelStat"?(L(l.Token_ColonsLeft),L(l.Token_Label),L(l.Token_ColonsRight)):l.Type=="ReturnStat"?(L(l.Token_Return),l.ExprList.forEach((r,o)=>{y(r),l.Token_CommaList[o]&&L(l.Token_CommaList[o])})):l.Type=="LocalVarStat"?(L(l.Token_Local),l.VarList.forEach((r,o)=>{L(r),r.Attribute!=null&&L(r.Attribute);let c=l.Token_VarCommaList[o];c!=null&&L(c)}),l.Token_Equals!=null&&(L(l.Token_Equals),l.ExprList.forEach((r,o)=>{y(r);let c=l.Token_ExprCommaList[o];c!=null&&L(c)}))):l.Type=="LocalFunctionStat"?(L(l.Token_Local),L(l.FunctionStat.Token_Function),L(l.FunctionStat.NameChain[0]),L(l.FunctionStat.Token_OpenParen),l.FunctionStat.ArgList.forEach((r,o)=>{L(r);let c=l.FunctionStat.Token_ArgCommaList[o];c!=null&&L(c)}),l.FunctionStat.Token_Varg&&L(l.FunctionStat.Token_Varg),L(l.FunctionStat.Token_CloseParen),V(l.FunctionStat.Body),L(l.FunctionStat.Token_End)):l.Type=="FunctionStat"?(L(l.Token_Function),l.NameChain.forEach((r,o)=>{L(r);let c=l.Token_NameChainSeperator[o];c!=null&&L(c)}),L(l.Token_OpenParen),l.ArgList.forEach((r,o)=>{L(r);let c=l.Token_ArgCommaList[o];c!=null&&L(c)}),l.Token_Varg&&L(l.Token_Varg),L(l.Token_CloseParen),V(l.Body),L(l.Token_End)):l.Type=="RepeatStat"?(L(l.Token_Repeat),V(l.Body),L(l.Token_Until),y(l.Condition)):l.Type=="GenericForStat"?(L(l.Token_For),l.VarList.forEach((r,o)=>{L(r);let c=l.Token_VarCommaList[o];c!=null&&L(c)}),L(l.Token_In),l.GeneratorList.forEach((r,o)=>{y(r);let c=l.Token_GeneratorCommaList[o];c!=null&&L(c)}),L(l.Token_Do),V(l.Body),L(l.Token_End)):l.Type=="NumericForStat"?(L(l.Token_For),l.VarList.forEach((r,o)=>{L(r);let c=l.Token_VarCommaList[o];c!=null&&L(c)}),L(l.Token_Equals),l.RangeList.forEach((r,o)=>{y(r);let c=l.Token_RangeCommaList[o];c!=null&&L(c)}),L(l.Token_Do),V(l.Body),L(l.Token_End)):l.Type=="WhileStat"?(L(l.Token_While),y(l.Condition),L(l.Token_Do),V(l.Body),L(l.Token_End)):l.Type=="DoStat"?(L(l.Token_Do),V(l.Body),L(l.Token_End)):l.Type=="IfStat"?(L(l.Token_If),y(l.Condition),L(l.Token_Then),V(l.Body),l.ElseClauseList.forEach(r=>{L(r.Token),r.Condition!=null&&(y(r.Condition),L(r.Token_Then)),V(r.Body)}),L(l.Token_End)):l.Type=="CallExprStat"?y(l.Expression):l.Type=="CompoundStat"?(y(l.Lhs),L(l.Token_Compound),y(l.Rhs),l.Type="CompoundStat"):l.Type=="AssignmentStat"?(l.Lhs.forEach((r,o)=>{y(r);let c=l.Token_LhsSeperatorList[o];c!=null&&L(c)}),L(l.Token_Equals),l.Rhs.forEach((r,o)=>{y(r);let c=l.Token_RhsSeperatorList[o];c!=null&&L(c)})):k(!1,"unreachable"),l.WrapInDo&&(p+=" end ")}},V(x),p}function rt(x){let V,y,p=0;function _(n){if(n===void 0)return;let i=`
${"	".repeat(p)}`;if(n.LeadingWhite==""||n.LeadingWhite.substr(-i.length,i.length)!=i){let s="",d;for(d=n.LeadingWhite.length;d>=0;d--){let w=n.LeadingWhite.substr(d,1);if(!(w==""||w.match(/\s/g))){s=n.LeadingWhite.substr(0,d+1);break}}n.LeadingWhite=`${s}${i}`}}function L(){p++}function l(){p--,k(p>=0,"Undented too far")}function r(n){return n.LeadingWhite.length>0?n.LeadingWhite.substr(0,1):n.Source.toString().substr(0,1)}function o(n){n.LeadingWhite=n.LeadingWhite.trim()}function c(n){o(n),Ce.includes(r(n))||(n.LeadingWhite=" "+n.LeadingWhite)}function g(n){c(n.GetFirstToken())}function C(n,i,s){L(),V(i),l(),_(s)}y=function(n){if(n.Type=="BinopExpr")y(n.Lhs),y(n.Rhs),g(n.Rhs),c(n.Token_Op);else if(n.Type=="UnopExpr")o(n.Token_Op),y(n.Rhs),n.Token_Op.Source[0]&&c(n.Rhs.GetFirstToken());else if(n.Type=="NumberLiteral"||n.Type=="StringLiteral"||n.Type=="NilLiteral"||n.Type=="BooleanLiteral"||n.Type=="VargLiteral"||n.Type=="HashLiteral")o(n.Token),n.Type=="HashLiteral"&&(n.Token.Source='"'+h(`${n.Token.Source.substring(1,n.Token.Source.length-1)}`)+'"',n.Type="StringLiteral",n.Token.Type="String");else if(n.Type=="FieldExpr")y(n.Base);else if(n.Type=="IndexExpr")y(n.Base),y(n.Index);else if(n.Type=="MethodExpr"||n.Type=="CallExpr")y(n.Base),o(n.FunctionArguments.GetFirstToken()),o(n.FunctionArguments.GetLastToken()),n.Type=="MethodExpr",n.FunctionArguments.CallType=="StringCall"||(n.FunctionArguments.CallType=="ArgCall"?n.FunctionArguments.ArgList.forEach((i,s)=>{y(i),s>0&&g(i);let d=n.FunctionArguments.Token_CommaList[s];d!=null&&o(d)}):n.FunctionArguments.CallType=="TableCall"&&y(n.FunctionArguments.TableExpr));else if(n.Type=="FunctionLiteral")n.ArgList.forEach((i,s)=>{s>0&&c(i),n.Token_ArgCommaList[s]}),n.ArgList.length>0&&n.Token_Varg!=null&&c(n.Token_Varg),C(n.Token_CloseParen,n.Body,n.Token_End);else if(n.Type!="VariableExpr")if(n.Type=="ParenExpr")o(n.Token_OpenParen),o(n.Token_CloseParen),y(n.Expression);else if(n.Type=="TableLiteral"){if(n.EntryList.length!=0){L();let i=100;n.EntryList.forEach((s,d)=>{s.EntryType=="Field"?(n.EntryList.length>i?ut(s.Value):_(s.Field),c(s.Token_Equals),y(s.Value),g(s.Value)):s.EntryType=="Index"?(n.EntryList.length>i?o(s.Token_OpenBracket):_(s.Token_OpenBracket),y(s.Index),c(s.Token_Equals),y(s.Value),g(s.Value)):s.EntryType=="Value"?(y(s.Value),n.EntryList.length>i?ut(s.Value):_(s.Value.GetFirstToken())):k(!1,"unreachable");let w=n.Token_SeperatorList[d];w!=null&&(n.EntryList.length>i?w.LeadingWhite="":o(w))}),l(),n.EntryList.length>i?n.Token_CloseBrace.LeadingWhite="":_(n.Token_CloseBrace)}}else if(n.Type=="CompoundStat")V(n);else throw pe(n),`unreachable, type: ${n.Type}:`+n},V=function(n){if(n.Type=="StatList")n.StatementList.forEach((i,s)=>{i===null||i.Type===null||i.Type==="StatList"&&i.StatementList.length===0||(i.Remove=()=>{i.StatementList[s]=null},V(i),_(i.GetFirstToken()))});else if(n.Type!="BreakStat"){if(n.Type!="ContinueStat"){if(n.Type!="GotoStat"){if(n.Type!="LabelStat")if(n.Type=="ReturnStat")n.ExprList.forEach((i,s)=>{y(i),g(i),n.Token_CommaList[s]});else if(n.Type=="LocalVarStat"){if(n.VarList.forEach((i,s)=>{c(i),i.Attribute&&(i.Attribute.LeadingWhite=" "),n.Token_VarCommaList[s]}),n.Token_Equals){o(n.Token_Equals),c(n.Token_Equals);let i=[],s=[];n.ExprList.forEach((d,w)=>{d!=null&&(w<n.VarList.length||d.Type=="CallExpr"||d.Type=="ParenExpr"||d.Type=="VargLiteral"||d.Type=="BinopExpr"||d.Type=="UnopExpr")&&(i.push(d),s.push(n.Token_ExprCommaList[w]))}),n.ExprList=i,n.CommaList=s,n.ExprList.forEach((d,w)=>{d!=null&&(y(d),g(d),n.Token_ExprCommaList[w]!=null&&n.ExprList.length-1==w&&(n.Token_ExprCommaList[w]=null))})}}else if(n.Type=="LocalFunctionStat")c(n.FunctionStat.Token_Function),c(n.FunctionStat.NameChain[0]),n.FunctionStat.ArgList.forEach((i,s)=>{s>0?c(i):o(i);let d=n.FunctionStat.Token_ArgCommaList[s];d&&o(d)}),n.FunctionStat.ArgList.length>0&&n.FunctionStat.Token_Varg?(o(n.FunctionStat.Token_Varg),c(n.FunctionStat.Token_Varg)):n.FunctionStat.Token_Varg&&o(n.FunctionStat.Token_Varg),o(n.FunctionStat.Token_OpenParen),o(n.FunctionStat.Token_CloseParen),C(n.FunctionStat.Token_CloseParen,n.FunctionStat.Body,n.FunctionStat.Token_End);else if(n.Type=="FunctionStat")n.NameChain.forEach((i,s)=>{s==0&&c(i),n.Token_NameChainSeperator[s]}),n.ArgList.forEach((i,s)=>{s>0&&c(i),n.Token_ArgCommaList[s]}),n.ArgList.length>0&&n.Token_Varg&&c(n.Token_Varg),C(n.Token_CloseParen,n.Body,n.Token_End);else if(n.Type=="RepeatStat")C(n.Token_Repeat,n.Body,n.Token_Until),y(n.Condition),g(n.Condition);else if(n.Type=="GenericForStat")n.VarList.forEach((i,s)=>{c(i),n.Token_VarCommaList[s]}),c(n.Token_In),n.GeneratorList.forEach((i,s)=>{y(i),g(i),n.Token_GeneratorCommaList[s]}),c(n.Token_Do),C(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="NumericForStat")n.VarList.forEach((i,s)=>{c(i),n.Token_VarCommaList[s]}),c(n.Token_Equals),n.RangeList.forEach((i,s)=>{y(i),g(i),n.Token_RangeCommaList[s]}),c(n.Token_Do),C(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="WhileStat")y(n.Condition),g(n.Condition),c(n.Token_Do),C(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="DoStat")C(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="IfStat"){y(n.Condition),g(n.Condition),c(n.Token_Then);let i=n.Token_Then,s=n.Body;n.ElseClauseList.forEach(d=>{C(i,s,d.Token),i=d.Token,d.Condition!=null&&(y(d.Condition),g(d.Condition),c(d.Token_Then),i=d.Token_Then),s=d.Body}),C(i,s,n.Token_End)}else n.Type=="CallExprStat"?y(n.Expression):n.Type=="CompoundStat"?(y(n.Lhs),y(n.Rhs),g(n.Lhs),g(n.Rhs),c(n.Token_Compound)):n.Type=="AssignmentStat"?(n.Lhs.forEach((i,s)=>{y(i),s>0&&g(i),n.Token_LhsSeperatorList[s]}),c(n.Token_Equals),n.Rhs.forEach((i,s)=>{y(i),g(i),n.Token_RhsSeperatorList[s]})):k(!1,"Unreachable")}}}},V(x)}function ut(x){let V,y;function p(l){l&&(l.LeadingWhite="")}function _(l,r,o=!1){p(r);let c=(typeof l.Source=="string"?l.Source:l.Source.toString()).substr(l.Source.length-1,1),g=(typeof r.Source=="string"?r.Source:r.Source.toString()).substr(0,1);c=="-"&&g=="-"||Ge.includes(c)&&Ge.includes(g)||o&&c==")"&&g=="("?r.LeadingWhite=o?";":" ":r.LeadingWhite=""}function L(l,r,o){V(r),p(o);let c=r.GetFirstToken(),g=r.GetLastToken();c!=null?(_(l,c),_(g,o)):_(l,o)}y=function(l){if(l.Type==="BinopExpr")y(l.Lhs),y(l.Rhs),l.Lhs.Type=="NumberLiteral"&&l.Token_Op.Source==".."?l.Token_Op.LeadingWhite=" ":(p(l.Token_Op),_(l.Lhs.GetLastToken(),l.Token_Op)),_(l.Token_Op,l.Rhs.GetFirstToken());else if(l.Type==="UnopExpr")p(l.Token_Op),y(l.Rhs),_(l.Token_Op,l.Rhs.GetFirstToken());else if(l.Type==="NumberLiteral"||l.Type==="StringLiteral"||l.Type==="NilLiteral"||l.Type==="BooleanLiteral"||l.Type==="VargLiteral"||l.Type==="HashLiteral")p(l.Token);else if(l.Type=="FieldExpr")y(l.Base),p(l.Token_Dot),p(l.Field);else if(l.Type=="IndexExpr")y(l.Base),p(l.Token_OpenBracket),y(l.Index),p(l.Token_CloseBracket);else if(l.Type=="MethodExpr"||l.Type=="CallExpr")y(l.Base),l.Type=="MethodExpr"&&(p(l.Token_Colon),p(l.Method)),l.FunctionArguments.CallType=="StringCall"?p(l.FunctionArguments.Token):l.FunctionArguments.CallType=="ArgCall"?(p(l.FunctionArguments.Token_OpenParen),l.FunctionArguments.ArgList.forEach((r,o)=>{y(r);let c=l.FunctionArguments.Token_CommaList[o];c!=null&&p(c)}),p(l.FunctionArguments.Token_CloseParen)):l.FunctionArguments.CallType=="TableCall"&&y(l.FunctionArguments.TableExpr);else if(l.Type=="FunctionLiteral")p(l.Token_Function),p(l.Token_OpenParen),l.ArgList.forEach((r,o)=>{p(r);let c=l.Token_ArgCommaList[o];c!=null&&p(c)}),l.Token_Varg!=null&&p(l.Token_Varg),p(l.Token_CloseParen),L(l.Token_CloseParen,l.Body,l.Token_End);else if(l.Type=="VariableExpr")p(l.Token);else if(l.Type=="ParenExpr")p(l.Token_OpenParen),y(l.Expression),p(l.Token_CloseParen);else if(l.Type=="TableLiteral")p(l.Token_OpenBrace),l.EntryList.forEach((r,o)=>{r.EntryType=="Field"?(p(r.Field),p(r.Token_Equals),y(r.Value)):r.EntryType=="Index"?(p(r.Token_OpenBracket),y(r.Index),p(r.Token_CloseBracket),p(r.Token_Equals),y(r.Value)):r.EntryType=="Value"?y(r.Value):k(!1,"unreachable");let c=l.Token_SeperatorList[o];c!=null&&p(c)}),l.Token_SeperatorList[l.EntryList.length-1]=null,p(l.Token_CloseBrace);else throw`unreachable, type: ${l.Type}:${l}  undefined`},V=function(l){if(l.Type=="StatList"){let r;for(r=0;r<=l.StatementList.length;r++){let o=l.StatementList[r];if(o==null)continue;V(o),p(o.GetFirstToken());let c=l.StatementList[r-1];if(c!=null){let g={")":["(","["],"]":["(","["]};if(l.SemicolonList[r-1]){let C=c.GetLastToken().Source,n=o.GetFirstToken().Source;(g[C]===null||g[C]===void 0||!g[C].includes(n))&&(l.SemicolonList[r-1]=null)}l.SemicolonList[r-1]||_(c.GetLastToken(),o.GetFirstToken(),!0)}}l.SemicolonList[l.StatementList.length-1]=null,l.StatementList.length>0&&p(l.StatementList[0].GetFirstToken())}else if(l.Type=="BreakStat")p(l.Token_Break);else if(l.Type=="ContinueStat")p(l.Token_Continue);else if(l.Type=="GotoStat")p(l.Token_Goto),_(l.Token_Goto,l.Token_Label);else if(l.Type=="LabelStat")p(l.Token_ColonsLeft),p(l.Token_Label),p(l.Token_ColonsRight);else if(l.Type=="ReturnStat")p(l.Token_Return),l.ExprList.forEach((r,o)=>{y(r),l.Token_CommaList[o]!=null&&p(l.Token_CommaList[o])}),l.ExprList.length>0&&_(l.Token_Return,l.ExprList[0].GetFirstToken());else if(l.Type=="LocalVarStat"){p(l.Token_Local);let r=!1;l.VarList.forEach((o,c)=>{c==0?_(l.Token_Local,o):p(o),o.Attribute&&(p(o.Attribute),c+1==l.VarList.length&&(r=!0));let g=l.Token_VarCommaList[c];g!=null&&p(g)}),l.Token_Equals!=null&&(r||p(l.Token_Equals),l.ExprList.forEach((o,c)=>{y(o);let g=l.Token_ExprCommaList[c];g!=null&&p(g)}))}else if(l.Type=="LocalFunctionStat")p(l.Token_Local),_(l.Token_Local,l.FunctionStat.Token_Function),_(l.FunctionStat.Token_Function,l.FunctionStat.NameChain[0]),_(l.FunctionStat.NameChain[0],l.FunctionStat.Token_OpenParen),l.FunctionStat.ArgList.forEach((r,o)=>{p(r);let c=l.FunctionStat.Token_ArgCommaList[o];c!=null&&p(c)}),l.FunctionStat.Token_Varg&&p(l.FunctionStat.Token_Varg),p(l.FunctionStat.Token_CloseParen),L(l.FunctionStat.Token_CloseParen,l.FunctionStat.Body,l.FunctionStat.Token_End);else if(l.Type=="FunctionStat")p(l.Token_Function),l.NameChain.forEach((r,o)=>{o==0?_(l.Token_Function,r):p(r);let c=l.Token_NameChainSeperator[o];c!=null&&p(c)}),p(l.Token_OpenParen),l.ArgList.forEach((r,o)=>{p(r);let c=l.Token_ArgCommaList[o];c!=null&&p(c)}),l.Token_Varg&&p(l.Token_Varg),p(l.Token_CloseParen),L(l.Token_CloseParen,l.Body,l.Token_End);else if(l.Type=="RepeatStat")p(l.Token_Repeat),L(l.Token_Repeat,l.Body,l.Token_Until),y(l.Condition),_(l.Token_Until,l.Condition.GetFirstToken());else if(l.Type=="GenericForStat")p(l.Token_For),l.VarList.forEach((r,o)=>{o==0?_(l.Token_For,r):p(r);let c=l.Token_VarCommaList[o];c!=null&&p(c)}),_(l.VarList[l.VarList.length-1],l.Token_In),l.GeneratorList.forEach((r,o)=>{y(r),o==0&&_(l.Token_In,r.GetFirstToken());let c=l.Token_GeneratorCommaList[o];c!=null&&p(c)}),_(l.GeneratorList[l.GeneratorList.length-1].GetLastToken(),l.Token_Do),L(l.Token_Do,l.Body,l.Token_End);else if(l.Type=="NumericForStat")p(l.Token_For),l.VarList.forEach((r,o)=>{o==0?_(l.Token_For,r):p(r);let c=l.Token_VarCommaList[o];c!=null&&p(c)}),_(l.VarList[l.VarList.length-1],l.Token_Equals),l.RangeList.forEach((r,o)=>{y(r),o==0&&_(l.Token_Equals,r.GetFirstToken());let c=l.Token_RangeCommaList[o];c!=null&&p(c)}),_(l.RangeList[l.RangeList.length-1].GetLastToken(),l.Token_Do),L(l.Token_Do,l.Body,l.Token_End);else if(l.Type=="WhileStat")p(l.Token_While),y(l.Condition),p(l.Token_Do),_(l.Token_While,l.Condition.GetFirstToken()),_(l.Condition.GetLastToken(),l.Token_Do),L(l.Token_Do,l.Body,l.Token_End);else if(l.Type=="DoStat")p(l.Token_Do),p(l.Token_End),L(l.Token_Do,l.Body,l.Token_End);else if(l.Type=="IfStat"){p(l.Token_If),y(l.Condition),_(l.Token_If,l.Condition.GetFirstToken()),_(l.Condition.GetLastToken(),l.Token_Then);let r=l.Token_Then,o=l.Body;l.ElseClauseList.forEach((c,g)=>{L(r,o,c.Token),r=c.Token,c.Condition!=null&&(y(c.Condition),_(c.Token,c.Condition.GetFirstToken()),_(c.Condition.GetLastToken(),c.Token_Then),r=c.Token_Then),V(c.Body),o=c.Body}),L(r,o,l.Token_End)}else if(l.Type=="CallExprStat")y(l.Expression);else if(l.Type=="CompoundStat")y(l.Lhs),p(l.Token_Compound),y(l.Rhs),_(l.Lhs.GetLastToken(),l.Token_Compound),_(l.Token_Compound,l.Rhs.GetFirstToken());else if(l.Type=="AssignmentStat")l.Lhs.forEach((r,o)=>{y(r);let c=l.Token_LhsSeperatorList[o];c!=null&&p(c)}),p(l.Token_Equals),l.Rhs.forEach((r,o)=>{y(r);let c=l.Token_RhsSeperatorList[o];c!=null&&p(c)});else return y(l)},V(x)}function tt(x){let V,y,p={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function _(n,i,s=null){let d;return d={Type:n,Token:{Type:s??"Number",LeadingWhite:"",Source:i},GetFirstToken:()=>d.Token,GetLastToken:()=>d.Token},d}function L(n,i,s){let d;return d={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:n},Lhs:i,Rhs:s,GetFirstToken:()=>d.Lhs.GetFirstToken(),GetLastToken:()=>d.Rhs.GetLastToken()},d}function l(n,i){let s;return s={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:n},Rhs:i,GetFirstToken:()=>s.Token_Op,GetLastToken:()=>s.Rhs.GetLastToken()},s}function r(n,i){if(i!=null)for(var[s,d]of Object.entries(i))n[s]=d}function o(n){if(n==null||n.substr==null)return;let i=n.substr(0,1),s;if((i=='"'||i=="'")&&(s=n.substr(1,n.length-2)),i=="["){let Q=0,ge=1;for(;n.substr(ge,1)=="=";)Q++,ge++;s=n.substr(2+Q,n.length-4-Q-2)}if(s==null)return"";let d="",w;for(w=0;w<=s.length;w++){let Q=s.substr(w,1);Q=="'"||Q=='"'?d+=`\\${Q}`:d+=Q}return d}function c(n){if(typeof n=="object"&&n.Type=="ParenExpr")return r(n,n.Expression)}function g(n,i,s){let d=i,w=s;if(i&&i.Type=="ParenExpr"&&(d=i.Expression),s&&s.Type=="ParenExpr"&&(w=s.Expression),d==null||w==null||d.Type==null||w.Type==null||d.Type=="VariableExpr"||d.Type=="CallExpr"||d.Type=="BinopExpr"||w.Type=="CallExpr"||w.Type=="BinopExpr"||w.Type=="VariableExpr")return;let Q=d.Token||d.Expression!=null&&d.Expression.Token||null,ge=w.Token||w.Expression!=null&&w.Expression.Token||null,Se=Q!=null?Q.Source:null,Ee=ge!=null?ge.Source:null,X,H;if(d.Type=="BooleanLiteral"&&(X=Se=="true"),w.Type=="BooleanLiteral"&&(H=Ee=="true"),!(d.Type=="NumberLiteral"&&(X=O(Se),X==null))&&!(w.Type=="NumberLiteral"&&(H=O(Ee),H==null))&&((d.Type=="StringLiteral"||d.Type=="HashLiteral")&&(X=Se.toString()),(w.Type=="StringLiteral"||w.Type=="HashLiteral")&&(H=Ee.toString()),X!=null&&H!=null)){if(n=="==")return X==H;if(n=="~=")return X!=H;if(n=="and")return X&&H;if(n=="or")return X||H;if(n==".."&&d.Type=="StringLiteral"&&w.Type=="StringLiteral")return`"${o(Se)+o(Ee)}"`;if(d.Type=="StringLiteral"&&(X=O(o(X))),w.Type=="StringLiteral"&&(H=O(o(H))),X==null||H==null)return;let ee;if(n=="+"&&(ee=X+H),n=="-"&&(ee=X-H),n=="*"&&(ee=X*H),n=="/"&&(ee=X/H),n=="^"&&(ee=X**H),n=="%"&&(ee=X%H),n==">"&&(ee=X>H),n=="<"&&(ee=X<H),n==">="&&(ee=X>=H),n=="<="&&(ee=X<=H),ee==!1||ee==!0||isFinite(ee)&&ee>-(10**6)&&ee<10**6)return ee}}function C(n,i){let s=i.Token||i.Expression||i.EntryList||i;if(s==null||s.Source==null&&i.Type!="TableLiteral"||i.Type=="VariableExpr"||i.Type=="CallExpr"||i.Type=="BinopExpr")return;let d=s.Source,w;if(i.Type=="TableLiteral"&&s!=null){let Q=[],ge=0,Se=!1,Ee=!1,X=0;if(s.forEach((H,ee)=>{if(Se)Q.push(H);else if(H.EntryType=="Value"||H.EntryType=="Index")if((H.Index==null||H.Index.Type=="NumberLiteral")&&H.Value){if((H.Index!=null&&H.Index.Token!=null&&H.Index.Token.Source!==null?H.Index.Token.Source:X+1).toString()!==(++X).toString())return Se=!0,Ee=!0,Q.push(H);H.Value.Type!="CallExpr"?ge++:(Se=!0,Q.push(H))}else Q.push(H)}),Ee)return;if(n=="#")return i.EntryList=Q,i.EntryList.length<=0?_("NumberLiteral",ge!==null?ge:i.EntryList.length):ge<=0?l("#",i):L("+",_("NumberLiteral",ge),l("#",i))}if(i.Type=="BooleanLiteral"&&(w=d=="true"),!(i.Type=="NumberLiteral"&&(w=O(d),w===null))){if(i.Type=="StringLiteral"&&(w=d.substr(1,d.length-2)),n=="not"&&i.Type!==null)return i.Type=="NilLiteral"||i.Type=="BooleanLiteral"&&w===!1;if(w!=null){if(n=="#")return w.length;if(n=="-")return-w}}}y=function(n){if(n.Type=="BinopExpr"){if(y(n.Lhs),y(n.Rhs),n.Lhs!=null&&n.Rhs!=null){let i=n.Token_Op;if(i!=null&&i.Source!=null){let s=g(i.Source,n.Lhs,n.Rhs);if(s!=null){if(typeof s=="boolean"){let d=_("BooleanLiteral",s.toString(),"Keyword");r(n,d);return}else if(typeof s=="number"){if(isFinite(s)==!0){let d=_("NumberLiteral",s.toString(),"Number");r(n,d);return}}else if(typeof s=="string"){let d=_("StringLiteral",s,"String");r(n,d);return}else if(typeof s=="object"){r(n,s);return}return}}if(n.Lhs.Type=="ParenExpr"){let d=n.Lhs.Expression;d.Type=="NumberLiteral"||d.Type=="StringLiteral"||d.Type=="NilLiteral"||d.Type=="BooleanLiteral"||d.Type=="HashLiteral"}if(n.Rhs.Type=="ParenExpr"){let d=n.Rhs.Expression;d.Type=="NumberLiteral"||d.Type=="StringLiteral"||d.Type=="NilLiteral"||d.Type=="BooleanLiteral"||d.Type=="HashLiteral"}}}else if(n.Type=="UnopExpr"){if(y(n.Rhs),n.Rhs!=null&&p[n.Rhs.Type]==!0){let i=n.Token_Op;if(i!=null&&i.Source!=null){let s=n.Rhs.Expression!=null?n.Rhs.Expression:n.Rhs,d=C(i.Source,s);if(d!=null){if(typeof d=="boolean"){let w=_("BooleanLiteral",d.toString(),"Keyword");r(n,w);return}else if(typeof d=="number"){if(isFinite(d)==!0){let w=_("NumberLiteral",d,"Number");r(n,w);return}}else if(typeof d=="string"){let w=_("StringLiteral",d,"String");r(n,w);return}else if(typeof d=="object"){r(n,d);return}return}}}}else if(n.Type=="NumberLiteral"||n.Type=="StringLiteral"||n.Type=="NilLiteral"||n.Type=="BooleanLiteral"||n.Type=="VargLiteral"||n.Type=="HashLiteral"){let i=n.Token;if(i!=null){if(i.Type=="Number"){let s=i.Source.toString().split("e");if(s.length===2){let d=O(s[0]),w=O(s[1]);isFinite(d)&&isFinite(w)&&d**w<999999999&&!i.Source.includes("+")&&i.Source.includes(".")&&!i.Source.includes("-")&&(i.Source=(d**w).toString())}}i.Type=="String"&&(i.Source=i.Source.replace(/\\\d+/gi,s=>{let d=O(s.substr(1,s.length-1));return d&&isFinite(d)&&(d>=97&&d<=122||d>=65&&d<=90||d>=33&&d<=47||d>=58&&d<=64||d>=91&&d<=96||d>=123&&d<=126)&&d!==34&&d!==39&&d!==92?String.fromCharCode(d):s}))}}else if(n.Type=="FieldExpr")y(n.Base);else if(n.Type=="IndexExpr")y(n.Base),y(n.Index);else if(n.Type=="MethodExpr"||n.Type=="CallExpr"){if(y(n.Base),n.FunctionArguments.CallType=="ArgCall"?n.FunctionArguments.ArgList.forEach((i,s)=>{y(i)}):n.FunctionArguments.CallType=="TableCall"&&y(n.FunctionArguments.TableExpr),n.Base.Type==="ParenExpr"&&n.Base.Expression.Type==="FunctionLiteral"&&n.FunctionArguments.CallType==="ArgCall"){let i=n.Base.Expression;n.FunctionArguments.ArgList.forEach((s,d)=>{let w=n.FunctionArguments.ArgList[d];if(w!==void 0&&(w.Type=="NumberLiteral"||w.Type=="StringLiteral"||w.Type=="NilLiteral"||w.Type=="BooleanLiteral"||w.Type=="HashLiteral")){let Q=i.ArgList[d];Q&&Q.var.RenameList.forEach(ge=>{ge(w.Token.Source,!0)})}})}}else if(n.Type=="FunctionLiteral")V(n.Body);else if(n.Type!="VariableExpr")if(n.Type=="ParenExpr"){let i=n.Expression;i!=null&&i.Type=="ParenExpr"&&(n.Expression=i.Expression),y(n.Expression),(n.Type=="NumberLiteral"||n.Type=="StringLiteral"||n.Type=="NilLiteral"||n.Type=="BooleanLiteral"||n.Type=="VargLiteral"||n.Type=="HashLiteral")&&c(n)}else n.Type=="TableLiteral"&&n.EntryList.forEach((i,s)=>{i.EntryType=="Field"?y(i.Value):i.EntryType=="Index"?(y(i.Index),y(i.Value)):i.EntryType=="Value"?y(i.Value):k(!1,"unreachable")})},V=function(n){if(n.Type=="StatList")n.StatementList.forEach((i,s)=>{i===null||i.Type===null||(i.Remove=()=>{n.StatementList[s]=null},V(i))});else if(n.Type!="BreakStat"){if(n.Type!="ContinueStat")if(n.Type=="ReturnStat")n.ExprList.forEach((i,s)=>{y(i)});else if(n.Type=="LocalVarStat")n.Token_Equals!=null&&n.ExprList.forEach((i,s)=>{y(i)});else if(n.Type=="LocalFunctionStat")V(n.FunctionStat.Body),n.FunctionStat.NameChain.length===1&&n.FunctionStat.NameChain[0].UseCount;else if(n.Type=="FunctionStat")V(n.Body);else if(n.Type=="RepeatStat")V(n.Body),y(n.Condition),n.Body.Type=="StatList"&&n.Body.StatementList.length;else if(n.Type=="GenericForStat")n.GeneratorList.forEach((i,s)=>{y(i)}),V(n.Body);else if(n.Type=="NumericForStat"){n.RangeList.forEach((H,ee)=>{y(H)}),V(n.Body);let i=n.RangeList[0],s=n.RangeList[1],d=n.RangeList[2];if(i==null||s==null)return n.Remove();if(c(i),c(s),c(d),i.Type!="NumberLiteral"||s.Type!="NumberLiteral"||d!=null&&d.Type!="NumberLiteral"||d==null)return;let w=O(i.Token.Source),Q=O(s.Token.Source),ge=d!=null&&O(d.Token.Source)||1,Se=ge>0&&w<=Q||ge<0&&w>=Q,Ee=(Q-w+ge)/ge;if(!(Se&&Ee>=0)||n.Body.Type=="StatList"&&n.Body.StatementList.length===0)return n.Remove()}else if(n.Type=="WhileStat"){y(n.Condition),V(n.Body);let i=n.Condition;switch(i.Type){case"ParenExpr":i=i.Expression;case"BooleanLiteral":if(i==null||i.Token==null||i.Token.Source!=="false")break;case"NilLiteral":n.Remove();break}}else if(n.Type=="DoStat"){if(V(n.Body),n.Body===null||n.Body.Type=="StatList"&&n.Body.StatementList.length===0)return n.Remove();if(n.Body.StatementList.length===1){let i=n.Body.StatementList[0];i.Type!=="ContinueStat"&&i.Type!=="BreakStat"&&i.Type!=="ReturnStat"&&r(n,i)}}else if(n.Type=="IfStat"){y(n.Condition),V(n.Body),n.ElseClauseList.forEach((s,d)=>{s.Condition!=null&&y(s.Condition),V(s.Body)});let i=n.Condition;switch(i.Type){case"ParenExpr":i=i.Expression;case"BooleanLiteral":if(n.ElseClauseList.length>=1||i==null||i.Token==null||i.Token.Source!=="false")break;case"NilLiteral":n.Remove();break}}else n.Type=="CallExprStat"?y(n.Expression):n.Type=="CompoundStat"?(y(n.Lhs),y(n.Rhs)):n.Type=="AssignmentStat"&&(n.Lhs.forEach((i,s)=>{y(i)}),n.Rhs.forEach((i,s)=>{y(i)}))}},V(x)}let re=[],A;for(A=97;A<=122;A++)re.push(String.fromCharCode(A));for(A=65;A<=90;A++)re.push(String.fromCharCode(A));for(A=48;A<=57;A++)re.push(String.fromCharCode(A));re.push("_");let we=[];for(A=97;A<=122;A++)we.push(String.fromCharCode(A));for(A=65;A<=90;A++)we.push(String.fromCharCode(A));function xe(x){let V="",y=x%we.length;for(x=(x-y)/we.length,V=`${V}${we[y]}`;x>0;){let p=x%re.length;x=(x-p)/re.length,V=`${V}${re[p]}`}return V}function b(x,V,y){let p=[];for(var[_,L]of Object.entries(He))p[_]=!0;let l=[];x.forEach(C=>{C.AssignedTo&&y?l.push(C):p[C.Name]=!0});function r(C){C.VariableList.forEach(n=>{l.push(n)}),C.ChildScopeList.forEach(n=>{r(n)})}r(V),l.forEach(C=>{C.UsedNameArray=[]}),l.sort((C,n)=>C-n);let o=0,c=[];function g(C){let n=c[C];if(n==null){for(n=xe(o),o++;p[n];)n=xe(o),o++;c[C]=n}return n}l.forEach((C,n)=>{C.Renamed=!0;let i=0;for(;C.UsedNameArray[i];)i++;C.Rename(g(i)),C.Scope?l.forEach(s=>{s.Renamed||(!s.Scope||s.Scope.Depth<C.Scope.Depth?s.ReferenceLocationList.some(d=>d>=C.BeginLocation&&d<=C.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1):s.Scope.Depth>C.Scope.Depth?C.ReferenceLocationList.some(d=>d>=s.BeginLocation&&d<=s.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1):C.BeginLocation<s.EndLocation&&C.EndLocation>s.BeginLocation&&(s.UsedNameArray[i]=!0))}):l.forEach(s=>{if(!s.Renamed)if(s.Type=="Global")s.UsedNameArray[i]=!0;else if(s.Type=="Local")C.ReferenceLocationList.some(d=>d>=s.BeginLocation&&d<=s.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1);else throw"Unreachable"})})}function q(x,V,y){let p=[];x.forEach(o=>{(!o.AssignedTo||!y)&&(p[o.Name]=!0)});let _=1,L=1;function l(o,c){o.Name=c,o.RenameList.forEach(g=>{g(c)})}if(y){let o={};x.forEach(c=>{c.AssignedTo&&!c.ChangedName&&(o[c.Name]=o[c.Name]||`G_${L}_`,c.ChangedName=!0,l(c,o[c.Name]),L++)})}function r(o){o.VariableList.forEach(c=>{let g=`L_${_}_`;c.Info.Type=="Argument"?g=`${g}arg${c.Info.Index}`:c.Info.Type=="LocalFunction"?g=`${g}func`:c.Info.Type=="ForRange"&&(g=`${g}forvar${c.Info.Index}`),l(c,g),_++}),o.ChildScopeList.forEach(c=>{r(c)})}r(V)}let ue=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,_e={};_e.Minify=function(x,V){let y=ae(x),[p,_]=it(y);V.RenameVariables==!0&&b(p,_,V.RenameGlobals),V.SolveMath==!0&&tt(y),ut(y);let L=gt(y);return L=`${ue}

${L}`,L},_e.Beautify=function(x,V){let y=ae(x),[p,_]=it(y);return V.RenameVariables&&q(p,_,V.RenameGlobals),V.SolveMath==!0&&tt(y),rt(y),gt(y)};try{ot!=null&&ot.exports!=null&&(ot.exports.Beautify=_e.Beautify,ot.exports.Minify=_e.Minify)}catch{}})(Rt);var fn=Rt.exports;const At=fn;kt.Beautify=At.Beautify;kt.Minify=At.Minify;kt.Uglify=At.Uglify;const Dt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Nt={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},cn={class:"page-div"},mn={class:"card-header"},gn={class:"el-form-item-msg"},pn={style:{"font-weight":"bolder"}},hn={class:"item-container"},Tn={style:{"font-weight":"bolder"}},yn={class:"item-container"},_n={style:{"font-weight":"bolder"}},vn={class:"item-container"},kn={style:{"font-weight":"bolder"}},bn={class:"item-container"},Vn={style:{"font-weight":"bolder"}},Sn={class:"item-container"},Ln={style:{"font-weight":"bolder"}},Cn={class:"item-container"},wn={style:{"font-weight":"bolder"}},En={class:"item-container"},Fn={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Rn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Gn={class:"item-container"},In={style:{"font-weight":"bolder"}},Un={class:"item-container"},Pn={style:{"font-weight":"bolder"}},zn={class:"item-container"},Dn={style:{"font-weight":"bolder"}},Nn={class:"item-container"},$n={style:{"font-weight":"bolder"}},On={class:"item-container"},xn={style:{"margin-top":"10px"}},Wn={style:{"font-weight":"bolder"}},qn={class:"item-container"},Kn={style:{"font-weight":"bolder"}},jn={class:"item-container"},Hn={style:{"font-weight":"bolder"}},Jn={class:"item-container"},Xn={style:{"font-weight":"bolder"}},Zn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},el={style:{"font-weight":"bolder"}},tl={class:"item-container"},nl={style:{"font-weight":"bolder"}},ll={class:"item-container"},al={style:{"font-weight":"bolder"}},ol={class:"item-container"},il={style:{"font-weight":"bolder"}},rl={class:"item-container"},ul={style:{display:"flex","justify-content":"flex-end"}},sl={class:"card-header"},dl={class:"el-form-item-msg"},fl={class:"card-header"},cl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},pl={class:"item-container"},hl={style:{"font-weight":"bolder"}},Tl={class:"item-container"},yl={style:{"font-weight":"bolder"}},_l={class:"item-container"},vl={style:{"font-weight":"bolder"}},kl={class:"item-container"},bl={style:{"font-weight":"bolder"}},Vl={class:"item-container"},Sl={style:{"font-weight":"bolder"}},Ll={class:"item-container"},Cl={style:{"font-weight":"bolder"}},wl={class:"item-container"},El={style:{"font-weight":"bolder"}},Fl={class:"item-container"},Ml={style:{"font-weight":"bolder"}},Rl={class:"item-container"},Al={style:{"font-weight":"bolder"}},Bl={class:"item-container"},Gl={style:{"font-weight":"bolder"}},Il={class:"item-container"},Ul={style:{"font-weight":"bolder"}},Pl={class:"item-container"},zl={style:{"font-weight":"bolder"}},Dl={class:"item-container"},Nl={style:{"font-weight":"bolder"}},$l={class:"item-container"},Ol={style:{"font-weight":"bolder"}},xl={class:"item-container"},Wl={style:{"font-weight":"bolder"}},ql={class:"item-container"},Kl={style:{"font-weight":"bolder"}},jl={class:"item-container"},Hl={style:{"font-weight":"bolder"}},Jl={class:"item-container"},Xl={style:{"font-weight":"bolder"}},Zl={class:"item-container"},Ql={style:{"font-weight":"bolder"}},Yl={class:"item-container"},ea={style:{"font-weight":"bolder"}},ta={class:"item-container"},na={style:{"font-weight":"bolder"}},la={class:"item-container"},aa={style:{display:"flex","justify-content":"flex-end"}},oa=sn({name:"settingsRoom"}),ia=Object.assign(oa,{setup(ot){const{t:h}=ln();an(async()=>{await y(),await Xe()});const pe=Be(!1),{isMobile:k}=on(),O=rn(),Ce=un(()=>O.isDark),me=Be(),Te=Be(),ne=Be(0),Ge=r=>{V.value?ne.value>r&&(ne.value=r):ne.value>r&&(r===1&&we(),r===2&&xe(),ne.value=r)},Ye=()=>{V.value||(ne.value===2&&we(),ne.value===3&&xe()),ne.value--},ct=async()=>{if(V.value){if(ne.value===0){if(fe.value.groundSetting!==""&&ye.value.caveSetting!==""){await p(!1),ne.value=0,mt("检测到刷新页面，已重置为单节点服务器");return}Ke.value.validate(r=>{r&&(_.value?(we(),ne.value++):(xe(),ne.value++))})}if(ne.value===1&&Ke.value.validate(r=>{if(r)try{st.parse(fe.value.groundSetting),ne.value++}catch{mt(h("setting.luaError"))}}),ne.value===2&&Y.value)try{st.parse(Y.value.modSetting),ne.value++}catch{mt(h("setting.luaError"))}}else if(ne.value===0)Ke.value.validate(r=>{if(r){if(F.value.masterPort===F.value.cavesPort){mt(h("setting.roomBaseFormRules.samePort"));return}we(),ne.value++}});else if(ne.value===1)$e.value.validate(r=>{if(r)try{st.parse(fe.value.groundSetting),xe(),ne.value++}catch{mt(h("setting.luaError"))}});else if(ne.value===2)if(ye.value)try{st.parse(ye.value.caveSetting),ne.value++}catch{mt(h("setting.luaError"))}else ne.value++;else if(ne.value===3)if(Y.value)try{st.parse(Y.value.modSetting),ne.value++}catch{mt(h("setting.luaError"))}else ne.value++},Ke=Be(),F=Be({name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!0,password:"",token:"",masterPort:0,cavesPort:0,shardMasterPort:void 0,steamMasterPort:void 0,steamAuthenticationPort:void 0,shardMasterIp:void 0,clusterKey:void 0}),Ne={name:[{required:!0,message:h("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:h("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:h("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:h("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:h("setting.roomBaseFormRules.token"),trigger:"blur"}]},$e=Be(),fe=Be({groundSetting:""}),He={groundSetting:[{required:!0,message:h("setting.roomGroundFormRules.groundSetting"),trigger:"blur"}]},Oe=Be(),ye=Be({caveSetting:""}),Je={caveSetting:[{required:!0,message:h("setting.roomCaveFormRules.caveSetting"),trigger:"blur"}]},et=Be(),Y=Be({modSetting:""}),de={modSetting:[{required:!0,message:h("setting.roomModFormRules.modSetting"),trigger:"blur"}]},ae=(r,o)=>{r==="master"&&(o==="endless"&&(fe.value.groundSetting=Dt.master),o==="survival"&&(fe.value.groundSetting=Nt.master),we(),V.value&&(F.value.masterPort=11e3,F.value.cavesPort=0,F.value.shardMasterPort=10888,F.value.steamMasterPort=27018,F.value.steamAuthenticationPort=8768,F.value.shardMasterIp="127.0.0.1",F.value.clusterKey=void 0)),r==="caves"&&(o==="endless"&&(ye.value.caveSetting=Dt.caves),o==="survival"&&(ye.value.caveSetting=Nt.caves),xe(),V.value&&(F.value.masterPort=0,F.value.cavesPort=11001,F.value.shardMasterPort=10888,F.value.steamMasterPort=27019,F.value.steamAuthenticationPort=8769,F.value.shardMasterIp=void 0,F.value.clusterKey=void 0))},Xe=()=>{_t.room.get().then(r=>{F.value=r.data.base,fe.value.groundSetting=r.data.ground,ye.value.caveSetting=r.data.cave,Y.value.modSetting=r.data.mod,fe.value.groundSetting===""?_.value=!1:(ye.value.caveSetting,_.value=!0),F.value.masterPort===0&&(F.value.masterPort=11e3),F.value.cavesPort===0&&(F.value.cavesPort=11001)})},it=r=>{switch(r){case"save":gt();break;case"saveAndRestart":rt();break;case"generateNewWorld":ut();break}},gt=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.save.post(r).then(o=>{Mt(o.message),pe.value=!1}).finally(()=>{pe.value=!1})},rt=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.saveAndRestart.post(r).then(o=>{Mt(o.message),pe.value=!1}).finally(()=>{pe.value=!1})},ut=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.saveAndGenerate.post(r).then(o=>{pe.value=!1,Mt(o.message)}).finally(()=>{pe.value=!1})},tt=Be("Code"),re=Be("Code"),A=Be({}),we=()=>{if(fe.value.groundSetting==="")return;const r=st.parse(fe.value.groundSetting),o=b(r);A.value=q(o)},xe=()=>{if(ye.value.caveSetting==="")return;const r=st.parse(ye.value.caveSetting),o=b(r);A.value=q(o)};function b(r){const c=r.body[0].arguments[0];for(const g of c.fields)if(g.key.type==="Identifier"&&g.key.name==="overrides")return g.value;return null}function q(r){const o={};for(const c of r.fields){const g=c.key.name;o[g]=c.value.raw.replace(/"/g,"")}return o}const ue=r=>{const o=r.name,c=r.value,g=st.parse(fe.value.groundSetting),C=b(g);for(let i of C.fields)i.key.name===o&&(i.value.raw=`"${c}"`);const n=x(g);fe.value.groundSetting=kt.Beautify(n,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),me.value&&me.value.refresh()},_e=r=>{const o=r.name,c=r.value,g=st.parse(ye.value.caveSetting),C=b(g);for(let i of C.fields)i.key.name===o&&(i.value.raw=`"${c}"`);const n=x(g);ye.value.caveSetting=kt.Beautify(n,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),Te.value&&Te.value.refresh()},x=(r,o=0)=>{const c="    ".repeat(o);switch(r.type){case"Chunk":return r.body.map(g=>x(g,o)).join(`
`);case"LocalStatement":return`${c}local ${r.variables.map(x).join(", ")} = ${r.init.map(x).join(", ")}`;case"FunctionDeclaration":return`${c}function ${x(r.identifier)}(${r.parameters.map(x).join(", ")}) 
${x(r.body,o+1)}
${c}end`;case"ReturnStatement":return`${c}return ${r.arguments.map(x).join(", ")}`;case"BinaryExpression":return`${x(r.left)} ${r.operator} ${x(r.right)}`;case"CallStatement":return`${c}${x(r.expression)}`;case"Identifier":return r.name;case"StringLiteral":return`${r.raw}`;case"NumericLiteral":return r.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${c}{ ${r.fields.map(g=>x(g,o+1)).join(`,
`+c)} }`;case"Field":return r.key?`${x(r.key)} = ${x(r.value)}`:x(r.value);case"AssignmentStatement":return`${c}${r.variables.map(x).join(", ")} = ${r.init.map(x).join(", ")}`;case"CallExpression":return`${x(r.base)}(${r.arguments.map(x).join(", ")})`;case"TableKeyString":return`${x(r.key)} = ${x(r.value)}`;case"BooleanLiteral":return r.raw;case"TableValue":return x(r.value);default:throw new Error(`Unsupported node type: ${r.type}`)}},V=Be(!1),y=async()=>{await _t.multihost.get().then(r=>{V.value=r.data})},p=r=>{_t.multihost.post({multiHost:!V.value}).then(o=>{V.value=!V.value,r&&L()})},_=Be(!0),L=()=>{fe.value.groundSetting="",ye.value.caveSetting="",F.value.masterPort=void 0,F.value.cavesPort=void 0,F.value.shardMasterPort=void 0,F.value.steamMasterPort=void 0,F.value.steamAuthenticationPort=void 0,_.value?F.value.shardMasterIp="127.0.0.1":F.value.shardMasterIp=void 0,F.value.clusterKey=void 0},l={masterPort:[{required:!0,message:h("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:h("setting.roomWorldFormRules.cavesPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:h("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:h("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:h("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:h("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:h("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]};return(r,o)=>{const c=Le("el-step"),g=Le("el-steps"),C=Le("el-card"),n=Le("el-col"),i=Le("el-row"),s=Le("el-button"),d=Le("el-input"),w=Le("el-form-item"),Q=Le("el-tooltip"),ge=Le("el-input-number"),Se=Le("el-radio"),Ee=Le("el-radio-group"),X=Le("el-switch"),H=Le("el-slider"),ee=Le("el-link"),Pe=Le("el-form"),Ie=Le("el-tab-pane"),Z=Le("el-divider"),We=Le("el-tabs"),vt=Le("el-alert"),pt=Le("el-result"),ht=Le("arrow-down"),Tt=Le("el-icon"),nt=Le("el-dropdown-item"),je=Le("el-dropdown-menu"),Ze=Le("el-dropdown");return v(),z("div",cn,[V.value?Ve("",!0):(v(),z(le,{key:0},[m(i,{gutter:10},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:T(()=>[m(C,{shadow:"never"},{default:T(()=>[m(g,{active:ne.value,"align-center":"","finish-status":"success"},{default:T(()=>[m(c,{title:t(k)?r.$t("setting.roomSettingMobile"):r.$t("setting.roomSetting"),onClick:o[0]||(o[0]=e=>Ge(0))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.groundSettingMobile"):r.$t("setting.groundSetting"),onClick:o[1]||(o[1]=e=>Ge(1))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.caveSettingMobile"):r.$t("setting.caveSetting"),onClick:o[2]||(o[2]=e=>Ge(2))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.modSettingMobile"):r.$t("setting.modSetting"),onClick:o[3]||(o[3]=e=>Ge(3))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.finishSettingMobile"):r.$t("setting.finishSetting"),onClick:o[4]||(o[4]=e=>Ge(4))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),m(i,{gutter:10,style:{"margin-top":"5px"}},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24},{default:T(()=>[ne.value===0?(v(),K(C,{key:0,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:T(()=>[I("div",mn,[I("span",null,R(t(h)("setting.roomSetting")),1),I("div",null,[m(s,{link:"",type:"primary",onClick:o[5]||(o[5]=e=>p(!0))},{default:T(()=>[j(R(t(h)("setting.baseForm.changeMultiHostMode")),1)]),_:1})])])]),default:T(()=>[m(Pe,{ref_key:"roomBaseFormRef",ref:Ke,"label-position":t(k)?"top":"left","label-width":t(k)?"70":"auto",model:F.value,rules:Ne,size:t(k)?"small":"large"},{default:T(()=>[m(w,{label:t(h)("setting.baseForm.room"),prop:"name"},{default:T(()=>[m(d,{modelValue:F.value.name,"onUpdate:modelValue":o[6]||(o[6]=e=>F.value.name=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.description"),prop:"description"},{default:T(()=>[m(d,{modelValue:F.value.description,"onUpdate:modelValue":o[7]||(o[7]=e=>F.value.description=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{prop:"masterPort"},{label:T(()=>[m(Q,{content:t(h)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:T(()=>[j(R(t(h)("setting.baseForm.masterPort")),1)]),_:1},8,["content"])]),default:T(()=>[m(ge,{modelValue:F.value.masterPort,"onUpdate:modelValue":o[8]||(o[8]=e=>F.value.masterPort=e),max:65535,min:1,size:t(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),m(w,{prop:"cavesPort"},{label:T(()=>[m(Q,{content:t(h)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:T(()=>[j(R(t(h)("setting.baseForm.cavesPort")),1)]),_:1},8,["content"])]),default:T(()=>[m(ge,{modelValue:F.value.cavesPort,"onUpdate:modelValue":o[9]||(o[9]=e=>F.value.cavesPort=e),max:65535,min:1,size:t(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),m(w,{label:t(h)("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:T(()=>[m(Ee,{modelValue:F.value.gameMode,"onUpdate:modelValue":o[10]||(o[10]=e=>F.value.gameMode=e)},{default:T(()=>[m(Se,{label:r.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.pvp"),prop:"pvp"},{default:T(()=>[m(X,{modelValue:F.value.pvp,"onUpdate:modelValue":o[11]||(o[11]=e=>F.value.pvp=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.playerNum"),prop:"playerNum"},{default:T(()=>[m(H,{modelValue:F.value.playerNum,"onUpdate:modelValue":o[12]||(o[12]=e=>F.value.playerNum=e),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.backDays"),prop:"backDays"},{default:T(()=>[m(H,{modelValue:F.value.backDays,"onUpdate:modelValue":o[13]||(o[13]=e=>F.value.backDays=e),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.vote"),prop:"vote"},{default:T(()=>[m(X,{modelValue:F.value.vote,"onUpdate:modelValue":o[14]||(o[14]=e=>F.value.vote=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.password")},{default:T(()=>[m(d,{modelValue:F.value.password,"onUpdate:modelValue":o[15]||(o[15]=e=>F.value.password=e),"show-password":"",autocomplete:"new-password"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.token"),prop:"token"},{default:T(()=>[m(d,{modelValue:F.value.token,"onUpdate:modelValue":o[16]||(o[16]=e=>F.value.token=e),"show-password":""},null,8,["modelValue"]),I("div",gn,[m(ee,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:T(()=>[j(R(t(h)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Ve("",!0),ne.value===1?(v(),K(C,{key:1,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[m(We,{modelValue:tt.value,"onUpdate:modelValue":o[20]||(o[20]=e=>tt.value=e)},{default:T(()=>[m(Ie,{label:t(h)("setting.tabCode"),name:"Code"},{default:T(()=>[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:o[17]||(o[17]=e=>ae("master","endless"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.endless")),1)]),_:1})):Ve("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:o[18]||(o[18]=e=>ae("master","survival"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.survival")),1)]),_:1})):Ve("",!0),m(Pe,{ref_key:"roomGroundFormRef",ref:$e,"label-width":t(k)?"70":"100",model:fe.value,rules:He,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(w,{"label-position":"top",prop:"groundSetting"},{default:T(()=>[m(yt,{ref_key:"editorGroundSettingRef",ref:me,modelValue:fe.value.groundSetting,"onUpdate:modelValue":o[19]||(o[19]=e=>fe.value.groundSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&fe.value.groundSetting!==""?(v(),K(Ie,{key:0,label:t(h)("setting.tabVisualization"),name:"Visualization"},{default:T(()=>[m(Z,{"content-position":"center"},{default:T(()=>[I("span",pn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),I("div",hn,[(v(!0),z(le,null,oe(t(Ae).global,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Tn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),I("div",yn,[(v(!0),z(le,null,oe(t(Ae).events,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",_n,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),I("div",vn,[(v(!0),z(le,null,oe(t(Ae).survivors,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",kn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),I("div",bn,[(v(!0),z(le,null,oe(t(Ae).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Vn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),I("div",Sn,[(v(!0),z(le,null,oe(t(Ae).resourceRegrowth,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Ln,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),I("div",Cn,[(v(!0),z(le,null,oe(t(Ae).unnaturalPortalResource,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",wn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),I("div",En,[(v(!0),z(le,null,oe(t(Ae).creatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Fn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),I("div",Mn,[(v(!0),z(le,null,oe(t(Ae).hostileCreatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Rn,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),I("div",An,[(v(!0),z(le,null,oe(t(Ae).giants,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Bn,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),I("div",Gn,[(v(!0),z(le,null,oe(t(lt).global,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",In,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),I("div",Un,[(v(!0),z(le,null,oe(t(lt).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Pn,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),I("div",zn,[(v(!0),z(le,null,oe(t(lt).resources,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Dn,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),I("div",Nn,[(v(!0),z(le,null,oe(t(lt).creaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",$n,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),I("div",On,[(v(!0),z(le,null,oe(t(lt).hostileCreaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))])]),_:1},8,["label"])):Ve("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ve("",!0),ne.value===2?(v(),K(C,{key:2,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[m(We,{modelValue:re.value,"onUpdate:modelValue":o[24]||(o[24]=e=>re.value=e)},{default:T(()=>[m(Ie,{label:t(h)("setting.tabCode"),name:"Code"},{default:T(()=>[m(vt,{closable:!1,effect:Ce.value?"light":"dark",type:"success"},{default:T(()=>[j(R(t(h)("setting.cavesTip")),1)]),_:1},8,["effect"]),I("div",xn,[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:o[21]||(o[21]=e=>ae("caves","endless"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.endless")),1)]),_:1})):Ve("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:o[22]||(o[22]=e=>ae("caves","survival"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.survival")),1)]),_:1})):Ve("",!0)]),m(Pe,{ref_key:"roomCaveFormRef",ref:Oe,"label-width":t(k)?"70":"100",model:ye.value,rules:Je,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(w,{"label-position":"top",prop:"caveSetting"},{default:T(()=>[m(yt,{ref_key:"editorCavesSettingRef",ref:Te,modelValue:ye.value.caveSetting,"onUpdate:modelValue":o[23]||(o[23]=e=>ye.value.caveSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&ye.value.caveSetting!==""?(v(),K(Ie,{key:0,label:t(h)("setting.tabVisualization"),name:"Visualization"},{default:T(()=>[m(Z,{"content-position":"center"},{default:T(()=>[I("span",Wn,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),I("div",qn,[(v(!0),z(le,null,oe(t(at).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Kn,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),I("div",jn,[(v(!0),z(le,null,oe(t(at).resourceRegrowth,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Hn,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),I("div",Jn,[(v(!0),z(le,null,oe(t(at).creatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Xn,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),I("div",Zn,[(v(!0),z(le,null,oe(t(at).hostileCreatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Qn,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),I("div",Yn,[(v(!0),z(le,null,oe(t(at).giants,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",el,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),I("div",tl,[(v(!0),z(le,null,oe(t(dt).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(ft)[e].configs,customConfigsValue:t(ft)[e].customConfigsValue,i18n:t(ft)[e].i18n,image:t(ft)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",nl,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),I("div",ll,[(v(!0),z(le,null,oe(t(dt).resources,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",al,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),I("div",ol,[(v(!0),z(le,null,oe(t(dt).creaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",il,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),I("div",rl,[(v(!0),z(le,null,oe(t(dt).hostileCreaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))])]),_:1},8,["label"])):Ve("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Ve("",!0),ne.value===3?(v(),K(C,{key:3,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[m(Pe,{ref_key:"roomModFormRef",ref:et,"label-width":t(k)?"70":"100",model:Y.value,rules:de,size:t(k)?"small":"large"},{default:T(()=>[m(w,{"label-position":"top",prop:"modSetting"},{default:T(()=>[m(yt,{ref:"editor",modelValue:Y.value.modSetting,"onUpdate:modelValue":o[25]||(o[25]=e=>Y.value.modSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Ve("",!0),ne.value===4?(v(),K(C,{key:4,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[I("div",{style:Qe(t(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[m(pt,{"sub-title":r.$t("setting.finish.description"),title:r.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Ve("",!0)]),_:1})]),_:1}),m(i,{gutter:10},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24},{default:T(()=>[m(C,{shadow:"never"},{default:T(()=>[I("div",ul,[ne.value>0?(v(),K(s,{key:0,onClick:Ye},{default:T(()=>[j(R(t(h)("setting.button.prev")),1)]),_:1})):Ve("",!0),ne.value<4?(v(),K(s,{key:1,type:"primary",onClick:ct},{default:T(()=>[j(R(t(h)("setting.button.next")),1)]),_:1})):Ve("",!0),ne.value===4?(v(),K(Ze,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:it},{dropdown:T(()=>[m(je,null,{default:T(()=>[m(nt,{command:"save"},{default:T(()=>[j(R(t(h)("setting.button.save")),1)]),_:1}),m(nt,{command:"saveAndRestart"},{default:T(()=>[j(R(t(h)("setting.button.saveAndRestart")),1)]),_:1}),m(nt,{command:"generateNewWorld"},{default:T(()=>[j(R(t(h)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:T(()=>[m(s,{loading:pe.value,type:"warning"},{default:T(()=>[j(R(t(h)("setting.button.actions"))+" ",1),m(Tt,{class:"el-icon--right"},{default:T(()=>[m(ht)]),_:1})]),_:1},8,["loading"])]),_:1})):Ve("",!0)])]),_:1})]),_:1})]),_:1})],64)),V.value?(v(),z(le,{key:1},[m(i,{gutter:10},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:T(()=>[m(C,{shadow:"never"},{default:T(()=>[m(g,{active:ne.value,"align-center":"","finish-status":"success"},{default:T(()=>[m(c,{title:t(k)?r.$t("setting.roomSettingMobile"):r.$t("setting.roomSetting"),onClick:o[26]||(o[26]=e=>Ge(0))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.worldSettingMobile"):r.$t("setting.worldSetting"),onClick:o[27]||(o[27]=e=>Ge(1))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.modSettingMobile"):r.$t("setting.modSetting"),onClick:o[28]||(o[28]=e=>Ge(3))},null,8,["title"]),m(c,{title:t(k)?r.$t("setting.finishSettingMobile"):r.$t("setting.finishSetting"),onClick:o[29]||(o[29]=e=>Ge(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),m(i,{gutter:10,style:{"margin-top":"5px"}},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24},{default:T(()=>[ne.value===0?(v(),K(C,{key:0,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:T(()=>[I("div",sl,[I("span",null,R(t(h)("setting.roomSetting")),1),I("div",null,[m(s,{link:"",type:"primary",onClick:o[30]||(o[30]=e=>p(!1))},{default:T(()=>[j(R(t(h)("setting.baseForm.changeSingleHostMode")),1)]),_:1})])])]),default:T(()=>[m(Pe,{ref_key:"roomBaseFormRef",ref:Ke,"label-position":t(k)?"top":"left","label-width":t(k)?"70":"auto",model:F.value,rules:Ne,size:t(k)?"small":"large"},{default:T(()=>[m(w,{label:t(h)("setting.baseForm.room"),prop:"name"},{default:T(()=>[m(d,{modelValue:F.value.name,"onUpdate:modelValue":o[31]||(o[31]=e=>F.value.name=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.description"),prop:"description"},{default:T(()=>[m(d,{modelValue:F.value.description,"onUpdate:modelValue":o[32]||(o[32]=e=>F.value.description=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:T(()=>[m(Ee,{modelValue:F.value.gameMode,"onUpdate:modelValue":o[33]||(o[33]=e=>F.value.gameMode=e)},{default:T(()=>[m(Se,{label:r.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),m(Se,{label:r.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.pvp"),prop:"pvp"},{default:T(()=>[m(X,{modelValue:F.value.pvp,"onUpdate:modelValue":o[34]||(o[34]=e=>F.value.pvp=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.playerNum"),prop:"playerNum"},{default:T(()=>[m(H,{modelValue:F.value.playerNum,"onUpdate:modelValue":o[35]||(o[35]=e=>F.value.playerNum=e),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.backDays"),prop:"backDays"},{default:T(()=>[m(H,{modelValue:F.value.backDays,"onUpdate:modelValue":o[36]||(o[36]=e=>F.value.backDays=e),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.vote"),prop:"vote"},{default:T(()=>[m(X,{modelValue:F.value.vote,"onUpdate:modelValue":o[37]||(o[37]=e=>F.value.vote=e)},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.password")},{default:T(()=>[m(d,{modelValue:F.value.password,"onUpdate:modelValue":o[38]||(o[38]=e=>F.value.password=e),"show-password":"",autocomplete:"new-password"},null,8,["modelValue"])]),_:1},8,["label"]),m(w,{label:t(h)("setting.baseForm.token"),prop:"token"},{default:T(()=>[m(d,{modelValue:F.value.token,"onUpdate:modelValue":o[39]||(o[39]=e=>F.value.token=e),"show-password":""},null,8,["modelValue"]),I("div",dl,[m(ee,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:T(()=>[j(R(t(h)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Ve("",!0),ne.value===1?(v(),K(C,{key:1,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:T(()=>[I("div",fl,[I("div",null,[m(Ee,{modelValue:_.value,"onUpdate:modelValue":o[40]||(o[40]=e=>_.value=e),onChange:L},{default:T(()=>[m(Se,{value:!0,size:"small"},{default:T(()=>[j(R(t(h)("setting.groundSettingMobile")),1)]),_:1}),m(Se,{value:!1,size:"small"},{default:T(()=>[j(R(t(h)("setting.caveSettingMobile")),1)]),_:1})]),_:1},8,["modelValue"])])])]),default:T(()=>[_.value?(v(),K(We,{key:0,modelValue:tt.value,"onUpdate:modelValue":o[50]||(o[50]=e=>tt.value=e)},{default:T(()=>[m(Ie,{label:t(h)("setting.tabCode"),name:"Code"},{default:T(()=>[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:o[41]||(o[41]=e=>ae("master","endless"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.endless")),1)]),_:1})):Ve("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:o[42]||(o[42]=e=>ae("master","survival"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.survival")),1)]),_:1})):Ve("",!0),m(Pe,{ref_key:"roomBaseFormRef",ref:Ke,model:F.value,inline:"","label-width":t(k)?"70":"100","label-position":"top",rules:l,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(Q,{effect:"light","show-after":500,content:"server.ini - [NETWORK] - server_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.masterPort"),prop:"masterPort"},{default:T(()=>[m(d,{modelValue:F.value.masterPort,"onUpdate:modelValue":o[43]||(o[43]=e=>F.value.masterPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort"},{default:T(()=>[m(d,{modelValue:F.value.shardMasterPort,"onUpdate:modelValue":o[44]||(o[44]=e=>F.value.shardMasterPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - server_master_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort"},{default:T(()=>[m(d,{modelValue:F.value.steamMasterPort,"onUpdate:modelValue":o[45]||(o[45]=e=>F.value.steamMasterPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - authentication_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort"},{default:T(()=>[m(d,{modelValue:F.value.steamAuthenticationPort,"onUpdate:modelValue":o[46]||(o[46]=e=>F.value.steamAuthenticationPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_ip",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:"Master IP",prop:"shardMasterIp"},{default:T(()=>[m(d,{modelValue:F.value.shardMasterIp,"onUpdate:modelValue":o[47]||(o[47]=e=>F.value.shardMasterIp=e),disabled:"",size:"default"},null,8,["modelValue"])]),_:1})]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - cluster_key",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.clusterKey"),prop:"clusterKey"},{default:T(()=>[m(d,{modelValue:F.value.clusterKey,"onUpdate:modelValue":o[48]||(o[48]=e=>F.value.clusterKey=e),type:"password","show-password":"",autocomplete:"new-password",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","label-width","size"]),m(Pe,{ref_key:"roomGroundFormRef",ref:$e,"label-width":t(k)?"70":"100",model:fe.value,rules:He,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.groundSetting"),prop:"groundSetting"},{default:T(()=>[m(yt,{ref_key:"editorGroundSettingRef",ref:me,modelValue:fe.value.groundSetting,"onUpdate:modelValue":o[49]||(o[49]=e=>fe.value.groundSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1},8,["label"])]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&fe.value.groundSetting!==""?(v(),K(Ie,{key:0,label:t(h)("setting.tabVisualization"),name:"Visualization"},{default:T(()=>[m(Z,{"content-position":"center"},{default:T(()=>[I("span",cl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),I("div",ml,[(v(!0),z(le,null,oe(t(Ae).global,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",gl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),I("div",pl,[(v(!0),z(le,null,oe(t(Ae).events,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",hl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),I("div",Tl,[(v(!0),z(le,null,oe(t(Ae).survivors,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",yl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),I("div",_l,[(v(!0),z(le,null,oe(t(Ae).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",vl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),I("div",kl,[(v(!0),z(le,null,oe(t(Ae).resourceRegrowth,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",bl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),I("div",Vl,[(v(!0),z(le,null,oe(t(Ae).unnaturalPortalResource,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Sl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),I("div",Ll,[(v(!0),z(le,null,oe(t(Ae).creatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Cl,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),I("div",wl,[(v(!0),z(le,null,oe(t(Ae).hostileCreatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",El,R(t(h)("setting.groundVisualizationRule")),1),j(" - "+R(t(h)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),I("div",Fl,[(v(!0),z(le,null,oe(t(Ae).giants,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Ml,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),I("div",Rl,[(v(!0),z(le,null,oe(t(lt).global,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Al,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),I("div",Bl,[(v(!0),z(le,null,oe(t(lt).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Gl,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),I("div",Il,[(v(!0),z(le,null,oe(t(lt).resources,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Ul,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),I("div",Pl,[(v(!0),z(le,null,oe(t(lt).creaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",zl,R(t(h)("setting.groundVisualizationGeneration")),1),j(" - "+R(t(h)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),I("div",Dl,[(v(!0),z(le,null,oe(t(lt).hostileCreaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))])]),_:1},8,["label"])):Ve("",!0)]),_:1},8,["modelValue"])):(v(),K(We,{key:1,modelValue:re.value,"onUpdate:modelValue":o[60]||(o[60]=e=>re.value=e)},{default:T(()=>[m(Ie,{label:t(h)("setting.tabCode"),name:"Code"},{default:T(()=>[I("div",null,[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:o[51]||(o[51]=e=>ae("caves","endless"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.endless")),1)]),_:1})):Ve("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:o[52]||(o[52]=e=>ae("caves","survival"))},{default:T(()=>[j(R(t(h)("setting.luaImportButton.survival")),1)]),_:1})):Ve("",!0)]),m(Pe,{ref_key:"roomBaseFormRef",ref:Ke,model:F.value,inline:"","label-width":t(k)?"70":"100","label-position":"top",rules:l,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(Q,{effect:"light","show-after":500,content:"server.ini - [NETWORK] - server_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.cavesPort"),prop:"cavesPort"},{default:T(()=>[m(d,{modelValue:F.value.cavesPort,"onUpdate:modelValue":o[53]||(o[53]=e=>F.value.cavesPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort"},{default:T(()=>[m(d,{modelValue:F.value.shardMasterPort,"onUpdate:modelValue":o[54]||(o[54]=e=>F.value.shardMasterPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - server_master_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort"},{default:T(()=>[m(d,{modelValue:F.value.steamMasterPort,"onUpdate:modelValue":o[55]||(o[55]=e=>F.value.steamMasterPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - authentication_port",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort"},{default:T(()=>[m(d,{modelValue:F.value.steamAuthenticationPort,"onUpdate:modelValue":o[56]||(o[56]=e=>F.value.steamAuthenticationPort=e),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_ip",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:"Master IP",prop:"shardMasterIp"},{default:T(()=>[m(d,{modelValue:F.value.shardMasterIp,"onUpdate:modelValue":o[57]||(o[57]=e=>F.value.shardMasterIp=e),size:"default"},null,8,["modelValue"])]),_:1})]),_:1}),m(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - cluster_key",placement:"top"},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.clusterKey"),prop:"clusterKey"},{default:T(()=>[m(d,{modelValue:F.value.clusterKey,"onUpdate:modelValue":o[58]||(o[58]=e=>F.value.clusterKey=e),type:"password","show-password":"",autocomplete:"new-password",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","label-width","size"]),m(Pe,{ref_key:"roomCaveFormRef",ref:Oe,"label-width":t(k)?"70":"100",model:ye.value,rules:Je,size:t(k)?"small":"large",style:{"margin-top":"10px"}},{default:T(()=>[m(w,{"label-position":"top",label:t(h)("setting.roomWorldForm.caveSetting"),prop:"caveSetting"},{default:T(()=>[m(yt,{ref_key:"editorCavesSettingRef",ref:Te,modelValue:ye.value.caveSetting,"onUpdate:modelValue":o[59]||(o[59]=e=>ye.value.caveSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1},8,["label"])]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&ye.value.caveSetting!==""?(v(),K(Ie,{key:0,label:t(h)("setting.tabVisualization"),name:"Visualization"},{default:T(()=>[m(Z,{"content-position":"center"},{default:T(()=>[I("span",Nl,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),I("div",$l,[(v(!0),z(le,null,oe(t(at).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Ol,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),I("div",xl,[(v(!0),z(le,null,oe(t(at).resourceRegrowth,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Wl,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),I("div",ql,[(v(!0),z(le,null,oe(t(at).creatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Kl,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),I("div",jl,[(v(!0),z(le,null,oe(t(at).hostileCreatures,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Hl,R(t(h)("setting.cavesVisualizationRule")),1),j(" - "+R(t(h)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),I("div",Jl,[(v(!0),z(le,null,oe(t(at).giants,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Xl,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),I("div",Zl,[(v(!0),z(le,null,oe(t(dt).world,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(ft)[e].configs,customConfigsValue:t(ft)[e].customConfigsValue,i18n:t(ft)[e].i18n,image:t(ft)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",Ql,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),I("div",Yl,[(v(!0),z(le,null,oe(t(dt).resources,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",ea,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),I("div",ta,[(v(!0),z(le,null,oe(t(dt).creaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))]),m(Z,{"content-position":"center"},{default:T(()=>[I("span",na,R(t(h)("setting.cavesVisualizationGeneration")),1),j(" - "+R(t(h)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),I("div",la,[(v(!0),z(le,null,oe(t(dt).hostileCreaturesAndSpawners,e=>(v(),z("div",null,[(v(),K(ie,{modelValue:A.value[e],"onUpdate:modelValue":U=>A.value[e]=U,configs:t(f)[e].configs,customConfigsValue:t(f)[e].customConfigsValue,i18n:t(f)[e].i18n,image:t(f)[e].image,name:e,defaultModelValue:t(f)[e].modelValue,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name","defaultModelValue"]))]))),256))])]),_:1},8,["label"])):Ve("",!0)]),_:1},8,["modelValue"]))]),_:1},8,["style"])):Ve("",!0),ne.value===2?(v(),K(C,{key:2,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[m(Pe,{ref_key:"roomModFormRef",ref:et,"label-width":t(k)?"70":"100",model:Y.value,rules:de,size:t(k)?"small":"large"},{default:T(()=>[m(w,{"label-position":"top",prop:"modSetting"},{default:T(()=>[m(yt,{ref:"editor",modelValue:Y.value.modSetting,"onUpdate:modelValue":o[61]||(o[61]=e=>Y.value.modSetting=e),height:t(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Ve("",!0),ne.value===3?(v(),K(C,{key:3,style:Qe(t(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:T(()=>[I("div",{style:Qe(t(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[m(pt,{"sub-title":r.$t("setting.finish.description"),title:r.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Ve("",!0)]),_:1})]),_:1}),m(i,{gutter:10},{default:T(()=>[m(n,{lg:24,md:24,sm:24,span:24,xs:24},{default:T(()=>[m(C,{shadow:"never"},{default:T(()=>[I("div",aa,[ne.value>0?(v(),K(s,{key:0,onClick:Ye},{default:T(()=>[j(R(t(h)("setting.button.prev")),1)]),_:1})):Ve("",!0),ne.value<3?(v(),K(s,{key:1,type:"primary",onClick:ct},{default:T(()=>[j(R(t(h)("setting.button.next")),1)]),_:1})):Ve("",!0),ne.value===3?(v(),K(Ze,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:it},{dropdown:T(()=>[m(je,null,{default:T(()=>[m(nt,{command:"save"},{default:T(()=>[j(R(t(h)("setting.button.save")),1)]),_:1}),m(nt,{command:"saveAndRestart"},{default:T(()=>[j(R(t(h)("setting.button.saveAndRestart")),1)]),_:1}),m(nt,{command:"generateNewWorld"},{default:T(()=>[j(R(t(h)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:T(()=>[m(s,{loading:pe.value,type:"warning"},{default:T(()=>[j(R(t(h)("setting.button.actions"))+" ",1),m(Tt,{class:"el-icon--right"},{default:T(()=>[m(ht)]),_:1})]),_:1},8,["loading"])]),_:1})):Ve("",!0)])]),_:1})]),_:1})]),_:1})],64)):Ve("",!0)])}}}),fa=nn(ia,[["__scopeId","data-v-f254ffc2"]]);export{fa as default};
