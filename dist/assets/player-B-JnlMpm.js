import{s as h}from"./index-B6-ITlIL.js";import{u as ge,a as me,g as pe,c as Z,o as _e,y as b,r as k,B as c,C as he,d as u,e as y,f as t,w as e,p as x,j as i,i as g,m as o,t as s,k as f,F as R,v as U,a9 as be,l as ye,X as ve}from"./index-B5BRRdMX.js";const ke={class:"page-div"},we={class:"card-header"},$e={key:0},Ce={key:1},Le={class:"card-header"},De={key:0},ze={style:{"margin-top":"20px"}},Be={class:"card-header"},xe={key:0},Ae={style:{"margin-top":"20px"}},Fe={class:"card-header"},Ne={key:0},Se={style:{"margin-top":"20px"}},Te={class:"card-header"},Pe={class:"fcc"},We=ve({name:"settingsPlayer"}),Re=Object.assign(We,{setup(Ve){const{t:d}=ge(),{isMobile:w}=me(),j=pe(),$=Z(()=>j.isDark),N=Z(()=>j.language);_e(()=>{m()});const m=(l=!1)=>{h.player.list.get().then(n=>{S.value=n.data.players,T.value=n.data.uidMap,C.value=[];for(let r of n.data.adminList)r!==""&&C.value.push(r);L.value=[];for(let r of n.data.blockList)r!==""&&L.value.push(r);D.value=[];for(let r of n.data.whiteList)r!==""&&D.value.push(r);if(l){let r;N.value==="zh"?r="刷新成功":r="Refresh Success",b(r)}})},E=k("players"),S=k([]),T=k({}),C=k([]),L=k([]),D=k([]),A=l=>{for(let n of C.value)if(n===l)return!0},G=l=>{for(let n of L.value)if(n===l)return!0},H=l=>{for(let n of D.value)if(n===l)return!0},K=l=>{switch(l.type){case"admin":ee(l.uid);break;case"block":le(l.uid);break;case"white":ne(l.uid);break;case"kick":se(l.uid);break}},ee=l=>{h.player.addAdmin.post({uid:l}).then(n=>{b(n.message),m()})},te=l=>{h.player.deleteAdmin.post({uid:l}).then(n=>{b(n.message),m()})},le=l=>{h.player.addBlock.post({uid:l}).then(n=>{b(n.message),m()})},ae=l=>{h.player.deleteBlock.post({uid:l}).then(n=>{b(n.message),m()})},ne=l=>{h.player.addWhite.post({uid:l}).then(n=>{b(n.message),m()})},ie=l=>{h.player.deleteWhite.post({uid:l}).then(n=>{b(n.message),m()})},se=l=>{h.player.kick.post({uid:l}).then(n=>{b(n.message)})},P=l=>l in T.value?" ["+T.value[l]+"]":N.value==="zh"?" [暂未获取到]":" [Not yet obtained]",oe=(l,n)=>{l.paneName==="history"&&O()},W=k([]),V=k(!1),O=(l=!1)=>{V.value=!0,W.value=[],h.player.history.get().then(n=>{for(let r of n.data)r.uid.length===11&&W.value.push(r);if(l){let r;N.value==="zh"?r="刷新成功":r="Refresh Success",b(r)}}).finally(()=>{V.value=!1})};return(l,n)=>{const r=c("el-button"),p=c("el-table-column"),_=c("el-tag"),Q=c("arrow-down"),M=c("el-icon"),v=c("el-dropdown-item"),X=c("el-dropdown-menu"),q=c("el-dropdown"),J=c("el-table"),F=c("el-result"),z=c("el-card"),B=c("el-tab-pane"),I=c("el-alert"),de=c("el-tooltip"),re=c("el-tabs"),ue=c("el-col"),ce=c("el-row"),fe=he("loading");return u(),y("div",ke,[t(ce,{gutter:10},{default:e(()=>[t(ue,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[t(re,{modelValue:E.value,"onUpdate:modelValue":n[5]||(n[5]=a=>E.value=a),onTabClick:oe},{default:e(()=>[t(B,{label:l.$t("setting.players"),name:"players"},{default:e(()=>[t(z,{shadow:"never",style:x(i(w)?"min-height: 500px":"min-height: 700px")},{header:e(()=>[g("div",we,[o(s(i(d)("setting.players"))+" ",1),g("div",null,[t(r,{size:"default",onClick:n[0]||(n[0]=a=>m(!0))},{default:e(()=>[o(s(i(d)("setting.refresh")),1)]),_:1})])])]),default:e(()=>[S.value?(u(),f(J,{key:0,data:S.value,border:"",style:{width:"100%"},size:"small"},{default:e(()=>[t(p,{prop:"nickName",label:l.$t("setting.nickName")},null,8,["label"]),t(p,{prop:"prefab",label:l.$t("setting.role")},{default:e(a=>[a.row.prefab===""?(u(),y("span",$e,s(i(d)("setting.roleFail")),1)):(u(),y("span",Ce,s(a.row.prefab),1))]),_:1},8,["label"]),t(p,{prop:"age",label:l.$t("setting.age")},{default:e(a=>[a.row.age?(u(),f(_,{key:0,type:"success"},{default:e(()=>[o(s(a.row.age),1)]),_:2},1024)):(u(),f(_,{key:1,type:"warning"},{default:e(()=>[o(s(i(d)("setting.roleFail")),1)]),_:1}))]),_:1},8,["label"]),t(p,{prop:"uid",label:"UID"}),t(p,{prop:"actions",label:l.$t("setting.button.actions")},{default:e(a=>[t(q,{onCommand:K,trigger:"hover"},{dropdown:e(()=>[t(X,null,{default:e(()=>[t(v,{command:{type:"admin",uid:a.row.uid},disabled:A(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"block",uid:a.row.uid},disabled:G(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"white",uid:a.row.uid},disabled:H(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"kick",uid:a.row.uid},disabled:A(a.row.uid),divided:""},{default:e(()=>[o(s(i(d)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:e(()=>[t(r,{link:"",type:"primary"},{default:e(()=>[o(s(i(d)("setting.button.actions")),1),t(M,{class:"el-icon--right"},{default:e(()=>[t(Q)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):(u(),f(F,{key:1,icon:"warning",title:l.$t("setting.noPlayersFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),t(B,{label:l.$t("setting.adminList"),name:"adminList"},{default:e(()=>[t(z,{shadow:"never",style:x(i(w)?"min-height: 500px":"min-height: 700px")},{header:e(()=>[g("div",Le,[o(s(i(d)("setting.adminList"))+" ",1),g("div",null,[t(r,{size:"default",onClick:n[1]||(n[1]=a=>m(!0))},{default:e(()=>[o(s(i(d)("setting.refresh")),1)]),_:1})])])]),default:e(()=>[C.value.length>0?(u(),y("div",De,[t(I,{effect:$.value?"light":"dark",type:"success",closable:!1},{default:e(()=>[o(s(i(d)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",ze,[(u(!0),y(R,null,U(C.value,a=>(u(),f(_,{size:"large",closable:"",onClose:Y=>te(a),effect:$.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:e(()=>[o(s(a+P(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),f(F,{key:1,icon:"warning",title:l.$t("setting.noAdminFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),t(B,{label:l.$t("setting.blockList"),name:"blockList"},{default:e(()=>[t(z,{shadow:"never",style:x(i(w)?"min-height: 500px":"min-height: 700px")},{header:e(()=>[g("div",Be,[o(s(i(d)("setting.blockList"))+" ",1),g("div",null,[t(r,{size:"default",onClick:n[2]||(n[2]=a=>m(!0))},{default:e(()=>[o(s(i(d)("setting.refresh")),1)]),_:1})])])]),default:e(()=>[L.value.length>0?(u(),y("div",xe,[t(I,{effect:$.value?"light":"dark",type:"success",closable:!1},{default:e(()=>[o(s(i(d)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",Ae,[(u(!0),y(R,null,U(L.value,a=>(u(),f(_,{size:"large",closable:"",onClose:Y=>ae(a),effect:$.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:e(()=>[o(s(a+P(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),f(F,{key:1,icon:"warning",title:l.$t("setting.noBlockFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),t(B,{label:l.$t("setting.whiteList"),name:"whiteList"},{default:e(()=>[t(z,{shadow:"never",style:x(i(w)?"min-height: 500px":"min-height: 700px")},{header:e(()=>[g("div",Fe,[o(s(i(d)("setting.whiteList"))+" ",1),g("div",null,[t(r,{size:"default",onClick:n[3]||(n[3]=a=>m(!0))},{default:e(()=>[o(s(i(d)("setting.refresh")),1)]),_:1})])])]),default:e(()=>[D.value.length>0?(u(),y("div",Ne,[t(I,{effect:$.value?"light":"dark",type:"success",closable:!1},{default:e(()=>[o(s(i(d)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),g("div",Se,[(u(!0),y(R,null,U(D.value,a=>(u(),f(_,{size:"large",closable:"",onClose:Y=>ie(a),effect:$.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:e(()=>[o(s(a+P(a)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),f(F,{key:1,icon:"warning",title:l.$t("setting.noWhiteFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),t(B,{label:i(d)("setting.historyPlayer"),name:"history"},{default:e(()=>[t(z,{shadow:"never",style:x(i(w)?"min-height: 500px":"min-height: 700px")},{header:e(()=>[g("div",Te,[t(de,{effect:"light",content:i(d)("setting.historyPlayerTip"),placement:"top"},{default:e(()=>[g("div",Pe,[o(s(i(d)("setting.historyPlayer"))+" ",1),t(M,null,{default:e(()=>[t(i(be))]),_:1})])]),_:1},8,["content"]),t(r,{size:"default",onClick:n[4]||(n[4]=a=>O(!0))},{default:e(()=>[o(s(i(d)("setting.refresh")),1)]),_:1})])]),default:e(()=>[ye((u(),f(J,{ref:"tableRef",data:W.value,border:"","max-height":i(w)?450:550},{default:e(()=>[t(p,{label:l.$t("setting.nickName"),prop:"nickname"},null,8,["label"]),t(p,{label:l.$t("setting.role"),prop:"prefab"},{default:e(a=>[a.row.prefab?(u(),f(_,{key:0,type:"success"},{default:e(()=>[o(s(a.row.prefab),1)]),_:2},1024)):(u(),f(_,{key:1,type:"warning"},{default:e(()=>[o(s(i(d)("setting.roleFail")),1)]),_:1}))]),_:1},8,["label"]),t(p,{label:l.$t("setting.age"),prop:"age"},{default:e(a=>[a.row.age?(u(),f(_,{key:0,type:"success"},{default:e(()=>[o(s(a.row.age),1)]),_:2},1024)):(u(),f(_,{key:1,type:"warning"},{default:e(()=>[o(s(i(d)("setting.roleFail")),1)]),_:1}))]),_:1},8,["label"]),t(p,{label:"UID",prop:"uid"}),t(p,{prop:"actions",label:l.$t("setting.button.actions")},{default:e(a=>[t(q,{onCommand:K,trigger:"hover"},{dropdown:e(()=>[t(X,null,{default:e(()=>[t(v,{command:{type:"admin",uid:a.row.uid},disabled:A(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"block",uid:a.row.uid},disabled:G(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"white",uid:a.row.uid},disabled:H(a.row.uid)},{default:e(()=>[o(s(i(d)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),t(v,{command:{type:"kick",uid:a.row.uid},disabled:A(a.row.uid),divided:""},{default:e(()=>[o(s(i(d)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:e(()=>[t(r,{link:"",type:"primary"},{default:e(()=>[o(s(i(d)("setting.button.actions")),1),t(M,{class:"el-icon--right"},{default:e(()=>[t(Q)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","max-height"])),[[fe,V.value]])]),_:1},8,["style"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{Re as default};
