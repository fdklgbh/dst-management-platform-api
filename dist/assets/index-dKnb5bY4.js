import{h as V,o as Y,u as Z,a as ee,g as te,c as le,r as m,A as n,B as ne,d as o,e as v,f as t,w as e,k as oe,l as s,p as $,j as _,F as y,s as D,i as x,m as p,t as O,n as g,V as ae}from"./index-6hF3EXic.js";const F={settingFormat:{url:"/mod/setting/format",get:async function(f){return await V.get(this.url,f)}},configOptions:{url:"/mod/config_options",get:async function(f){return await V.get(this.url,f)}},test:{url:"/mod/test",post:async function(f){return await V.post(this.url,f)}}},se={class:"page-div"},ie={style:{display:"flex"}},ue={style:{display:"flex","margin-left":"5px","flex-direction":"column","justify-content":"center"}},re=ae({name:"mod"}),de=Object.assign(re,{setup(f){Y(async()=>{await G()}),Z();const{isMobile:c}=ee(),A=te();le(()=>A.isDark);const N=m("Setting"),a=m([]),k=m(!1),G=()=>{k.value=!0,F.settingFormat.get().then(i=>{a.value=i.data}).finally(()=>{k.value=!1})},d=m(0),I=i=>{d.value=i,T()},M=m(!1),h=m({}),T=()=>{M.value=!0,F.configOptions.get({id:d.value}).then(i=>{h.value=i.data}).finally(()=>{M.value=!1})},E=()=>{const i=JSON.stringify(a.value);F.test.post({json:i})};return(i,u)=>{const J=n("el-image"),j=n("el-button"),b=n("el-tag"),R=n("el-divider"),B=n("el-scrollbar"),z=n("el-card"),L=n("el-col"),w=n("el-form-item"),q=n("el-option"),H=n("el-select"),K=n("el-tooltip"),P=n("el-form"),U=n("el-result"),Q=n("el-row"),S=n("el-tab-pane"),W=n("el-tabs"),X=ne("loading");return o(),v("div",se,[t(W,{modelValue:N.value,"onUpdate:modelValue":u[0]||(u[0]=l=>N.value=l)},{default:e(()=>[t(S,{label:"Setting",name:"Setting"},{default:e(()=>[t(Q,{gutter:10},{default:e(()=>[t(L,{lg:8,md:8,sm:24,span:8,xs:24},{default:e(()=>[oe((o(),s(z,{style:$(_(c)?"height: 50vh":"height: 70vh"),shadow:"never"},{default:e(()=>[t(B,{"max-height":_(c)?"45vh":"65vh"},{default:e(()=>[(o(!0),v(y,null,D(a.value,(l,r)=>(o(),v(y,null,[x("div",ie,[x("div",null,[t(J,{src:l.preview_url,fit:"fill",onClick:C=>I(l.id),style:{width:"75px",height:"75px"}},null,8,["src","onClick"])]),x("div",ue,[t(j,{link:"",type:"primary",onClick:C=>I(l.id)},{default:e(()=>[p(O(l.name),1)]),_:2},1032,["onClick"]),x("div",null,[l.enable?(o(),s(b,{key:0,type:"success"},{default:e(()=>u[1]||(u[1]=[p("启用")])),_:1})):g("",!0),l.enable?g("",!0):(o(),s(b,{key:1,type:"info"},{default:e(()=>u[2]||(u[2]=[p("禁用")])),_:1}))])])]),r!==a.value.length-1?(o(),s(R,{key:0})):g("",!0)],64))),256))]),_:1},8,["max-height"])]),_:1},8,["style"])),[[X,k.value]])]),_:1}),t(L,{lg:16,md:16,sm:24,span:16,xs:24},{default:e(()=>[t(z,{style:$(_(c)?"height: 50vh; margin-top: 10px":"height: 70vh"),shadow:"never"},{default:e(()=>[d.value!==0?(o(),s(B,{key:0,"max-height":_(c)?"45vh":"65vh"},{default:e(()=>[t(P,{ref:"modSettingFormRef",size:_(c)?"small":"large","label-position":_(c)?"top":"left","label-width":_(c)?"70":"auto"},{default:e(()=>[t(w,{label:"ID"},{default:e(()=>[t(b,null,{default:e(()=>[p(O(h.value.id),1)]),_:1}),t(j,{onClick:E},{default:e(()=>u[3]||(u[3]=[p("aaa")])),_:1})]),_:1}),t(w,{label:"Name"},{default:e(()=>[t(b,{type:"info"},{default:e(()=>[p(O(a.value[a.value.findIndex(l=>l.id===d.value)].name),1)]),_:1})]),_:1}),(o(!0),v(y,null,D(h.value.configOptions,l=>(o(),s(K,{"show-after":500,effect:"light",content:l.hover,placement:"top"},{default:e(()=>[t(w,{label:l.label},{default:e(()=>[t(H,{modelValue:a.value[a.value.findIndex(r=>r.id===d.value)].configurationOptions[l.name],"onUpdate:modelValue":r=>a.value[a.value.findIndex(C=>C.id===d.value)].configurationOptions[l.name]=r},{default:e(()=>[(o(!0),v(y,null,D(l.options,r=>(o(),s(q,{label:r.description,value:r.data},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1032,["content"]))),256))]),_:1},8,["size","label-position","label-width"]),h.value.configOptions.length===0?(o(),s(U,{key:0,icon:"info",title:"该模组无配置项"})):g("",!0)]),_:1},8,["max-height"])):g("",!0),d.value===0?(o(),s(U,{key:1,icon:"info",title:"请选择一个模组进行配置"})):g("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1}),t(S,{label:"Download",name:"Download"}),t(S,{label:"Subscribe",name:"Subscribe"})]),_:1},8,["modelValue"])])}}});export{de as default};
