import{s as f}from"./index-4aeBTP6B.js";import{u as ie,a as de,g as re,c as E,o as ue,y as _,r as v,B as c,d as u,e as g,f as a,w as t,p as B,j as s,i as m,m as i,t as o,k as h,F as W,v as M,X as ce}from"./index-Dpk0Jcjo.js";const pe={class:"page-div"},me={class:"card-header"},ge={key:0},fe={key:1},_e={class:"card-header"},he={key:0},be={style:{"margin-top":"20px"}},ve={class:"card-header"},ye={key:0},ke={style:{"margin-top":"20px"}},we={class:"card-header"},$e={key:0},Ce={style:{"margin-top":"20px"}},Le=ce({name:"settingsPlayer"}),Be=Object.assign(Le,{setup(De){const{t:r}=ie(),{isMobile:$}=de(),T=re(),b=E(()=>T.isDark),P=E(()=>T.language);ue(()=>{p()});const p=(e=!1)=>{f.player.list.get().then(l=>{A.value=l.data.players,S.value=l.data.uidMap,y.value=[];for(let d of l.data.adminList)d!==""&&y.value.push(d);k.value=[];for(let d of l.data.blockList)d!==""&&k.value.push(d);w.value=[];for(let d of l.data.whiteList)d!==""&&w.value.push(d);if(e){let d;P.value==="zh"?d="刷新成功":d="Refresh Success",_(d)}})},j=v("players"),A=v([]),S=v({}),y=v([]),k=v([]),w=v([]),I=e=>{for(let l of y.value)if(l===e)return!0},K=e=>{for(let l of k.value)if(l===e)return!0},O=e=>{for(let l of w.value)if(l===e)return!0},R=e=>{switch(e.type){case"admin":X(e.uid);break;case"block":G(e.uid);break;case"white":J(e.uid);break;case"kick":Y(e.uid);break}},X=e=>{f.player.addAdmin.post({uid:e}).then(l=>{_(l.message),p()})},q=e=>{f.player.deleteAdmin.post({uid:e}).then(l=>{_(l.message),p()})},G=e=>{f.player.addBlock.post({uid:e}).then(l=>{_(l.message),p()})},H=e=>{f.player.deleteBlock.post({uid:e}).then(l=>{_(l.message),p()})},J=e=>{f.player.addWhite.post({uid:e}).then(l=>{_(l.message),p()})},Q=e=>{f.player.deleteWhite.post({uid:e}).then(l=>{_(l.message),p()})},Y=e=>{f.player.kick.post({uid:e}).then(l=>{_(l.message)})},F=e=>e in S.value?" ["+S.value[e]+"]":P.value==="zh"?" [暂未获取到]":" [Not yet obtained]";return(e,l)=>{const d=c("el-button"),C=c("el-table-column"),Z=c("arrow-down"),ee=c("el-icon"),L=c("el-dropdown-item"),te=c("el-dropdown-menu"),le=c("el-dropdown"),ae=c("el-table"),D=c("el-result"),x=c("el-card"),z=c("el-tab-pane"),N=c("el-alert"),V=c("el-tag"),ne=c("el-tabs"),se=c("el-col"),oe=c("el-row");return u(),g("div",pe,[a(oe,{gutter:10},{default:t(()=>[a(se,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:t(()=>[a(ne,{modelValue:j.value,"onUpdate:modelValue":l[4]||(l[4]=n=>j.value=n)},{default:t(()=>[a(z,{label:e.$t("setting.players"),name:"players"},{default:t(()=>[a(x,{shadow:"never",style:B(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",me,[i(o(s(r)("setting.players"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[0]||(l[0]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[A.value?(u(),h(ae,{key:0,data:A.value,border:"",style:{width:"100%"},size:"small"},{default:t(()=>[a(C,{prop:"nickName",label:e.$t("setting.nickName")},null,8,["label"]),a(C,{prop:"prefab",label:e.$t("setting.role")},{default:t(n=>[n.row.prefab===""?(u(),g("span",ge,o(s(r)("setting.roleFail")),1)):(u(),g("span",fe,o(n.row.prefab),1))]),_:1},8,["label"]),a(C,{prop:"uid",label:"UID"}),a(C,{prop:"actions",label:e.$t("setting.button.actions")},{default:t(n=>[a(le,{onCommand:R,trigger:"hover"},{dropdown:t(()=>[a(te,null,{default:t(()=>[a(L,{command:{type:"admin",uid:n.row.uid},disabled:I(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"block",uid:n.row.uid},disabled:K(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"white",uid:n.row.uid},disabled:O(n.row.uid)},{default:t(()=>[i(o(s(r)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),a(L,{command:{type:"kick",uid:n.row.uid},disabled:I(n.row.uid),divided:""},{default:t(()=>[i(o(s(r)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:t(()=>[a(d,{link:"",type:"primary"},{default:t(()=>[i(o(s(r)("setting.button.actions")),1),a(ee,{class:"el-icon--right"},{default:t(()=>[a(Z)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noPlayersFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(z,{label:e.$t("setting.adminList"),name:"adminList"},{default:t(()=>[a(x,{shadow:"never",style:B(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",_e,[i(o(s(r)("setting.adminList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[1]||(l[1]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[y.value.length>0?(u(),g("div",he,[a(N,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",be,[(u(!0),g(W,null,M(y.value,n=>(u(),h(V,{size:"large",closable:"",onClose:U=>q(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n+F(n)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noAdminFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(z,{label:e.$t("setting.blockList"),name:"blockList"},{default:t(()=>[a(x,{shadow:"never",style:B(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",ve,[i(o(s(r)("setting.blockList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[2]||(l[2]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[k.value.length>0?(u(),g("div",ye,[a(N,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",ke,[(u(!0),g(W,null,M(k.value,n=>(u(),h(V,{size:"large",closable:"",onClose:U=>H(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n+F(n)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noBlockFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(z,{label:e.$t("setting.whiteList"),name:"whiteList"},{default:t(()=>[a(x,{shadow:"never",style:B(s($)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[m("div",we,[i(o(s(r)("setting.whiteList"))+" ",1),m("div",null,[a(d,{size:"default",onClick:l[3]||(l[3]=n=>p(!0))},{default:t(()=>[i(o(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[w.value.length>0?(u(),g("div",$e,[a(N,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[i(o(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),m("div",Ce,[(u(!0),g(W,null,M(w.value,n=>(u(),h(V,{size:"large",closable:"",onClose:U=>Q(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[i(o(n+F(n)),1)]),_:2},1032,["onClose","effect"]))),256))])])):(u(),h(D,{key:1,icon:"warning",title:e.$t("setting.noWhiteFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{Be as default};
