import{u as L,a as j,g as H,D as J,G as $,b as Q,H as W,c as I,o as X,r as M,a8 as w,ah as Y,w as Z,I as z,J as g,e as h,f as k,j as t,k as e,l as f,p as o,t as n,i as a,a0 as ee,B as te,A as se,ai as ae}from"./index-C-KsYsfv.js";import{_ as le}from"./lodash-YJSlP23j.js";import{t as ne}from"./index-BAjU4gOB.js";const ie={class:"page-div"},oe={class:"card-header"},ue={class:"el-form-item-msg",style:{color:"#A8ABB2"}},de={key:0},re={key:1},me={class:"el-form-item-msg",style:{color:"#A8ABB2"}},fe={key:0},pe={key:1},ge={class:"el-form-item-msg",style:{color:"#A8ABB2"}},ce={class:"el-form-item-msg",style:{color:"#A8ABB2"}},_e={key:0},ve={key:1},ye={class:"el-form-item-msg",style:{color:"#A8ABB2"}},be={class:"el-form-item-msg",style:{color:"#A8ABB2"}},he={class:"el-form-item-msg",style:{color:"#A8ABB2"}},ke={class:"el-form-item-msg",style:{color:"#A8ABB2"}},Me={class:"el-form-item-msg",style:{color:"#A8ABB2"}},Ue=ee({name:"settingsSystem"}),Fe=Object.assign(Ue,{setup(Ve){const{t:s}=L(),{isMobile:x}=j(),U=H(),V=J();$();const R=Q(),P=W("refresh");I(()=>U.isDark);const c=I(()=>U.language);X(()=>{D(),T()});const S=M(),q=M({keepaliveDisable:void 0,keepaliveFrequency:void 0,playerGetFrequency:void 0,UIDMaintain:{disable:void 0,frequency:void 0},sysMetricsGet:{disable:void 0,frequency:void 0},bit64:void 0,tickRate:void 0,encodeUserPath:{ground:!1,cave:!1}}),i=M({keepaliveDisable:void 0,keepaliveFrequency:void 0,playerGetFrequency:void 0,UIDMaintain:{disable:void 0,frequency:void 0},sysMetricsGet:{disable:void 0,frequency:void 0},bit64:void 0,tickRate:void 0,encodeUserPath:{ground:!1,cave:!1}}),B=(_,l,y)=>{if(!l)return y(new Error(c.value==="zh"?"此条目为必填项":"Please input this item"));if(!Number.isInteger(l))return y(new Error(c.value==="zh"?"只允许输入整数":"Please input integer"));if(l<=0)return y(new Error(c.value==="zh"?"必须大于0":"Must be greater than 0"));y()},C={keepaliveDisable:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}],keepaliveFrequency:[{validator:B,trigger:"blur"}],playerGetFrequency:[{validator:B,trigger:"blur"}],UIDMaintain:{disable:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}],frequency:[{validator:B,trigger:"blur"}]},sysMetricsGet:{disable:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}]},bit64:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}],tickRate:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}],encodeUserPath:{ground:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}],cave:[{required:!0,message:s("setting.roomBaseFormRules.name"),trigger:"change"}]}},D=()=>{const _={clusterName:U.selectedDstCluster};w.system.setting.get(_).then(l=>{i.value=l.data,q.value=Y(i.value)})},A=M(!1),N=()=>{S.value.validate(_=>{_&&(le.isEqual(q.value,i.value)?te(c.value==="zh"?"配置未修改":"System settings not changes"):(A.value=!0,w.system.setting.put(i.value).then(l=>{if(D(),se(l.message),q.value.bit64!==i.value.bit64){const y=c.value==="zh"?"正在后台切换32/64，可依据CPU使用率判断是否执行完毕，执行完毕后重启游戏即可。":"The background switching 32-bit/64-bit task is in progress, and you can determine if it has completed based on the CPU usage. Once it's completed, you can restart the game.",v=c.value==="zh"?"系统提示":"Tip";ae(y,v,1e4)}}).finally(()=>{A.value=!1})))})},G=M(""),T=()=>{ne.osInfo.get().then(_=>{G.value=_.data.Platform})},E=()=>{setTimeout(()=>{V.meta.isKeepAlive&&R.removeKeepAliveName(V.name),P(!1),z(()=>{V.meta.isKeepAlive&&R.addKeepAliveName(V.name),P(!0)})},0)};return Z(()=>U.selectedDstCluster,_=>{_&&z(()=>{E()})},{immediate:!1}),(_,l)=>{const y=g("el-button"),v=g("el-divider"),r=g("el-radio"),b=g("el-radio-group"),u=g("el-col"),m=g("el-row"),p=g("el-form-item"),F=g("el-input-number"),O=g("el-form"),K=g("el-card");return h(),k("div",ie,[t(m,{gutter:10},{default:e(()=>[t(u,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[t(K,{shadow:"never",style:{"min-height":"80vh"}},{header:e(()=>[f("div",oe,[o(n(a(s)("setting.system.title"))+" ",1),t(y,{loading:A.value,type:"primary",onClick:N},{default:e(()=>[o(n(a(s)("setting.system.titleButton")),1)]),_:1},8,["loading"])])]),default:e(()=>[f("div",null,[t(O,{ref_key:"systemSettingFormRef",ref:S,"hide-required-asterisk":!0,model:i.value,rules:C,size:a(x)?"small":"large","label-position":"top"},{default:e(()=>[t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.keepalive.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.keepalive.title0"),prop:"keepaliveDisable"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.keepaliveDisable,"onUpdate:modelValue":l[0]||(l[0]=d=>i.value.keepaliveDisable=d)},{default:e(()=>[t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",ue,n(a(s)("setting.system.keepalive.msg0")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(p,{label:a(s)("setting.system.keepalive.title"),prop:"keepaliveFrequency"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(F,{modelValue:i.value.keepaliveFrequency,"onUpdate:modelValue":l[1]||(l[1]=d=>i.value.keepaliveFrequency=d),"controls-position":"right"},{suffix:e(()=>[c.value==="zh"?(h(),k("span",de,"分钟")):(h(),k("span",re,"Minute"))]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",me,n(a(s)("setting.system.keepalive.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.playerList.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.playerList.title"),prop:"playerGetFrequency"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(F,{modelValue:i.value.playerGetFrequency,"onUpdate:modelValue":l[2]||(l[2]=d=>i.value.playerGetFrequency=d),"controls-position":"right"},{suffix:e(()=>[c.value==="zh"?(h(),k("span",fe,"秒")):(h(),k("span",pe,"Second"))]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",ge,n(a(s)("setting.system.playerList.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.uidMap.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.uidMap.title"),prop:"UIDMaintain.disable"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.UIDMaintain.disable,"onUpdate:modelValue":l[3]||(l[3]=d=>i.value.UIDMaintain.disable=d)},{default:e(()=>[t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",ce,n(a(s)("setting.system.uidMap.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(p,{label:a(s)("setting.system.uidMap.title2"),prop:"UIDMaintain.frequency"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(F,{modelValue:i.value.UIDMaintain.frequency,"onUpdate:modelValue":l[4]||(l[4]=d=>i.value.UIDMaintain.frequency=d),"controls-position":"right"},{suffix:e(()=>[c.value==="zh"?(h(),k("span",_e,"分钟")):(h(),k("span",ve,"Minute"))]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",ye,n(a(s)("setting.system.uidMap.msg2")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.metrics.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.metrics.title"),prop:"sysMetricsGet.disable"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.sysMetricsGet.disable,"onUpdate:modelValue":l[5]||(l[5]=d=>i.value.sysMetricsGet.disable=d)},{default:e(()=>[t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",be,n(a(s)("setting.system.metrics.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.bit64.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.bit64.title"),prop:"bit64"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.bit64,"onUpdate:modelValue":l[6]||(l[6]=d=>i.value.bit64=d),disabled:G.value==="darwin"},{default:e(()=>[t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",he,n(a(s)("setting.system.bit64.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.tickRate.title")),1)]),_:1}),t(p,{label:"Tick Rate",prop:"tickRate"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.tickRate,"onUpdate:modelValue":l[7]||(l[7]=d=>i.value.tickRate=d)},{default:e(()=>[t(r,{value:15},{default:e(()=>l[10]||(l[10]=[o("15")])),_:1}),t(r,{value:30},{default:e(()=>l[11]||(l[11]=[o("30")])),_:1}),t(r,{value:45},{default:e(()=>l[12]||(l[12]=[o("45")])),_:1}),t(r,{value:60},{default:e(()=>l[13]||(l[13]=[o("60")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",ke,n(a(s)("setting.system.tickRate.msg")),1)]),_:1})]),_:1})]),_:1}),t(v,{"content-position":"left"},{default:e(()=>[o(n(a(s)("setting.system.encodeUserPath.divider")),1)]),_:1}),t(p,{label:a(s)("setting.system.encodeUserPath.ground"),prop:"encodeUserPath.ground"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.encodeUserPath.ground,"onUpdate:modelValue":l[8]||(l[8]=d=>i.value.encodeUserPath.ground=d)},{default:e(()=>[t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label"]),t(p,{label:a(s)("setting.system.encodeUserPath.cave"),prop:"encodeUserPath.cave"},{default:e(()=>[t(m,null,{default:e(()=>[t(u,{span:24},{default:e(()=>[t(b,{modelValue:i.value.encodeUserPath.cave,"onUpdate:modelValue":l[9]||(l[9]=d=>i.value.encodeUserPath.cave=d)},{default:e(()=>[t(r,{value:!0},{default:e(()=>[o(n(a(s)("setting.system.uidMap.enable")),1)]),_:1}),t(r,{value:!1},{default:e(()=>[o(n(a(s)("setting.system.uidMap.disable")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{span:24},{default:e(()=>[f("div",Me,n(a(s)("setting.system.encodeUserPath.msg")),1)]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["model","size"])])]),_:1})]),_:1})]),_:1})])}}});export{Fe as default};
