import{a4 as Ft,a5 as tn,_ as nn,u as ln,o as on,r as Be,a as an,g as rn,c as un,A as Le,d as v,e as z,F as le,f as c,w as h,j as o,k as K,p as Qe,i as U,t as A,m as j,n as Se,s as ae,V as sn,z as mt,x as Rt}from"./index-CJaPNTvg.js";import{s as yt}from"./index-BciGCvPL.js";import{s as _t}from"./index-DMMjsFz5.js";import{g as Ge,_ as ie,o as y,a as lt,c as ot,b as dt,d as ft}from"./levelDataSetting-Cr4OXjJ_.js";var Vt={exports:{}};Vt.exports;(function(at,p){(function(pe,k,x){var Ce=p&&!p.nodeType&&p,me=at&&!at.nodeType&&at,Te=Ce&&me&&typeof Ft=="object"&&Ft,ne=me&&me.exports===Ce&&Ce;Te&&(Te.global===Te||Te.window===Te||Te.self===Te)&&(pe=Te),x(Ce&&me?ne?me.exports:Ce:pe[k]={})})(Ft,"luaparse",function(pe){pe.version="0.3.1";var k,x,Ce,me,Te,ne=pe.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function Ie(l,u){return u=u||0,l<128?String.fromCharCode(l):l<2048?String.fromCharCode(u|192|l>>6,u|128|l&63):l<65536?String.fromCharCode(u|224|l>>12,u|128|l>>6&63,u|128|l&63):l<1114112?String.fromCharCode(u|240|l>>18,u|128|l>>12&63,u|128|l>>6&63,u|128|l&63):null}function Ye(l,u){for(var V=l.toString(16);V.length<u;)V="0"+V;return V}function ct(l){return function(u){var V=l.exec(u);if(!V)return u;re(null,Y.invalidCodeUnit,Ye(V[0].charCodeAt(0),4).toUpperCase())}}var Ke={"pseudo-latin1":{fixup:ct(/[^\x00-\xff]/),encodeByte:function(l){return l===null?"":String.fromCharCode(l)},encodeUTF8:function(l){return Ie(l)}},"x-user-defined":{fixup:ct(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(l){return l===null?"":l>=128?String.fromCharCode(l|63232):String.fromCharCode(l)},encodeUTF8:function(l){return Ie(l,63232)}},none:{discardStrings:!0,fixup:function(l){return l},encodeByte:function(l){return""},encodeUTF8:function(l){return""}}},F=1,Ne=2,$e=4,fe=8,He=16,xe=32,ye=64,Je=128,et=256;pe.tokenTypes={EOF:F,StringLiteral:Ne,Keyword:$e,Identifier:fe,NumericLiteral:He,Punctuator:xe,BooleanLiteral:ye,NilLiteral:Je,VarargLiteral:et};var Y=pe.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},de=pe.ast={labelStatement:function(l){return{type:"LabelStatement",label:l}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(l){return{type:"GotoStatement",label:l}},returnStatement:function(l){return{type:"ReturnStatement",arguments:l}},ifStatement:function(l){return{type:"IfStatement",clauses:l}},ifClause:function(l,u){return{type:"IfClause",condition:l,body:u}},elseifClause:function(l,u){return{type:"ElseifClause",condition:l,body:u}},elseClause:function(l){return{type:"ElseClause",body:l}},whileStatement:function(l,u){return{type:"WhileStatement",condition:l,body:u}},doStatement:function(l){return{type:"DoStatement",body:l}},repeatStatement:function(l,u){return{type:"RepeatStatement",condition:l,body:u}},localStatement:function(l,u){return{type:"LocalStatement",variables:l,init:u}},assignmentStatement:function(l,u){return{type:"AssignmentStatement",variables:l,init:u}},callStatement:function(l){return{type:"CallStatement",expression:l}},functionStatement:function(l,u,V,I){return{type:"FunctionDeclaration",identifier:l,isLocal:V,parameters:u,body:I}},forNumericStatement:function(l,u,V,I,W){return{type:"ForNumericStatement",variable:l,start:u,end:V,step:I,body:W}},forGenericStatement:function(l,u,V){return{type:"ForGenericStatement",variables:l,iterators:u,body:V}},chunk:function(l){return{type:"Chunk",body:l}},identifier:function(l){return{type:"Identifier",name:l}},literal:function(l,u,V){return l=l===Ne?"StringLiteral":l===He?"NumericLiteral":l===ye?"BooleanLiteral":l===Je?"NilLiteral":"VarargLiteral",{type:l,value:u,raw:V}},tableKey:function(l,u){return{type:"TableKey",key:l,value:u}},tableKeyString:function(l,u){return{type:"TableKeyString",key:l,value:u}},tableValue:function(l){return{type:"TableValue",value:l}},tableConstructorExpression:function(l){return{type:"TableConstructorExpression",fields:l}},binaryExpression:function(l,u,V){var I=l==="and"||l==="or"?"LogicalExpression":"BinaryExpression";return{type:I,operator:l,left:u,right:V}},unaryExpression:function(l,u){return{type:"UnaryExpression",operator:l,argument:u}},memberExpression:function(l,u,V){return{type:"MemberExpression",indexer:u,identifier:V,base:l}},indexExpression:function(l,u){return{type:"IndexExpression",base:l,index:u}},callExpression:function(l,u){return{type:"CallExpression",base:l,arguments:u}},tableCallExpression:function(l,u){return{type:"TableCallExpression",base:l,arguments:u}},stringCallExpression:function(l,u){return{type:"StringCallExpression",base:l,argument:u}},comment:function(l,u){return{type:"Comment",value:l,raw:u}}};function oe(l){if(D){var u=$.pop();u.complete(),u.bless(l)}return x.onCreateNode&&x.onCreateNode(l),l}var Ze=Array.prototype.slice,it=function(l,u){for(var V=0,I=l.length;V<I;++V)if(l[V]===u)return V;return-1};Array.prototype.indexOf&&(it=function(l,u){return l.indexOf(u)});function gt(l,u,V){for(var I=0,W=l.length;I<W;++I)if(l[I][u]===V)return I;return-1}function rt(l){var u=Ze.call(arguments,1);return l=l.replace(/%(\d)/g,function(V,I){return""+u[I-1]||""}),l}var ut=function(l){for(var u=Ze.call(arguments,1),V,I,W=0,he=u.length;W<he;++W){V=u[W];for(I in V)Object.prototype.hasOwnProperty.call(V,I)&&(l[I]=V[I])}return l};Object.assign&&(ut=Object.assign),pe.SyntaxError=SyntaxError;function tt(l){return Object.create?Object.create(l,{line:{writable:!0,value:l.line},index:{writable:!0,value:l.index},column:{writable:!0,value:l.column}}):l}function re(l){var u=rt.apply(null,Ze.call(arguments,1)),V,I;throw l===null||typeof l.line>"u"?(I=b-g+1,V=tt(new SyntaxError(rt("[%1:%2] %3",T,I,u))),V.index=b,V.line=T,V.column=I):(I=l.range[0]-l.lineStart,V=tt(new SyntaxError(rt("[%1:%2] %3",l.line,I,u))),V.line=l.line,V.index=l.range[0],V.column=I),V}function G(l){var u=k.slice(l.range[0],l.range[1]);return u||l.value}function we(l,u){re(u,Y.expectedToken,l,G(u))}function Oe(l){var u=G(_e);if(typeof l.type<"u"){var V;switch(l.type){case Ne:V="string";break;case $e:V="keyword";break;case fe:V="identifier";break;case He:V="number";break;case xe:V="symbol";break;case ye:V="boolean";break;case Je:return re(l,Y.unexpected,"symbol","nil",u);case F:return re(l,Y.unexpectedEOF)}return re(l,Y.unexpected,V,G(l),u)}return re(l,Y.unexpected,"symbol",l,u)}var b,q,ue,_e,O,S,T,g;pe.lex=_;function _(){for(n();k.charCodeAt(b)===45&&k.charCodeAt(b+1)===45;)Ve(),n();if(b>=Ce)return{type:F,value:"<eof>",line:T,lineStart:g,range:[b,b]};var l=k.charCodeAt(b),u=k.charCodeAt(b+1);if(S=b,vt(l))return r();switch(l){case 39:case 34:return m();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return e();case 46:return X(u)?e():u===46?k.charCodeAt(b+2)===46?f():a(".."):a(".");case 61:return a(u===61?"==":"=");case 62:return me.bitwiseOperators&&u===62?a(">>"):a(u===61?">=":">");case 60:return me.bitwiseOperators&&u===60?a("<<"):a(u===61?"<=":"<");case 126:if(u===61)return a("~=");if(!me.bitwiseOperators)break;return a("~");case 58:return me.labels&&u===58?a("::"):a(":");case 91:return u===91||u===61?C():a("[");case 47:return me.integerDivision&&u===47?a("//"):a("/");case 38:case 124:if(!me.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return a(k.charAt(b))}return Oe(k.charAt(b))}function L(){var l=k.charCodeAt(b),u=k.charCodeAt(b+1);return Ue(l)?(l===10&&u===13&&++b,l===13&&u===10&&++b,++T,g=++b,!0):!1}function n(){for(;b<Ce;){var l=k.charCodeAt(b);if(Pe(l))++b;else if(!L())break}}function r(){for(var l,u;pt(k.charCodeAt(++b)););return l=Te.fixup(k.slice(S,b)),ht(l)?u=$e:l==="true"||l==="false"?(u=ye,l=l==="true"):l==="nil"?(u=Je,l=null):u=fe,{type:u,value:l,line:T,lineStart:g,range:[S,b]}}function a(l){return b+=l.length,{type:xe,value:l,line:T,lineStart:g,range:[S,b]}}function f(){return b+=3,{type:et,value:"...",line:T,lineStart:g,range:[S,b]}}function m(){for(var l=k.charCodeAt(b++),u=T,V=g,I=b,W=Te.discardStrings?null:"",he;he=k.charCodeAt(b++),l!==he;)if((b>Ce||Ue(he))&&(W+=k.slice(I,b-1),re(null,Y.unfinishedString,k.slice(S,b-1))),he===92){if(!Te.discardStrings){var be=k.slice(I,b-1);W+=Te.fixup(be)}var Re=ge();Te.discardStrings||(W+=Re),I=b}return Te.discardStrings||(W+=Te.encodeByte(null),W+=Te.fixup(k.slice(I,b-1))),{type:Ne,value:W,line:u,lineStart:V,lastLine:T,lastLineStart:g,range:[S,b]}}function C(){var l=T,u=g,V=Ee(!1);return V===!1&&re(q,Y.expected,"[",G(q)),{type:Ne,value:Te.discardStrings?null:Te.fixup(V),line:l,lineStart:u,lastLine:T,lastLineStart:g,range:[S,b]}}function e(){var l=k.charAt(b),u=k.charAt(b+1),V=l==="0"&&"xX".indexOf(u||null)>=0?d():w(),I=i(),W=s();return W&&(I||V.hasFractionPart)&&re(null,Y.malformedNumber,k.slice(S,b)),{type:He,value:V.value,line:T,lineStart:g,range:[S,b]}}function i(){if(me.imaginaryNumbers)return"iI".indexOf(k.charAt(b)||null)>=0?(++b,!0):!1}function s(){if(me.integerSuffixes){if("uU".indexOf(k.charAt(b)||null)>=0)if(++b,"lL".indexOf(k.charAt(b)||null)>=0){if(++b,"lL".indexOf(k.charAt(b)||null)>=0)return++b,"ULL";re(null,Y.malformedNumber,k.slice(S,b))}else re(null,Y.malformedNumber,k.slice(S,b));else if("lL".indexOf(k.charAt(b)||null)>=0){if(++b,"lL".indexOf(k.charAt(b)||null)>=0)return++b,"LL";re(null,Y.malformedNumber,k.slice(S,b))}}}function d(){var l=0,u=1,V=1,I,W,he,be;for(be=b+=2,We(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(S,b));We(k.charCodeAt(b));)++b;I=parseInt(k.slice(be,b),16);var Re=!1;if(k.charAt(b)==="."){for(Re=!0,W=++b;We(k.charCodeAt(b));)++b;l=k.slice(W,b),l=W===b?0:parseInt(l,16)/Math.pow(16,b-W)}var St=!1;if("pP".indexOf(k.charAt(b)||null)>=0){for(St=!0,++b,"+-".indexOf(k.charAt(b)||null)>=0&&(V=k.charAt(b++)==="+"?1:-1),he=b,X(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(S,b));X(k.charCodeAt(b));)++b;u=k.slice(he,b),u=Math.pow(2,u*V)}return{value:(I+l)*u,hasFractionPart:Re||St}}function w(){for(;X(k.charCodeAt(b));)++b;var l=!1;if(k.charAt(b)===".")for(l=!0,++b;X(k.charCodeAt(b));)++b;var u=!1;if("eE".indexOf(k.charAt(b)||null)>=0)for(u=!0,++b,"+-".indexOf(k.charAt(b)||null)>=0&&++b,X(k.charCodeAt(b))||re(null,Y.malformedNumber,k.slice(S,b));X(k.charCodeAt(b));)++b;return{value:parseFloat(k.slice(S,b)),hasFractionPart:l||u}}function Q(){var l=b++;for(k.charAt(b++)!=="{"&&re(null,Y.braceExpected,"{","\\"+k.slice(l,b)),We(k.charCodeAt(b))||re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(l,b));k.charCodeAt(b)===48;)++b;for(var u=b;We(k.charCodeAt(b));)++b,b-u>6&&re(null,Y.tooLargeCodepoint,"\\"+k.slice(l,b));var V=k.charAt(b++);V!=="}"&&(V==='"'||V==="'"?re(null,Y.braceExpected,"}","\\"+k.slice(l,b--)):re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(l,b)));var I=parseInt(k.slice(u,b-1)||"0",16),W="\\"+k.slice(l,b);return I>1114111&&re(null,Y.tooLargeCodepoint,W),Te.encodeUTF8(I,W)}function ge(){var l=b;switch(k.charAt(b)){case"a":return++b,"\x07";case"n":return++b,`
`;case"r":return++b,"\r";case"t":return++b,"	";case"v":return++b,"\v";case"b":return++b,"\b";case"f":return++b,"\f";case"\r":case`
`:return L(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;X(k.charCodeAt(b))&&b-l<3;)++b;var u=k.slice(l,b),V=parseInt(u,10);return V>255&&re(null,Y.decimalEscapeTooLarge,"\\"+V),Te.encodeByte(V,"\\"+u);case"z":if(me.skipWhitespaceEscape)return++b,n(),"";break;case"x":if(me.hexEscapes){if(We(k.charCodeAt(b+1))&&We(k.charCodeAt(b+2)))return b+=3,Te.encodeByte(parseInt(k.slice(l+1,b),16),"\\"+k.slice(l,b));re(null,Y.hexadecimalDigitExpected,"\\"+k.slice(l,b+2))}break;case"u":if(me.unicodeEscapes)return Q();break;case"\\":case'"':case"'":return k.charAt(b++)}return me.strictEscapes&&re(null,Y.invalidEscape,"\\"+k.slice(l,b+1)),k.charAt(b++)}function Ve(){S=b,b+=2;var l=k.charAt(b),u="",V=!1,I=b,W=g,he=T;if(l==="["&&(u=Ee(!0),u===!1?u=l:V=!0),!V){for(;b<Ce&&!Ue(k.charCodeAt(b));)++b;x.comments&&(u=k.slice(I,b))}if(x.comments){var be=de.comment(u,k.slice(S,b));x.locations&&(be.loc={start:{line:he,column:S-W},end:{line:T,column:b-g}}),x.ranges&&(be.range=[S,b]),x.onCreateNode&&x.onCreateNode(be),O.push(be)}}function Ee(l){var u=0,V="",I=!1,W,he,be=T;for(++b;k.charAt(b+u)==="=";)++u;if(k.charAt(b+u)!=="[")return!1;for(b+=u+1,Ue(k.charCodeAt(b))&&L(),he=b;b<Ce;){for(;Ue(k.charCodeAt(b));)L();if(W=k.charAt(b++),W==="]"){I=!0;for(var Re=0;Re<u;++Re)k.charAt(b+Re)!=="="&&(I=!1);k.charAt(b+u)!=="]"&&(I=!1)}if(I)return V+=k.slice(he,b-1),b+=u+1,V}re(null,l?Y.unfinishedLongComment:Y.unfinishedLongString,be,"<eof>")}function Z(){ue=q,q=_e,_e=_()}function H(l){return l===q.value?(Z(),!0):!1}function ee(l){l===q.value?Z():re(q,Y.expected,l,G(q))}function Pe(l){return l===9||l===32||l===11||l===12}function Ue(l){return l===10||l===13}function X(l){return l>=48&&l<=57}function We(l){return l>=48&&l<=57||l>=97&&l<=102||l>=65&&l<=70}function vt(l){return!!(l>=65&&l<=90||l>=97&&l<=122||l===95||me.extendedIdentifiers&&l>=128)}function pt(l){return!!(l>=65&&l<=90||l>=97&&l<=122||l===95||l>=48&&l<=57||me.extendedIdentifiers&&l>=128)}function ht(l){switch(l.length){case 2:return l==="do"||l==="if"||l==="in"||l==="or";case 3:return l==="and"||l==="end"||l==="for"||l==="not";case 4:return l==="else"||l==="then"?!0:me.labels&&!me.contextualGoto?l==="goto":!1;case 5:return l==="break"||l==="local"||l==="until"||l==="while";case 6:return l==="elseif"||l==="repeat"||l==="return";case 8:return l==="function"}return!1}function Tt(l){return xe===l.type?"#-~".indexOf(l.value)>=0:$e===l.type?l.value==="not":!1}function nt(l){if(F===l.type)return!0;if($e!==l.type)return!1;switch(l.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var je,Xe,t;function M(){var l=je[Xe++].slice();je.push(l),x.onCreateScope&&x.onCreateScope()}function R(){je.pop(),--Xe,x.onDestroyScope&&x.onDestroyScope()}function P(l){x.onLocalDeclaration&&x.onLocalDeclaration(l),it(je[Xe],l)===-1&&je[Xe].push(l)}function B(l){P(l.name),E(l,!0)}function E(l,u){!u&&gt(t,"name",l.name)===-1&&t.push(l),l.isLocal=u}function N(l){return it(je[Xe],l)!==-1}var $=[],D;function J(){return new te(q)}function te(l){x.locations&&(this.loc={start:{line:l.line,column:l.range[0]-l.lineStart},end:{line:0,column:0}}),x.ranges&&(this.range=[l.range[0],0])}te.prototype.complete=function(){x.locations&&(this.loc.end.line=ue.lastLine||ue.line,this.loc.end.column=ue.range[1]-(ue.lastLineStart||ue.lineStart)),x.ranges&&(this.range[1]=ue.range[1])},te.prototype.bless=function(l){if(this.loc){var u=this.loc;l.loc={start:{line:u.start.line,column:u.start.column},end:{line:u.end.line,column:u.end.column}}}this.range&&(l.range=[this.range[0],this.range[1]])};function ce(){D&&$.push(J())}function se(l){D&&$.push(l)}function ke(){this.scopes=[],this.pendingGotos=[]}ke.prototype.isInLoop=function(){for(var l=this.scopes.length;l-- >0;)if(this.scopes[l].isLoop)return!0;return!1},ke.prototype.pushScope=function(l){var u={labels:{},locals:[],deferredGotos:[],isLoop:!!l};this.scopes.push(u)},ke.prototype.popScope=function(){for(var l=0;l<this.pendingGotos.length;++l){var u=this.pendingGotos[l];u.maxDepth>=this.scopes.length&&--u.maxDepth<=0&&re(u.token,Y.labelNotVisible,u.target)}this.scopes.pop()},ke.prototype.addGoto=function(l,u){for(var V=[],I=0;I<this.scopes.length;++I){var W=this.scopes[I];if(V.push(W.locals.length),Object.prototype.hasOwnProperty.call(W.labels,l))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:l,token:u,localCounts:V})},ke.prototype.addLabel=function(l,u){var V=this.currentScope();if(Object.prototype.hasOwnProperty.call(V.labels,l))re(u,Y.labelAlreadyDefined,l,V.labels[l].line);else{for(var I=[],W=0;W<this.pendingGotos.length;++W){var he=this.pendingGotos[W];if(he.maxDepth>=this.scopes.length&&he.target===l){he.localCounts[this.scopes.length-1]<V.locals.length&&V.deferredGotos.push(he);continue}I.push(he)}this.pendingGotos=I}V.labels[l]={localCount:V.locals.length,line:u.line}},ke.prototype.addLocal=function(l,u){this.currentScope().locals.push({name:l,token:u})},ke.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},ke.prototype.raiseDeferredErrors=function(){for(var l=this.currentScope(),u=l.deferredGotos,V=0;V<u.length;++V){var I=u[V];re(I.token,Y.gotoJumpInLocalScope,I.target,l.locals[I.localCounts[this.scopes.length-1]].name)}};function ze(){this.level=0,this.loopLevels=[]}ze.prototype.isInLoop=function(){return!!this.loopLevels.length},ze.prototype.pushScope=function(l){++this.level,l&&this.loopLevels.push(this.level)},ze.prototype.popScope=function(){var l=this.loopLevels,u=l.length;u&&l[u-1]===this.level&&l.pop(),--this.level},ze.prototype.addGoto=ze.prototype.addLabel=function(){throw new Error("This should never happen")},ze.prototype.addLocal=ze.prototype.raiseDeferredErrors=function(){};function ve(){return me.labels?new ke:new ze}function qe(){Z(),ce(),x.scope&&M();var l=ve();l.allowVararg=!0,l.pushScope();var u=Ae(l);return l.popScope(),x.scope&&R(),F!==q.type&&Oe(q),D&&!u.length&&(ue=q),oe(de.chunk(u))}function Ae(l){for(var u=[],V;!nt(q);){if(q.value==="return"||!me.relaxedBreak&&q.value==="break"){u.push(Me(l));break}V=Me(l),H(";"),V&&u.push(V)}return u}function Me(l){if(ce(),xe===q.type&&H("::"))return $t(l);if(me.emptyStatement&&H(";")){D&&$.pop();return}if(l.raiseDeferredErrors(),$e===q.type)switch(q.value){case"local":return Z(),Jt(l);case"if":return Z(),jt(l);case"return":return Z(),Kt(l);case"function":Z();var u=Xt();return Lt(u);case"while":return Z(),Wt(l);case"for":return Z(),Ht(l);case"repeat":return Z(),qt(l);case"break":return Z(),l.isInLoop()||re(q,Y.noLoopToBreak,q.value),xt();case"do":return Z(),Ot(l);case"goto":return Z(),Bt(l)}return me.contextualGoto&&q.type===fe&&q.value==="goto"&&_e.type===fe&&_e.value!=="goto"?(Z(),Bt(l)):(D&&$.pop(),Zt(l))}function $t(l){var u=q,V=De();return x.scope&&(P("::"+u.value+"::"),E(V,!0)),ee("::"),l.addLabel(u.value,u),oe(de.labelStatement(V))}function xt(){return oe(de.breakStatement())}function Bt(l){var u=q.value,V=ue,I=De();return l.addGoto(u,V),oe(de.gotoStatement(I))}function Ot(l){x.scope&&M(),l.pushScope();var u=Ae(l);return l.popScope(),x.scope&&R(),ee("end"),oe(de.doStatement(u))}function Wt(l){var u=Fe(l);ee("do"),x.scope&&M(),l.pushScope(!0);var V=Ae(l);return l.popScope(),x.scope&&R(),ee("end"),oe(de.whileStatement(u,V))}function qt(l){x.scope&&M(),l.pushScope(!0);var u=Ae(l);ee("until"),l.raiseDeferredErrors();var V=Fe(l);return l.popScope(),x.scope&&R(),oe(de.repeatStatement(V,u))}function Kt(l){var u=[];if(q.value!=="end"){var V=bt(l);for(V!=null&&u.push(V);H(",");)V=Fe(l),u.push(V);H(";")}return oe(de.returnStatement(u))}function jt(l){var u=[],V,I,W;for(D&&(W=$[$.length-1],$.push(W)),V=Fe(l),ee("then"),x.scope&&M(),l.pushScope(),I=Ae(l),l.popScope(),x.scope&&R(),u.push(oe(de.ifClause(V,I))),D&&(W=J());H("elseif");)se(W),V=Fe(l),ee("then"),x.scope&&M(),l.pushScope(),I=Ae(l),l.popScope(),x.scope&&R(),u.push(oe(de.elseifClause(V,I))),D&&(W=J());return H("else")&&(D&&(W=new te(ue),$.push(W)),x.scope&&M(),l.pushScope(),I=Ae(l),l.popScope(),x.scope&&R(),u.push(oe(de.elseClause(I)))),ee("end"),oe(de.ifStatement(u))}function Ht(l){var u=De(),V;if(x.scope&&(M(),B(u)),H("=")){var I=Fe(l);ee(",");var W=Fe(l),he=H(",")?Fe(l):null;return ee("do"),l.pushScope(!0),V=Ae(l),l.popScope(),ee("end"),x.scope&&R(),oe(de.forNumericStatement(u,I,W,he,V))}else{for(var be=[u];H(",");)u=De(),x.scope&&B(u),be.push(u);ee("in");var Re=[];do{var St=Fe(l);Re.push(St)}while(H(","));return ee("do"),l.pushScope(!0),V=Ae(l),l.popScope(),ee("end"),x.scope&&R(),oe(de.forGenericStatement(be,Re,V))}}function Jt(l){var u,V=ue;if(fe===q.type){var I=[],W=[];do u=De(),I.push(u),l.addLocal(u.name,V);while(H(","));if(H("="))do{var he=Fe(l);W.push(he)}while(H(","));if(x.scope)for(var be=0,Re=I.length;be<Re;++be)B(I[be]);return oe(de.localStatement(I,W))}if(H("function"))return u=De(),l.addLocal(u.name,V),x.scope&&(B(u),M()),Lt(u,!0);we("<name>",q)}function Zt(l){var u,V,I,W,he,be=[];D&&(V=J());do{if(D&&(u=J()),fe===q.type)he=q.value,W=De(),x.scope&&E(W,N(he)),I=!0;else if(q.value==="(")Z(),W=Fe(l),ee(")"),I=!1;else return Oe(q);e:for(;;){switch(Ne===q.type?'"':q.value){case".":case"[":I=!0;break;case":":case"(":case"{":case'"':I=null;break;default:break e}W=Ut(W,u,l)}if(be.push(W),q.value!==",")break;if(!I)return Oe(q);Z()}while(!0);if(be.length===1&&I===null)return se(u),oe(de.callStatement(be[0]));if(!I)return Oe(q);ee("=");var Re=[];do Re.push(Fe(l));while(H(","));return se(V),oe(de.assignmentStatement(be,Re))}function De(){ce();var l=q.value;return fe!==q.type&&we("<name>",q),Z(),oe(de.identifier(l))}function Lt(l,u){var V=ve();V.pushScope();var I=[];if(ee("("),!H(")"))for(;;){if(fe===q.type){var W=De();if(x.scope&&B(W),I.push(W),H(","))continue}else et===q.type?(V.allowVararg=!0,I.push(Et(V))):we("<name> or '...'",q);ee(")");break}var he=Ae(V);return V.popScope(),ee("end"),x.scope&&R(),u=u||!1,oe(de.functionStatement(l,I,u,he))}function Xt(){var l,u,V;for(D&&(V=J()),l=De(),x.scope&&(E(l,N(l.name)),M());H(".");)se(V),u=De(),l=oe(de.memberExpression(l,".",u));return H(":")&&(se(V),u=De(),l=oe(de.memberExpression(l,":",u)),x.scope&&P("self")),l}function It(l){for(var u=[],V,I;;){if(ce(),xe===q.type&&H("["))V=Fe(l),ee("]"),ee("="),I=Fe(l),u.push(oe(de.tableKey(V,I)));else if(fe===q.type)_e.value==="="?(V=De(),Z(),I=Fe(l),u.push(oe(de.tableKeyString(V,I)))):(I=Fe(l),u.push(oe(de.tableValue(I))));else{if((I=bt(l))==null){$.pop();break}u.push(oe(de.tableValue(I)))}if(",;".indexOf(q.value)>=0){Z();continue}break}return ee("}"),oe(de.tableConstructorExpression(u))}function bt(l){var u=Ct(0,l);return u}function Fe(l){var u=bt(l);if(u==null)we("<expression>",q);else return u}function Qt(l){var u=l.charCodeAt(0),V=l.length;if(V===1)switch(u){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(V===2)switch(u){case 47:return 10;case 46:return 8;case 60:case 62:return l==="<<"||l===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(u===97&&l==="and")return 2;return 0}function Ct(l,u){var V=q.value,I,W;if(D&&(W=J()),Tt(q)){ce(),Z();var he=Ct(10,u);he==null&&we("<expression>",q),I=oe(de.unaryExpression(V,he))}if(I==null&&(I=Et(u),I==null&&(I=Yt(u))),I==null)return null;for(var be;V=q.value,be=xe===q.type||$e===q.type?Qt(V):0,!(be===0||be<=l);){(V==="^"||V==="..")&&--be,Z();var Re=Ct(be,u);Re==null&&we("<expression>",q),D&&$.push(W),I=oe(de.binaryExpression(V,I,Re))}return I}function Ut(l,u,V){var I,W;if(xe===q.type)switch(q.value){case"[":return se(u),Z(),I=Fe(V),ee("]"),oe(de.indexExpression(l,I));case".":return se(u),Z(),W=De(),oe(de.memberExpression(l,".",W));case":":return se(u),Z(),W=De(),l=oe(de.memberExpression(l,":",W)),se(u),wt(l,V);case"(":case"{":return se(u),wt(l,V)}else if(Ne===q.type)return se(u),wt(l,V);return null}function Yt(l){var u,V,I;if(D&&(I=J()),fe===q.type)V=q.value,u=De(),x.scope&&E(u,N(V));else if(H("("))u=Fe(l),ee(")");else return null;for(;;){var W=Ut(u,I,l);if(W===null)break;u=W}return u}function wt(l,u){if(xe===q.type)switch(q.value){case"(":me.emptyStatement||q.line!==ue.line&&re(null,Y.ambiguousSyntax,q.value),Z();var V=[],I=bt(u);for(I!=null&&V.push(I);H(",");)I=Fe(u),V.push(I);return ee(")"),oe(de.callExpression(l,V));case"{":ce(),Z();var W=It(u);return oe(de.tableCallExpression(l,W))}else if(Ne===q.type)return oe(de.stringCallExpression(l,Et(u)));we("function arguments",q)}function Et(l){var u=Ne|He|ye|Je|et,V=q.value,I=q.type,W;if(D&&(W=J()),I===et&&!l.allowVararg&&re(q,Y.cannotUseVararg,q.value),I&u){se(W);var he=k.slice(q.range[0],q.range[1]);return Z(),oe(de.literal(I,V,he))}else{if($e===I&&V==="function")return se(W),Z(),x.scope&&M(),Lt(null);if(H("{"))return se(W),It(l)}}pe.parse=en;var Mt={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function en(l,u){if(typeof u>"u"&&typeof l=="object"&&(u=l,l=void 0),u||(u={}),k=l||"",x=ut({},ne,u),b=0,T=1,g=0,Ce=k.length,je=[[]],Xe=0,t=[],$=[],!Object.prototype.hasOwnProperty.call(Mt,x.luaVersion))throw new Error(rt("Lua version '%1' not supported",x.luaVersion));if(me=ut({},Mt[x.luaVersion]),x.extendedIdentifiers!==void 0&&(me.extendedIdentifiers=!!x.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(Ke,x.encodingMode))throw new Error(rt("Encoding mode '%1' not supported",x.encodingMode));return Te=Ke[x.encodingMode],x.comments&&(O=[]),x.wait?pe:zt()}pe.write=Pt;function Pt(l){return k+=String(l),Ce=k.length,pe}pe.end=zt;function zt(l){typeof l<"u"&&Pt(l),k&&k.substr(0,2)==="#!"&&(k=k.replace(/^.*/,function(V){return V.replace(/./g," ")})),Ce=k.length,D=x.locations||x.ranges,_e=_();var u=qe();if(x.comments&&(u.comments=O),x.scope&&(u.globals=t),$.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return u}})})(Vt,Vt.exports);var dn=Vt.exports;const st=tn(dn);var kt={},At={exports:{}};At.exports;(function(at){function p(O){for(var S=0,T=O.length;T--;)S+=O.charCodeAt(T),S+=S<<10,S^=S>>6;return S+=S<<3,S^=S>>11,S+=S<<15,S}const pe=console.log,k=function(O,S){if(!O)throw S};function x(O,S){if(!O)return 0;var T=O.toString().split(".");return T.length>1?parseInt(T[0],S)+parseInt(T[1],S)/Math.pow(S,T[1].length):parseInt(T[0],S)}let Ce=[" ",`
`,"	","\r"],me={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const Te=new Proxy(me,{get(O,S){return x(S)}});let ne=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ie=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Ye=["0","1","2","3","4","5","6","7","8","9"],ct=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],Ke=["0","1"],F=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Ne=["~","=",">","<"],$e=["+","-","*","/","^","..","%","//"],fe=["+=","-=","*=","/=","^=","..=","%=","//="],He=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],xe=["else","elseif","until","end"],ye=["-","not","#","~"],Je=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],et=11,Y={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function de(O){let S=0,T=O.length,g=[];function _(e){return e=e||0,S<=T?O.substr(S+e,1):""}function L(){if(S<=T){let e=O.substr(S,1);return S++,e}else return""}function n(e){let i=0,s=1,d=1;for(;i<=S;)O.substr(i,1)==`
`?(s++,d=1):d++;let w;for(w=0;w<g.length;w++){let Q=g[w];pe(`${Q.Type}<${Q.Source}>`)}throw`file<${s}:${d}>: ${e}`}function r(e){for(;;){let i=L();if(i=="")n("Unfinished long string.");else if(i=="]"){let s=!0,d;for(d=1;d<=e;d++)if(_()=="=")S++;else{s=!1;break}if(s&&L()=="]")return}}}function a(){let e=S;for(;_()=="=";)S++;if(_()=="[")return S++,S-e-1;S=e}let f=0,m=0;function C(e){let i=O.substr(m,S-m),s=null;e=="Number"&&(i.substr(0,2).toLowerCase()=="0x"?(s="hex",parseInt(i,16)<999999999999&&(i=parseInt(i,16))):i.substr(0,2).toLowerCase()=="0b"&&(s="bin",parseInt(i.substr(2),2)<999999999999&&(i=parseInt(i.substr(2),2))));let d={Type:e,LeadingWhite:O.substr(f,m-f),Source:i};return s!==null&&(d.NType=s),g.push(d),f=S,m=S,d}for(;;){for(f=S;;){let i=_();if(i=="")break;if(i=="-")if(_(1)=="-")if(S+=2,_()=="["){S++;let s=a();if(s!=null)r(s),f=S;else for(;;){let d=L();if(d==""||d==`
`)break}}else for(;;){let s=L();if(s==""||s==`
`)break}else break;else if(Ce.includes(i))S++;else break}O.substr(f,S-f),m=S;let e=L();if(e==""){C("Eof");break}else if(e=="'"||e=='"'){for(;;){let i=L();if(i=="\\"){let s=L();if(Te[s]==null)throw`Invalid Escape Sequence \`${s}\`.`}else{if(i==e)break;if(i=="")throw"Unfinished string!"}}C("String")}else if(e=="`"){for(;;){let i=L();if(i=="\\"){let s=L();if(Te[s]==null)throw`Invalid Escape Sequence \`${s}\`.`}else{if(i==e)break;if(i=="")throw"Unfinished string!"}}C("Hash")}else if(ne.includes(e)){for(;Ie.includes(_());)S++;He.includes(O.substr(m,S-m))?C("Keyword"):C("Ident")}else if(Ye.includes(e)||e=="."&&Ye.includes(_())){if(e=="0"&&_().toLowerCase()=="x")for(S++;ct.includes(_())||_()==="_";)S++;else if(e=="0"&&_().toLowerCase()=="b")for(S++;Ke.includes(_())||_()==="_";)S++;else{for(;Ye.includes(_())||_()==="_";)S++;if(_()==".")for(S++;Ye.includes(_());)S++;if(_()=="e"||_()=="E")for(S++,(_()=="-"||_()=="+")&&S++;Ye.includes(_());)S++}C("Number")}else if(e=="["){let i=a();i!=null?(r(i),C("String")):C("Symbol")}else if(e==".")_()=="."&&(L(),(_()=="."||_()=="=")&&L()),C("Symbol");else if(e+_()=="//")L(),_()=="="&&L(),C("Symbol");else if(e+_()=="::")L(),C("Symbol");else if(Je.includes(e+_()))L(),C("Symbol");else if(Ne.includes(e))_()=="="&&S++,C("Symbol");else if($e.includes(e)&&_()=="=")L(),C("Symbol");else if(F.includes(e))C("Symbol");else throw`Bad symbol \`${e}\` in source. ${S}`}return g}function oe(O){let S=de(O),T=0;function g(){let R=S[T];return T<S.length&&T++,R}function _(R){return R=T+(R||0),S[R]||S[S.length-1]}function L(R){let P=1,B=0,E=0;for(;;){let N=S[E],$;N==R?$=N.LeadingWhite:$=N.LeadingWhite+N.Source;let D;for(D=0;D<=$.length;D++)$.substr(D,1)==`
`?(P++,B=0):B++;if(N==R)break;E++}return`${P}:${B+1}`}function n(){let R=_();return`<${R.Type} \`${R.Source}\`> at: ${L(R)}`}function r(){let R=_();return R.Type=="Eof"||R.Type=="Keyword"&&xe.includes(R.Source)}function a(){return ye.includes(_().Source)||!1}function f(){return Je.includes(_().Source)||!1}function m(R,P){let B=_();if(B.Type==R&&(P==null||B.Source==P))return g();{let E;for(E=-3;E<=3;E++)pe(`Tokens[${E}] = \`${_(E).Source}\``);throw P?`${L(B)}: \`${P}\` expected.`:`${L(B)}: ${R} expected.`}}function C(R){let P=R.GetFirstToken,B=R.GetLastToken,E=R;return R.GetFirstToken=function(){let N=P(E);return k(N),N},R.GetLastToken=function(){let N=B(E);return k(N),N},R}let e,i;function s(R,P){let B=[i(R,P)],E=[];for(;_().Source==",";)E.push(g()),B.push(i(R,P));return[B,E]}function d(R,P){var E,N,$,D;let B=_();if(B.Source=="("){let J=g(),te=i(R,P),ce=m("Symbol",")"),se;return se=C({Type:"ParenExpr",Expression:te,Token_OpenParen:J,Token_CloseParen:ce,GetFirstToken:()=>se.Token_OpenParen,GetLastToken:()=>se.Token_CloseParen}),se}else if(B.Type=="Ident"){let J;return J=C({Type:"VariableExpr",Token:g(),GetFirstToken:()=>J.Token,GetLastToken:()=>J.Token}),R[J.Token.Source]!=null&&((N=(E=R[J.Token.Source])==null?void 0:E.Tokens)==null?void 0:N.push)!=null?(R[J.Token.Source].Tokens.push(J.Token),R[J.Token.Source].UseCountIncrease()):P[J.Token.Source]!=null&&((D=($=P[J.Token.Source])==null?void 0:$.Tokens)==null?void 0:D.push)!=null&&(P[J.Token.Source].Tokens.push(J.Token),P[J.Token.Source].UseCountIncrease()),J}else throw pe(n()),`${L(B)}: Unexpected symbol. ${B.Type} ${B.Source}`}function w(R,P){let B=m("Symbol","{"),E=[],N=[];for(;_().Source!="}";){if(_().Source=="["){let J=g(),te=i(R,P),ce=m("Symbol","]"),se=m("Symbol","="),ke=i(R,P);te.Token&&te.Token.Source,E.push({EntryType:"Index",Index:te,Value:ke,Token_OpenBracket:J,Token_CloseBracket:ce,Token_Equals:se})}else if(_().Type=="Ident"&&_(1).Source=="="){let J=g(),te=g(),ce=i(R,P);E.push({EntryType:"Field",Field:J,Value:ce,Token_Equals:te})}else{let J=i(R,P);E.push({EntryType:"Value",Value:J})}if(_().Source==","||_().Source==";")N.push(g());else break}let $=m("Symbol","}"),D;return D=C({Type:"TableLiteral",EntryList:E,Token_SeperatorList:N,Token_OpenBrace:B,Token_CloseBrace:$,GetFirstToken:()=>D.Token_OpenBrace,GetLastToken:()=>D.Token_CloseBrace}),D}function Q(R,P){let B=[],E=[];if(_().Type=="Ident"){let N=g();if(P&&_().Source=="<"&&_(2).Source==">"){let $=_(1).Source;N.Attribute={LeadingWhite:_().LeadingWhite,Source:`<${$}>`},g(),g(),g()}B.push(N)}else if(_().Source=="..."&&R)return[B,E,g()];for(;_().Source==",";){if(E.push(g()),_().Source=="..."&&R)return[B,E,g()];{let N=m("Ident");if(P&&_().Source=="<"&&_(2).Source==">"){let $=_(1).Source;N.Attribute={LeadingWhite:_().LeadingWhite,Source:`<${$}>`},g(),g(),g()}B.push(N)}}return[B,E]}function ge(R,P,B){let E=e(P,B),N=_();if(N.Type=="Keyword"&&N.Source==R)return g(),[E,N];throw pe(N.Type,N.Source),`${L(N)}: ${R} expected.`}function Ve(R,P,B,E){let N=g(),$,D;if(!R){$=[],D=[];let Ae=m("Ident");for($.push(Ae);_().Source==".";)D.push(g()),$.push(m("Ident"));_().Source==":"&&(D.push(g()),$.push(m("Ident")))}let J=m("Symbol","("),[te,ce,se]=Q(!0),ke=m("Symbol",")"),[ze,ve]=ge("end",P,B),qe;return qe=C({Type:R==!0?"FunctionLiteral":"FunctionStat",NameChain:$,ArgList:te,Body:ze,Token_Function:N,Token_NameChainSeperator:D,Token_OpenParen:J,Token_Varg:se,Token_ArgCommaList:ce,Token_CloseParen:ke,Token_End:ve,GetFirstToken:()=>qe.Token_Function,GetLastToken:()=>qe.Token_End}),qe}function Ee(R,P){let B=_();if(B.Source=="("){let E=g(),N=[],$=[];for(;_().Source!=")"&&(N.push(i(R,P)),_().Source==",");)$.push(g());let D=m("Symbol",")"),J;return J=C({CallType:"ArgCall",ArgList:N,Token_CommaList:$,Token_OpenParen:E,Token_CloseParen:D,GetFirstToken:()=>J.Token_OpenParen,GetLastToken:()=>J.Token_CloseParen}),J}else if(B.Source=="{"){let E;return E=C({CallType:"TableCall",TableExpr:i(R,P),GetFirstToken:()=>E.TableExpr.GetFirstToken(),GetLastToken:()=>E.TableExpr.GetLastToken()}),E}else if(B.Type=="String"){let E;return E=C({CallType:"StringCall",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else throw"Function arguments expected."}function Z(R,P){let B=d(R,P);for(k(B,"nil prefixexpr");;){let E=_();if(E.Source=="."){let N=g(),$=m("Ident"),D;D=C({Type:"FieldExpr",Base:B,Field:$,Token_Dot:N,GetFirstToken:()=>D.Base.GetFirstToken(),GetLastToken:()=>D.Field}),B=D}else if(E.Source==":"){let N=g(),$=m("Ident"),D=Ee(R,P),J;J=C({Type:"MethodExpr",Base:B,Method:$,FunctionArguments:D,Token_Colon:N,GetFirstToken:()=>J.Base.GetFirstToken(),GetLastToken:()=>J.FunctionArguments.GetLastToken()}),B=J}else if(E.Source=="["){let N=g(),$=i(R,P),D=m("Symbol","]"),J;J=C({Type:"IndexExpr",Base:B,Index:$,Token_OpenBracket:N,Token_CloseBracket:D,GetFirstToken:()=>J.Base.GetFirstToken(),GetLastToken:()=>J.Token_CloseBracket}),B=J}else if(E.Source=="{"||E.Source=="("||E.Type=="String"){let N;N=C({Type:"CallExpr",Base:B,FunctionArguments:Ee(R,P),GetFirstToken:()=>N.Base.GetFirstToken(),GetLastToken:()=>N.FunctionArguments.GetLastToken()}),B=N}else if(fe.includes(E.Source)){let N=g(),$=i(R,P),D;D=C({Type:"CompoundStat",Base:B,Token_Compound:N,Rhs:$,Lhs:B,GetFirstToken:()=>D.Base.GetFirstToken(),GetLastToken:()=>D.Rhs.GetLastToken()}),B=D}else return B}}function H(R,P){let B=_();if(B.Type=="Number"){let E;return E=C({Type:"NumberLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Type=="String"){let E;return E=C({Type:"StringLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Type=="Hash"){let E;return E=C({Type:"HashLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="nil"){let E;return E=C({Type:"NilLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="true"||B.Source=="false"){let E;return E=C({Type:"BooleanLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else if(B.Source=="..."){let E;return E=C({Type:"VargLiteral",Token:g(),GetFirstToken:()=>E.Token,GetLastToken:()=>E.Token}),E}else return B.Source=="{"?w(R,P):B.Source=="function"?Ve(!0,R,P):Z(R,P)}function ee(R,P,B){let E;if(a()){let N=g(),$=ee(et,P,B),D;D=C({Type:"UnopExpr",Token_Op:N,Rhs:$,GetFirstToken:()=>D.Token_Op,GetLastToken:()=>D.Rhs.GetLastToken()}),E=D}else E=H(P,B),k(E,"nil sipleexpr");for(;f()&&Y[_().Source]!=null&&Y[_().Source][0]>R;){let N=g(),$=ee(Y[N.Source][1],P,B);k($,"RhsNeeded");let D;D=C({Type:"BinopExpr",Lhs:E,Rhs:$,Token_Op:N,GetFirstToken:()=>D.Lhs.GetFirstToken(),GetLastToken:()=>D.Rhs.GetLastToken()}),E=D}return E}i=(R,P)=>ee(0,R,P);function Pe(R,P){let B=Z(R,P);if(B.Type=="MethodExpr"||B.Type=="CallExpr"){let E;return E=C({Type:"CallExprStat",Expression:B,GetFirstToken:()=>E.Expression.GetFirstToken(),GetLastToken:()=>E.Expression.GetLastToken()}),E}else{if(B.Type=="CompoundStat")return B;{let E=[B],N=[];for(;_().Source==",";){N.push(g());let ce=Z(R,P);if(ce.Type=="MethodExpr"||ce.Type=="CallExpr")throw"Bad left hand side of asignment";E.push(ce)}let $=m("Symbol","="),D=[i(R,P)],J=[];for(;_().Source==",";)J.push(g()),D.push(i(R,P));let te;return te=C({Type:"AssignmentStat",Rhs:D,Lhs:E,Token_Equals:$,Token_LhsSeperatorList:N,Token_RhsSeperatorList:J,GetFirstToken:()=>te.Lhs[0].GetFirstToken(),GetLastToken:()=>te.Rhs[te.Rhs.length-1].GetLastToken()}),te}}}function Ue(R,P){let B=g(),E=i(R,P),N=m("Keyword","then"),$=e(R,P),D=[];for(;_().Source=="elseif"||_().Source=="else";){let ce=g(),se,ke;ce.Source=="elseif"&&(se=i(R,P),ke=m("Keyword","then"));let ze=e(R,P);if(D.push({Condition:se,Body:ze,ClauseType:ce.Source,Token:ce,Token_Then:ke}),ce.Source=="else")break}let J=m("Keyword","end"),te;return te=C({Type:"IfStat",Condition:E,Body:$,ElseClauseList:D,Token_If:B,Token_Then:N,Token_End:J,GetFirstToken:()=>te.Token_If,GetLastToken:()=>te.Token_End}),te}function X(R,P){let B=g(),[E,N]=ge("end",R,P),$;return $=C({Type:"DoStat",Body:E,Token_Do:B,Token_End:N,GetFirstToken:()=>$.Token_Do,GetLastToken:()=>$.Token_End}),$}function We(R,P){let B=g(),E=i(R,P),N=m("Keyword","do"),[$,D]=ge("end",R,P),J;return J=C({Type:"WhileStat",Condition:E,Body:$,Token_While:B,Token_Do:N,Token_End:D,GetFirstToken:()=>J.Token_While,GetLastToken:()=>J.Token_End}),J}function vt(R,P){let B=g(),[E,N]=Q();if(_().Source=="="){let $=g(),[D,J]=s(R,P);if(D.length<2||D.length>3)throw"Expected 2 or 3 values for range bounds";let te=m("Keyword","do"),[ce,se]=ge("end",R,P),ke;return ke=C({Type:"NumericForStat",VarList:E,RangeList:D,Body:ce,Token_For:B,Token_VarCommaList:N,Token_Equals:$,Token_RangeCommaList:J,Token_Do:te,Token_End:se,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}else if(_().Source=="in"){let $=g(),[D,J]=s(R,P),te=m("Keyword","do"),[ce,se]=ge("end",R,P),ke;return ke=C({Type:"GenericForStat",VarList:E,GeneratorList:D,Body:ce,Token_For:B,Token_VarCommaList:N,Token_In:$,Token_GeneratorCommaList:J,Token_Do:te,Token_End:se,GetFirstToken:()=>ke.Token_For,GetLastToken:()=>ke.Token_End}),ke}}function pt(R,P){let B=g(),[E,N]=ge("until",R),$=i(R,P),D;return D=C({Type:"RepeatStat",Body:E,Condition:$,Token_Repeat:B,Token_Until:N,GetFirstToken:()=>D.Token_Repeat,GetLastToken:()=>D.Condition.GetLastToken()}),D}function ht(R,P){let B=g();if(_().Source=="function"){let E=Ve(!1,R,P);if(E.NameChain.length>1)throw L(E.Token_NameChainSeperator[0])+": `(` expected.";let N;return N=C({Type:"LocalFunctionStat",FunctionStat:E,Token_Local:B,GetFirstToken:()=>N.Token_Local,GetLastToken:()=>N.FunctionStat.GetLastToken()}),N}else if(_().Type=="Ident"){let[E,N]=Q(!1,!0),$=[],D=[],J;if(_().Source=="="){J=g();let[ce,se]=s(R,P);$=ce,D=se}let te;return te=C({Type:"LocalVarStat",VarList:E,ExprList:$,Token_Local:B,Token_Equals:J,Token_VarCommaList:N,Token_ExprCommaList:D,GetFirstToken:()=>te.Token_Local,GetLastToken:function(){return te.ExprList.length>0?te.ExprList[te.ExprList.length-1].GetLastToken():te.VarList[te.VarList.length-1]}}),te}else throw"`function` or ident expected"}function Tt(R,P){let B=g(),E,N;r()||_().Source==";"?(E=[],N=[]):[E,N]=s(R,P);let $;return $={Type:"ReturnStat",ExprList:E,Token_Return:B,Token_CommaList:N,GetFirstToken:()=>$.Token_Return,GetLastToken:function(){return $.ExprList.length>0?$.ExprList[$.ExprList.length-1].GetLastToken():$.Token_Return}},$}function nt(R,P){let B=g(),E;return E={Type:"BreakStat",Token_Break:B,GetFirstToken:()=>E.Token_Break,GetLastToken:()=>E.Token_Break},E}function je(R,P){let B=g(),E;return E={Type:"ContinueStat",Token_Continue:B,GetFirstToken:()=>E.Token_Continue,GetLastToken:()=>E.Token_Continue},E}function Xe(){let R=g(),P;_().Type=="Keyword"?P=m("Keyword"):P=m("Ident");let B;return B={Type:"GotoStat",Token_Goto:R,Token_Label:P,GetFirstToken:()=>B.Token_Goto,GetLastToken:()=>B.Token_Label},B}function t(){let R=g(),P;_().Type=="Keyword"?P=m("Keyword"):P=m("Ident");let B=m("Symbol","::"),E;return E={Type:"LabelStat",Token_ColonsLeft:R,Token_Label:P,Token_ColonsRight:B,GetFirstToken:()=>E.Token_ColonsLeft,GetLastToken:()=>E.Token_ColonsRight},E}function M(R,P){let B=_();return B.Source=="if"?[!1,Ue(R,P)]:B.Source=="while"?[!1,We(R,P)]:B.Source=="do"?[!1,X(R,P)]:B.Source=="for"?[!1,vt(R,P)]:B.Source=="repeat"?[!1,pt(R,P)]:B.Source=="function"?[!1,Ve(!1,R,P)]:B.Source=="local"?[!1,ht(R,P)]:B.Source=="return"?[!0,Tt(R,P)]:B.Source=="break"?[!0,nt()]:B.Source=="continue"?[!0,je()]:B.Source=="goto"?[!1,Xe()]:B.Source=="::"?[!1,t()]:[!1,Pe(R,P)]}return e=function(R,P){let B=[],E=[],N={},$={};if(P!=null)for(let[ce,se]of Object.entries(P))$[ce]=se;if(R!=null)for(let[ce,se]of Object.entries(R))$[ce]=se;let D,J=0;for(;!r();){D&&D==_()&&pe(`INFINITE LOOP POSSIBLE ON STATEMENT ${D.Source} :`,D),D=_();let[ce,se]=M(N,$);if(se)switch(B.push(se),se.Type){case"LocalVarStat":se.VarList.forEach(ve=>{ve.UseCount=0,ve.Number=J++,N[ve.Source]=ve;let qe=[];function Ae(){ve.UseCount++,qe.forEach(Me=>{Me.UseCount=ve.UseCount})}ve.Tokens={},ve.Tokens.push=Me=>{Me.UseCountIncrease=Ae,Me.UseCount=ve.UseCount,Me.Tokens=ve.Tokens,qe.push(Me)},ve.Tokens.get=()=>qe,ve.UseCountIncrease=Ae});break;case"LocalFunctionStat":let ze=se.FunctionStat.NameChain;if(ze.length===1){let Ae=function(){ve.UseCount++,qe.forEach(Me=>{Me.UseCount=ve.UseCount})},ve=ze[0];ve.UseCount=0,ve.Number=J++,N[ve.Source]=ve;let qe=[];ve.Tokens={},ve.Tokens.push=Me=>{Me.UseCountIncrease=Ae,Me.UseCount=ve.UseCount,Me.Tokens=ve.Tokens,qe.push(Me)},ve.Tokens.get=()=>qe,ve.UseCountIncrease=Ae}break}let ke=_();ke.Type=="Symbol"&&ke.Source==";"&&(E[B.length-1]=g())}let te;return te={Type:"StatList",StatementList:B,SemicolonList:E,GetFirstToken:function(){var ce;if(te.StatementList.length!=0)return(ce=te.StatementList[0])==null?void 0:ce.GetFirstToken()},GetLastToken:function(){if(te.StatementList.length!=0)return te.SemicolonList[te.StatementList.length-1]?te.SemicolonList[te.StatementList.length-1]:te.StatementList[te.StatementList.length-1].GetLastToken()}},te},e([],[])}function Ze(O,S){let T={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},g={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[_,L]of Object.entries(S))if(!g[_]&&!T[_])throw`Invalid visitor target: \`${_}\``;function n(m){if(m!=null){let C=S[m.Type];if(typeof C=="function")return C(m);if(C&&C.Pre)return C.Pre(m)}}function r(m){let C=S[m.Type];if(C&&typeof C=="object"&&C.Post)return C.Post(m)}let a,f;a=function(m){if(!n(m)){if(m.Type=="BinopExpr")a(m.Lhs),a(m.Rhs);else if(m.Type=="UnopExpr")a(m.Rhs);else if(!(m.Type=="NumberLiteral"||m.Type=="StringLiteral"||m.Type=="NilLiteral"||m.Type=="BooleanLiteral"||m.Type=="VargLiteral"||m.Type=="HashLiteral")){if(m.Type=="FieldExpr")a(m.Base);else if(m.Type=="IndexExpr")a(m.Base),a(m.Index);else if(m.Type=="MethodExpr"||m.Type=="CallExpr")a(m.Base),m.FunctionArguments.CallType=="ArgCall"?m.FunctionArguments.ArgList.forEach((C,e)=>{a(C)}):m.FunctionArguments.CallType=="TableCall"&&a(m.FunctionArguments.TableExpr);else if(m.Type=="FunctionLiteral")f(m.Body);else if(m.Type!="VariableExpr")if(m.Type=="ParenExpr")a(m.Expression);else if(m.Type=="TableLiteral")m.EntryList.forEach((C,e)=>{if(C.EntryType=="Field")a(C.Value);else if(C.EntryType=="Index")a(C.Index),a(C.Value);else if(C.EntryType=="Value")a(C.Value);else throw"unreachable"});else if(m.Type=="CompoundStat")a(m.Lhs),a(m.Rhs);else throw`unreachable, type: ${m.Type}: ${m}`}r(m)}},f=function(m){if(!n(m)){if(m.Type=="StatList")m.StatementList.forEach((C,e)=>{if(C!=null){if(C===null||C.Type===null)return;C.Remove=()=>{m.StatementList[e]=null},f(C)}});else if(m.Type!="BreakStat"){if(m.Type!="ContinueStat"){if(m.Type!="GotoStat"){if(m.Type!="LabelStat")if(m.Type=="ReturnStat")m.ExprList.forEach((C,e)=>{a(C)});else if(m.Type=="LocalVarStat")m.Token_Equals&&m.ExprList.forEach((C,e)=>{a(C)});else if(m.Type=="LocalFunctionStat")f(m.FunctionStat.Body);else if(m.Type=="FunctionStat")f(m.Body);else if(m.Type=="RepeatStat")f(m.Body),a(m.Condition);else if(m.Type=="GenericForStat")m.GeneratorList.forEach((C,e)=>{a(C)}),f(m.Body);else if(m.Type=="NumericForStat")m.RangeList.forEach((C,e)=>{a(C)}),f(m.Body);else if(m.Type=="WhileStat")a(m.Condition),f(m.Body);else if(m.Type=="DoStat")f(m.Body);else if(m.Type=="IfStat")a(m.Condition),f(m.Body),m.ElseClauseList.forEach(C=>{C.Condition!=null&&a(C.Condition),f(C.Body)});else if(m.Type=="CallExprStat")a(m.Expression);else if(m.Type=="CompoundStat")a(m.Lhs),a(m.Rhs);else if(m.Type=="AssignmentStat")m.Lhs.forEach(C=>{a(C)}),m.Rhs.forEach(C=>{a(C)});else throw"unreachable"}}}r(m)}},g[O.Type]?f(O):a(O)}function it(O){let S=[],T,g=0;function _(){return g++,g}function L(){T={ParentScope:T,ChildScopeList:[],VariableList:[],BeginLocation:_(),Depth:null,GetVar:null},T.ParentScope?(T.Depth=T.ParentScope.Depth+1,T.ParentScope.ChildScopeList.push(T)):T.Depth=1;let i=T;T.GetVar=function(s){for(const d of i.VariableList)if(d.Name==s)return d;if(i.ParentScope)return i.ParentScope.GetVar(s);for(const d of S)if(d.Name==s)return d}}function n(){let i=T;return i.EndLocation=_(),i.VariableList.forEach(s=>{s.ScopeEndLocation=i.EndLocation}),T=i.ParentScope,i}L();function r(i,s,d){k(d,"MIssing localInfo"),k(i,"Missing local var name");let w={Type:"Local",Name:i,RenameList:[s],AssignedTo:!1,Info:d,Scope:T,BeginLocation:_(),EndLocation:_(),ReferenceLocationList:[_()]};return w.Rename=function(Q){w.Name=Q,w.RenameList.forEach(ge=>{ge(Q)})},T.VariableList.push(w),w}function a(i){for(const d of S)if(d.Name==i)return d;let s={Type:"Global",Name:i,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:_(),EndLocation:_(),ReferenceLocationList:[]};return s.Rename=function(d){s.Name=d,s.RenameList.forEach(w=>{w(d)})},S.push(s),s}function f(i,s){k(i,"Missing var name");let d=a(i);return d.RenameList.push(s),d}function m(i,s){let d;for(d=i.VariableList.length-1;d>=0;d--)if(i.VariableList[d].Name==s)return i.VariableList[d];if(i.ParentScope){let w=m(i.ParentScope,s);if(w)return w}}function C(i,s){k(i,"Missing var name");let d=m(T,i);d?d.RenameList.push(s):d=f(i,s);let w=_();return d.EndLocation=w,d.ReferenceLocationList.push(d.EndLocation),d}let e={};return e.FunctionLiteral={Pre:function(i){L(),i.ArgList.forEach((s,d)=>{let w=r(s.Source,function(Q,ge){ge||(s.Source=Q)},{Type:"Argument",Index:d});s.var=w})},Post:function(i){n()}},e.VariableExpr=function(i){i.Variable=C(i.Token.Source,function(s){i.Token.Source=s})},e.StatList={Pre:function(i){L()},Post:function(i){i.SkipPop||n()}},e.LocalVarStat={Post:function(i){i.VarList.forEach((s,d)=>{r(s.Source,function(w){i.VarList[d].Source=w},{Type:"Local"})})}},e.LocalFunctionStat={Pre:function(i){r(i.FunctionStat.NameChain[0].Source,function(s){i.FunctionStat.NameChain[0].Source=s},{Type:"LocalFunction"}),L(),i.FunctionStat.ArgList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"Argument",Index:d})})},Post:function(){n()}},e.FunctionStat={Pre:function(i){let s=i.NameChain,d;s.length==1?m(T,s[0].Source)?d=C(s[0].Source,function(w){s[0].Source=w}):d=f(s[0].Source,function(w){s[0].Source=w}):d=C(s[0].Source,function(w){s[0].Source=w}),d.AssignedTo=!0,L(),i.ArgList.forEach((w,Q)=>{r(w.Source,function(ge){w.Source=ge},{Type:"Argument",Index:Q})})},Post:function(){n()}},e.GenericForStat={Pre:function(i){return i.GeneratorList.forEach(s=>{Ze(s,e)}),L(),i.VarList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"ForRange",Index:d})}),Ze(i.Body,e),n(),!0}},e.NumericForStat={Pre:function(i){return i.RangeList.forEach(s=>{Ze(s,e)}),L(),i.VarList.forEach((s,d)=>{r(s.Source,function(w){s.Source=w},{Type:"ForRange",Index:d})}),Ze(i.Body,e),n(),!0}},e.RepeatStat={Pre:function(i){i.Body.SkipPop=!0},Post:function(i){n()}},e.AssignmentStat={Post:function(i){i.Lhs.forEach(s=>{s.Variable!=null&&(s.Variable.AssignedTo=!0)})}},Ze(O,e),[S,n()]}function gt(O){let S,T,g="",_=n=>typeof(n==null?void 0:n.LeadingWhite)!="string"?" ":n.LeadingWhite;function L(n){if(n.LeadingWhite==null||n.Source==null)throw`Bad token: tk=${n} | lwhite=${n.LeadingWhite} | source=${n.Source}`;g=`${g}${n.LeadingWhite}${n.Source}`}return T=function(n){if(n.Type=="BinopExpr")T(n.Lhs),L(n.Token_Op),T(n.Rhs);else if(n.Type=="UnopExpr")L(n.Token_Op),T(n.Rhs);else if(n.Type=="NumberLiteral"||n.Type=="StringLiteral"||n.Type=="NilLiteral"||n.Type=="BooleanLiteral"||n.Type=="VargLiteral"||n.Type=="HashLiteral")L(n.Token);else if(n.Type=="FieldExpr")T(n.Base),L(n.Token_Dot),L(n.Field);else if(n.Type=="IndexExpr")T(n.Base),L(n.Token_OpenBracket),T(n.Index),L(n.Token_CloseBracket);else if(n.Type=="MethodExpr"||n.Type=="CallExpr")T(n.Base),n.Type=="MethodExpr"&&(L(n.Token_Colon),L(n.Method)),n.FunctionArguments.CallType=="StringCall"?L(n.FunctionArguments.Token):n.FunctionArguments.CallType=="ArgCall"?(L(n.FunctionArguments.Token_OpenParen),n.FunctionArguments.ArgList.forEach((r,a)=>{T(r);let f=n.FunctionArguments.Token_CommaList[a];f!=null&&L(f)}),L(n.FunctionArguments.Token_CloseParen)):n.FunctionArguments.CallType=="TableCall"&&T(n.FunctionArguments.TableExpr);else if(n.Type=="FunctionLiteral")L(n.Token_Function),L(n.Token_OpenParen),n.ArgList.forEach((r,a)=>{L(r);let f=n.Token_ArgCommaList[a];f!=null&&L(f)}),n.Token_Varg!=null&&L(n.Token_Varg),L(n.Token_CloseParen),S(n.Body),L(n.Token_End);else if(n.Type=="VariableExpr")L(n.Token);else if(n.Type=="ParenExpr")L(n.Token_OpenParen),T(n.Expression),L(n.Token_CloseParen);else if(n.Type=="TableLiteral")L(n.Token_OpenBrace),n.EntryList.forEach((r,a)=>{if(r.EntryType=="Field")L(r.Field),L(r.Token_Equals),T(r.Value);else if(r.EntryType=="Index")L(r.Token_OpenBracket),T(r.Index),L(r.Token_CloseBracket),L(r.Token_Equals),T(r.Value);else if(r.EntryType=="Value")T(r.Value);else throw"unreachable";let f=n.Token_SeperatorList[a];f!=null&&L(f)}),L(n.Token_CloseBrace);else if(n.Type=="CompoundStat")S(n);else throw`unreachable, type: ${n.Type}: ${n}`},S=function(n){if(n==null)throw`STAT IS NIL! ${n}`;if(!(n.Type==="StatList"&&n.StatementList.length===0)){if(n.WrapInDo){let r=_(n.GetFirstToken());n.GetFirstToken().LeadingWhite="",g+=`${r}do `}n.Type=="StatList"?n.StatementList.forEach((r,a)=>{r===null||r.Type===null||(r.Remove=()=>{n.StatementList[a]=null},S(r),n.SemicolonList[a]&&L(n.SemicolonList[a]))}):n.Type=="BreakStat"?L(n.Token_Break):n.Type=="ContinueStat"?L(n.Token_Continue):n.Type=="GotoStat"?(L(n.Token_Goto),L(n.Token_Label)):n.Type=="LabelStat"?(L(n.Token_ColonsLeft),L(n.Token_Label),L(n.Token_ColonsRight)):n.Type=="ReturnStat"?(L(n.Token_Return),n.ExprList.forEach((r,a)=>{T(r),n.Token_CommaList[a]&&L(n.Token_CommaList[a])})):n.Type=="LocalVarStat"?(L(n.Token_Local),n.VarList.forEach((r,a)=>{L(r),r.Attribute!=null&&L(r.Attribute);let f=n.Token_VarCommaList[a];f!=null&&L(f)}),n.Token_Equals!=null&&(L(n.Token_Equals),n.ExprList.forEach((r,a)=>{T(r);let f=n.Token_ExprCommaList[a];f!=null&&L(f)}))):n.Type=="LocalFunctionStat"?(L(n.Token_Local),L(n.FunctionStat.Token_Function),L(n.FunctionStat.NameChain[0]),L(n.FunctionStat.Token_OpenParen),n.FunctionStat.ArgList.forEach((r,a)=>{L(r);let f=n.FunctionStat.Token_ArgCommaList[a];f!=null&&L(f)}),n.FunctionStat.Token_Varg&&L(n.FunctionStat.Token_Varg),L(n.FunctionStat.Token_CloseParen),S(n.FunctionStat.Body),L(n.FunctionStat.Token_End)):n.Type=="FunctionStat"?(L(n.Token_Function),n.NameChain.forEach((r,a)=>{L(r);let f=n.Token_NameChainSeperator[a];f!=null&&L(f)}),L(n.Token_OpenParen),n.ArgList.forEach((r,a)=>{L(r);let f=n.Token_ArgCommaList[a];f!=null&&L(f)}),n.Token_Varg&&L(n.Token_Varg),L(n.Token_CloseParen),S(n.Body),L(n.Token_End)):n.Type=="RepeatStat"?(L(n.Token_Repeat),S(n.Body),L(n.Token_Until),T(n.Condition)):n.Type=="GenericForStat"?(L(n.Token_For),n.VarList.forEach((r,a)=>{L(r);let f=n.Token_VarCommaList[a];f!=null&&L(f)}),L(n.Token_In),n.GeneratorList.forEach((r,a)=>{T(r);let f=n.Token_GeneratorCommaList[a];f!=null&&L(f)}),L(n.Token_Do),S(n.Body),L(n.Token_End)):n.Type=="NumericForStat"?(L(n.Token_For),n.VarList.forEach((r,a)=>{L(r);let f=n.Token_VarCommaList[a];f!=null&&L(f)}),L(n.Token_Equals),n.RangeList.forEach((r,a)=>{T(r);let f=n.Token_RangeCommaList[a];f!=null&&L(f)}),L(n.Token_Do),S(n.Body),L(n.Token_End)):n.Type=="WhileStat"?(L(n.Token_While),T(n.Condition),L(n.Token_Do),S(n.Body),L(n.Token_End)):n.Type=="DoStat"?(L(n.Token_Do),S(n.Body),L(n.Token_End)):n.Type=="IfStat"?(L(n.Token_If),T(n.Condition),L(n.Token_Then),S(n.Body),n.ElseClauseList.forEach(r=>{L(r.Token),r.Condition!=null&&(T(r.Condition),L(r.Token_Then)),S(r.Body)}),L(n.Token_End)):n.Type=="CallExprStat"?T(n.Expression):n.Type=="CompoundStat"?(T(n.Lhs),L(n.Token_Compound),T(n.Rhs),n.Type="CompoundStat"):n.Type=="AssignmentStat"?(n.Lhs.forEach((r,a)=>{T(r);let f=n.Token_LhsSeperatorList[a];f!=null&&L(f)}),L(n.Token_Equals),n.Rhs.forEach((r,a)=>{T(r);let f=n.Token_RhsSeperatorList[a];f!=null&&L(f)})):k(!1,"unreachable"),n.WrapInDo&&(g+=" end ")}},S(O),g}function rt(O){let S,T,g=0;function _(e){if(e===void 0)return;let i=`
${"	".repeat(g)}`;if(e.LeadingWhite==""||e.LeadingWhite.substr(-i.length,i.length)!=i){let s="",d;for(d=e.LeadingWhite.length;d>=0;d--){let w=e.LeadingWhite.substr(d,1);if(!(w==""||w.match(/\s/g))){s=e.LeadingWhite.substr(0,d+1);break}}e.LeadingWhite=`${s}${i}`}}function L(){g++}function n(){g--,k(g>=0,"Undented too far")}function r(e){return e.LeadingWhite.length>0?e.LeadingWhite.substr(0,1):e.Source.toString().substr(0,1)}function a(e){e.LeadingWhite=e.LeadingWhite.trim()}function f(e){a(e),Ce.includes(r(e))||(e.LeadingWhite=" "+e.LeadingWhite)}function m(e){f(e.GetFirstToken())}function C(e,i,s){L(),S(i),n(),_(s)}T=function(e){if(e.Type=="BinopExpr")T(e.Lhs),T(e.Rhs),m(e.Rhs),f(e.Token_Op);else if(e.Type=="UnopExpr")a(e.Token_Op),T(e.Rhs),e.Token_Op.Source[0]&&f(e.Rhs.GetFirstToken());else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")a(e.Token),e.Type=="HashLiteral"&&(e.Token.Source='"'+p(`${e.Token.Source.substring(1,e.Token.Source.length-1)}`)+'"',e.Type="StringLiteral",e.Token.Type="String");else if(e.Type=="FieldExpr")T(e.Base);else if(e.Type=="IndexExpr")T(e.Base),T(e.Index);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")T(e.Base),a(e.FunctionArguments.GetFirstToken()),a(e.FunctionArguments.GetLastToken()),e.Type=="MethodExpr",e.FunctionArguments.CallType=="StringCall"||(e.FunctionArguments.CallType=="ArgCall"?e.FunctionArguments.ArgList.forEach((i,s)=>{T(i),s>0&&m(i);let d=e.FunctionArguments.Token_CommaList[s];d!=null&&a(d)}):e.FunctionArguments.CallType=="TableCall"&&T(e.FunctionArguments.TableExpr));else if(e.Type=="FunctionLiteral")e.ArgList.forEach((i,s)=>{s>0&&f(i),e.Token_ArgCommaList[s]}),e.ArgList.length>0&&e.Token_Varg!=null&&f(e.Token_Varg),C(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type!="VariableExpr")if(e.Type=="ParenExpr")a(e.Token_OpenParen),a(e.Token_CloseParen),T(e.Expression);else if(e.Type=="TableLiteral"){if(e.EntryList.length!=0){L();let i=100;e.EntryList.forEach((s,d)=>{s.EntryType=="Field"?(e.EntryList.length>i?ut(s.Value):_(s.Field),f(s.Token_Equals),T(s.Value),m(s.Value)):s.EntryType=="Index"?(e.EntryList.length>i?a(s.Token_OpenBracket):_(s.Token_OpenBracket),T(s.Index),f(s.Token_Equals),T(s.Value),m(s.Value)):s.EntryType=="Value"?(T(s.Value),e.EntryList.length>i?ut(s.Value):_(s.Value.GetFirstToken())):k(!1,"unreachable");let w=e.Token_SeperatorList[d];w!=null&&(e.EntryList.length>i?w.LeadingWhite="":a(w))}),n(),e.EntryList.length>i?e.Token_CloseBrace.LeadingWhite="":_(e.Token_CloseBrace)}}else if(e.Type=="CompoundStat")S(e);else throw pe(e),`unreachable, type: ${e.Type}:`+e},S=function(e){if(e.Type=="StatList")e.StatementList.forEach((i,s)=>{i===null||i.Type===null||i.Type==="StatList"&&i.StatementList.length===0||(i.Remove=()=>{i.StatementList[s]=null},S(i),_(i.GetFirstToken()))});else if(e.Type!="BreakStat"){if(e.Type!="ContinueStat"){if(e.Type!="GotoStat"){if(e.Type!="LabelStat")if(e.Type=="ReturnStat")e.ExprList.forEach((i,s)=>{T(i),m(i),e.Token_CommaList[s]});else if(e.Type=="LocalVarStat"){if(e.VarList.forEach((i,s)=>{f(i),i.Attribute&&(i.Attribute.LeadingWhite=" "),e.Token_VarCommaList[s]}),e.Token_Equals){a(e.Token_Equals),f(e.Token_Equals);let i=[],s=[];e.ExprList.forEach((d,w)=>{d!=null&&(w<e.VarList.length||d.Type=="CallExpr"||d.Type=="ParenExpr"||d.Type=="VargLiteral"||d.Type=="BinopExpr"||d.Type=="UnopExpr")&&(i.push(d),s.push(e.Token_ExprCommaList[w]))}),e.ExprList=i,e.CommaList=s,e.ExprList.forEach((d,w)=>{d!=null&&(T(d),m(d),e.Token_ExprCommaList[w]!=null&&e.ExprList.length-1==w&&(e.Token_ExprCommaList[w]=null))})}}else if(e.Type=="LocalFunctionStat")f(e.FunctionStat.Token_Function),f(e.FunctionStat.NameChain[0]),e.FunctionStat.ArgList.forEach((i,s)=>{s>0?f(i):a(i);let d=e.FunctionStat.Token_ArgCommaList[s];d&&a(d)}),e.FunctionStat.ArgList.length>0&&e.FunctionStat.Token_Varg?(a(e.FunctionStat.Token_Varg),f(e.FunctionStat.Token_Varg)):e.FunctionStat.Token_Varg&&a(e.FunctionStat.Token_Varg),a(e.FunctionStat.Token_OpenParen),a(e.FunctionStat.Token_CloseParen),C(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")e.NameChain.forEach((i,s)=>{s==0&&f(i),e.Token_NameChainSeperator[s]}),e.ArgList.forEach((i,s)=>{s>0&&f(i),e.Token_ArgCommaList[s]}),e.ArgList.length>0&&e.Token_Varg&&f(e.Token_Varg),C(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")C(e.Token_Repeat,e.Body,e.Token_Until),T(e.Condition),m(e.Condition);else if(e.Type=="GenericForStat")e.VarList.forEach((i,s)=>{f(i),e.Token_VarCommaList[s]}),f(e.Token_In),e.GeneratorList.forEach((i,s)=>{T(i),m(i),e.Token_GeneratorCommaList[s]}),f(e.Token_Do),C(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")e.VarList.forEach((i,s)=>{f(i),e.Token_VarCommaList[s]}),f(e.Token_Equals),e.RangeList.forEach((i,s)=>{T(i),m(i),e.Token_RangeCommaList[s]}),f(e.Token_Do),C(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")T(e.Condition),m(e.Condition),f(e.Token_Do),C(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")C(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){T(e.Condition),m(e.Condition),f(e.Token_Then);let i=e.Token_Then,s=e.Body;e.ElseClauseList.forEach(d=>{C(i,s,d.Token),i=d.Token,d.Condition!=null&&(T(d.Condition),m(d.Condition),f(d.Token_Then),i=d.Token_Then),s=d.Body}),C(i,s,e.Token_End)}else e.Type=="CallExprStat"?T(e.Expression):e.Type=="CompoundStat"?(T(e.Lhs),T(e.Rhs),m(e.Lhs),m(e.Rhs),f(e.Token_Compound)):e.Type=="AssignmentStat"?(e.Lhs.forEach((i,s)=>{T(i),s>0&&m(i),e.Token_LhsSeperatorList[s]}),f(e.Token_Equals),e.Rhs.forEach((i,s)=>{T(i),m(i),e.Token_RhsSeperatorList[s]})):k(!1,"Unreachable")}}}},S(O)}function ut(O){let S,T;function g(n){n&&(n.LeadingWhite="")}function _(n,r,a=!1){g(r);let f=(typeof n.Source=="string"?n.Source:n.Source.toString()).substr(n.Source.length-1,1),m=(typeof r.Source=="string"?r.Source:r.Source.toString()).substr(0,1);f=="-"&&m=="-"||Ie.includes(f)&&Ie.includes(m)||a&&f==")"&&m=="("?r.LeadingWhite=a?";":" ":r.LeadingWhite=""}function L(n,r,a){S(r),g(a);let f=r.GetFirstToken(),m=r.GetLastToken();f!=null?(_(n,f),_(m,a)):_(n,a)}T=function(n){if(n.Type==="BinopExpr")T(n.Lhs),T(n.Rhs),n.Lhs.Type=="NumberLiteral"&&n.Token_Op.Source==".."?n.Token_Op.LeadingWhite=" ":(g(n.Token_Op),_(n.Lhs.GetLastToken(),n.Token_Op)),_(n.Token_Op,n.Rhs.GetFirstToken());else if(n.Type==="UnopExpr")g(n.Token_Op),T(n.Rhs),_(n.Token_Op,n.Rhs.GetFirstToken());else if(n.Type==="NumberLiteral"||n.Type==="StringLiteral"||n.Type==="NilLiteral"||n.Type==="BooleanLiteral"||n.Type==="VargLiteral"||n.Type==="HashLiteral")g(n.Token);else if(n.Type=="FieldExpr")T(n.Base),g(n.Token_Dot),g(n.Field);else if(n.Type=="IndexExpr")T(n.Base),g(n.Token_OpenBracket),T(n.Index),g(n.Token_CloseBracket);else if(n.Type=="MethodExpr"||n.Type=="CallExpr")T(n.Base),n.Type=="MethodExpr"&&(g(n.Token_Colon),g(n.Method)),n.FunctionArguments.CallType=="StringCall"?g(n.FunctionArguments.Token):n.FunctionArguments.CallType=="ArgCall"?(g(n.FunctionArguments.Token_OpenParen),n.FunctionArguments.ArgList.forEach((r,a)=>{T(r);let f=n.FunctionArguments.Token_CommaList[a];f!=null&&g(f)}),g(n.FunctionArguments.Token_CloseParen)):n.FunctionArguments.CallType=="TableCall"&&T(n.FunctionArguments.TableExpr);else if(n.Type=="FunctionLiteral")g(n.Token_Function),g(n.Token_OpenParen),n.ArgList.forEach((r,a)=>{g(r);let f=n.Token_ArgCommaList[a];f!=null&&g(f)}),n.Token_Varg!=null&&g(n.Token_Varg),g(n.Token_CloseParen),L(n.Token_CloseParen,n.Body,n.Token_End);else if(n.Type=="VariableExpr")g(n.Token);else if(n.Type=="ParenExpr")g(n.Token_OpenParen),T(n.Expression),g(n.Token_CloseParen);else if(n.Type=="TableLiteral")g(n.Token_OpenBrace),n.EntryList.forEach((r,a)=>{r.EntryType=="Field"?(g(r.Field),g(r.Token_Equals),T(r.Value)):r.EntryType=="Index"?(g(r.Token_OpenBracket),T(r.Index),g(r.Token_CloseBracket),g(r.Token_Equals),T(r.Value)):r.EntryType=="Value"?T(r.Value):k(!1,"unreachable");let f=n.Token_SeperatorList[a];f!=null&&g(f)}),n.Token_SeperatorList[n.EntryList.length-1]=null,g(n.Token_CloseBrace);else throw`unreachable, type: ${n.Type}:${n}  undefined`},S=function(n){if(n.Type=="StatList"){let r;for(r=0;r<=n.StatementList.length;r++){let a=n.StatementList[r];if(a==null)continue;S(a),g(a.GetFirstToken());let f=n.StatementList[r-1];if(f!=null){let m={")":["(","["],"]":["(","["]};if(n.SemicolonList[r-1]){let C=f.GetLastToken().Source,e=a.GetFirstToken().Source;(m[C]===null||m[C]===void 0||!m[C].includes(e))&&(n.SemicolonList[r-1]=null)}n.SemicolonList[r-1]||_(f.GetLastToken(),a.GetFirstToken(),!0)}}n.SemicolonList[n.StatementList.length-1]=null,n.StatementList.length>0&&g(n.StatementList[0].GetFirstToken())}else if(n.Type=="BreakStat")g(n.Token_Break);else if(n.Type=="ContinueStat")g(n.Token_Continue);else if(n.Type=="GotoStat")g(n.Token_Goto),_(n.Token_Goto,n.Token_Label);else if(n.Type=="LabelStat")g(n.Token_ColonsLeft),g(n.Token_Label),g(n.Token_ColonsRight);else if(n.Type=="ReturnStat")g(n.Token_Return),n.ExprList.forEach((r,a)=>{T(r),n.Token_CommaList[a]!=null&&g(n.Token_CommaList[a])}),n.ExprList.length>0&&_(n.Token_Return,n.ExprList[0].GetFirstToken());else if(n.Type=="LocalVarStat"){g(n.Token_Local);let r=!1;n.VarList.forEach((a,f)=>{f==0?_(n.Token_Local,a):g(a),a.Attribute&&(g(a.Attribute),f+1==n.VarList.length&&(r=!0));let m=n.Token_VarCommaList[f];m!=null&&g(m)}),n.Token_Equals!=null&&(r||g(n.Token_Equals),n.ExprList.forEach((a,f)=>{T(a);let m=n.Token_ExprCommaList[f];m!=null&&g(m)}))}else if(n.Type=="LocalFunctionStat")g(n.Token_Local),_(n.Token_Local,n.FunctionStat.Token_Function),_(n.FunctionStat.Token_Function,n.FunctionStat.NameChain[0]),_(n.FunctionStat.NameChain[0],n.FunctionStat.Token_OpenParen),n.FunctionStat.ArgList.forEach((r,a)=>{g(r);let f=n.FunctionStat.Token_ArgCommaList[a];f!=null&&g(f)}),n.FunctionStat.Token_Varg&&g(n.FunctionStat.Token_Varg),g(n.FunctionStat.Token_CloseParen),L(n.FunctionStat.Token_CloseParen,n.FunctionStat.Body,n.FunctionStat.Token_End);else if(n.Type=="FunctionStat")g(n.Token_Function),n.NameChain.forEach((r,a)=>{a==0?_(n.Token_Function,r):g(r);let f=n.Token_NameChainSeperator[a];f!=null&&g(f)}),g(n.Token_OpenParen),n.ArgList.forEach((r,a)=>{g(r);let f=n.Token_ArgCommaList[a];f!=null&&g(f)}),n.Token_Varg&&g(n.Token_Varg),g(n.Token_CloseParen),L(n.Token_CloseParen,n.Body,n.Token_End);else if(n.Type=="RepeatStat")g(n.Token_Repeat),L(n.Token_Repeat,n.Body,n.Token_Until),T(n.Condition),_(n.Token_Until,n.Condition.GetFirstToken());else if(n.Type=="GenericForStat")g(n.Token_For),n.VarList.forEach((r,a)=>{a==0?_(n.Token_For,r):g(r);let f=n.Token_VarCommaList[a];f!=null&&g(f)}),_(n.VarList[n.VarList.length-1],n.Token_In),n.GeneratorList.forEach((r,a)=>{T(r),a==0&&_(n.Token_In,r.GetFirstToken());let f=n.Token_GeneratorCommaList[a];f!=null&&g(f)}),_(n.GeneratorList[n.GeneratorList.length-1].GetLastToken(),n.Token_Do),L(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="NumericForStat")g(n.Token_For),n.VarList.forEach((r,a)=>{a==0?_(n.Token_For,r):g(r);let f=n.Token_VarCommaList[a];f!=null&&g(f)}),_(n.VarList[n.VarList.length-1],n.Token_Equals),n.RangeList.forEach((r,a)=>{T(r),a==0&&_(n.Token_Equals,r.GetFirstToken());let f=n.Token_RangeCommaList[a];f!=null&&g(f)}),_(n.RangeList[n.RangeList.length-1].GetLastToken(),n.Token_Do),L(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="WhileStat")g(n.Token_While),T(n.Condition),g(n.Token_Do),_(n.Token_While,n.Condition.GetFirstToken()),_(n.Condition.GetLastToken(),n.Token_Do),L(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="DoStat")g(n.Token_Do),g(n.Token_End),L(n.Token_Do,n.Body,n.Token_End);else if(n.Type=="IfStat"){g(n.Token_If),T(n.Condition),_(n.Token_If,n.Condition.GetFirstToken()),_(n.Condition.GetLastToken(),n.Token_Then);let r=n.Token_Then,a=n.Body;n.ElseClauseList.forEach((f,m)=>{L(r,a,f.Token),r=f.Token,f.Condition!=null&&(T(f.Condition),_(f.Token,f.Condition.GetFirstToken()),_(f.Condition.GetLastToken(),f.Token_Then),r=f.Token_Then),S(f.Body),a=f.Body}),L(r,a,n.Token_End)}else if(n.Type=="CallExprStat")T(n.Expression);else if(n.Type=="CompoundStat")T(n.Lhs),g(n.Token_Compound),T(n.Rhs),_(n.Lhs.GetLastToken(),n.Token_Compound),_(n.Token_Compound,n.Rhs.GetFirstToken());else if(n.Type=="AssignmentStat")n.Lhs.forEach((r,a)=>{T(r);let f=n.Token_LhsSeperatorList[a];f!=null&&g(f)}),g(n.Token_Equals),n.Rhs.forEach((r,a)=>{T(r);let f=n.Token_RhsSeperatorList[a];f!=null&&g(f)});else return T(n)},S(O)}function tt(O){let S,T,g={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function _(e,i,s=null){let d;return d={Type:e,Token:{Type:s??"Number",LeadingWhite:"",Source:i},GetFirstToken:()=>d.Token,GetLastToken:()=>d.Token},d}function L(e,i,s){let d;return d={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:e},Lhs:i,Rhs:s,GetFirstToken:()=>d.Lhs.GetFirstToken(),GetLastToken:()=>d.Rhs.GetLastToken()},d}function n(e,i){let s;return s={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:e},Rhs:i,GetFirstToken:()=>s.Token_Op,GetLastToken:()=>s.Rhs.GetLastToken()},s}function r(e,i){if(i!=null)for(var[s,d]of Object.entries(i))e[s]=d}function a(e){if(e==null||e.substr==null)return;let i=e.substr(0,1),s;if((i=='"'||i=="'")&&(s=e.substr(1,e.length-2)),i=="["){let Q=0,ge=1;for(;e.substr(ge,1)=="=";)Q++,ge++;s=e.substr(2+Q,e.length-4-Q-2)}if(s==null)return"";let d="",w;for(w=0;w<=s.length;w++){let Q=s.substr(w,1);Q=="'"||Q=='"'?d+=`\\${Q}`:d+=Q}return d}function f(e){if(typeof e=="object"&&e.Type=="ParenExpr")return r(e,e.Expression)}function m(e,i,s){let d=i,w=s;if(i&&i.Type=="ParenExpr"&&(d=i.Expression),s&&s.Type=="ParenExpr"&&(w=s.Expression),d==null||w==null||d.Type==null||w.Type==null||d.Type=="VariableExpr"||d.Type=="CallExpr"||d.Type=="BinopExpr"||w.Type=="CallExpr"||w.Type=="BinopExpr"||w.Type=="VariableExpr")return;let Q=d.Token||d.Expression!=null&&d.Expression.Token||null,ge=w.Token||w.Expression!=null&&w.Expression.Token||null,Ve=Q!=null?Q.Source:null,Ee=ge!=null?ge.Source:null,Z,H;if(d.Type=="BooleanLiteral"&&(Z=Ve=="true"),w.Type=="BooleanLiteral"&&(H=Ee=="true"),!(d.Type=="NumberLiteral"&&(Z=x(Ve),Z==null))&&!(w.Type=="NumberLiteral"&&(H=x(Ee),H==null))&&((d.Type=="StringLiteral"||d.Type=="HashLiteral")&&(Z=Ve.toString()),(w.Type=="StringLiteral"||w.Type=="HashLiteral")&&(H=Ee.toString()),Z!=null&&H!=null)){if(e=="==")return Z==H;if(e=="~=")return Z!=H;if(e=="and")return Z&&H;if(e=="or")return Z||H;if(e==".."&&d.Type=="StringLiteral"&&w.Type=="StringLiteral")return`"${a(Ve)+a(Ee)}"`;if(d.Type=="StringLiteral"&&(Z=x(a(Z))),w.Type=="StringLiteral"&&(H=x(a(H))),Z==null||H==null)return;let ee;if(e=="+"&&(ee=Z+H),e=="-"&&(ee=Z-H),e=="*"&&(ee=Z*H),e=="/"&&(ee=Z/H),e=="^"&&(ee=Z**H),e=="%"&&(ee=Z%H),e==">"&&(ee=Z>H),e=="<"&&(ee=Z<H),e==">="&&(ee=Z>=H),e=="<="&&(ee=Z<=H),ee==!1||ee==!0||isFinite(ee)&&ee>-(10**6)&&ee<10**6)return ee}}function C(e,i){let s=i.Token||i.Expression||i.EntryList||i;if(s==null||s.Source==null&&i.Type!="TableLiteral"||i.Type=="VariableExpr"||i.Type=="CallExpr"||i.Type=="BinopExpr")return;let d=s.Source,w;if(i.Type=="TableLiteral"&&s!=null){let Q=[],ge=0,Ve=!1,Ee=!1,Z=0;if(s.forEach((H,ee)=>{if(Ve)Q.push(H);else if(H.EntryType=="Value"||H.EntryType=="Index")if((H.Index==null||H.Index.Type=="NumberLiteral")&&H.Value){if((H.Index!=null&&H.Index.Token!=null&&H.Index.Token.Source!==null?H.Index.Token.Source:Z+1).toString()!==(++Z).toString())return Ve=!0,Ee=!0,Q.push(H);H.Value.Type!="CallExpr"?ge++:(Ve=!0,Q.push(H))}else Q.push(H)}),Ee)return;if(e=="#")return i.EntryList=Q,i.EntryList.length<=0?_("NumberLiteral",ge!==null?ge:i.EntryList.length):ge<=0?n("#",i):L("+",_("NumberLiteral",ge),n("#",i))}if(i.Type=="BooleanLiteral"&&(w=d=="true"),!(i.Type=="NumberLiteral"&&(w=x(d),w===null))){if(i.Type=="StringLiteral"&&(w=d.substr(1,d.length-2)),e=="not"&&i.Type!==null)return i.Type=="NilLiteral"||i.Type=="BooleanLiteral"&&w===!1;if(w!=null){if(e=="#")return w.length;if(e=="-")return-w}}}T=function(e){if(e.Type=="BinopExpr"){if(T(e.Lhs),T(e.Rhs),e.Lhs!=null&&e.Rhs!=null){let i=e.Token_Op;if(i!=null&&i.Source!=null){let s=m(i.Source,e.Lhs,e.Rhs);if(s!=null){if(typeof s=="boolean"){let d=_("BooleanLiteral",s.toString(),"Keyword");r(e,d);return}else if(typeof s=="number"){if(isFinite(s)==!0){let d=_("NumberLiteral",s.toString(),"Number");r(e,d);return}}else if(typeof s=="string"){let d=_("StringLiteral",s,"String");r(e,d);return}else if(typeof s=="object"){r(e,s);return}return}}if(e.Lhs.Type=="ParenExpr"){let d=e.Lhs.Expression;d.Type=="NumberLiteral"||d.Type=="StringLiteral"||d.Type=="NilLiteral"||d.Type=="BooleanLiteral"||d.Type=="HashLiteral"}if(e.Rhs.Type=="ParenExpr"){let d=e.Rhs.Expression;d.Type=="NumberLiteral"||d.Type=="StringLiteral"||d.Type=="NilLiteral"||d.Type=="BooleanLiteral"||d.Type=="HashLiteral"}}}else if(e.Type=="UnopExpr"){if(T(e.Rhs),e.Rhs!=null&&g[e.Rhs.Type]==!0){let i=e.Token_Op;if(i!=null&&i.Source!=null){let s=e.Rhs.Expression!=null?e.Rhs.Expression:e.Rhs,d=C(i.Source,s);if(d!=null){if(typeof d=="boolean"){let w=_("BooleanLiteral",d.toString(),"Keyword");r(e,w);return}else if(typeof d=="number"){if(isFinite(d)==!0){let w=_("NumberLiteral",d,"Number");r(e,w);return}}else if(typeof d=="string"){let w=_("StringLiteral",d,"String");r(e,w);return}else if(typeof d=="object"){r(e,d);return}return}}}}else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral"){let i=e.Token;if(i!=null){if(i.Type=="Number"){let s=i.Source.toString().split("e");if(s.length===2){let d=x(s[0]),w=x(s[1]);isFinite(d)&&isFinite(w)&&d**w<999999999&&!i.Source.includes("+")&&i.Source.includes(".")&&!i.Source.includes("-")&&(i.Source=(d**w).toString())}}i.Type=="String"&&(i.Source=i.Source.replace(/\\\d+/gi,s=>{let d=x(s.substr(1,s.length-1));return d&&isFinite(d)&&(d>=97&&d<=122||d>=65&&d<=90||d>=33&&d<=47||d>=58&&d<=64||d>=91&&d<=96||d>=123&&d<=126)&&d!==34&&d!==39&&d!==92?String.fromCharCode(d):s}))}}else if(e.Type=="FieldExpr")T(e.Base);else if(e.Type=="IndexExpr")T(e.Base),T(e.Index);else if(e.Type=="MethodExpr"||e.Type=="CallExpr"){if(T(e.Base),e.FunctionArguments.CallType=="ArgCall"?e.FunctionArguments.ArgList.forEach((i,s)=>{T(i)}):e.FunctionArguments.CallType=="TableCall"&&T(e.FunctionArguments.TableExpr),e.Base.Type==="ParenExpr"&&e.Base.Expression.Type==="FunctionLiteral"&&e.FunctionArguments.CallType==="ArgCall"){let i=e.Base.Expression;e.FunctionArguments.ArgList.forEach((s,d)=>{let w=e.FunctionArguments.ArgList[d];if(w!==void 0&&(w.Type=="NumberLiteral"||w.Type=="StringLiteral"||w.Type=="NilLiteral"||w.Type=="BooleanLiteral"||w.Type=="HashLiteral")){let Q=i.ArgList[d];Q&&Q.var.RenameList.forEach(ge=>{ge(w.Token.Source,!0)})}})}}else if(e.Type=="FunctionLiteral")S(e.Body);else if(e.Type!="VariableExpr")if(e.Type=="ParenExpr"){let i=e.Expression;i!=null&&i.Type=="ParenExpr"&&(e.Expression=i.Expression),T(e.Expression),(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")&&f(e)}else e.Type=="TableLiteral"&&e.EntryList.forEach((i,s)=>{i.EntryType=="Field"?T(i.Value):i.EntryType=="Index"?(T(i.Index),T(i.Value)):i.EntryType=="Value"?T(i.Value):k(!1,"unreachable")})},S=function(e){if(e.Type=="StatList")e.StatementList.forEach((i,s)=>{i===null||i.Type===null||(i.Remove=()=>{e.StatementList[s]=null},S(i))});else if(e.Type!="BreakStat"){if(e.Type!="ContinueStat")if(e.Type=="ReturnStat")e.ExprList.forEach((i,s)=>{T(i)});else if(e.Type=="LocalVarStat")e.Token_Equals!=null&&e.ExprList.forEach((i,s)=>{T(i)});else if(e.Type=="LocalFunctionStat")S(e.FunctionStat.Body),e.FunctionStat.NameChain.length===1&&e.FunctionStat.NameChain[0].UseCount;else if(e.Type=="FunctionStat")S(e.Body);else if(e.Type=="RepeatStat")S(e.Body),T(e.Condition),e.Body.Type=="StatList"&&e.Body.StatementList.length;else if(e.Type=="GenericForStat")e.GeneratorList.forEach((i,s)=>{T(i)}),S(e.Body);else if(e.Type=="NumericForStat"){e.RangeList.forEach((H,ee)=>{T(H)}),S(e.Body);let i=e.RangeList[0],s=e.RangeList[1],d=e.RangeList[2];if(i==null||s==null)return e.Remove();if(f(i),f(s),f(d),i.Type!="NumberLiteral"||s.Type!="NumberLiteral"||d!=null&&d.Type!="NumberLiteral"||d==null)return;let w=x(i.Token.Source),Q=x(s.Token.Source),ge=d!=null&&x(d.Token.Source)||1,Ve=ge>0&&w<=Q||ge<0&&w>=Q,Ee=(Q-w+ge)/ge;if(!(Ve&&Ee>=0)||e.Body.Type=="StatList"&&e.Body.StatementList.length===0)return e.Remove()}else if(e.Type=="WhileStat"){T(e.Condition),S(e.Body);let i=e.Condition;switch(i.Type){case"ParenExpr":i=i.Expression;case"BooleanLiteral":if(i==null||i.Token==null||i.Token.Source!=="false")break;case"NilLiteral":e.Remove();break}}else if(e.Type=="DoStat"){if(S(e.Body),e.Body===null||e.Body.Type=="StatList"&&e.Body.StatementList.length===0)return e.Remove();if(e.Body.StatementList.length===1){let i=e.Body.StatementList[0];i.Type!=="ContinueStat"&&i.Type!=="BreakStat"&&i.Type!=="ReturnStat"&&r(e,i)}}else if(e.Type=="IfStat"){T(e.Condition),S(e.Body),e.ElseClauseList.forEach((s,d)=>{s.Condition!=null&&T(s.Condition),S(s.Body)});let i=e.Condition;switch(i.Type){case"ParenExpr":i=i.Expression;case"BooleanLiteral":if(e.ElseClauseList.length>=1||i==null||i.Token==null||i.Token.Source!=="false")break;case"NilLiteral":e.Remove();break}}else e.Type=="CallExprStat"?T(e.Expression):e.Type=="CompoundStat"?(T(e.Lhs),T(e.Rhs)):e.Type=="AssignmentStat"&&(e.Lhs.forEach((i,s)=>{T(i)}),e.Rhs.forEach((i,s)=>{T(i)}))}},S(O)}let re=[],G;for(G=97;G<=122;G++)re.push(String.fromCharCode(G));for(G=65;G<=90;G++)re.push(String.fromCharCode(G));for(G=48;G<=57;G++)re.push(String.fromCharCode(G));re.push("_");let we=[];for(G=97;G<=122;G++)we.push(String.fromCharCode(G));for(G=65;G<=90;G++)we.push(String.fromCharCode(G));function Oe(O){let S="",T=O%we.length;for(O=(O-T)/we.length,S=`${S}${we[T]}`;O>0;){let g=O%re.length;O=(O-g)/re.length,S=`${S}${re[g]}`}return S}function b(O,S,T){let g=[];for(var[_,L]of Object.entries(He))g[_]=!0;let n=[];O.forEach(C=>{C.AssignedTo&&T?n.push(C):g[C.Name]=!0});function r(C){C.VariableList.forEach(e=>{n.push(e)}),C.ChildScopeList.forEach(e=>{r(e)})}r(S),n.forEach(C=>{C.UsedNameArray=[]}),n.sort((C,e)=>C-e);let a=0,f=[];function m(C){let e=f[C];if(e==null){for(e=Oe(a),a++;g[e];)e=Oe(a),a++;f[C]=e}return e}n.forEach((C,e)=>{C.Renamed=!0;let i=0;for(;C.UsedNameArray[i];)i++;C.Rename(m(i)),C.Scope?n.forEach(s=>{s.Renamed||(!s.Scope||s.Scope.Depth<C.Scope.Depth?s.ReferenceLocationList.some(d=>d>=C.BeginLocation&&d<=C.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1):s.Scope.Depth>C.Scope.Depth?C.ReferenceLocationList.some(d=>d>=s.BeginLocation&&d<=s.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1):C.BeginLocation<s.EndLocation&&C.EndLocation>s.BeginLocation&&(s.UsedNameArray[i]=!0))}):n.forEach(s=>{if(!s.Renamed)if(s.Type=="Global")s.UsedNameArray[i]=!0;else if(s.Type=="Local")C.ReferenceLocationList.some(d=>d>=s.BeginLocation&&d<=s.ScopeEndLocation?(s.UsedNameArray[i]=!0,!0):!1);else throw"Unreachable"})})}function q(O,S,T){let g=[];O.forEach(a=>{(!a.AssignedTo||!T)&&(g[a.Name]=!0)});let _=1,L=1;function n(a,f){a.Name=f,a.RenameList.forEach(m=>{m(f)})}if(T){let a={};O.forEach(f=>{f.AssignedTo&&!f.ChangedName&&(a[f.Name]=a[f.Name]||`G_${L}_`,f.ChangedName=!0,n(f,a[f.Name]),L++)})}function r(a){a.VariableList.forEach(f=>{let m=`L_${_}_`;f.Info.Type=="Argument"?m=`${m}arg${f.Info.Index}`:f.Info.Type=="LocalFunction"?m=`${m}func`:f.Info.Type=="ForRange"&&(m=`${m}forvar${f.Info.Index}`),n(f,m),_++}),a.ChildScopeList.forEach(f=>{r(f)})}r(S)}let ue=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,_e={};_e.Minify=function(O,S){let T=oe(O),[g,_]=it(T);S.RenameVariables==!0&&b(g,_,S.RenameGlobals),S.SolveMath==!0&&tt(T),ut(T);let L=gt(T);return L=`${ue}

${L}`,L},_e.Beautify=function(O,S){let T=oe(O),[g,_]=it(T);return S.RenameVariables&&q(g,_,S.RenameGlobals),S.SolveMath==!0&&tt(T),rt(T),gt(T)};try{at!=null&&at.exports!=null&&(at.exports.Beautify=_e.Beautify,at.exports.Minify=_e.Minify)}catch{}})(At);var fn=At.exports;const Gt=fn;kt.Beautify=Gt.Beautify;kt.Minify=Gt.Minify;kt.Uglify=Gt.Uglify;const Dt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Nt={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},cn={class:"page-div"},mn={class:"card-header"},gn={class:"el-form-item-msg"},pn={style:{"font-weight":"bolder"}},hn={class:"item-container"},Tn={style:{"font-weight":"bolder"}},yn={class:"item-container"},_n={style:{"font-weight":"bolder"}},vn={class:"item-container"},kn={style:{"font-weight":"bolder"}},bn={class:"item-container"},Sn={style:{"font-weight":"bolder"}},Vn={class:"item-container"},Ln={style:{"font-weight":"bolder"}},Cn={class:"item-container"},wn={style:{"font-weight":"bolder"}},En={class:"item-container"},Fn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},An={style:{"font-weight":"bolder"}},Gn={class:"item-container"},Bn={style:{"font-weight":"bolder"}},In={class:"item-container"},Un={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Pn={style:{"font-weight":"bolder"}},zn={class:"item-container"},Dn={style:{"font-weight":"bolder"}},Nn={class:"item-container"},$n={style:{"font-weight":"bolder"}},xn={class:"item-container"},On={style:{"margin-top":"10px"}},Wn={style:{"font-weight":"bolder"}},qn={class:"item-container"},Kn={style:{"font-weight":"bolder"}},jn={class:"item-container"},Hn={style:{"font-weight":"bolder"}},Jn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},el={style:{"font-weight":"bolder"}},tl={class:"item-container"},nl={style:{"font-weight":"bolder"}},ll={class:"item-container"},ol={style:{"font-weight":"bolder"}},al={class:"item-container"},il={style:{"font-weight":"bolder"}},rl={class:"item-container"},ul={style:{display:"flex","justify-content":"flex-end"}},sl={class:"card-header"},dl={class:"el-form-item-msg"},fl={class:"card-header"},cl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},pl={class:"item-container"},hl={style:{"font-weight":"bolder"}},Tl={class:"item-container"},yl={style:{"font-weight":"bolder"}},_l={class:"item-container"},vl={style:{"font-weight":"bolder"}},kl={class:"item-container"},bl={style:{"font-weight":"bolder"}},Sl={class:"item-container"},Vl={style:{"font-weight":"bolder"}},Ll={class:"item-container"},Cl={style:{"font-weight":"bolder"}},wl={class:"item-container"},El={style:{"font-weight":"bolder"}},Fl={class:"item-container"},Rl={style:{"font-weight":"bolder"}},Al={class:"item-container"},Gl={style:{"font-weight":"bolder"}},Bl={class:"item-container"},Il={style:{"font-weight":"bolder"}},Ul={class:"item-container"},Ml={style:{"font-weight":"bolder"}},Pl={class:"item-container"},zl={style:{"font-weight":"bolder"}},Dl={class:"item-container"},Nl={style:{"font-weight":"bolder"}},$l={class:"item-container"},xl={style:{"font-weight":"bolder"}},Ol={class:"item-container"},Wl={style:{"font-weight":"bolder"}},ql={class:"item-container"},Kl={style:{"font-weight":"bolder"}},jl={class:"item-container"},Hl={style:{"font-weight":"bolder"}},Jl={class:"item-container"},Zl={style:{"font-weight":"bolder"}},Xl={class:"item-container"},Ql={style:{"font-weight":"bolder"}},Yl={class:"item-container"},eo={style:{"font-weight":"bolder"}},to={class:"item-container"},no={style:{"font-weight":"bolder"}},lo={class:"item-container"},oo={style:{display:"flex","justify-content":"flex-end"}},ao=sn({name:"settingsRoom"}),io=Object.assign(ao,{setup(at){const{t:p}=ln();on(async()=>{await T(),await Ze()});const pe=Be(!1),{isMobile:k}=an(),x=rn(),Ce=un(()=>x.isDark),me=Be(),Te=Be(),ne=Be(0),Ie=r=>{S.value?ne.value>r&&(ne.value=r):ne.value>r&&(r===1&&we(),r===2&&Oe(),ne.value=r)},Ye=()=>{S.value||(ne.value===2&&we(),ne.value===3&&Oe()),ne.value--},ct=async()=>{if(S.value){if(ne.value===0){if(fe.value.groundSetting!==""&&ye.value.caveSetting!==""){await g(!1),ne.value=0,mt("检测到刷新页面，已重置为单节点服务器");return}Ke.value.validate(r=>{r&&(_.value?(we(),ne.value++):(Oe(),ne.value++))})}if(ne.value===1&&Ke.value.validate(r=>{if(r)try{st.parse(fe.value.groundSetting),ne.value++}catch{mt(p("setting.luaError"))}}),ne.value===2&&Y.value)try{st.parse(Y.value.modSetting),ne.value++}catch{mt(p("setting.luaError"))}}else if(ne.value===0)Ke.value.validate(r=>{if(r){if(F.value.masterPort===F.value.cavesPort){mt(p("setting.roomBaseFormRules.samePort"));return}we(),ne.value++}});else if(ne.value===1)$e.value.validate(r=>{if(r)try{st.parse(fe.value.groundSetting),Oe(),ne.value++}catch{mt(p("setting.luaError"))}});else if(ne.value===2)if(ye.value)try{st.parse(ye.value.caveSetting),ne.value++}catch{mt(p("setting.luaError"))}else ne.value++;else if(ne.value===3)if(Y.value)try{st.parse(Y.value.modSetting),ne.value++}catch{mt(p("setting.luaError"))}else ne.value++},Ke=Be(),F=Be({name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!0,password:"",token:"",masterPort:0,cavesPort:0,shardMasterPort:void 0,steamMasterPort:void 0,steamAuthenticationPort:void 0,shardMasterIp:void 0,clusterKey:void 0}),Ne={name:[{required:!0,message:p("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:p("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:p("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:p("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:p("setting.roomBaseFormRules.token"),trigger:"blur"}]},$e=Be(),fe=Be({groundSetting:""}),He={groundSetting:[{required:!0,message:p("setting.roomGroundFormRules.groundSetting"),trigger:"blur"}]},xe=Be(),ye=Be({caveSetting:""}),Je={caveSetting:[{required:!0,message:p("setting.roomCaveFormRules.caveSetting"),trigger:"blur"}]},et=Be(),Y=Be({modSetting:""}),de={modSetting:[{required:!0,message:p("setting.roomModFormRules.modSetting"),trigger:"blur"}]},oe=(r,a)=>{r==="master"&&(a==="endless"&&(fe.value.groundSetting=Dt.master),a==="survival"&&(fe.value.groundSetting=Nt.master),we(),S.value&&(F.value.masterPort=11e3,F.value.cavesPort=0,F.value.shardMasterPort=10888,F.value.steamMasterPort=27018,F.value.steamAuthenticationPort=8768,F.value.shardMasterIp="127.0.0.1",F.value.clusterKey=void 0)),r==="caves"&&(a==="endless"&&(ye.value.caveSetting=Dt.caves),a==="survival"&&(ye.value.caveSetting=Nt.caves),Oe(),S.value&&(F.value.masterPort=0,F.value.cavesPort=11001,F.value.shardMasterPort=10888,F.value.steamMasterPort=27019,F.value.steamAuthenticationPort=8769,F.value.shardMasterIp=void 0,F.value.clusterKey=void 0))},Ze=()=>{_t.room.get().then(r=>{F.value=r.data.base,fe.value.groundSetting=r.data.ground,ye.value.caveSetting=r.data.cave,Y.value.modSetting=r.data.mod,fe.value.groundSetting===""?_.value=!1:(ye.value.caveSetting,_.value=!0),F.value.masterPort===0&&(F.value.masterPort=11e3),F.value.cavesPort===0&&(F.value.cavesPort=11001)})},it=r=>{switch(r){case"save":gt();break;case"saveAndRestart":rt();break;case"generateNewWorld":ut();break}},gt=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.save.post(r).then(a=>{Rt(a.message),pe.value=!1}).finally(()=>{pe.value=!1})},rt=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.saveAndRestart.post(r).then(a=>{Rt(a.message),pe.value=!1}).finally(()=>{pe.value=!1})},ut=()=>{const r={base:F.value,ground:fe.value.groundSetting,cave:ye.value.caveSetting,mod:Y.value.modSetting};pe.value=!0,_t.saveAndGenerate.post(r).then(a=>{pe.value=!1,Rt(a.message)}).finally(()=>{pe.value=!1})},tt=Be("Code"),re=Be("Code"),G=Be({}),we=()=>{if(fe.value.groundSetting==="")return;const r=st.parse(fe.value.groundSetting),a=b(r);G.value=q(a)},Oe=()=>{if(ye.value.caveSetting==="")return;const r=st.parse(ye.value.caveSetting),a=b(r);G.value=q(a)};function b(r){const f=r.body[0].arguments[0];for(const m of f.fields)if(m.key.type==="Identifier"&&m.key.name==="overrides")return m.value;return null}function q(r){const a={};for(const f of r.fields){const m=f.key.name;a[m]=f.value.raw.replace(/"/g,"")}return a}const ue=r=>{const a=r.name,f=r.value,m=st.parse(fe.value.groundSetting),C=b(m);for(let i of C.fields)i.key.name===a&&(i.value.raw=`"${f}"`);const e=O(m);fe.value.groundSetting=kt.Beautify(e,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),me.value&&me.value.refresh()},_e=r=>{const a=r.name,f=r.value,m=st.parse(ye.value.caveSetting),C=b(m);for(let i of C.fields)i.key.name===a&&(i.value.raw=`"${f}"`);const e=O(m);ye.value.caveSetting=kt.Beautify(e,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1}),Te.value&&Te.value.refresh()},O=(r,a=0)=>{const f="    ".repeat(a);switch(r.type){case"Chunk":return r.body.map(m=>O(m,a)).join(`
`);case"LocalStatement":return`${f}local ${r.variables.map(O).join(", ")} = ${r.init.map(O).join(", ")}`;case"FunctionDeclaration":return`${f}function ${O(r.identifier)}(${r.parameters.map(O).join(", ")}) 
${O(r.body,a+1)}
${f}end`;case"ReturnStatement":return`${f}return ${r.arguments.map(O).join(", ")}`;case"BinaryExpression":return`${O(r.left)} ${r.operator} ${O(r.right)}`;case"CallStatement":return`${f}${O(r.expression)}`;case"Identifier":return r.name;case"StringLiteral":return`${r.raw}`;case"NumericLiteral":return r.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${f}{ ${r.fields.map(m=>O(m,a+1)).join(`,
`+f)} }`;case"Field":return r.key?`${O(r.key)} = ${O(r.value)}`:O(r.value);case"AssignmentStatement":return`${f}${r.variables.map(O).join(", ")} = ${r.init.map(O).join(", ")}`;case"CallExpression":return`${O(r.base)}(${r.arguments.map(O).join(", ")})`;case"TableKeyString":return`${O(r.key)} = ${O(r.value)}`;case"BooleanLiteral":return r.raw;case"TableValue":return O(r.value);default:throw new Error(`Unsupported node type: ${r.type}`)}},S=Be(!1),T=async()=>{await _t.multihost.get().then(r=>{S.value=r.data})},g=r=>{_t.multihost.post({multiHost:!S.value}).then(a=>{S.value=!S.value,r&&L()})},_=Be(!0),L=()=>{fe.value.groundSetting="",ye.value.caveSetting="",F.value.masterPort=void 0,F.value.cavesPort=void 0,F.value.shardMasterPort=void 0,F.value.steamMasterPort=void 0,F.value.steamAuthenticationPort=void 0,_.value?F.value.shardMasterIp="127.0.0.1":F.value.shardMasterIp=void 0,F.value.clusterKey=void 0},n={masterPort:[{required:!0,message:p("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:p("setting.roomWorldFormRules.cavesPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:p("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:p("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:p("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:p("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:p("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]};return(r,a)=>{const f=Le("el-step"),m=Le("el-steps"),C=Le("el-card"),e=Le("el-col"),i=Le("el-row"),s=Le("el-button"),d=Le("el-input"),w=Le("el-form-item"),Q=Le("el-tooltip"),ge=Le("el-input-number"),Ve=Le("el-radio"),Ee=Le("el-radio-group"),Z=Le("el-switch"),H=Le("el-slider"),ee=Le("el-link"),Pe=Le("el-form"),Ue=Le("el-tab-pane"),X=Le("el-divider"),We=Le("el-tabs"),vt=Le("el-alert"),pt=Le("el-result"),ht=Le("arrow-down"),Tt=Le("el-icon"),nt=Le("el-dropdown-item"),je=Le("el-dropdown-menu"),Xe=Le("el-dropdown");return v(),z("div",cn,[S.value?Se("",!0):(v(),z(le,{key:0},[c(i,{gutter:10},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:h(()=>[c(C,{shadow:"never"},{default:h(()=>[c(m,{active:ne.value,"align-center":"","finish-status":"success"},{default:h(()=>[c(f,{title:o(k)?r.$t("setting.roomSettingMobile"):r.$t("setting.roomSetting"),onClick:a[0]||(a[0]=t=>Ie(0))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.groundSettingMobile"):r.$t("setting.groundSetting"),onClick:a[1]||(a[1]=t=>Ie(1))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.caveSettingMobile"):r.$t("setting.caveSetting"),onClick:a[2]||(a[2]=t=>Ie(2))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.modSettingMobile"):r.$t("setting.modSetting"),onClick:a[3]||(a[3]=t=>Ie(3))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.finishSettingMobile"):r.$t("setting.finishSetting"),onClick:a[4]||(a[4]=t=>Ie(4))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),c(i,{gutter:10,style:{"margin-top":"5px"}},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:h(()=>[ne.value===0?(v(),K(C,{key:0,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:h(()=>[U("div",mn,[U("span",null,A(o(p)("setting.roomSetting")),1),U("div",null,[c(s,{link:"",type:"primary",onClick:a[5]||(a[5]=t=>g(!0))},{default:h(()=>[j(A(o(p)("setting.baseForm.changeMultiHostMode")),1)]),_:1})])])]),default:h(()=>[c(Pe,{ref_key:"roomBaseFormRef",ref:Ke,"label-position":o(k)?"top":"left","label-width":o(k)?"70":"auto",model:F.value,rules:Ne,size:o(k)?"small":"large"},{default:h(()=>[c(w,{label:o(p)("setting.baseForm.room"),prop:"name"},{default:h(()=>[c(d,{modelValue:F.value.name,"onUpdate:modelValue":a[6]||(a[6]=t=>F.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.description"),prop:"description"},{default:h(()=>[c(d,{modelValue:F.value.description,"onUpdate:modelValue":a[7]||(a[7]=t=>F.value.description=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{prop:"masterPort"},{label:h(()=>[c(Q,{content:o(p)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:h(()=>[j(A(o(p)("setting.baseForm.masterPort")),1)]),_:1},8,["content"])]),default:h(()=>[c(ge,{modelValue:F.value.masterPort,"onUpdate:modelValue":a[8]||(a[8]=t=>F.value.masterPort=t),max:65535,min:1,size:o(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),c(w,{prop:"cavesPort"},{label:h(()=>[c(Q,{content:o(p)("setting.roomBaseFormPortToolTip"),effect:"light",placement:"top"},{default:h(()=>[j(A(o(p)("setting.baseForm.cavesPort")),1)]),_:1},8,["content"])]),default:h(()=>[c(ge,{modelValue:F.value.cavesPort,"onUpdate:modelValue":a[9]||(a[9]=t=>F.value.cavesPort=t),max:65535,min:1,size:o(k)?"small":"large","controls-position":"right"},null,8,["modelValue","size"])]),_:1}),c(w,{label:o(p)("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:h(()=>[c(Ee,{modelValue:F.value.gameMode,"onUpdate:modelValue":a[10]||(a[10]=t=>F.value.gameMode=t)},{default:h(()=>[c(Ve,{label:r.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.pvp"),prop:"pvp"},{default:h(()=>[c(Z,{modelValue:F.value.pvp,"onUpdate:modelValue":a[11]||(a[11]=t=>F.value.pvp=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.playerNum"),prop:"playerNum"},{default:h(()=>[c(H,{modelValue:F.value.playerNum,"onUpdate:modelValue":a[12]||(a[12]=t=>F.value.playerNum=t),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.backDays"),prop:"backDays"},{default:h(()=>[c(H,{modelValue:F.value.backDays,"onUpdate:modelValue":a[13]||(a[13]=t=>F.value.backDays=t),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.vote"),prop:"vote"},{default:h(()=>[c(Z,{modelValue:F.value.vote,"onUpdate:modelValue":a[14]||(a[14]=t=>F.value.vote=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.password")},{default:h(()=>[c(d,{modelValue:F.value.password,"onUpdate:modelValue":a[15]||(a[15]=t=>F.value.password=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.token"),prop:"token"},{default:h(()=>[c(d,{modelValue:F.value.token,"onUpdate:modelValue":a[16]||(a[16]=t=>F.value.token=t),"show-password":""},null,8,["modelValue"]),U("div",gn,[c(ee,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:h(()=>[j(A(o(p)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Se("",!0),ne.value===1?(v(),K(C,{key:1,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[c(We,{modelValue:tt.value,"onUpdate:modelValue":a[20]||(a[20]=t=>tt.value=t)},{default:h(()=>[c(Ue,{label:o(p)("setting.tabCode"),name:"Code"},{default:h(()=>[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:a[17]||(a[17]=t=>oe("master","endless"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.endless")),1)]),_:1})):Se("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:a[18]||(a[18]=t=>oe("master","survival"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.survival")),1)]),_:1})):Se("",!0),c(Pe,{ref_key:"roomGroundFormRef",ref:$e,"label-width":o(k)?"70":"100",model:fe.value,rules:He,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(w,{"label-position":"top",prop:"groundSetting"},{default:h(()=>[c(yt,{ref_key:"editorGroundSettingRef",ref:me,modelValue:fe.value.groundSetting,"onUpdate:modelValue":a[19]||(a[19]=t=>fe.value.groundSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&fe.value.groundSetting!==""?(v(),K(Ue,{key:0,label:o(p)("setting.tabVisualization"),name:"Visualization"},{default:h(()=>[c(X,{"content-position":"center"},{default:h(()=>[U("span",pn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),U("div",hn,[(v(!0),z(le,null,ae(o(Ge).global,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Tn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),U("div",yn,[(v(!0),z(le,null,ae(o(Ge).events,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",_n,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),U("div",vn,[(v(!0),z(le,null,ae(o(Ge).survivors,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",kn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),U("div",bn,[(v(!0),z(le,null,ae(o(Ge).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Sn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),U("div",Vn,[(v(!0),z(le,null,ae(o(Ge).resourceRegrowth,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Ln,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),U("div",Cn,[(v(!0),z(le,null,ae(o(Ge).unnaturalPortalResource,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",wn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),U("div",En,[(v(!0),z(le,null,ae(o(Ge).creatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Fn,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),U("div",Rn,[(v(!0),z(le,null,ae(o(Ge).hostileCreatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",An,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),U("div",Gn,[(v(!0),z(le,null,ae(o(Ge).giants,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Bn,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),U("div",In,[(v(!0),z(le,null,ae(o(lt).global,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Un,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),U("div",Mn,[(v(!0),z(le,null,ae(o(lt).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Pn,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),U("div",zn,[(v(!0),z(le,null,ae(o(lt).resources,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Dn,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),U("div",Nn,[(v(!0),z(le,null,ae(o(lt).creaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",$n,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),U("div",xn,[(v(!0),z(le,null,ae(o(lt).hostileCreaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Se("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Se("",!0),ne.value===2?(v(),K(C,{key:2,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[c(We,{modelValue:re.value,"onUpdate:modelValue":a[24]||(a[24]=t=>re.value=t)},{default:h(()=>[c(Ue,{label:o(p)("setting.tabCode"),name:"Code"},{default:h(()=>[c(vt,{closable:!1,effect:Ce.value?"light":"dark",type:"success"},{default:h(()=>[j(A(o(p)("setting.cavesTip")),1)]),_:1},8,["effect"]),U("div",On,[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:a[21]||(a[21]=t=>oe("caves","endless"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.endless")),1)]),_:1})):Se("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:a[22]||(a[22]=t=>oe("caves","survival"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.survival")),1)]),_:1})):Se("",!0)]),c(Pe,{ref_key:"roomCaveFormRef",ref:xe,"label-width":o(k)?"70":"100",model:ye.value,rules:Je,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(w,{"label-position":"top",prop:"caveSetting"},{default:h(()=>[c(yt,{ref_key:"editorCavesSettingRef",ref:Te,modelValue:ye.value.caveSetting,"onUpdate:modelValue":a[23]||(a[23]=t=>ye.value.caveSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&ye.value.caveSetting!==""?(v(),K(Ue,{key:0,label:o(p)("setting.tabVisualization"),name:"Visualization"},{default:h(()=>[c(X,{"content-position":"center"},{default:h(()=>[U("span",Wn,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),U("div",qn,[(v(!0),z(le,null,ae(o(ot).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Kn,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),U("div",jn,[(v(!0),z(le,null,ae(o(ot).resourceRegrowth,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Hn,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),U("div",Jn,[(v(!0),z(le,null,ae(o(ot).creatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Zn,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),U("div",Xn,[(v(!0),z(le,null,ae(o(ot).hostileCreatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Qn,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),U("div",Yn,[(v(!0),z(le,null,ae(o(ot).giants,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",el,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),U("div",tl,[(v(!0),z(le,null,ae(o(dt).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(ft)[t].configs,customConfigsValue:o(ft)[t].customConfigsValue,i18n:o(ft)[t].i18n,image:o(ft)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",nl,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),U("div",ll,[(v(!0),z(le,null,ae(o(dt).resources,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",ol,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),U("div",al,[(v(!0),z(le,null,ae(o(dt).creaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",il,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),U("div",rl,[(v(!0),z(le,null,ae(o(dt).hostileCreaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Se("",!0)]),_:1},8,["modelValue"])]),_:1},8,["style"])):Se("",!0),ne.value===3?(v(),K(C,{key:3,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[c(Pe,{ref_key:"roomModFormRef",ref:et,"label-width":o(k)?"70":"100",model:Y.value,rules:de,size:o(k)?"small":"large"},{default:h(()=>[c(w,{"label-position":"top",prop:"modSetting"},{default:h(()=>[c(yt,{ref:"editor",modelValue:Y.value.modSetting,"onUpdate:modelValue":a[25]||(a[25]=t=>Y.value.modSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Se("",!0),ne.value===4?(v(),K(C,{key:4,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[U("div",{style:Qe(o(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[c(pt,{"sub-title":r.$t("setting.finish.description"),title:r.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Se("",!0)]),_:1})]),_:1}),c(i,{gutter:10},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:h(()=>[c(C,{shadow:"never"},{default:h(()=>[U("div",ul,[ne.value>0?(v(),K(s,{key:0,onClick:Ye},{default:h(()=>[j(A(o(p)("setting.button.prev")),1)]),_:1})):Se("",!0),ne.value<4?(v(),K(s,{key:1,type:"primary",onClick:ct},{default:h(()=>[j(A(o(p)("setting.button.next")),1)]),_:1})):Se("",!0),ne.value===4?(v(),K(Xe,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:it},{dropdown:h(()=>[c(je,null,{default:h(()=>[c(nt,{command:"save"},{default:h(()=>[j(A(o(p)("setting.button.save")),1)]),_:1}),c(nt,{command:"saveAndRestart"},{default:h(()=>[j(A(o(p)("setting.button.saveAndRestart")),1)]),_:1}),c(nt,{command:"generateNewWorld"},{default:h(()=>[j(A(o(p)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:h(()=>[c(s,{loading:pe.value,type:"warning"},{default:h(()=>[j(A(o(p)("setting.button.actions"))+" ",1),c(Tt,{class:"el-icon--right"},{default:h(()=>[c(ht)]),_:1})]),_:1},8,["loading"])]),_:1})):Se("",!0)])]),_:1})]),_:1})]),_:1})],64)),S.value?(v(),z(le,{key:1},[c(i,{gutter:10},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:h(()=>[c(C,{shadow:"never"},{default:h(()=>[c(m,{active:ne.value,"align-center":"","finish-status":"success"},{default:h(()=>[c(f,{title:o(k)?r.$t("setting.roomSettingMobile"):r.$t("setting.roomSetting"),onClick:a[26]||(a[26]=t=>Ie(0))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.worldSettingMobile"):r.$t("setting.worldSetting"),onClick:a[27]||(a[27]=t=>Ie(1))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.modSettingMobile"):r.$t("setting.modSetting"),onClick:a[28]||(a[28]=t=>Ie(3))},null,8,["title"]),c(f,{title:o(k)?r.$t("setting.finishSettingMobile"):r.$t("setting.finishSetting"),onClick:a[29]||(a[29]=t=>Ie(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),c(i,{gutter:10,style:{"margin-top":"5px"}},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:h(()=>[ne.value===0?(v(),K(C,{key:0,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:h(()=>[U("div",sl,[U("span",null,A(o(p)("setting.roomSetting")),1),U("div",null,[c(s,{link:"",type:"primary",onClick:a[30]||(a[30]=t=>g(!1))},{default:h(()=>[j(A(o(p)("setting.baseForm.changeSingleHostMode")),1)]),_:1})])])]),default:h(()=>[c(Pe,{ref_key:"roomBaseFormRef",ref:Ke,"label-position":o(k)?"top":"left","label-width":o(k)?"70":"auto",model:F.value,rules:Ne,size:o(k)?"small":"large"},{default:h(()=>[c(w,{label:o(p)("setting.baseForm.room"),prop:"name"},{default:h(()=>[c(d,{modelValue:F.value.name,"onUpdate:modelValue":a[31]||(a[31]=t=>F.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.description"),prop:"description"},{default:h(()=>[c(d,{modelValue:F.value.description,"onUpdate:modelValue":a[32]||(a[32]=t=>F.value.description=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.gameMode.name"),prop:"gameMode"},{default:h(()=>[c(Ee,{modelValue:F.value.gameMode,"onUpdate:modelValue":a[33]||(a[33]=t=>F.value.gameMode=t)},{default:h(()=>[c(Ve,{label:r.$t("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),c(Ve,{label:r.$t("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.pvp"),prop:"pvp"},{default:h(()=>[c(Z,{modelValue:F.value.pvp,"onUpdate:modelValue":a[34]||(a[34]=t=>F.value.pvp=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.playerNum"),prop:"playerNum"},{default:h(()=>[c(H,{modelValue:F.value.playerNum,"onUpdate:modelValue":a[35]||(a[35]=t=>F.value.playerNum=t),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.backDays"),prop:"backDays"},{default:h(()=>[c(H,{modelValue:F.value.backDays,"onUpdate:modelValue":a[36]||(a[36]=t=>F.value.backDays=t),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.vote"),prop:"vote"},{default:h(()=>[c(Z,{modelValue:F.value.vote,"onUpdate:modelValue":a[37]||(a[37]=t=>F.value.vote=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.password")},{default:h(()=>[c(d,{modelValue:F.value.password,"onUpdate:modelValue":a[38]||(a[38]=t=>F.value.password=t)},null,8,["modelValue"])]),_:1},8,["label"]),c(w,{label:o(p)("setting.baseForm.token"),prop:"token"},{default:h(()=>[c(d,{modelValue:F.value.token,"onUpdate:modelValue":a[39]||(a[39]=t=>F.value.token=t),"show-password":""},null,8,["modelValue"]),U("div",dl,[c(ee,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:h(()=>[j(A(o(p)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["style"])):Se("",!0),ne.value===1?(v(),K(C,{key:1,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:h(()=>[U("div",fl,[U("div",null,[c(Ee,{modelValue:_.value,"onUpdate:modelValue":a[40]||(a[40]=t=>_.value=t),onChange:L},{default:h(()=>[c(Ve,{value:!0,size:"small"},{default:h(()=>[j(A(o(p)("setting.groundSettingMobile")),1)]),_:1}),c(Ve,{value:!1,size:"small"},{default:h(()=>[j(A(o(p)("setting.caveSettingMobile")),1)]),_:1})]),_:1},8,["modelValue"])])])]),default:h(()=>[_.value?(v(),K(We,{key:0,modelValue:tt.value,"onUpdate:modelValue":a[50]||(a[50]=t=>tt.value=t)},{default:h(()=>[c(Ue,{label:o(p)("setting.tabCode"),name:"Code"},{default:h(()=>[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:a[41]||(a[41]=t=>oe("master","endless"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.endless")),1)]),_:1})):Se("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:a[42]||(a[42]=t=>oe("master","survival"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.survival")),1)]),_:1})):Se("",!0),c(Pe,{ref_key:"roomBaseFormRef",ref:Ke,model:F.value,inline:"","label-width":o(k)?"70":"100","label-position":"top",rules:n,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(Q,{effect:"light","show-after":500,content:"server.ini - [NETWORK] - server_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.masterPort"),prop:"masterPort"},{default:h(()=>[c(d,{modelValue:F.value.masterPort,"onUpdate:modelValue":a[43]||(a[43]=t=>F.value.masterPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort"},{default:h(()=>[c(d,{modelValue:F.value.shardMasterPort,"onUpdate:modelValue":a[44]||(a[44]=t=>F.value.shardMasterPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - server_master_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort"},{default:h(()=>[c(d,{modelValue:F.value.steamMasterPort,"onUpdate:modelValue":a[45]||(a[45]=t=>F.value.steamMasterPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - authentication_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort"},{default:h(()=>[c(d,{modelValue:F.value.steamAuthenticationPort,"onUpdate:modelValue":a[46]||(a[46]=t=>F.value.steamAuthenticationPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_ip",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:"Master IP",prop:"shardMasterIp"},{default:h(()=>[c(d,{modelValue:F.value.shardMasterIp,"onUpdate:modelValue":a[47]||(a[47]=t=>F.value.shardMasterIp=t),disabled:"",size:"default"},null,8,["modelValue"])]),_:1})]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - cluster_key",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.clusterKey"),prop:"clusterKey"},{default:h(()=>[c(d,{modelValue:F.value.clusterKey,"onUpdate:modelValue":a[48]||(a[48]=t=>F.value.clusterKey=t),type:"password","show-password":"",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","label-width","size"]),c(Pe,{ref_key:"roomGroundFormRef",ref:$e,"label-width":o(k)?"70":"100",model:fe.value,rules:He,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.groundSetting"),prop:"groundSetting"},{default:h(()=>[c(yt,{ref_key:"editorGroundSettingRef",ref:me,modelValue:fe.value.groundSetting,"onUpdate:modelValue":a[49]||(a[49]=t=>fe.value.groundSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1},8,["label"])]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&fe.value.groundSetting!==""?(v(),K(Ue,{key:0,label:o(p)("setting.tabVisualization"),name:"Visualization"},{default:h(()=>[c(X,{"content-position":"center"},{default:h(()=>[U("span",cl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),U("div",ml,[(v(!0),z(le,null,ae(o(Ge).global,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",gl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),U("div",pl,[(v(!0),z(le,null,ae(o(Ge).events,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",hl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),U("div",Tl,[(v(!0),z(le,null,ae(o(Ge).survivors,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",yl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),U("div",_l,[(v(!0),z(le,null,ae(o(Ge).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",vl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),U("div",kl,[(v(!0),z(le,null,ae(o(Ge).resourceRegrowth,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",bl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),U("div",Sl,[(v(!0),z(le,null,ae(o(Ge).unnaturalPortalResource,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Vl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),U("div",Ll,[(v(!0),z(le,null,ae(o(Ge).creatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Cl,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),U("div",wl,[(v(!0),z(le,null,ae(o(Ge).hostileCreatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",El,A(o(p)("setting.groundVisualizationRule")),1),j(" - "+A(o(p)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),U("div",Fl,[(v(!0),z(le,null,ae(o(Ge).giants,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Rl,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),U("div",Al,[(v(!0),z(le,null,ae(o(lt).global,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Gl,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),U("div",Bl,[(v(!0),z(le,null,ae(o(lt).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Il,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),U("div",Ul,[(v(!0),z(le,null,ae(o(lt).resources,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Ml,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),U("div",Pl,[(v(!0),z(le,null,ae(o(lt).creaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",zl,A(o(p)("setting.groundVisualizationGeneration")),1),j(" - "+A(o(p)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),U("div",Dl,[(v(!0),z(le,null,ae(o(lt).hostileCreaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:ue},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Se("",!0)]),_:1},8,["modelValue"])):(v(),K(We,{key:1,modelValue:re.value,"onUpdate:modelValue":a[60]||(a[60]=t=>re.value=t)},{default:h(()=>[c(Ue,{label:o(p)("setting.tabCode"),name:"Code"},{default:h(()=>[U("div",null,[F.value.gameMode==="endless"?(v(),K(s,{key:0,type:"primary",onClick:a[51]||(a[51]=t=>oe("caves","endless"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.endless")),1)]),_:1})):Se("",!0),F.value.gameMode==="survival"?(v(),K(s,{key:1,type:"primary",onClick:a[52]||(a[52]=t=>oe("caves","survival"))},{default:h(()=>[j(A(o(p)("setting.luaImportButton.survival")),1)]),_:1})):Se("",!0)]),c(Pe,{ref_key:"roomBaseFormRef",ref:Ke,model:F.value,inline:"","label-width":o(k)?"70":"100","label-position":"top",rules:n,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(Q,{effect:"light","show-after":500,content:"server.ini - [NETWORK] - server_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.cavesPort"),prop:"cavesPort"},{default:h(()=>[c(d,{modelValue:F.value.cavesPort,"onUpdate:modelValue":a[53]||(a[53]=t=>F.value.cavesPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort"},{default:h(()=>[c(d,{modelValue:F.value.shardMasterPort,"onUpdate:modelValue":a[54]||(a[54]=t=>F.value.shardMasterPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - server_master_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort"},{default:h(()=>[c(d,{modelValue:F.value.steamMasterPort,"onUpdate:modelValue":a[55]||(a[55]=t=>F.value.steamMasterPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"server.ini - [STEAM] - authentication_port",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort"},{default:h(()=>[c(d,{modelValue:F.value.steamAuthenticationPort,"onUpdate:modelValue":a[56]||(a[56]=t=>F.value.steamAuthenticationPort=t),type:"number",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - master_ip",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:"Master IP",prop:"shardMasterIp"},{default:h(()=>[c(d,{modelValue:F.value.shardMasterIp,"onUpdate:modelValue":a[57]||(a[57]=t=>F.value.shardMasterIp=t),size:"default"},null,8,["modelValue"])]),_:1})]),_:1}),c(Q,{effect:"light","show-after":500,content:"cluster.ini - [SHARD] - cluster_key",placement:"top"},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.clusterKey"),prop:"clusterKey"},{default:h(()=>[c(d,{modelValue:F.value.clusterKey,"onUpdate:modelValue":a[58]||(a[58]=t=>F.value.clusterKey=t),type:"password","show-password":"",size:"default"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","label-width","size"]),c(Pe,{ref_key:"roomCaveFormRef",ref:xe,"label-width":o(k)?"70":"100",model:ye.value,rules:Je,size:o(k)?"small":"large",style:{"margin-top":"10px"}},{default:h(()=>[c(w,{"label-position":"top",label:o(p)("setting.roomWorldForm.caveSetting"),prop:"caveSetting"},{default:h(()=>[c(yt,{ref_key:"editorCavesSettingRef",ref:Te,modelValue:ye.value.caveSetting,"onUpdate:modelValue":a[59]||(a[59]=t=>ye.value.caveSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1},8,["label"])]),_:1},8,["label-width","model","size"])]),_:1},8,["label"]),(F.value.gameMode==="endless"||F.value.gameMode==="survival")&&ye.value.caveSetting!==""?(v(),K(Ue,{key:0,label:o(p)("setting.tabVisualization"),name:"Visualization"},{default:h(()=>[c(X,{"content-position":"center"},{default:h(()=>[U("span",Nl,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),U("div",$l,[(v(!0),z(le,null,ae(o(ot).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",xl,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),U("div",Ol,[(v(!0),z(le,null,ae(o(ot).resourceRegrowth,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Wl,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),U("div",ql,[(v(!0),z(le,null,ae(o(ot).creatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Kl,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),U("div",jl,[(v(!0),z(le,null,ae(o(ot).hostileCreatures,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Hl,A(o(p)("setting.cavesVisualizationRule")),1),j(" - "+A(o(p)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),U("div",Jl,[(v(!0),z(le,null,ae(o(ot).giants,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Zl,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),U("div",Xl,[(v(!0),z(le,null,ae(o(dt).world,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(ft)[t].configs,customConfigsValue:o(ft)[t].customConfigsValue,i18n:o(ft)[t].i18n,image:o(ft)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",Ql,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),U("div",Yl,[(v(!0),z(le,null,ae(o(dt).resources,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",eo,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),U("div",to,[(v(!0),z(le,null,ae(o(dt).creaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))]),c(X,{"content-position":"center"},{default:h(()=>[U("span",no,A(o(p)("setting.cavesVisualizationGeneration")),1),j(" - "+A(o(p)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),U("div",lo,[(v(!0),z(le,null,ae(o(dt).hostileCreaturesAndSpawners,t=>(v(),z("div",null,[(v(),K(ie,{modelValue:G.value[t],"onUpdate:modelValue":M=>G.value[t]=M,configs:o(y)[t].configs,customConfigsValue:o(y)[t].customConfigsValue,i18n:o(y)[t].i18n,image:o(y)[t].image,name:t,key:new Date().getTime(),onChangeModelValue:_e},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","i18n","image","name"]))]))),256))])]),_:1},8,["label"])):Se("",!0)]),_:1},8,["modelValue"]))]),_:1},8,["style"])):Se("",!0),ne.value===2?(v(),K(C,{key:2,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[c(Pe,{ref_key:"roomModFormRef",ref:et,"label-width":o(k)?"70":"100",model:Y.value,rules:de,size:o(k)?"small":"large"},{default:h(()=>[c(w,{"label-position":"top",prop:"modSetting"},{default:h(()=>[c(yt,{ref:"editor",modelValue:Y.value.modSetting,"onUpdate:modelValue":a[61]||(a[61]=t=>Y.value.modSetting=t),height:o(k)?320:500,theme:Ce.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["label-width","model","size"])]),_:1},8,["style"])):Se("",!0),ne.value===3?(v(),K(C,{key:3,style:Qe(o(k)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{default:h(()=>[U("div",{style:Qe(o(k)?"min-height: 360px":"min-height: 560px"),class:"fcc"},[c(pt,{"sub-title":r.$t("setting.finish.description"),title:r.$t("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1},8,["style"])):Se("",!0)]),_:1})]),_:1}),c(i,{gutter:10},{default:h(()=>[c(e,{lg:24,md:24,sm:24,span:24,xs:24},{default:h(()=>[c(C,{shadow:"never"},{default:h(()=>[U("div",oo,[ne.value>0?(v(),K(s,{key:0,onClick:Ye},{default:h(()=>[j(A(o(p)("setting.button.prev")),1)]),_:1})):Se("",!0),ne.value<3?(v(),K(s,{key:1,type:"primary",onClick:ct},{default:h(()=>[j(A(o(p)("setting.button.next")),1)]),_:1})):Se("",!0),ne.value===3?(v(),K(Xe,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:it},{dropdown:h(()=>[c(je,null,{default:h(()=>[c(nt,{command:"save"},{default:h(()=>[j(A(o(p)("setting.button.save")),1)]),_:1}),c(nt,{command:"saveAndRestart"},{default:h(()=>[j(A(o(p)("setting.button.saveAndRestart")),1)]),_:1}),c(nt,{command:"generateNewWorld"},{default:h(()=>[j(A(o(p)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:h(()=>[c(s,{loading:pe.value,type:"warning"},{default:h(()=>[j(A(o(p)("setting.button.actions"))+" ",1),c(Tt,{class:"el-icon--right"},{default:h(()=>[c(ht)]),_:1})]),_:1},8,["loading"])]),_:1})):Se("",!0)])]),_:1})]),_:1})]),_:1})],64)):Se("",!0)])}}}),co=nn(io,[["__scopeId","data-v-24323bd8"]]);export{co as default};
