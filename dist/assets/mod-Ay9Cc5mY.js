import{_ as Ve,o as Ie,u as Le,a as Oe,g as Te,c as Ne,r as u,B as o,C as Be,d as s,e as y,f as t,w as e,j as l,l as $,k as m,i as g,q as $e,m as c,t as r,F,v as A,s as Ae,p as V,n as k,X as qe,y as I,A as Ge}from"./index-C_KKoqVJ.js";import{s as x}from"./index-Af-u4w52.js";import{e as oe}from"./index-DQRwlZhV.js";import je from"./modInfo-BqQpMbXJ.js";const Ee={class:"page-div"},Pe={class:"item-container"},Re={class:"card-footer",style:{"margin-top":"20px"}},Ke={class:"card-header"},Xe={style:{display:"flex"}},He={style:{display:"flex","margin-left":"5px","flex-direction":"column","justify-content":"center"}},Je={class:"card-header"},Qe=qe({name:"settingsMod"}),We=Object.assign(Qe,{setup(Ye){Ie(async()=>{await z()});const{t:d}=Le(),{isMobile:f}=Oe(),de=Te(),se=Ne(()=>de.isDark),W=u("Download"),ie=(n,i)=>{n.paneName==="Add"&&O(),n.paneName==="Setting"&&Y()},_=u([]),q=u(!1),Y=()=>{q.value=!0,p.value=0,G.value="",x.mod.settingFormat.get().then(n=>{_.value=n.data}).finally(()=>{q.value=!1})},p=u(0),G=u(""),Z=(n,i)=>{p.value=n,G.value=i,re()},S=u(!1),M=u({id:"",configOptions:[]}),re=()=>{S.value=!0,x.mod.configOptions.get({id:p.value}).then(n=>{M.value=n.data}).finally(()=>{S.value=!1})},ue=()=>{S.value=!0,x.mod.configChange.post({modFormattedData:_.value}).then(n=>{I(n.message)}).finally(()=>{S.value=!1})},j=u(!1),L=u({total:0,rows:[]}),ce=u(),v=u({page:1,pageSize:30,searchText:""}),z=()=>{j.value=!0,oe.modSearch.get(v.value).then(n=>{L.value.rows=n.data.rows,L.value.total=n.data.total}).finally(()=>{j.value=!1})},me=n=>{z()},ge=n=>{z()},ee=u([]),E=u(!1),O=()=>{E.value=!0,oe.modInfoDownloaded.get().then(n=>{ee.value=n.data}).finally(()=>{E.value=!1})},P=u(!1),_e=()=>{P.value=!0,x.mod.sync.post().then(n=>{I(n.message),O()}).finally(()=>{P.value=!1})},D=u(!1),fe=n=>{let i=n.cmd,h=n.row;switch(D.value=!0,i){case"enable":pe(h);break;case"delete":ve(h);break;default:D.value=!1,Ge("error")}},pe=n=>{const h={isUgc:n.file_url==="",id:n.id};x.mod.enable.post(h).then(b=>{I(b.message)}).finally(()=>{D.value=!1})},ve=n=>{const h={isUgc:n.file_url==="",id:n.id};x.mod.delete.post(h).then(b=>{I(b.message),O()}).finally(()=>{D.value=!1})},R=u(!1),he=()=>{R.value=!0;const i={isUgc:G.value==="",id:p.value};x.mod.disable.post(i).then(h=>{I(h.message),Y()}).finally(()=>{R.value=!1})};return(n,i)=>{const h=o("el-input"),b=o("el-button"),T=o("el-form-item"),te=o("el-form"),K=o("el-scrollbar"),be=o("el-pagination"),N=o("el-card"),X=o("el-tab-pane"),le=o("el-tooltip"),ye=o("el-alert"),U=o("el-table-column"),C=o("el-tag"),we=o("arrow-down"),ke=o("el-icon"),ae=o("el-dropdown-item"),xe=o("el-dropdown-menu"),Ce=o("el-dropdown"),Se=o("el-table"),H=o("el-col"),ne=o("el-row"),Me=o("el-image"),ze=o("el-divider"),J=o("el-result"),De=o("el-option"),Ue=o("el-select"),Fe=o("el-tabs"),B=Be("loading");return s(),y("div",Ee,[t(Fe,{modelValue:W.value,"onUpdate:modelValue":i[5]||(i[5]=a=>W.value=a),onTabClick:ie},{default:e(()=>[t(X,{label:l(d)("setting.mod.tab.download"),name:"Download"},{default:e(()=>[$((s(),m(N,{style:{height:"78vh"},shadow:"never"},{default:e(()=>[g("div",null,[t(te,{ref_key:"modSearchFormRef",ref:ce,model:v.value,inline:!0,onKeyup:$e(z,["enter"])},{default:e(()=>[t(T,null,{default:e(()=>[t(h,{modelValue:v.value.searchText,"onUpdate:modelValue":i[0]||(i[0]=a=>v.value.searchText=a),style:{width:"40vw"}},null,8,["modelValue"]),t(b,{type:"primary",onClick:z,style:{"margin-left":"10px"}},{default:e(()=>[c(r(l(d)("setting.mod.download.search")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),g("div",null,[t(K,{"max-height":"60vh"},{default:e(()=>[g("div",Pe,[(s(!0),y(F,null,A(L.value.rows,a=>(s(),m(je,{mod:a},null,8,["mod"]))),256))])]),_:1})]),g("div",Re,[t(be,{"current-page":v.value.page,"onUpdate:currentPage":i[1]||(i[1]=a=>v.value.page=a),"page-size":v.value.pageSize,"onUpdate:pageSize":i[2]||(i[2]=a=>v.value.pageSize=a),"page-sizes":[10,20,30,40,50,100],layout:"total, sizes, prev, pager, next",total:L.value.total,onSizeChange:i[3]||(i[3]=a=>me(v.value.pageSize)),onCurrentChange:i[4]||(i[4]=a=>ge(v.value.page))},null,8,["current-page","page-size","total"])])]),_:1})),[[B,j.value]])]),_:1},8,["label"]),t(X,{label:l(d)("setting.mod.tab.add"),name:"Add"},{default:e(()=>[t(ne,{gutter:10},{default:e(()=>[t(H,{span:24},{default:e(()=>[$((s(),m(N,{style:{height:"70vh"},shadow:"never"},{header:e(()=>[g("div",Ke,[g("span",null,r(l(d)("setting.mod.add.header.title")),1),g("div",null,[t(b,{onClick:O},{default:e(()=>[c(r(l(d)("setting.mod.add.header.refresh")),1)]),_:1}),t(le,{effect:"light","show-after":500,content:l(d)("setting.mod.add.header.syncTooltip"),placement:"top"},{default:e(()=>[t(b,{type:"primary",loading:P.value,onClick:_e},{default:e(()=>[c(r(l(d)("setting.mod.add.header.sync")),1)]),_:1},8,["loading"])]),_:1},8,["content"])])])]),default:e(()=>[t(ye,{closable:!1,effect:se.value?"light":"dark",type:"warning"},{default:e(()=>[c(r(l(d)("setting.mod.add.alert")),1)]),_:1},8,["effect"]),t(Se,{data:ee.value,border:"",style:{height:"55vh","margin-top":"10px"}},{default:e(()=>[t(U,{label:l(d)("setting.mod.add.table.name"),prop:"name"},null,8,["label"]),t(U,{label:"ID",prop:"id"}),t(U,{label:"UGC"},{default:e(a=>[a.row.file_url===""?(s(),m(C,{key:0,type:"primary"},{default:e(()=>[c(r(l(d)("setting.mod.add.table.ugc.yes")),1)]),_:1})):(s(),m(C,{key:1,type:"info"},{default:e(()=>[c(r(l(d)("setting.mod.add.table.ugc.no")),1)]),_:1}))]),_:1}),t(U,{label:l(d)("setting.mod.add.table.size")},{default:e(a=>[c(r(l(Ae)(a.row.size)),1)]),_:1},8,["label"]),t(U,{label:l(d)("setting.mod.add.table.action")},{default:e(a=>[t(Ce,{onCommand:fe,trigger:"click"},{dropdown:e(()=>[t(xe,null,{default:e(()=>[t(ae,{command:{cmd:"enable",row:a.row}},{default:e(()=>[c(r(l(d)("setting.mod.add.table.enable")),1)]),_:2},1032,["command"]),t(ae,{command:{cmd:"delete",row:a.row}},{default:e(()=>[c(r(l(d)("setting.mod.add.table.delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:e(()=>[t(b,{type:"primary",link:"",loading:D.value},{default:e(()=>[c(r(l(d)("setting.mod.add.table.action")),1),t(ke,{class:"el-icon--right"},{default:e(()=>[t(we)]),_:1})]),_:1},8,["loading"])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})),[[B,E.value]])]),_:1})]),_:1})]),_:1},8,["label"]),t(X,{label:l(d)("setting.mod.tab.setting"),name:"Setting"},{default:e(()=>[t(ne,{gutter:10},{default:e(()=>[t(H,{lg:8,md:8,sm:24,span:8,xs:24},{default:e(()=>[$((s(),m(N,{style:V(l(f)?"height: 50vh":"height: 70vh"),shadow:"never"},{default:e(()=>[t(K,{"max-height":l(f)?"45vh":"65vh"},{default:e(()=>[_.value?(s(!0),y(F,{key:0},A(_.value,(a,w)=>(s(),y(F,null,[g("div",Xe,[g("div",null,[t(Me,{src:a.preview_url,fit:"fill",onClick:Q=>Z(a.id,a.file_url),style:{width:"75px",height:"75px"}},null,8,["src","onClick"])]),g("div",He,[t(b,{link:"",type:"primary",onClick:Q=>Z(a.id,a.file_url)},{default:e(()=>[c(r(a.name),1)]),_:2},1032,["onClick"]),g("div",null,[a.enable?(s(),m(C,{key:0,type:"success"},{default:e(()=>[c(r(l(d)("setting.mod.setting.left.enable")),1)]),_:1})):k("",!0),a.enable?k("",!0):(s(),m(C,{key:1,type:"info"},{default:e(()=>[c(r(l(d)("setting.mod.setting.left.disable")),1)]),_:1}))])])]),w!==_.value.length-1?(s(),m(ze,{key:0})):k("",!0)],64))),256)):(s(),y("div",{key:1,class:"fcc",style:V(l(f)?"height: 50vh":"height: 70vh")},[t(J,{icon:"warning",title:l(d)("setting.mod.setting.left.result")},null,8,["title"])],4))]),_:1},8,["max-height"])]),_:1},8,["style"])),[[B,q.value]])]),_:1}),t(H,{lg:16,md:16,sm:24,span:16,xs:24},{default:e(()=>[$((s(),m(N,{style:V(l(f)?"height: 50vh; margin-top: 10px":"height: 70vh"),shadow:"never"},{header:e(()=>[g("div",Je,[g("span",null,r(l(d)("setting.mod.setting.right.header.title")),1),t(b,{type:"danger",disabled:p.value===0,loading:R.value,onClick:he},{default:e(()=>[c(r(l(d)("setting.mod.setting.right.header.disable")),1)]),_:1},8,["disabled","loading"])])]),default:e(()=>[p.value!==0?(s(),m(K,{key:0,"max-height":l(f)?"45vh":"65vh"},{default:e(()=>[M.value.configOptions.length!==0?(s(),m(te,{key:0,ref:"modSettingFormRef",size:l(f)?"small":"large","label-position":l(f)?"top":"left","label-width":l(f)?"70":"auto"},{default:e(()=>[t(T,{label:"ID"},{default:e(()=>[t(C,null,{default:e(()=>[c(r(M.value.id),1)]),_:1})]),_:1}),t(T,{label:l(d)("setting.mod.setting.right.name")},{default:e(()=>[t(C,{type:"info"},{default:e(()=>[c(r(_.value[_.value.findIndex(a=>a.id===p.value)].name),1)]),_:1})]),_:1},8,["label"]),(s(!0),y(F,null,A(M.value.configOptions,a=>(s(),m(le,{"show-after":500,effect:"light",content:a.hover,placement:"top"},{default:e(()=>[t(T,{label:a.label},{default:e(()=>[t(Ue,{modelValue:_.value[_.value.findIndex(w=>w.id===p.value)].configurationOptions[a.name],"onUpdate:modelValue":w=>_.value[_.value.findIndex(Q=>Q.id===p.value)].configurationOptions[a.name]=w,onChange:ue},{default:e(()=>[(s(!0),y(F,null,A(a.options,w=>(s(),m(De,{label:w.description,value:w.data},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1032,["content"]))),256))]),_:1},8,["size","label-position","label-width"])):k("",!0),M.value.configOptions.length===0?(s(),y("div",{key:1,class:"fcc",style:V(l(f)?"height: 40vh; margin-top: 10px":"height: 60vh")},[t(J,{icon:"info",title:l(d)("setting.mod.setting.right.result")},null,8,["title"])],4)):k("",!0)]),_:1},8,["max-height"])):k("",!0),p.value===0?(s(),y("div",{key:1,class:"fcc",style:V(l(f)?"height: 40vh; margin-top: 10px":"height: 60vh")},[t(J,{icon:"info",title:l(d)("setting.mod.setting.right.result2")},null,8,["title"])],4)):k("",!0)]),_:1},8,["style"])),[[B,S.value]])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}}),at=Ve(We,[["__scopeId","data-v-b5f5e721"]]);export{at as default};
