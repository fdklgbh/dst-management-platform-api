import{aa as wt,ab as an,_ as on,u as rn,o as un,r as Ae,a as sn,g as dn,c as Ft,D as fn,G as cn,b as pn,H as mn,a1 as gt,w as gn,I as ct,J as Se,e as U,f as J,j as w,k as M,i as r,m as se,l as q,t as $,y as Ze,q as Pe,p as le,ac as Dt,F as be,x as Le,a0 as hn,C as it,A as At}from"./index-CLMr2Kmu.js";import{s as Ot}from"./index-DKuDbtP2.js";import{g as lt,_ as Ve,o as B,a as ht,c as Tt,b as bt,d as _t}from"./levelDataSetting-yC0LKMkf.js";var St={exports:{}};St.exports;(function(Xe,V){(function(ge,E,R){var Te=V&&!V.nodeType&&V,de=Xe&&!Xe.nodeType&&Xe,X=Te&&de&&typeof wt=="object"&&wt,we=de&&de.exports===Te&&Te;X&&(X.global===X||X.window===X||X.self===X)&&(ge=X),R(Te&&de?we?de.exports:Te:ge[E]={})})(wt,"luaparse",function(ge){ge.version="0.3.1";var E,R,Te,de,X,we=ge.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function Oe(n,i){return i=i||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(i|192|n>>6,i|128|n&63):n<65536?String.fromCharCode(i|224|n>>12,i|128|n>>6&63,i|128|n&63):n<1114112?String.fromCharCode(i|240|n>>18,i|128|n>>12&63,i|128|n>>6&63,i|128|n&63):null}function je(n,i){for(var _=n.toString(16);_.length<i;)_="0"+_;return _}function rt(n){return function(i){var _=n.exec(i);if(!_)return i;Q(null,Y.invalidCodeUnit,je(_[0].charCodeAt(0),4).toUpperCase())}}var ut={"pseudo-latin1":{fixup:rt(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return Oe(n)}},"x-user-defined":{fixup:rt(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return Oe(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},We=1,Be=2,_e=4,Fe=8,He=16,Ue=32,Je=64,ae=128,Qe=256;ge.tokenTypes={EOF:We,StringLiteral:Be,Keyword:_e,Identifier:Fe,NumericLiteral:He,Punctuator:Ue,BooleanLiteral:Je,NilLiteral:ae,VarargLiteral:Qe};var Y=ge.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ee=ge.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,i){return{type:"IfClause",condition:n,body:i}},elseifClause:function(n,i){return{type:"ElseifClause",condition:n,body:i}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,i){return{type:"WhileStatement",condition:n,body:i}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,i){return{type:"RepeatStatement",condition:n,body:i}},localStatement:function(n,i){return{type:"LocalStatement",variables:n,init:i}},assignmentStatement:function(n,i){return{type:"AssignmentStatement",variables:n,init:i}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,i,_,A){return{type:"FunctionDeclaration",identifier:n,isLocal:_,parameters:i,body:A}},forNumericStatement:function(n,i,_,A,O){return{type:"ForNumericStatement",variable:n,start:i,end:_,step:A,body:O}},forGenericStatement:function(n,i,_){return{type:"ForGenericStatement",variables:n,iterators:i,body:_}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,i,_){return n=n===Be?"StringLiteral":n===He?"NumericLiteral":n===Je?"BooleanLiteral":n===ae?"NilLiteral":"VarargLiteral",{type:n,value:i,raw:_}},tableKey:function(n,i){return{type:"TableKey",key:n,value:i}},tableKeyString:function(n,i){return{type:"TableKeyString",key:n,value:i}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,i,_){var A=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:A,operator:n,left:i,right:_}},unaryExpression:function(n,i){return{type:"UnaryExpression",operator:n,argument:i}},memberExpression:function(n,i,_){return{type:"MemberExpression",indexer:i,identifier:_,base:n}},indexExpression:function(n,i){return{type:"IndexExpression",base:n,index:i}},callExpression:function(n,i){return{type:"CallExpression",base:n,arguments:i}},tableCallExpression:function(n,i){return{type:"TableCallExpression",base:n,arguments:i}},stringCallExpression:function(n,i){return{type:"StringCallExpression",base:n,argument:i}},comment:function(n,i){return{type:"Comment",value:n,raw:i}}};function te(n){if(l){var i=k.pop();i.complete(),i.bless(n)}return R.onCreateNode&&R.onCreateNode(n),n}var $e=Array.prototype.slice,at=function(n,i){for(var _=0,A=n.length;_<A;++_)if(n[_]===i)return _;return-1};Array.prototype.indexOf&&(at=function(n,i){return n.indexOf(i)});function st(n,i,_){for(var A=0,O=n.length;A<O;++A)if(n[A][i]===_)return A;return-1}function H(n){var i=$e.call(arguments,1);return n=n.replace(/%(\d)/g,function(_,A){return""+i[A-1]||""}),n}var et=function(n){for(var i=$e.call(arguments,1),_,A,O=0,me=i.length;O<me;++O){_=i[O];for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&(n[A]=_[A])}return n};Object.assign&&(et=Object.assign),ge.SyntaxError=SyntaxError;function ot(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function Q(n){var i=H.apply(null,$e.call(arguments,1)),_,A;throw n===null||typeof n.line>"u"?(A=h-m+1,_=ot(new SyntaxError(H("[%1:%2] %3",c,A,i))),_.index=h,_.line=c,_.column=A):(A=n.range[0]-n.lineStart,_=ot(new SyntaxError(H("[%1:%2] %3",n.line,A,i))),_.line=n.line,_.index=n.range[0],_.column=A),_}function ye(n){var i=E.slice(n.range[0],n.range[1]);return i||n.value}function oe(n,i){Q(i,Y.expectedToken,n,ye(i))}function fe(n){var i=ye(j);if(typeof n.type<"u"){var _;switch(n.type){case Be:_="string";break;case _e:_="keyword";break;case Fe:_="identifier";break;case He:_="number";break;case Ue:_="symbol";break;case Je:_="boolean";break;case ae:return Q(n,Y.unexpected,"symbol","nil",i);case We:return Q(n,Y.unexpectedEOF)}return Q(n,Y.unexpected,_,ye(n),i)}return Q(n,Y.unexpected,"symbol",n,i)}var h,N,ne,j,b,f,c,m;ge.lex=y;function y(){for(T();E.charCodeAt(h)===45&&E.charCodeAt(h+1)===45;)re(),T();if(h>=Te)return{type:We,value:"<eof>",line:c,lineStart:m,range:[h,h]};var n=E.charCodeAt(h),i=E.charCodeAt(h+1);if(f=h,tt(n))return g();switch(n){case 39:case 34:return S();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o();case 46:return xe(i)?o():i===46?E.charCodeAt(h+2)===46?p():d(".."):d(".");case 61:return d(i===61?"==":"=");case 62:return de.bitwiseOperators&&i===62?d(">>"):d(i===61?">=":">");case 60:return de.bitwiseOperators&&i===60?d("<<"):d(i===61?"<=":"<");case 126:if(i===61)return d("~=");if(!de.bitwiseOperators)break;return d("~");case 58:return de.labels&&i===58?d("::"):d(":");case 91:return i===91||i===61?t():d("[");case 47:return de.integerDivision&&i===47?d("//"):d("/");case 38:case 124:if(!de.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return d(E.charAt(h))}return fe(E.charAt(h))}function e(){var n=E.charCodeAt(h),i=E.charCodeAt(h+1);return Ne(n)?(n===10&&i===13&&++h,n===13&&i===10&&++h,++c,m=++h,!0):!1}function T(){for(;h<Te;){var n=E.charCodeAt(h);if(mt(n))++h;else if(!e())break}}function g(){for(var n,i;dt(E.charCodeAt(++h)););return n=X.fixup(E.slice(f,h)),ft(n)?i=_e:n==="true"||n==="false"?(i=Je,n=n==="true"):n==="nil"?(i=ae,n=null):i=Fe,{type:i,value:n,line:c,lineStart:m,range:[f,h]}}function d(n){return h+=n.length,{type:Ue,value:n,line:c,lineStart:m,range:[f,h]}}function p(){return h+=3,{type:Qe,value:"...",line:c,lineStart:m,range:[f,h]}}function S(){for(var n=E.charCodeAt(h++),i=c,_=m,A=h,O=X.discardStrings?null:"",me;me=E.charCodeAt(h++),n!==me;)if((h>Te||Ne(me))&&(O+=E.slice(A,h-1),Q(null,Y.unfinishedString,E.slice(f,h-1))),me===92){if(!X.discardStrings){var ke=E.slice(A,h-1);O+=X.fixup(ke)}var Ee=ue();X.discardStrings||(O+=Ee),A=h}return X.discardStrings||(O+=X.encodeByte(null),O+=X.fixup(E.slice(A,h-1))),{type:Be,value:O,line:i,lineStart:_,lastLine:c,lastLineStart:m,range:[f,h]}}function t(){var n=c,i=m,_=Z(!1);return _===!1&&Q(N,Y.expected,"[",ye(N)),{type:Be,value:X.discardStrings?null:X.fixup(_),line:n,lineStart:i,lastLine:c,lastLineStart:m,range:[f,h]}}function o(){var n=E.charAt(h),i=E.charAt(h+1),_=n==="0"&&"xX".indexOf(i||null)>=0?s():P(),A=u(),O=a();return O&&(A||_.hasFractionPart)&&Q(null,Y.malformedNumber,E.slice(f,h)),{type:He,value:_.value,line:c,lineStart:m,range:[f,h]}}function u(){if(de.imaginaryNumbers)return"iI".indexOf(E.charAt(h)||null)>=0?(++h,!0):!1}function a(){if(de.integerSuffixes){if("uU".indexOf(E.charAt(h)||null)>=0)if(++h,"lL".indexOf(E.charAt(h)||null)>=0){if(++h,"lL".indexOf(E.charAt(h)||null)>=0)return++h,"ULL";Q(null,Y.malformedNumber,E.slice(f,h))}else Q(null,Y.malformedNumber,E.slice(f,h));else if("lL".indexOf(E.charAt(h)||null)>=0){if(++h,"lL".indexOf(E.charAt(h)||null)>=0)return++h,"LL";Q(null,Y.malformedNumber,E.slice(f,h))}}}function s(){var n=0,i=1,_=1,A,O,me,ke;for(ke=h+=2,ze(E.charCodeAt(h))||Q(null,Y.malformedNumber,E.slice(f,h));ze(E.charCodeAt(h));)++h;A=parseInt(E.slice(ke,h),16);var Ee=!1;if(E.charAt(h)==="."){for(Ee=!0,O=++h;ze(E.charCodeAt(h));)++h;n=E.slice(O,h),n=O===h?0:parseInt(n,16)/Math.pow(16,h-O)}var kt=!1;if("pP".indexOf(E.charAt(h)||null)>=0){for(kt=!0,++h,"+-".indexOf(E.charAt(h)||null)>=0&&(_=E.charAt(h++)==="+"?1:-1),me=h,xe(E.charCodeAt(h))||Q(null,Y.malformedNumber,E.slice(f,h));xe(E.charCodeAt(h));)++h;i=E.slice(me,h),i=Math.pow(2,i*_)}return{value:(A+n)*i,hasFractionPart:Ee||kt}}function P(){for(;xe(E.charCodeAt(h));)++h;var n=!1;if(E.charAt(h)===".")for(n=!0,++h;xe(E.charCodeAt(h));)++h;var i=!1;if("eE".indexOf(E.charAt(h)||null)>=0)for(i=!0,++h,"+-".indexOf(E.charAt(h)||null)>=0&&++h,xe(E.charCodeAt(h))||Q(null,Y.malformedNumber,E.slice(f,h));xe(E.charCodeAt(h));)++h;return{value:parseFloat(E.slice(f,h)),hasFractionPart:n||i}}function K(){var n=h++;for(E.charAt(h++)!=="{"&&Q(null,Y.braceExpected,"{","\\"+E.slice(n,h)),ze(E.charCodeAt(h))||Q(null,Y.hexadecimalDigitExpected,"\\"+E.slice(n,h));E.charCodeAt(h)===48;)++h;for(var i=h;ze(E.charCodeAt(h));)++h,h-i>6&&Q(null,Y.tooLargeCodepoint,"\\"+E.slice(n,h));var _=E.charAt(h++);_!=="}"&&(_==='"'||_==="'"?Q(null,Y.braceExpected,"}","\\"+E.slice(n,h--)):Q(null,Y.hexadecimalDigitExpected,"\\"+E.slice(n,h)));var A=parseInt(E.slice(i,h-1)||"0",16),O="\\"+E.slice(n,h);return A>1114111&&Q(null,Y.tooLargeCodepoint,O),X.encodeUTF8(A,O)}function ue(){var n=h;switch(E.charAt(h)){case"a":return++h,"\x07";case"n":return++h,`
`;case"r":return++h,"\r";case"t":return++h,"	";case"v":return++h,"\v";case"b":return++h,"\b";case"f":return++h,"\f";case"\r":case`
`:return e(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;xe(E.charCodeAt(h))&&h-n<3;)++h;var i=E.slice(n,h),_=parseInt(i,10);return _>255&&Q(null,Y.decimalEscapeTooLarge,"\\"+_),X.encodeByte(_,"\\"+i);case"z":if(de.skipWhitespaceEscape)return++h,T(),"";break;case"x":if(de.hexEscapes){if(ze(E.charCodeAt(h+1))&&ze(E.charCodeAt(h+2)))return h+=3,X.encodeByte(parseInt(E.slice(n+1,h),16),"\\"+E.slice(n,h));Q(null,Y.hexadecimalDigitExpected,"\\"+E.slice(n,h+2))}break;case"u":if(de.unicodeEscapes)return K();break;case"\\":case'"':case"'":return E.charAt(h++)}return de.strictEscapes&&Q(null,Y.invalidEscape,"\\"+E.slice(n,h+1)),E.charAt(h++)}function re(){f=h,h+=2;var n=E.charAt(h),i="",_=!1,A=h,O=m,me=c;if(n==="["&&(i=Z(!0),i===!1?i=n:_=!0),!_){for(;h<Te&&!Ne(E.charCodeAt(h));)++h;R.comments&&(i=E.slice(A,h))}if(R.comments){var ke=ee.comment(i,E.slice(f,h));R.locations&&(ke.loc={start:{line:me,column:f-O},end:{line:c,column:h-m}}),R.ranges&&(ke.range=[f,h]),R.onCreateNode&&R.onCreateNode(ke),b.push(ke)}}function Z(n){var i=0,_="",A=!1,O,me,ke=c;for(++h;E.charAt(h+i)==="=";)++i;if(E.charAt(h+i)!=="[")return!1;for(h+=i+1,Ne(E.charCodeAt(h))&&e(),me=h;h<Te;){for(;Ne(E.charCodeAt(h));)e();if(O=E.charAt(h++),O==="]"){A=!0;for(var Ee=0;Ee<i;++Ee)E.charAt(h+Ee)!=="="&&(A=!1);E.charAt(h+i)!=="]"&&(A=!1)}if(A)return _+=E.slice(me,h-1),h+=i+1,_}Q(null,n?Y.unfinishedLongComment:Y.unfinishedLongString,ke,"<eof>")}function x(){ne=N,N=j,j=y()}function z(n){return n===N.value?(x(),!0):!1}function he(n){n===N.value?x():Q(N,Y.expected,n,ye(N))}function mt(n){return n===9||n===32||n===11||n===12}function Ne(n){return n===10||n===13}function xe(n){return n>=48&&n<=57}function ze(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function tt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||de.extendedIdentifiers&&n>=128)}function dt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||de.extendedIdentifiers&&n>=128)}function ft(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:de.labels&&!de.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function Ye(n){return Ue===n.type?"#-~".indexOf(n.value)>=0:_e===n.type?n.value==="not":!1}function qe(n){if(We===n.type)return!0;if(_e!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var De,Ke,Me;function C(){var n=De[Ke++].slice();De.push(n),R.onCreateScope&&R.onCreateScope()}function v(){De.pop(),--Ke,R.onDestroyScope&&R.onDestroyScope()}function F(n){R.onLocalDeclaration&&R.onLocalDeclaration(n),at(De[Ke],n)===-1&&De[Ke].push(n)}function L(n){F(n.name),I(n,!0)}function I(n,i){!i&&st(Me,"name",n.name)===-1&&Me.push(n),n.isLocal=i}function W(n){return at(De[Ke],n)!==-1}var k=[],l;function G(){return new D(N)}function D(n){R.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),R.ranges&&(this.range=[n.range[0],0])}D.prototype.complete=function(){R.locations&&(this.loc.end.line=ne.lastLine||ne.line,this.loc.end.column=ne.range[1]-(ne.lastLineStart||ne.lineStart)),R.ranges&&(this.range[1]=ne.range[1])},D.prototype.bless=function(n){if(this.loc){var i=this.loc;n.loc={start:{line:i.start.line,column:i.start.column},end:{line:i.end.line,column:i.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function ce(){l&&k.push(G())}function pe(n){l&&k.push(n)}function Ge(){this.scopes=[],this.pendingGotos=[]}Ge.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},Ge.prototype.pushScope=function(n){var i={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(i)},Ge.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var i=this.pendingGotos[n];i.maxDepth>=this.scopes.length&&--i.maxDepth<=0&&Q(i.token,Y.labelNotVisible,i.target)}this.scopes.pop()},Ge.prototype.addGoto=function(n,i){for(var _=[],A=0;A<this.scopes.length;++A){var O=this.scopes[A];if(_.push(O.locals.length),Object.prototype.hasOwnProperty.call(O.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:i,localCounts:_})},Ge.prototype.addLabel=function(n,i){var _=this.currentScope();if(Object.prototype.hasOwnProperty.call(_.labels,n))Q(i,Y.labelAlreadyDefined,n,_.labels[n].line);else{for(var A=[],O=0;O<this.pendingGotos.length;++O){var me=this.pendingGotos[O];if(me.maxDepth>=this.scopes.length&&me.target===n){me.localCounts[this.scopes.length-1]<_.locals.length&&_.deferredGotos.push(me);continue}A.push(me)}this.pendingGotos=A}_.labels[n]={localCount:_.locals.length,line:i.line}},Ge.prototype.addLocal=function(n,i){this.currentScope().locals.push({name:n,token:i})},Ge.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},Ge.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),i=n.deferredGotos,_=0;_<i.length;++_){var A=i[_];Q(A.token,Y.gotoJumpInLocalScope,A.target,n.locals[A.localCounts[this.scopes.length-1]].name)}};function ie(){this.level=0,this.loopLevels=[]}ie.prototype.isInLoop=function(){return!!this.loopLevels.length},ie.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},ie.prototype.popScope=function(){var n=this.loopLevels,i=n.length;i&&n[i-1]===this.level&&n.pop(),--this.level},ie.prototype.addGoto=ie.prototype.addLabel=function(){throw new Error("This should never happen")},ie.prototype.addLocal=ie.prototype.raiseDeferredErrors=function(){};function Re(){return de.labels?new Ge:new ie}function nt(){x(),ce(),R.scope&&C();var n=Re();n.allowVararg=!0,n.pushScope();var i=ve(n);return n.popScope(),R.scope&&v(),We!==N.type&&fe(N),l&&!i.length&&(ne=N),te(ee.chunk(i))}function ve(n){for(var i=[],_;!qe(N);){if(N.value==="return"||!de.relaxedBreak&&N.value==="break"){i.push(Gt(n));break}_=Gt(n),z(";"),_&&i.push(_)}return i}function Gt(n){if(ce(),Ue===N.type&&z("::"))return zt(n);if(de.emptyStatement&&z(";")){l&&k.pop();return}if(n.raiseDeferredErrors(),_e===N.type)switch(N.value){case"local":return x(),Xt(n);case"if":return x(),Yt(n);case"return":return x(),Jt(n);case"function":x();var i=en();return vt(i);case"while":return x(),jt(n);case"for":return x(),Zt(n);case"repeat":return x(),Ht(n);case"break":return x(),n.isInLoop()||Q(N,Y.noLoopToBreak,N.value),qt();case"do":return x(),Kt(n);case"goto":return x(),Rt(n)}return de.contextualGoto&&N.type===Fe&&N.value==="goto"&&j.type===Fe&&j.value!=="goto"?(x(),Rt(n)):(l&&k.pop(),Qt(n))}function zt(n){var i=N,_=Ie();return R.scope&&(F("::"+i.value+"::"),I(_,!0)),he("::"),n.addLabel(i.value,i),te(ee.labelStatement(_))}function qt(){return te(ee.breakStatement())}function Rt(n){var i=N.value,_=ne,A=Ie();return n.addGoto(i,_),te(ee.gotoStatement(A))}function Kt(n){R.scope&&C(),n.pushScope();var i=ve(n);return n.popScope(),R.scope&&v(),he("end"),te(ee.doStatement(i))}function jt(n){var i=Ce(n);he("do"),R.scope&&C(),n.pushScope(!0);var _=ve(n);return n.popScope(),R.scope&&v(),he("end"),te(ee.whileStatement(i,_))}function Ht(n){R.scope&&C(),n.pushScope(!0);var i=ve(n);he("until"),n.raiseDeferredErrors();var _=Ce(n);return n.popScope(),R.scope&&v(),te(ee.repeatStatement(_,i))}function Jt(n){var i=[];if(N.value!=="end"){var _=yt(n);for(_!=null&&i.push(_);z(",");)_=Ce(n),i.push(_);z(";")}return te(ee.returnStatement(i))}function Yt(n){var i=[],_,A,O;for(l&&(O=k[k.length-1],k.push(O)),_=Ce(n),he("then"),R.scope&&C(),n.pushScope(),A=ve(n),n.popScope(),R.scope&&v(),i.push(te(ee.ifClause(_,A))),l&&(O=G());z("elseif");)pe(O),_=Ce(n),he("then"),R.scope&&C(),n.pushScope(),A=ve(n),n.popScope(),R.scope&&v(),i.push(te(ee.elseifClause(_,A))),l&&(O=G());return z("else")&&(l&&(O=new D(ne),k.push(O)),R.scope&&C(),n.pushScope(),A=ve(n),n.popScope(),R.scope&&v(),i.push(te(ee.elseClause(A)))),he("end"),te(ee.ifStatement(i))}function Zt(n){var i=Ie(),_;if(R.scope&&(C(),L(i)),z("=")){var A=Ce(n);he(",");var O=Ce(n),me=z(",")?Ce(n):null;return he("do"),n.pushScope(!0),_=ve(n),n.popScope(),he("end"),R.scope&&v(),te(ee.forNumericStatement(i,A,O,me,_))}else{for(var ke=[i];z(",");)i=Ie(),R.scope&&L(i),ke.push(i);he("in");var Ee=[];do{var kt=Ce(n);Ee.push(kt)}while(z(","));return he("do"),n.pushScope(!0),_=ve(n),n.popScope(),he("end"),R.scope&&v(),te(ee.forGenericStatement(ke,Ee,_))}}function Xt(n){var i,_=ne;if(Fe===N.type){var A=[],O=[];do i=Ie(),A.push(i),n.addLocal(i.name,_);while(z(","));if(z("="))do{var me=Ce(n);O.push(me)}while(z(","));if(R.scope)for(var ke=0,Ee=A.length;ke<Ee;++ke)L(A[ke]);return te(ee.localStatement(A,O))}if(z("function"))return i=Ie(),n.addLocal(i.name,_),R.scope&&(L(i),C()),vt(i,!0);oe("<name>",N)}function Qt(n){var i,_,A,O,me,ke=[];l&&(_=G());do{if(l&&(i=G()),Fe===N.type)me=N.value,O=Ie(),R.scope&&I(O,W(me)),A=!0;else if(N.value==="(")x(),O=Ce(n),he(")"),A=!1;else return fe(N);e:for(;;){switch(Be===N.type?'"':N.value){case".":case"[":A=!0;break;case":":case"(":case"{":case'"':A=null;break;default:break e}O=Pt(O,i,n)}if(ke.push(O),N.value!==",")break;if(!A)return fe(N);x()}while(!0);if(ke.length===1&&A===null)return pe(i),te(ee.callStatement(ke[0]));if(!A)return fe(N);he("=");var Ee=[];do Ee.push(Ce(n));while(z(","));return pe(_),te(ee.assignmentStatement(ke,Ee))}function Ie(){ce();var n=N.value;return Fe!==N.type&&oe("<name>",N),x(),te(ee.identifier(n))}function vt(n,i){var _=Re();_.pushScope();var A=[];if(he("("),!z(")"))for(;;){if(Fe===N.type){var O=Ie();if(R.scope&&L(O),A.push(O),z(","))continue}else Qe===N.type?(_.allowVararg=!0,A.push(Et(_))):oe("<name> or '...'",N);he(")");break}var me=ve(_);return _.popScope(),he("end"),R.scope&&v(),i=i||!1,te(ee.functionStatement(n,A,i,me))}function en(){var n,i,_;for(l&&(_=G()),n=Ie(),R.scope&&(I(n,W(n.name)),C());z(".");)pe(_),i=Ie(),n=te(ee.memberExpression(n,".",i));return z(":")&&(pe(_),i=Ie(),n=te(ee.memberExpression(n,":",i)),R.scope&&F("self")),n}function It(n){for(var i=[],_,A;;){if(ce(),Ue===N.type&&z("["))_=Ce(n),he("]"),he("="),A=Ce(n),i.push(te(ee.tableKey(_,A)));else if(Fe===N.type)j.value==="="?(_=Ie(),x(),A=Ce(n),i.push(te(ee.tableKeyString(_,A)))):(A=Ce(n),i.push(te(ee.tableValue(A))));else{if((A=yt(n))==null){k.pop();break}i.push(te(ee.tableValue(A)))}if(",;".indexOf(N.value)>=0){x();continue}break}return he("}"),te(ee.tableConstructorExpression(i))}function yt(n){var i=Vt(0,n);return i}function Ce(n){var i=yt(n);if(i==null)oe("<expression>",N);else return i}function tn(n){var i=n.charCodeAt(0),_=n.length;if(_===1)switch(i){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(_===2)switch(i){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(i===97&&n==="and")return 2;return 0}function Vt(n,i){var _=N.value,A,O;if(l&&(O=G()),Ye(N)){ce(),x();var me=Vt(10,i);me==null&&oe("<expression>",N),A=te(ee.unaryExpression(_,me))}if(A==null&&(A=Et(i),A==null&&(A=nn(i))),A==null)return null;for(var ke;_=N.value,ke=Ue===N.type||_e===N.type?tn(_):0,!(ke===0||ke<=n);){(_==="^"||_==="..")&&--ke,x();var Ee=Vt(ke,i);Ee==null&&oe("<expression>",N),l&&k.push(O),A=te(ee.binaryExpression(_,A,Ee))}return A}function Pt(n,i,_){var A,O;if(Ue===N.type)switch(N.value){case"[":return pe(i),x(),A=Ce(_),he("]"),te(ee.indexExpression(n,A));case".":return pe(i),x(),O=Ie(),te(ee.memberExpression(n,".",O));case":":return pe(i),x(),O=Ie(),n=te(ee.memberExpression(n,":",O)),pe(i),Ct(n,_);case"(":case"{":return pe(i),Ct(n,_)}else if(Be===N.type)return pe(i),Ct(n,_);return null}function nn(n){var i,_,A;if(l&&(A=G()),Fe===N.type)_=N.value,i=Ie(),R.scope&&I(i,W(_));else if(z("("))i=Ce(n),he(")");else return null;for(;;){var O=Pt(i,A,n);if(O===null)break;i=O}return i}function Ct(n,i){if(Ue===N.type)switch(N.value){case"(":de.emptyStatement||N.line!==ne.line&&Q(null,Y.ambiguousSyntax,N.value),x();var _=[],A=yt(i);for(A!=null&&_.push(A);z(",");)A=Ce(i),_.push(A);return he(")"),te(ee.callExpression(n,_));case"{":ce(),x();var O=It(i);return te(ee.tableCallExpression(n,O))}else if(Be===N.type)return te(ee.stringCallExpression(n,Et(i)));oe("function arguments",N)}function Et(n){var i=Be|He|Je|ae|Qe,_=N.value,A=N.type,O;if(l&&(O=G()),A===Qe&&!n.allowVararg&&Q(N,Y.cannotUseVararg,N.value),A&i){pe(O);var me=E.slice(N.range[0],N.range[1]);return x(),te(ee.literal(A,_,me))}else{if(_e===A&&_==="function")return pe(O),x(),R.scope&&C(),vt(null);if(z("{"))return pe(O),It(n)}}ge.parse=ln;var Ut={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,i){if(typeof i>"u"&&typeof n=="object"&&(i=n,n=void 0),i||(i={}),E=n||"",R=et({},we,i),h=0,c=1,m=0,Te=E.length,De=[[]],Ke=0,Me=[],k=[],!Object.prototype.hasOwnProperty.call(Ut,R.luaVersion))throw new Error(H("Lua version '%1' not supported",R.luaVersion));if(de=et({},Ut[R.luaVersion]),R.extendedIdentifiers!==void 0&&(de.extendedIdentifiers=!!R.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ut,R.encodingMode))throw new Error(H("Encoding mode '%1' not supported",R.encodingMode));return X=ut[R.encodingMode],R.comments&&(b=[]),R.wait?ge:Nt()}ge.write=xt;function xt(n){return E+=String(n),Te=E.length,ge}ge.end=Nt;function Nt(n){typeof n<"u"&&xt(n),E&&E.substr(0,2)==="#!"&&(E=E.replace(/^.*/,function(_){return _.replace(/./g," ")})),Te=E.length,l=R.locations||R.ranges,j=y();var i=nt();if(R.comments&&(i.comments=b),R.scope&&(i.globals=Me),k.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return i}})})(St,St.exports);var Tn=St.exports;const pt=an(Tn);var Lt={},Bt={exports:{}};Bt.exports;(function(Xe){function V(j){for(var b=0,f=j.length;f--;)b+=j.charCodeAt(f),b+=b<<10,b^=b>>6;return b+=b<<3,b^=b>>11,b+=b<<15,b}const ge=console.log,E=function(j,b){if(!j)throw b};function R(j,b){if(!j)return 0;var f=j.toString().split(".");return f.length>1?parseInt(f[0],b)+parseInt(f[1],b)/Math.pow(b,f[1].length):parseInt(f[0],b)}let Te=[" ",`
`,"	","\r"],de={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const X=new Proxy(de,{get(j,b){return R(b)}});let we=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Oe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],je=["0","1","2","3","4","5","6","7","8","9"],rt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],ut=["0","1"],We=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Be=["~","=",">","<"],_e=["+","-","*","/","^","..","%","//"],Fe=["+=","-=","*=","/=","^=","..=","%=","//="],He=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],Ue=["else","elseif","until","end"],Je=["-","not","#","~"],ae=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],Qe=11,Y={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ee(j){let b=0,f=j.length,c=[];function m(t){return t=t||0,b<=f?j.substr(b+t,1):""}function y(){if(b<=f){let t=j.substr(b,1);return b++,t}else return""}function e(t){let o=0,u=1,a=1;for(;o<=b;)j.substr(o,1)==`
`?(u++,a=1):a++;let s;for(s=0;s<c.length;s++){let P=c[s];ge(`${P.Type}<${P.Source}>`)}throw`file<${u}:${a}>: ${t}`}function T(t){for(;;){let o=y();if(o=="")e("Unfinished long string.");else if(o=="]"){let u=!0,a;for(a=1;a<=t;a++)if(m()=="=")b++;else{u=!1;break}if(u&&y()=="]")return}}}function g(){let t=b;for(;m()=="=";)b++;if(m()=="[")return b++,b-t-1;b=t}let d=0,p=0;function S(t){let o=j.substr(p,b-p),u=null;t=="Number"&&(o.substr(0,2).toLowerCase()=="0x"?(u="hex",parseInt(o,16)<999999999999&&(o=parseInt(o,16))):o.substr(0,2).toLowerCase()=="0b"&&(u="bin",parseInt(o.substr(2),2)<999999999999&&(o=parseInt(o.substr(2),2))));let a={Type:t,LeadingWhite:j.substr(d,p-d),Source:o};return u!==null&&(a.NType=u),c.push(a),d=b,p=b,a}for(;;){for(d=b;;){let o=m();if(o=="")break;if(o=="-")if(m(1)=="-")if(b+=2,m()=="["){b++;let u=g();if(u!=null)T(u),d=b;else for(;;){let a=y();if(a==""||a==`
`)break}}else for(;;){let u=y();if(u==""||u==`
`)break}else break;else if(Te.includes(o))b++;else break}j.substr(d,b-d),p=b;let t=y();if(t==""){S("Eof");break}else if(t=="'"||t=='"'){for(;;){let o=y();if(o=="\\"){let u=y();if(X[u]==null)throw`Invalid Escape Sequence \`${u}\`.`}else{if(o==t)break;if(o=="")throw"Unfinished string!"}}S("String")}else if(t=="`"){for(;;){let o=y();if(o=="\\"){let u=y();if(X[u]==null)throw`Invalid Escape Sequence \`${u}\`.`}else{if(o==t)break;if(o=="")throw"Unfinished string!"}}S("Hash")}else if(we.includes(t)){for(;Oe.includes(m());)b++;He.includes(j.substr(p,b-p))?S("Keyword"):S("Ident")}else if(je.includes(t)||t=="."&&je.includes(m())){if(t=="0"&&m().toLowerCase()=="x")for(b++;rt.includes(m())||m()==="_";)b++;else if(t=="0"&&m().toLowerCase()=="b")for(b++;ut.includes(m())||m()==="_";)b++;else{for(;je.includes(m())||m()==="_";)b++;if(m()==".")for(b++;je.includes(m());)b++;if(m()=="e"||m()=="E")for(b++,(m()=="-"||m()=="+")&&b++;je.includes(m());)b++}S("Number")}else if(t=="["){let o=g();o!=null?(T(o),S("String")):S("Symbol")}else if(t==".")m()=="."&&(y(),(m()=="."||m()=="=")&&y()),S("Symbol");else if(t+m()=="//")y(),m()=="="&&y(),S("Symbol");else if(t+m()=="::")y(),S("Symbol");else if(ae.includes(t+m()))y(),S("Symbol");else if(Be.includes(t))m()=="="&&b++,S("Symbol");else if(_e.includes(t)&&m()=="=")y(),S("Symbol");else if(We.includes(t))S("Symbol");else throw`Bad symbol \`${t}\` in source. ${b}`}return c}function te(j){let b=ee(j),f=0;function c(){let C=b[f];return f<b.length&&f++,C}function m(C){return C=f+(C||0),b[C]||b[b.length-1]}function y(C){let v=1,F=0,L=0;for(;;){let I=b[L],W;I==C?W=I.LeadingWhite:W=I.LeadingWhite+I.Source;let k;for(k=0;k<=W.length;k++)W.substr(k,1)==`
`?(v++,F=0):F++;if(I==C)break;L++}return`${v}:${F+1}`}function e(){let C=m();return`<${C.Type} \`${C.Source}\`> at: ${y(C)}`}function T(){let C=m();return C.Type=="Eof"||C.Type=="Keyword"&&Ue.includes(C.Source)}function g(){return Je.includes(m().Source)||!1}function d(){return ae.includes(m().Source)||!1}function p(C,v){let F=m();if(F.Type==C&&(v==null||F.Source==v))return c();{let L;for(L=-3;L<=3;L++)ge(`Tokens[${L}] = \`${m(L).Source}\``);throw v?`${y(F)}: \`${v}\` expected.`:`${y(F)}: ${C} expected.`}}function S(C){let v=C.GetFirstToken,F=C.GetLastToken,L=C;return C.GetFirstToken=function(){let I=v(L);return E(I),I},C.GetLastToken=function(){let I=F(L);return E(I),I},C}let t,o;function u(C,v){let F=[o(C,v)],L=[];for(;m().Source==",";)L.push(c()),F.push(o(C,v));return[F,L]}function a(C,v){var L,I,W,k;let F=m();if(F.Source=="("){let l=c(),G=o(C,v),D=p("Symbol",")"),ce;return ce=S({Type:"ParenExpr",Expression:G,Token_OpenParen:l,Token_CloseParen:D,GetFirstToken:()=>ce.Token_OpenParen,GetLastToken:()=>ce.Token_CloseParen}),ce}else if(F.Type=="Ident"){let l;return l=S({Type:"VariableExpr",Token:c(),GetFirstToken:()=>l.Token,GetLastToken:()=>l.Token}),C[l.Token.Source]!=null&&((I=(L=C[l.Token.Source])==null?void 0:L.Tokens)==null?void 0:I.push)!=null?(C[l.Token.Source].Tokens.push(l.Token),C[l.Token.Source].UseCountIncrease()):v[l.Token.Source]!=null&&((k=(W=v[l.Token.Source])==null?void 0:W.Tokens)==null?void 0:k.push)!=null&&(v[l.Token.Source].Tokens.push(l.Token),v[l.Token.Source].UseCountIncrease()),l}else throw ge(e()),`${y(F)}: Unexpected symbol. ${F.Type} ${F.Source}`}function s(C,v){let F=p("Symbol","{"),L=[],I=[];for(;m().Source!="}";){if(m().Source=="["){let l=c(),G=o(C,v),D=p("Symbol","]"),ce=p("Symbol","="),pe=o(C,v);G.Token&&G.Token.Source,L.push({EntryType:"Index",Index:G,Value:pe,Token_OpenBracket:l,Token_CloseBracket:D,Token_Equals:ce})}else if(m().Type=="Ident"&&m(1).Source=="="){let l=c(),G=c(),D=o(C,v);L.push({EntryType:"Field",Field:l,Value:D,Token_Equals:G})}else{let l=o(C,v);L.push({EntryType:"Value",Value:l})}if(m().Source==","||m().Source==";")I.push(c());else break}let W=p("Symbol","}"),k;return k=S({Type:"TableLiteral",EntryList:L,Token_SeperatorList:I,Token_OpenBrace:F,Token_CloseBrace:W,GetFirstToken:()=>k.Token_OpenBrace,GetLastToken:()=>k.Token_CloseBrace}),k}function P(C,v){let F=[],L=[];if(m().Type=="Ident"){let I=c();if(v&&m().Source=="<"&&m(2).Source==">"){let W=m(1).Source;I.Attribute={LeadingWhite:m().LeadingWhite,Source:`<${W}>`},c(),c(),c()}F.push(I)}else if(m().Source=="..."&&C)return[F,L,c()];for(;m().Source==",";){if(L.push(c()),m().Source=="..."&&C)return[F,L,c()];{let I=p("Ident");if(v&&m().Source=="<"&&m(2).Source==">"){let W=m(1).Source;I.Attribute={LeadingWhite:m().LeadingWhite,Source:`<${W}>`},c(),c(),c()}F.push(I)}}return[F,L]}function K(C,v,F){let L=t(v,F),I=m();if(I.Type=="Keyword"&&I.Source==C)return c(),[L,I];throw ge(I.Type,I.Source),`${y(I)}: ${C} expected.`}function ue(C,v,F,L){let I=c(),W,k;if(!C){W=[],k=[];let nt=p("Ident");for(W.push(nt);m().Source==".";)k.push(c()),W.push(p("Ident"));m().Source==":"&&(k.push(c()),W.push(p("Ident")))}let l=p("Symbol","("),[G,D,ce]=P(!0),pe=p("Symbol",")"),[Ge,ie]=K("end",v,F),Re;return Re=S({Type:C==!0?"FunctionLiteral":"FunctionStat",NameChain:W,ArgList:G,Body:Ge,Token_Function:I,Token_NameChainSeperator:k,Token_OpenParen:l,Token_Varg:ce,Token_ArgCommaList:D,Token_CloseParen:pe,Token_End:ie,GetFirstToken:()=>Re.Token_Function,GetLastToken:()=>Re.Token_End}),Re}function re(C,v){let F=m();if(F.Source=="("){let L=c(),I=[],W=[];for(;m().Source!=")"&&(I.push(o(C,v)),m().Source==",");)W.push(c());let k=p("Symbol",")"),l;return l=S({CallType:"ArgCall",ArgList:I,Token_CommaList:W,Token_OpenParen:L,Token_CloseParen:k,GetFirstToken:()=>l.Token_OpenParen,GetLastToken:()=>l.Token_CloseParen}),l}else if(F.Source=="{"){let L;return L=S({CallType:"TableCall",TableExpr:o(C,v),GetFirstToken:()=>L.TableExpr.GetFirstToken(),GetLastToken:()=>L.TableExpr.GetLastToken()}),L}else if(F.Type=="String"){let L;return L=S({CallType:"StringCall",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else throw"Function arguments expected."}function Z(C,v){let F=a(C,v);for(E(F,"nil prefixexpr");;){let L=m();if(L.Source=="."){let I=c(),W=p("Ident"),k;k=S({Type:"FieldExpr",Base:F,Field:W,Token_Dot:I,GetFirstToken:()=>k.Base.GetFirstToken(),GetLastToken:()=>k.Field}),F=k}else if(L.Source==":"){let I=c(),W=p("Ident"),k=re(C,v),l;l=S({Type:"MethodExpr",Base:F,Method:W,FunctionArguments:k,Token_Colon:I,GetFirstToken:()=>l.Base.GetFirstToken(),GetLastToken:()=>l.FunctionArguments.GetLastToken()}),F=l}else if(L.Source=="["){let I=c(),W=o(C,v),k=p("Symbol","]"),l;l=S({Type:"IndexExpr",Base:F,Index:W,Token_OpenBracket:I,Token_CloseBracket:k,GetFirstToken:()=>l.Base.GetFirstToken(),GetLastToken:()=>l.Token_CloseBracket}),F=l}else if(L.Source=="{"||L.Source=="("||L.Type=="String"){let I;I=S({Type:"CallExpr",Base:F,FunctionArguments:re(C,v),GetFirstToken:()=>I.Base.GetFirstToken(),GetLastToken:()=>I.FunctionArguments.GetLastToken()}),F=I}else if(Fe.includes(L.Source)){let I=c(),W=o(C,v),k;k=S({Type:"CompoundStat",Base:F,Token_Compound:I,Rhs:W,Lhs:F,GetFirstToken:()=>k.Base.GetFirstToken(),GetLastToken:()=>k.Rhs.GetLastToken()}),F=k}else return F}}function x(C,v){let F=m();if(F.Type=="Number"){let L;return L=S({Type:"NumberLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else if(F.Type=="String"){let L;return L=S({Type:"StringLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else if(F.Type=="Hash"){let L;return L=S({Type:"HashLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else if(F.Source=="nil"){let L;return L=S({Type:"NilLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else if(F.Source=="true"||F.Source=="false"){let L;return L=S({Type:"BooleanLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else if(F.Source=="..."){let L;return L=S({Type:"VargLiteral",Token:c(),GetFirstToken:()=>L.Token,GetLastToken:()=>L.Token}),L}else return F.Source=="{"?s(C,v):F.Source=="function"?ue(!0,C,v):Z(C,v)}function z(C,v,F){let L;if(g()){let I=c(),W=z(Qe,v,F),k;k=S({Type:"UnopExpr",Token_Op:I,Rhs:W,GetFirstToken:()=>k.Token_Op,GetLastToken:()=>k.Rhs.GetLastToken()}),L=k}else L=x(v,F),E(L,"nil sipleexpr");for(;d()&&Y[m().Source]!=null&&Y[m().Source][0]>C;){let I=c(),W=z(Y[I.Source][1],v,F);E(W,"RhsNeeded");let k;k=S({Type:"BinopExpr",Lhs:L,Rhs:W,Token_Op:I,GetFirstToken:()=>k.Lhs.GetFirstToken(),GetLastToken:()=>k.Rhs.GetLastToken()}),L=k}return L}o=(C,v)=>z(0,C,v);function he(C,v){let F=Z(C,v);if(F.Type=="MethodExpr"||F.Type=="CallExpr"){let L;return L=S({Type:"CallExprStat",Expression:F,GetFirstToken:()=>L.Expression.GetFirstToken(),GetLastToken:()=>L.Expression.GetLastToken()}),L}else{if(F.Type=="CompoundStat")return F;{let L=[F],I=[];for(;m().Source==",";){I.push(c());let D=Z(C,v);if(D.Type=="MethodExpr"||D.Type=="CallExpr")throw"Bad left hand side of asignment";L.push(D)}let W=p("Symbol","="),k=[o(C,v)],l=[];for(;m().Source==",";)l.push(c()),k.push(o(C,v));let G;return G=S({Type:"AssignmentStat",Rhs:k,Lhs:L,Token_Equals:W,Token_LhsSeperatorList:I,Token_RhsSeperatorList:l,GetFirstToken:()=>G.Lhs[0].GetFirstToken(),GetLastToken:()=>G.Rhs[G.Rhs.length-1].GetLastToken()}),G}}}function mt(C,v){let F=c(),L=o(C,v),I=p("Keyword","then"),W=t(C,v),k=[];for(;m().Source=="elseif"||m().Source=="else";){let D=c(),ce,pe;D.Source=="elseif"&&(ce=o(C,v),pe=p("Keyword","then"));let Ge=t(C,v);if(k.push({Condition:ce,Body:Ge,ClauseType:D.Source,Token:D,Token_Then:pe}),D.Source=="else")break}let l=p("Keyword","end"),G;return G=S({Type:"IfStat",Condition:L,Body:W,ElseClauseList:k,Token_If:F,Token_Then:I,Token_End:l,GetFirstToken:()=>G.Token_If,GetLastToken:()=>G.Token_End}),G}function Ne(C,v){let F=c(),[L,I]=K("end",C,v),W;return W=S({Type:"DoStat",Body:L,Token_Do:F,Token_End:I,GetFirstToken:()=>W.Token_Do,GetLastToken:()=>W.Token_End}),W}function xe(C,v){let F=c(),L=o(C,v),I=p("Keyword","do"),[W,k]=K("end",C,v),l;return l=S({Type:"WhileStat",Condition:L,Body:W,Token_While:F,Token_Do:I,Token_End:k,GetFirstToken:()=>l.Token_While,GetLastToken:()=>l.Token_End}),l}function ze(C,v){let F=c(),[L,I]=P();if(m().Source=="="){let W=c(),[k,l]=u(C,v);if(k.length<2||k.length>3)throw"Expected 2 or 3 values for range bounds";let G=p("Keyword","do"),[D,ce]=K("end",C,v),pe;return pe=S({Type:"NumericForStat",VarList:L,RangeList:k,Body:D,Token_For:F,Token_VarCommaList:I,Token_Equals:W,Token_RangeCommaList:l,Token_Do:G,Token_End:ce,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}else if(m().Source=="in"){let W=c(),[k,l]=u(C,v),G=p("Keyword","do"),[D,ce]=K("end",C,v),pe;return pe=S({Type:"GenericForStat",VarList:L,GeneratorList:k,Body:D,Token_For:F,Token_VarCommaList:I,Token_In:W,Token_GeneratorCommaList:l,Token_Do:G,Token_End:ce,GetFirstToken:()=>pe.Token_For,GetLastToken:()=>pe.Token_End}),pe}}function tt(C,v){let F=c(),[L,I]=K("until",C),W=o(C,v),k;return k=S({Type:"RepeatStat",Body:L,Condition:W,Token_Repeat:F,Token_Until:I,GetFirstToken:()=>k.Token_Repeat,GetLastToken:()=>k.Condition.GetLastToken()}),k}function dt(C,v){let F=c();if(m().Source=="function"){let L=ue(!1,C,v);if(L.NameChain.length>1)throw y(L.Token_NameChainSeperator[0])+": `(` expected.";let I;return I=S({Type:"LocalFunctionStat",FunctionStat:L,Token_Local:F,GetFirstToken:()=>I.Token_Local,GetLastToken:()=>I.FunctionStat.GetLastToken()}),I}else if(m().Type=="Ident"){let[L,I]=P(!1,!0),W=[],k=[],l;if(m().Source=="="){l=c();let[D,ce]=u(C,v);W=D,k=ce}let G;return G=S({Type:"LocalVarStat",VarList:L,ExprList:W,Token_Local:F,Token_Equals:l,Token_VarCommaList:I,Token_ExprCommaList:k,GetFirstToken:()=>G.Token_Local,GetLastToken:function(){return G.ExprList.length>0?G.ExprList[G.ExprList.length-1].GetLastToken():G.VarList[G.VarList.length-1]}}),G}else throw"`function` or ident expected"}function ft(C,v){let F=c(),L,I;T()||m().Source==";"?(L=[],I=[]):[L,I]=u(C,v);let W;return W={Type:"ReturnStat",ExprList:L,Token_Return:F,Token_CommaList:I,GetFirstToken:()=>W.Token_Return,GetLastToken:function(){return W.ExprList.length>0?W.ExprList[W.ExprList.length-1].GetLastToken():W.Token_Return}},W}function Ye(C,v){let F=c(),L;return L={Type:"BreakStat",Token_Break:F,GetFirstToken:()=>L.Token_Break,GetLastToken:()=>L.Token_Break},L}function qe(C,v){let F=c(),L;return L={Type:"ContinueStat",Token_Continue:F,GetFirstToken:()=>L.Token_Continue,GetLastToken:()=>L.Token_Continue},L}function De(){let C=c(),v;m().Type=="Keyword"?v=p("Keyword"):v=p("Ident");let F;return F={Type:"GotoStat",Token_Goto:C,Token_Label:v,GetFirstToken:()=>F.Token_Goto,GetLastToken:()=>F.Token_Label},F}function Ke(){let C=c(),v;m().Type=="Keyword"?v=p("Keyword"):v=p("Ident");let F=p("Symbol","::"),L;return L={Type:"LabelStat",Token_ColonsLeft:C,Token_Label:v,Token_ColonsRight:F,GetFirstToken:()=>L.Token_ColonsLeft,GetLastToken:()=>L.Token_ColonsRight},L}function Me(C,v){let F=m();return F.Source=="if"?[!1,mt(C,v)]:F.Source=="while"?[!1,xe(C,v)]:F.Source=="do"?[!1,Ne(C,v)]:F.Source=="for"?[!1,ze(C,v)]:F.Source=="repeat"?[!1,tt(C,v)]:F.Source=="function"?[!1,ue(!1,C,v)]:F.Source=="local"?[!1,dt(C,v)]:F.Source=="return"?[!0,ft(C,v)]:F.Source=="break"?[!0,Ye()]:F.Source=="continue"?[!0,qe()]:F.Source=="goto"?[!1,De()]:F.Source=="::"?[!1,Ke()]:[!1,he(C,v)]}return t=function(C,v){let F=[],L=[],I={},W={};if(v!=null)for(let[D,ce]of Object.entries(v))W[D]=ce;if(C!=null)for(let[D,ce]of Object.entries(C))W[D]=ce;let k,l=0;for(;!T();){k&&k==m()&&ge(`INFINITE LOOP POSSIBLE ON STATEMENT ${k.Source} :`,k),k=m();let[D,ce]=Me(I,W);if(ce)switch(F.push(ce),ce.Type){case"LocalVarStat":ce.VarList.forEach(ie=>{ie.UseCount=0,ie.Number=l++,I[ie.Source]=ie;let Re=[];function nt(){ie.UseCount++,Re.forEach(ve=>{ve.UseCount=ie.UseCount})}ie.Tokens={},ie.Tokens.push=ve=>{ve.UseCountIncrease=nt,ve.UseCount=ie.UseCount,ve.Tokens=ie.Tokens,Re.push(ve)},ie.Tokens.get=()=>Re,ie.UseCountIncrease=nt});break;case"LocalFunctionStat":let Ge=ce.FunctionStat.NameChain;if(Ge.length===1){let nt=function(){ie.UseCount++,Re.forEach(ve=>{ve.UseCount=ie.UseCount})},ie=Ge[0];ie.UseCount=0,ie.Number=l++,I[ie.Source]=ie;let Re=[];ie.Tokens={},ie.Tokens.push=ve=>{ve.UseCountIncrease=nt,ve.UseCount=ie.UseCount,ve.Tokens=ie.Tokens,Re.push(ve)},ie.Tokens.get=()=>Re,ie.UseCountIncrease=nt}break}let pe=m();pe.Type=="Symbol"&&pe.Source==";"&&(L[F.length-1]=c())}let G;return G={Type:"StatList",StatementList:F,SemicolonList:L,GetFirstToken:function(){var D;if(G.StatementList.length!=0)return(D=G.StatementList[0])==null?void 0:D.GetFirstToken()},GetLastToken:function(){if(G.StatementList.length!=0)return G.SemicolonList[G.StatementList.length-1]?G.SemicolonList[G.StatementList.length-1]:G.StatementList[G.StatementList.length-1].GetLastToken()}},G},t([],[])}function $e(j,b){let f={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},c={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[m,y]of Object.entries(b))if(!c[m]&&!f[m])throw`Invalid visitor target: \`${m}\``;function e(p){if(p!=null){let S=b[p.Type];if(typeof S=="function")return S(p);if(S&&S.Pre)return S.Pre(p)}}function T(p){let S=b[p.Type];if(S&&typeof S=="object"&&S.Post)return S.Post(p)}let g,d;g=function(p){if(!e(p)){if(p.Type=="BinopExpr")g(p.Lhs),g(p.Rhs);else if(p.Type=="UnopExpr")g(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")g(p.Base);else if(p.Type=="IndexExpr")g(p.Base),g(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")g(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((S,t)=>{g(S)}):p.FunctionArguments.CallType=="TableCall"&&g(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")d(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")g(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((S,t)=>{if(S.EntryType=="Field")g(S.Value);else if(S.EntryType=="Index")g(S.Index),g(S.Value);else if(S.EntryType=="Value")g(S.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")g(p.Lhs),g(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}T(p)}},d=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((S,t)=>{if(S!=null){if(S===null||S.Type===null)return;S.Remove=()=>{p.StatementList[t]=null},d(S)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((S,t)=>{g(S)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((S,t)=>{g(S)});else if(p.Type=="LocalFunctionStat")d(p.FunctionStat.Body);else if(p.Type=="FunctionStat")d(p.Body);else if(p.Type=="RepeatStat")d(p.Body),g(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((S,t)=>{g(S)}),d(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((S,t)=>{g(S)}),d(p.Body);else if(p.Type=="WhileStat")g(p.Condition),d(p.Body);else if(p.Type=="DoStat")d(p.Body);else if(p.Type=="IfStat")g(p.Condition),d(p.Body),p.ElseClauseList.forEach(S=>{S.Condition!=null&&g(S.Condition),d(S.Body)});else if(p.Type=="CallExprStat")g(p.Expression);else if(p.Type=="CompoundStat")g(p.Lhs),g(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(S=>{g(S)}),p.Rhs.forEach(S=>{g(S)});else throw"unreachable"}}}T(p)}},c[j.Type]?d(j):g(j)}function at(j){let b=[],f,c=0;function m(){return c++,c}function y(){f={ParentScope:f,ChildScopeList:[],VariableList:[],BeginLocation:m(),Depth:null,GetVar:null},f.ParentScope?(f.Depth=f.ParentScope.Depth+1,f.ParentScope.ChildScopeList.push(f)):f.Depth=1;let o=f;f.GetVar=function(u){for(const a of o.VariableList)if(a.Name==u)return a;if(o.ParentScope)return o.ParentScope.GetVar(u);for(const a of b)if(a.Name==u)return a}}function e(){let o=f;return o.EndLocation=m(),o.VariableList.forEach(u=>{u.ScopeEndLocation=o.EndLocation}),f=o.ParentScope,o}y();function T(o,u,a){E(a,"MIssing localInfo"),E(o,"Missing local var name");let s={Type:"Local",Name:o,RenameList:[u],AssignedTo:!1,Info:a,Scope:f,BeginLocation:m(),EndLocation:m(),ReferenceLocationList:[m()]};return s.Rename=function(P){s.Name=P,s.RenameList.forEach(K=>{K(P)})},f.VariableList.push(s),s}function g(o){for(const a of b)if(a.Name==o)return a;let u={Type:"Global",Name:o,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:m(),EndLocation:m(),ReferenceLocationList:[]};return u.Rename=function(a){u.Name=a,u.RenameList.forEach(s=>{s(a)})},b.push(u),u}function d(o,u){E(o,"Missing var name");let a=g(o);return a.RenameList.push(u),a}function p(o,u){let a;for(a=o.VariableList.length-1;a>=0;a--)if(o.VariableList[a].Name==u)return o.VariableList[a];if(o.ParentScope){let s=p(o.ParentScope,u);if(s)return s}}function S(o,u){E(o,"Missing var name");let a=p(f,o);a?a.RenameList.push(u):a=d(o,u);let s=m();return a.EndLocation=s,a.ReferenceLocationList.push(a.EndLocation),a}let t={};return t.FunctionLiteral={Pre:function(o){y(),o.ArgList.forEach((u,a)=>{let s=T(u.Source,function(P,K){K||(u.Source=P)},{Type:"Argument",Index:a});u.var=s})},Post:function(o){e()}},t.VariableExpr=function(o){o.Variable=S(o.Token.Source,function(u){o.Token.Source=u})},t.StatList={Pre:function(o){y()},Post:function(o){o.SkipPop||e()}},t.LocalVarStat={Post:function(o){o.VarList.forEach((u,a)=>{T(u.Source,function(s){o.VarList[a].Source=s},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(o){T(o.FunctionStat.NameChain[0].Source,function(u){o.FunctionStat.NameChain[0].Source=u},{Type:"LocalFunction"}),y(),o.FunctionStat.ArgList.forEach((u,a)=>{T(u.Source,function(s){u.Source=s},{Type:"Argument",Index:a})})},Post:function(){e()}},t.FunctionStat={Pre:function(o){let u=o.NameChain,a;u.length==1?p(f,u[0].Source)?a=S(u[0].Source,function(s){u[0].Source=s}):a=d(u[0].Source,function(s){u[0].Source=s}):a=S(u[0].Source,function(s){u[0].Source=s}),a.AssignedTo=!0,y(),o.ArgList.forEach((s,P)=>{T(s.Source,function(K){s.Source=K},{Type:"Argument",Index:P})})},Post:function(){e()}},t.GenericForStat={Pre:function(o){return o.GeneratorList.forEach(u=>{$e(u,t)}),y(),o.VarList.forEach((u,a)=>{T(u.Source,function(s){u.Source=s},{Type:"ForRange",Index:a})}),$e(o.Body,t),e(),!0}},t.NumericForStat={Pre:function(o){return o.RangeList.forEach(u=>{$e(u,t)}),y(),o.VarList.forEach((u,a)=>{T(u.Source,function(s){u.Source=s},{Type:"ForRange",Index:a})}),$e(o.Body,t),e(),!0}},t.RepeatStat={Pre:function(o){o.Body.SkipPop=!0},Post:function(o){e()}},t.AssignmentStat={Post:function(o){o.Lhs.forEach(u=>{u.Variable!=null&&(u.Variable.AssignedTo=!0)})}},$e(j,t),[b,e()]}function st(j){let b,f,c="",m=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function y(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;c=`${c}${e.LeadingWhite}${e.Source}`}return f=function(e){if(e.Type=="BinopExpr")f(e.Lhs),y(e.Token_Op),f(e.Rhs);else if(e.Type=="UnopExpr")y(e.Token_Op),f(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")y(e.Token);else if(e.Type=="FieldExpr")f(e.Base),y(e.Token_Dot),y(e.Field);else if(e.Type=="IndexExpr")f(e.Base),y(e.Token_OpenBracket),f(e.Index),y(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(y(e.Token_Colon),y(e.Method)),e.FunctionArguments.CallType=="StringCall"?y(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(y(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((T,g)=>{f(T);let d=e.FunctionArguments.Token_CommaList[g];d!=null&&y(d)}),y(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")y(e.Token_Function),y(e.Token_OpenParen),e.ArgList.forEach((T,g)=>{y(T);let d=e.Token_ArgCommaList[g];d!=null&&y(d)}),e.Token_Varg!=null&&y(e.Token_Varg),y(e.Token_CloseParen),b(e.Body),y(e.Token_End);else if(e.Type=="VariableExpr")y(e.Token);else if(e.Type=="ParenExpr")y(e.Token_OpenParen),f(e.Expression),y(e.Token_CloseParen);else if(e.Type=="TableLiteral")y(e.Token_OpenBrace),e.EntryList.forEach((T,g)=>{if(T.EntryType=="Field")y(T.Field),y(T.Token_Equals),f(T.Value);else if(T.EntryType=="Index")y(T.Token_OpenBracket),f(T.Index),y(T.Token_CloseBracket),y(T.Token_Equals),f(T.Value);else if(T.EntryType=="Value")f(T.Value);else throw"unreachable";let d=e.Token_SeperatorList[g];d!=null&&y(d)}),y(e.Token_CloseBrace);else if(e.Type=="CompoundStat")b(e);else throw`unreachable, type: ${e.Type}: ${e}`},b=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let T=m(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",c+=`${T}do `}e.Type=="StatList"?e.StatementList.forEach((T,g)=>{T===null||T.Type===null||(T.Remove=()=>{e.StatementList[g]=null},b(T),e.SemicolonList[g]&&y(e.SemicolonList[g]))}):e.Type=="BreakStat"?y(e.Token_Break):e.Type=="ContinueStat"?y(e.Token_Continue):e.Type=="GotoStat"?(y(e.Token_Goto),y(e.Token_Label)):e.Type=="LabelStat"?(y(e.Token_ColonsLeft),y(e.Token_Label),y(e.Token_ColonsRight)):e.Type=="ReturnStat"?(y(e.Token_Return),e.ExprList.forEach((T,g)=>{f(T),e.Token_CommaList[g]&&y(e.Token_CommaList[g])})):e.Type=="LocalVarStat"?(y(e.Token_Local),e.VarList.forEach((T,g)=>{y(T),T.Attribute!=null&&y(T.Attribute);let d=e.Token_VarCommaList[g];d!=null&&y(d)}),e.Token_Equals!=null&&(y(e.Token_Equals),e.ExprList.forEach((T,g)=>{f(T);let d=e.Token_ExprCommaList[g];d!=null&&y(d)}))):e.Type=="LocalFunctionStat"?(y(e.Token_Local),y(e.FunctionStat.Token_Function),y(e.FunctionStat.NameChain[0]),y(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((T,g)=>{y(T);let d=e.FunctionStat.Token_ArgCommaList[g];d!=null&&y(d)}),e.FunctionStat.Token_Varg&&y(e.FunctionStat.Token_Varg),y(e.FunctionStat.Token_CloseParen),b(e.FunctionStat.Body),y(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(y(e.Token_Function),e.NameChain.forEach((T,g)=>{y(T);let d=e.Token_NameChainSeperator[g];d!=null&&y(d)}),y(e.Token_OpenParen),e.ArgList.forEach((T,g)=>{y(T);let d=e.Token_ArgCommaList[g];d!=null&&y(d)}),e.Token_Varg&&y(e.Token_Varg),y(e.Token_CloseParen),b(e.Body),y(e.Token_End)):e.Type=="RepeatStat"?(y(e.Token_Repeat),b(e.Body),y(e.Token_Until),f(e.Condition)):e.Type=="GenericForStat"?(y(e.Token_For),e.VarList.forEach((T,g)=>{y(T);let d=e.Token_VarCommaList[g];d!=null&&y(d)}),y(e.Token_In),e.GeneratorList.forEach((T,g)=>{f(T);let d=e.Token_GeneratorCommaList[g];d!=null&&y(d)}),y(e.Token_Do),b(e.Body),y(e.Token_End)):e.Type=="NumericForStat"?(y(e.Token_For),e.VarList.forEach((T,g)=>{y(T);let d=e.Token_VarCommaList[g];d!=null&&y(d)}),y(e.Token_Equals),e.RangeList.forEach((T,g)=>{f(T);let d=e.Token_RangeCommaList[g];d!=null&&y(d)}),y(e.Token_Do),b(e.Body),y(e.Token_End)):e.Type=="WhileStat"?(y(e.Token_While),f(e.Condition),y(e.Token_Do),b(e.Body),y(e.Token_End)):e.Type=="DoStat"?(y(e.Token_Do),b(e.Body),y(e.Token_End)):e.Type=="IfStat"?(y(e.Token_If),f(e.Condition),y(e.Token_Then),b(e.Body),e.ElseClauseList.forEach(T=>{y(T.Token),T.Condition!=null&&(f(T.Condition),y(T.Token_Then)),b(T.Body)}),y(e.Token_End)):e.Type=="CallExprStat"?f(e.Expression):e.Type=="CompoundStat"?(f(e.Lhs),y(e.Token_Compound),f(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((T,g)=>{f(T);let d=e.Token_LhsSeperatorList[g];d!=null&&y(d)}),y(e.Token_Equals),e.Rhs.forEach((T,g)=>{f(T);let d=e.Token_RhsSeperatorList[g];d!=null&&y(d)})):E(!1,"unreachable"),e.WrapInDo&&(c+=" end ")}},b(j),c}function H(j){let b,f,c=0;function m(t){if(t===void 0)return;let o=`
${"	".repeat(c)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-o.length,o.length)!=o){let u="",a;for(a=t.LeadingWhite.length;a>=0;a--){let s=t.LeadingWhite.substr(a,1);if(!(s==""||s.match(/\s/g))){u=t.LeadingWhite.substr(0,a+1);break}}t.LeadingWhite=`${u}${o}`}}function y(){c++}function e(){c--,E(c>=0,"Undented too far")}function T(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function g(t){t.LeadingWhite=t.LeadingWhite.trim()}function d(t){g(t),Te.includes(T(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){d(t.GetFirstToken())}function S(t,o,u){y(),b(o),e(),m(u)}f=function(t){if(t.Type=="BinopExpr")f(t.Lhs),f(t.Rhs),p(t.Rhs),d(t.Token_Op);else if(t.Type=="UnopExpr")g(t.Token_Op),f(t.Rhs),t.Token_Op.Source[0]&&d(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")g(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+V(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")f(t.Base),g(t.FunctionArguments.GetFirstToken()),g(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((o,u)=>{f(o),u>0&&p(o);let a=t.FunctionArguments.Token_CommaList[u];a!=null&&g(a)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((o,u)=>{u>0&&d(o),t.Token_ArgCommaList[u]}),t.ArgList.length>0&&t.Token_Varg!=null&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")g(t.Token_OpenParen),g(t.Token_CloseParen),f(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){y();let o=100;t.EntryList.forEach((u,a)=>{u.EntryType=="Field"?(t.EntryList.length>o?et(u.Value):m(u.Field),d(u.Token_Equals),f(u.Value),p(u.Value)):u.EntryType=="Index"?(t.EntryList.length>o?g(u.Token_OpenBracket):m(u.Token_OpenBracket),f(u.Index),d(u.Token_Equals),f(u.Value),p(u.Value)):u.EntryType=="Value"?(f(u.Value),t.EntryList.length>o?et(u.Value):m(u.Value.GetFirstToken())):E(!1,"unreachable");let s=t.Token_SeperatorList[a];s!=null&&(t.EntryList.length>o?s.LeadingWhite="":g(s))}),e(),t.EntryList.length>o?t.Token_CloseBrace.LeadingWhite="":m(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")b(t);else throw ge(t),`unreachable, type: ${t.Type}:`+t},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((o,u)=>{o===null||o.Type===null||o.Type==="StatList"&&o.StatementList.length===0||(o.Remove=()=>{o.StatementList[u]=null},b(o),m(o.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((o,u)=>{f(o),p(o),t.Token_CommaList[u]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((o,u)=>{d(o),o.Attribute&&(o.Attribute.LeadingWhite=" "),t.Token_VarCommaList[u]}),t.Token_Equals){g(t.Token_Equals),d(t.Token_Equals);let o=[],u=[];t.ExprList.forEach((a,s)=>{a!=null&&(s<t.VarList.length||a.Type=="CallExpr"||a.Type=="ParenExpr"||a.Type=="VargLiteral"||a.Type=="BinopExpr"||a.Type=="UnopExpr")&&(o.push(a),u.push(t.Token_ExprCommaList[s]))}),t.ExprList=o,t.CommaList=u,t.ExprList.forEach((a,s)=>{a!=null&&(f(a),p(a),t.Token_ExprCommaList[s]!=null&&t.ExprList.length-1==s&&(t.Token_ExprCommaList[s]=null))})}}else if(t.Type=="LocalFunctionStat")d(t.FunctionStat.Token_Function),d(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((o,u)=>{u>0?d(o):g(o);let a=t.FunctionStat.Token_ArgCommaList[u];a&&g(a)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(g(t.FunctionStat.Token_Varg),d(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&g(t.FunctionStat.Token_Varg),g(t.FunctionStat.Token_OpenParen),g(t.FunctionStat.Token_CloseParen),S(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((o,u)=>{u==0&&d(o),t.Token_NameChainSeperator[u]}),t.ArgList.forEach((o,u)=>{u>0&&d(o),t.Token_ArgCommaList[u]}),t.ArgList.length>0&&t.Token_Varg&&d(t.Token_Varg),S(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")S(t.Token_Repeat,t.Body,t.Token_Until),f(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((o,u)=>{d(o),t.Token_VarCommaList[u]}),d(t.Token_In),t.GeneratorList.forEach((o,u)=>{f(o),p(o),t.Token_GeneratorCommaList[u]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((o,u)=>{d(o),t.Token_VarCommaList[u]}),d(t.Token_Equals),t.RangeList.forEach((o,u)=>{f(o),p(o),t.Token_RangeCommaList[u]}),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")f(t.Condition),p(t.Condition),d(t.Token_Do),S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")S(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){f(t.Condition),p(t.Condition),d(t.Token_Then);let o=t.Token_Then,u=t.Body;t.ElseClauseList.forEach(a=>{S(o,u,a.Token),o=a.Token,a.Condition!=null&&(f(a.Condition),p(a.Condition),d(a.Token_Then),o=a.Token_Then),u=a.Body}),S(o,u,t.Token_End)}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs),p(t.Lhs),p(t.Rhs),d(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((o,u)=>{f(o),u>0&&p(o),t.Token_LhsSeperatorList[u]}),d(t.Token_Equals),t.Rhs.forEach((o,u)=>{f(o),p(o),t.Token_RhsSeperatorList[u]})):E(!1,"Unreachable")}}}},b(j)}function et(j){let b,f;function c(e){e&&(e.LeadingWhite="")}function m(e,T,g=!1){c(T);let d=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof T.Source=="string"?T.Source:T.Source.toString()).substr(0,1);d=="-"&&p=="-"||Oe.includes(d)&&Oe.includes(p)||g&&d==")"&&p=="("?T.LeadingWhite=g?";":" ":T.LeadingWhite=""}function y(e,T,g){b(T),c(g);let d=T.GetFirstToken(),p=T.GetLastToken();d!=null?(m(e,d),m(p,g)):m(e,g)}f=function(e){if(e.Type==="BinopExpr")f(e.Lhs),f(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(c(e.Token_Op),m(e.Lhs.GetLastToken(),e.Token_Op)),m(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")c(e.Token_Op),f(e.Rhs),m(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")c(e.Token);else if(e.Type=="FieldExpr")f(e.Base),c(e.Token_Dot),c(e.Field);else if(e.Type=="IndexExpr")f(e.Base),c(e.Token_OpenBracket),f(e.Index),c(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")f(e.Base),e.Type=="MethodExpr"&&(c(e.Token_Colon),c(e.Method)),e.FunctionArguments.CallType=="StringCall"?c(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(c(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((T,g)=>{f(T);let d=e.FunctionArguments.Token_CommaList[g];d!=null&&c(d)}),c(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&f(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")c(e.Token_Function),c(e.Token_OpenParen),e.ArgList.forEach((T,g)=>{c(T);let d=e.Token_ArgCommaList[g];d!=null&&c(d)}),e.Token_Varg!=null&&c(e.Token_Varg),c(e.Token_CloseParen),y(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")c(e.Token);else if(e.Type=="ParenExpr")c(e.Token_OpenParen),f(e.Expression),c(e.Token_CloseParen);else if(e.Type=="TableLiteral")c(e.Token_OpenBrace),e.EntryList.forEach((T,g)=>{T.EntryType=="Field"?(c(T.Field),c(T.Token_Equals),f(T.Value)):T.EntryType=="Index"?(c(T.Token_OpenBracket),f(T.Index),c(T.Token_CloseBracket),c(T.Token_Equals),f(T.Value)):T.EntryType=="Value"?f(T.Value):E(!1,"unreachable");let d=e.Token_SeperatorList[g];d!=null&&c(d)}),e.Token_SeperatorList[e.EntryList.length-1]=null,c(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},b=function(e){if(e.Type=="StatList"){let T;for(T=0;T<=e.StatementList.length;T++){let g=e.StatementList[T];if(g==null)continue;b(g),c(g.GetFirstToken());let d=e.StatementList[T-1];if(d!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[T-1]){let S=d.GetLastToken().Source,t=g.GetFirstToken().Source;(p[S]===null||p[S]===void 0||!p[S].includes(t))&&(e.SemicolonList[T-1]=null)}e.SemicolonList[T-1]||m(d.GetLastToken(),g.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&c(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")c(e.Token_Break);else if(e.Type=="ContinueStat")c(e.Token_Continue);else if(e.Type=="GotoStat")c(e.Token_Goto),m(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")c(e.Token_ColonsLeft),c(e.Token_Label),c(e.Token_ColonsRight);else if(e.Type=="ReturnStat")c(e.Token_Return),e.ExprList.forEach((T,g)=>{f(T),e.Token_CommaList[g]!=null&&c(e.Token_CommaList[g])}),e.ExprList.length>0&&m(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){c(e.Token_Local);let T=!1;e.VarList.forEach((g,d)=>{d==0?m(e.Token_Local,g):c(g),g.Attribute&&(c(g.Attribute),d+1==e.VarList.length&&(T=!0));let p=e.Token_VarCommaList[d];p!=null&&c(p)}),e.Token_Equals!=null&&(T||c(e.Token_Equals),e.ExprList.forEach((g,d)=>{f(g);let p=e.Token_ExprCommaList[d];p!=null&&c(p)}))}else if(e.Type=="LocalFunctionStat")c(e.Token_Local),m(e.Token_Local,e.FunctionStat.Token_Function),m(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),m(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((T,g)=>{c(T);let d=e.FunctionStat.Token_ArgCommaList[g];d!=null&&c(d)}),e.FunctionStat.Token_Varg&&c(e.FunctionStat.Token_Varg),c(e.FunctionStat.Token_CloseParen),y(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")c(e.Token_Function),e.NameChain.forEach((T,g)=>{g==0?m(e.Token_Function,T):c(T);let d=e.Token_NameChainSeperator[g];d!=null&&c(d)}),c(e.Token_OpenParen),e.ArgList.forEach((T,g)=>{c(T);let d=e.Token_ArgCommaList[g];d!=null&&c(d)}),e.Token_Varg&&c(e.Token_Varg),c(e.Token_CloseParen),y(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")c(e.Token_Repeat),y(e.Token_Repeat,e.Body,e.Token_Until),f(e.Condition),m(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")c(e.Token_For),e.VarList.forEach((T,g)=>{g==0?m(e.Token_For,T):c(T);let d=e.Token_VarCommaList[g];d!=null&&c(d)}),m(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((T,g)=>{f(T),g==0&&m(e.Token_In,T.GetFirstToken());let d=e.Token_GeneratorCommaList[g];d!=null&&c(d)}),m(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),y(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")c(e.Token_For),e.VarList.forEach((T,g)=>{g==0?m(e.Token_For,T):c(T);let d=e.Token_VarCommaList[g];d!=null&&c(d)}),m(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((T,g)=>{f(T),g==0&&m(e.Token_Equals,T.GetFirstToken());let d=e.Token_RangeCommaList[g];d!=null&&c(d)}),m(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),y(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")c(e.Token_While),f(e.Condition),c(e.Token_Do),m(e.Token_While,e.Condition.GetFirstToken()),m(e.Condition.GetLastToken(),e.Token_Do),y(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")c(e.Token_Do),c(e.Token_End),y(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){c(e.Token_If),f(e.Condition),m(e.Token_If,e.Condition.GetFirstToken()),m(e.Condition.GetLastToken(),e.Token_Then);let T=e.Token_Then,g=e.Body;e.ElseClauseList.forEach((d,p)=>{y(T,g,d.Token),T=d.Token,d.Condition!=null&&(f(d.Condition),m(d.Token,d.Condition.GetFirstToken()),m(d.Condition.GetLastToken(),d.Token_Then),T=d.Token_Then),b(d.Body),g=d.Body}),y(T,g,e.Token_End)}else if(e.Type=="CallExprStat")f(e.Expression);else if(e.Type=="CompoundStat")f(e.Lhs),c(e.Token_Compound),f(e.Rhs),m(e.Lhs.GetLastToken(),e.Token_Compound),m(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((T,g)=>{f(T);let d=e.Token_LhsSeperatorList[g];d!=null&&c(d)}),c(e.Token_Equals),e.Rhs.forEach((T,g)=>{f(T);let d=e.Token_RhsSeperatorList[g];d!=null&&c(d)});else return f(e)},b(j)}function ot(j){let b,f,c={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function m(t,o,u=null){let a;return a={Type:t,Token:{Type:u??"Number",LeadingWhite:"",Source:o},GetFirstToken:()=>a.Token,GetLastToken:()=>a.Token},a}function y(t,o,u){let a;return a={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:o,Rhs:u,GetFirstToken:()=>a.Lhs.GetFirstToken(),GetLastToken:()=>a.Rhs.GetLastToken()},a}function e(t,o){let u;return u={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:o,GetFirstToken:()=>u.Token_Op,GetLastToken:()=>u.Rhs.GetLastToken()},u}function T(t,o){if(o!=null)for(var[u,a]of Object.entries(o))t[u]=a}function g(t){if(t==null||t.substr==null)return;let o=t.substr(0,1),u;if((o=='"'||o=="'")&&(u=t.substr(1,t.length-2)),o=="["){let P=0,K=1;for(;t.substr(K,1)=="=";)P++,K++;u=t.substr(2+P,t.length-4-P-2)}if(u==null)return"";let a="",s;for(s=0;s<=u.length;s++){let P=u.substr(s,1);P=="'"||P=='"'?a+=`\\${P}`:a+=P}return a}function d(t){if(typeof t=="object"&&t.Type=="ParenExpr")return T(t,t.Expression)}function p(t,o,u){let a=o,s=u;if(o&&o.Type=="ParenExpr"&&(a=o.Expression),u&&u.Type=="ParenExpr"&&(s=u.Expression),a==null||s==null||a.Type==null||s.Type==null||a.Type=="VariableExpr"||a.Type=="CallExpr"||a.Type=="BinopExpr"||s.Type=="CallExpr"||s.Type=="BinopExpr"||s.Type=="VariableExpr")return;let P=a.Token||a.Expression!=null&&a.Expression.Token||null,K=s.Token||s.Expression!=null&&s.Expression.Token||null,ue=P!=null?P.Source:null,re=K!=null?K.Source:null,Z,x;if(a.Type=="BooleanLiteral"&&(Z=ue=="true"),s.Type=="BooleanLiteral"&&(x=re=="true"),!(a.Type=="NumberLiteral"&&(Z=R(ue),Z==null))&&!(s.Type=="NumberLiteral"&&(x=R(re),x==null))&&((a.Type=="StringLiteral"||a.Type=="HashLiteral")&&(Z=ue.toString()),(s.Type=="StringLiteral"||s.Type=="HashLiteral")&&(x=re.toString()),Z!=null&&x!=null)){if(t=="==")return Z==x;if(t=="~=")return Z!=x;if(t=="and")return Z&&x;if(t=="or")return Z||x;if(t==".."&&a.Type=="StringLiteral"&&s.Type=="StringLiteral")return`"${g(ue)+g(re)}"`;if(a.Type=="StringLiteral"&&(Z=R(g(Z))),s.Type=="StringLiteral"&&(x=R(g(x))),Z==null||x==null)return;let z;if(t=="+"&&(z=Z+x),t=="-"&&(z=Z-x),t=="*"&&(z=Z*x),t=="/"&&(z=Z/x),t=="^"&&(z=Z**x),t=="%"&&(z=Z%x),t==">"&&(z=Z>x),t=="<"&&(z=Z<x),t==">="&&(z=Z>=x),t=="<="&&(z=Z<=x),z==!1||z==!0||isFinite(z)&&z>-(10**6)&&z<10**6)return z}}function S(t,o){let u=o.Token||o.Expression||o.EntryList||o;if(u==null||u.Source==null&&o.Type!="TableLiteral"||o.Type=="VariableExpr"||o.Type=="CallExpr"||o.Type=="BinopExpr")return;let a=u.Source,s;if(o.Type=="TableLiteral"&&u!=null){let P=[],K=0,ue=!1,re=!1,Z=0;if(u.forEach((x,z)=>{if(ue)P.push(x);else if(x.EntryType=="Value"||x.EntryType=="Index")if((x.Index==null||x.Index.Type=="NumberLiteral")&&x.Value){if((x.Index!=null&&x.Index.Token!=null&&x.Index.Token.Source!==null?x.Index.Token.Source:Z+1).toString()!==(++Z).toString())return ue=!0,re=!0,P.push(x);x.Value.Type!="CallExpr"?K++:(ue=!0,P.push(x))}else P.push(x)}),re)return;if(t=="#")return o.EntryList=P,o.EntryList.length<=0?m("NumberLiteral",K!==null?K:o.EntryList.length):K<=0?e("#",o):y("+",m("NumberLiteral",K),e("#",o))}if(o.Type=="BooleanLiteral"&&(s=a=="true"),!(o.Type=="NumberLiteral"&&(s=R(a),s===null))){if(o.Type=="StringLiteral"&&(s=a.substr(1,a.length-2)),t=="not"&&o.Type!==null)return o.Type=="NilLiteral"||o.Type=="BooleanLiteral"&&s===!1;if(s!=null){if(t=="#")return s.length;if(t=="-")return-s}}}f=function(t){if(t.Type=="BinopExpr"){if(f(t.Lhs),f(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let o=t.Token_Op;if(o!=null&&o.Source!=null){let u=p(o.Source,t.Lhs,t.Rhs);if(u!=null){if(typeof u=="boolean"){let a=m("BooleanLiteral",u.toString(),"Keyword");T(t,a);return}else if(typeof u=="number"){if(isFinite(u)==!0){let a=m("NumberLiteral",u.toString(),"Number");T(t,a);return}}else if(typeof u=="string"){let a=m("StringLiteral",u,"String");T(t,a);return}else if(typeof u=="object"){T(t,u);return}return}}if(t.Lhs.Type=="ParenExpr"){let a=t.Lhs.Expression;a.Type=="NumberLiteral"||a.Type=="StringLiteral"||a.Type=="NilLiteral"||a.Type=="BooleanLiteral"||a.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let a=t.Rhs.Expression;a.Type=="NumberLiteral"||a.Type=="StringLiteral"||a.Type=="NilLiteral"||a.Type=="BooleanLiteral"||a.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(f(t.Rhs),t.Rhs!=null&&c[t.Rhs.Type]==!0){let o=t.Token_Op;if(o!=null&&o.Source!=null){let u=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,a=S(o.Source,u);if(a!=null){if(typeof a=="boolean"){let s=m("BooleanLiteral",a.toString(),"Keyword");T(t,s);return}else if(typeof a=="number"){if(isFinite(a)==!0){let s=m("NumberLiteral",a,"Number");T(t,s);return}}else if(typeof a=="string"){let s=m("StringLiteral",a,"String");T(t,s);return}else if(typeof a=="object"){T(t,a);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let o=t.Token;if(o!=null){if(o.Type=="Number"){let u=o.Source.toString().split("e");if(u.length===2){let a=R(u[0]),s=R(u[1]);isFinite(a)&&isFinite(s)&&a**s<999999999&&!o.Source.includes("+")&&o.Source.includes(".")&&!o.Source.includes("-")&&(o.Source=(a**s).toString())}}o.Type=="String"&&(o.Source=o.Source.replace(/\\\d+/gi,u=>{let a=R(u.substr(1,u.length-1));return a&&isFinite(a)&&(a>=97&&a<=122||a>=65&&a<=90||a>=33&&a<=47||a>=58&&a<=64||a>=91&&a<=96||a>=123&&a<=126)&&a!==34&&a!==39&&a!==92?String.fromCharCode(a):u}))}}else if(t.Type=="FieldExpr")f(t.Base);else if(t.Type=="IndexExpr")f(t.Base),f(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(f(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((o,u)=>{f(o)}):t.FunctionArguments.CallType=="TableCall"&&f(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let o=t.Base.Expression;t.FunctionArguments.ArgList.forEach((u,a)=>{let s=t.FunctionArguments.ArgList[a];if(s!==void 0&&(s.Type=="NumberLiteral"||s.Type=="StringLiteral"||s.Type=="NilLiteral"||s.Type=="BooleanLiteral"||s.Type=="HashLiteral")){let P=o.ArgList[a];P&&P.var.RenameList.forEach(K=>{K(s.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")b(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let o=t.Expression;o!=null&&o.Type=="ParenExpr"&&(t.Expression=o.Expression),f(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&d(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((o,u)=>{o.EntryType=="Field"?f(o.Value):o.EntryType=="Index"?(f(o.Index),f(o.Value)):o.EntryType=="Value"?f(o.Value):E(!1,"unreachable")})},b=function(t){if(t.Type=="StatList")t.StatementList.forEach((o,u)=>{o===null||o.Type===null||(o.Remove=()=>{t.StatementList[u]=null},b(o))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((o,u)=>{f(o)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((o,u)=>{f(o)});else if(t.Type=="LocalFunctionStat")b(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")b(t.Body);else if(t.Type=="RepeatStat")b(t.Body),f(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((o,u)=>{f(o)}),b(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((x,z)=>{f(x)}),b(t.Body);let o=t.RangeList[0],u=t.RangeList[1],a=t.RangeList[2];if(o==null||u==null)return t.Remove();if(d(o),d(u),d(a),o.Type!="NumberLiteral"||u.Type!="NumberLiteral"||a!=null&&a.Type!="NumberLiteral"||a==null)return;let s=R(o.Token.Source),P=R(u.Token.Source),K=a!=null&&R(a.Token.Source)||1,ue=K>0&&s<=P||K<0&&s>=P,re=(P-s+K)/K;if(!(ue&&re>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){f(t.Condition),b(t.Body);let o=t.Condition;switch(o.Type){case"ParenExpr":o=o.Expression;case"BooleanLiteral":if(o==null||o.Token==null||o.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(b(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let o=t.Body.StatementList[0];o.Type!=="ContinueStat"&&o.Type!=="BreakStat"&&o.Type!=="ReturnStat"&&T(t,o)}}else if(t.Type=="IfStat"){f(t.Condition),b(t.Body),t.ElseClauseList.forEach((u,a)=>{u.Condition!=null&&f(u.Condition),b(u.Body)});let o=t.Condition;switch(o.Type){case"ParenExpr":o=o.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||o==null||o.Token==null||o.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?f(t.Expression):t.Type=="CompoundStat"?(f(t.Lhs),f(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((o,u)=>{f(o)}),t.Rhs.forEach((o,u)=>{f(o)}))}},b(j)}let Q=[],ye;for(ye=97;ye<=122;ye++)Q.push(String.fromCharCode(ye));for(ye=65;ye<=90;ye++)Q.push(String.fromCharCode(ye));for(ye=48;ye<=57;ye++)Q.push(String.fromCharCode(ye));Q.push("_");let oe=[];for(ye=97;ye<=122;ye++)oe.push(String.fromCharCode(ye));for(ye=65;ye<=90;ye++)oe.push(String.fromCharCode(ye));function fe(j){let b="",f=j%oe.length;for(j=(j-f)/oe.length,b=`${b}${oe[f]}`;j>0;){let c=j%Q.length;j=(j-c)/Q.length,b=`${b}${Q[c]}`}return b}function h(j,b,f){let c=[];for(var[m,y]of Object.entries(He))c[m]=!0;let e=[];j.forEach(S=>{S.AssignedTo&&f?e.push(S):c[S.Name]=!0});function T(S){S.VariableList.forEach(t=>{e.push(t)}),S.ChildScopeList.forEach(t=>{T(t)})}T(b),e.forEach(S=>{S.UsedNameArray=[]}),e.sort((S,t)=>S-t);let g=0,d=[];function p(S){let t=d[S];if(t==null){for(t=fe(g),g++;c[t];)t=fe(g),g++;d[S]=t}return t}e.forEach((S,t)=>{S.Renamed=!0;let o=0;for(;S.UsedNameArray[o];)o++;S.Rename(p(o)),S.Scope?e.forEach(u=>{u.Renamed||(!u.Scope||u.Scope.Depth<S.Scope.Depth?u.ReferenceLocationList.some(a=>a>=S.BeginLocation&&a<=S.ScopeEndLocation?(u.UsedNameArray[o]=!0,!0):!1):u.Scope.Depth>S.Scope.Depth?S.ReferenceLocationList.some(a=>a>=u.BeginLocation&&a<=u.ScopeEndLocation?(u.UsedNameArray[o]=!0,!0):!1):S.BeginLocation<u.EndLocation&&S.EndLocation>u.BeginLocation&&(u.UsedNameArray[o]=!0))}):e.forEach(u=>{if(!u.Renamed)if(u.Type=="Global")u.UsedNameArray[o]=!0;else if(u.Type=="Local")S.ReferenceLocationList.some(a=>a>=u.BeginLocation&&a<=u.ScopeEndLocation?(u.UsedNameArray[o]=!0,!0):!1);else throw"Unreachable"})})}function N(j,b,f){let c=[];j.forEach(g=>{(!g.AssignedTo||!f)&&(c[g.Name]=!0)});let m=1,y=1;function e(g,d){g.Name=d,g.RenameList.forEach(p=>{p(d)})}if(f){let g={};j.forEach(d=>{d.AssignedTo&&!d.ChangedName&&(g[d.Name]=g[d.Name]||`G_${y}_`,d.ChangedName=!0,e(d,g[d.Name]),y++)})}function T(g){g.VariableList.forEach(d=>{let p=`L_${m}_`;d.Info.Type=="Argument"?p=`${p}arg${d.Info.Index}`:d.Info.Type=="LocalFunction"?p=`${p}func`:d.Info.Type=="ForRange"&&(p=`${p}forvar${d.Info.Index}`),e(d,p),m++}),g.ChildScopeList.forEach(d=>{T(d)})}T(b)}let ne={};ne.Minify=function(j,b){let f=te(j),[c,m]=at(f);return b.RenameVariables==!0&&h(c,m,b.RenameGlobals),b.SolveMath==!0&&ot(f),et(f),st(f)},ne.Beautify=function(j,b){let f=te(j),[c,m]=at(f);return b.RenameVariables&&N(c,m,b.RenameGlobals),b.SolveMath==!0&&ot(f),H(f),st(f)};try{Xe!=null&&Xe.exports!=null&&(Xe.exports.Beautify=ne.Beautify,Xe.exports.Minify=ne.Minify)}catch{}})(Bt);var _n=Bt.exports;const Mt=_n;Lt.Beautify=Mt.Beautify;Lt.Minify=Mt.Minify;Lt.Uglify=Mt.Uglify;const Wt={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},$t={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},yn={class:"page-div"},kn={class:"card-header"},bn={key:0},Sn={class:"el-form-item-msg"},Ln={class:"card-header"},vn={style:{display:"flex","flex-wrap":"wrap"}},Vn={style:{width:"99%"}},Cn={style:{width:"100%"}},En={style:{"font-weight":"bolder"}},wn={class:"item-container"},Fn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Mn={class:"item-container"},Gn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},In={style:{"font-weight":"bolder"}},Pn={class:"item-container"},Un={style:{"font-weight":"bolder"}},xn={class:"item-container"},Nn={style:{"font-weight":"bolder"}},Dn={class:"item-container"},On={style:{"font-weight":"bolder"}},Wn={class:"item-container"},$n={style:{"font-weight":"bolder"}},zn={class:"item-container"},qn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},al={class:"item-container"},ol={style:{"font-weight":"bolder"}},rl={class:"item-container"},il={style:{"font-weight":"bolder"}},ul={class:"item-container"},sl={style:{"font-weight":"bolder"}},dl={class:"item-container"},fl={style:{"font-weight":"bolder"}},cl={class:"item-container"},pl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},hl={class:"item-container"},Tl={style:{"font-weight":"bolder"}},_l={class:"item-container"},yl={key:0,class:"tip_warning"},kl={style:{display:"flex","align-items":"center"}},bl={style:{display:"flex","justify-content":"flex-end"}},Sl={class:"tip_warning"},Ll={style:{margin:"50px"}},vl={style:{display:"flex","align-items":"center"}},Vl={style:{"margin-right":"10px"}},Cl={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},El=hn({name:"settingsRoom"}),wl=Object.assign(El,{setup(Xe){const{t:V}=rn();un(async()=>{E.value=window.innerHeight,window.addEventListener("resize",()=>{E.value=window.innerHeight}),await ee(),f()});const ge=Ae(!1),E=Ae(0),{isMobile:R}=sn(),Te=dn(),de=Ft(()=>Te.isDark),X=Ft(()=>Te.language),we=Ft(()=>{const s=(Te.dstClusters||[]).findIndex(P=>P.clusterName===Te.selectedDstCluster);return s!==-1?s:0}),Oe=fn();cn();const je=pn(),rt=mn("refresh"),ut=(a,s)=>{let P=null;return(...K)=>{P&&clearTimeout(P),P=setTimeout(()=>a(...K),s)}},We=()=>{gt.clusters.get().then(a=>{Te.dstClusters=a.data,Te.selectedDstCluster===null&&Te.dstClusters!==null&&(Te.selectedDstCluster=Te.dstClusters[0].clusterName)})},Be=()=>{setTimeout(()=>{Oe.meta.isKeepAlive&&je.removeKeepAliveName(Oe.name),rt(!1),ct(()=>{Oe.meta.isKeepAlive&&je.addKeepAliveName(Oe.name),rt(!0)})},0)},_e=Ae(0),Fe=a=>{_e.value>a&&(_e.value=a)},He=()=>{_e.value--},Ue=async()=>{if(_e.value===0&&Je.value.validate(a=>{a&&_e.value++}),_e.value===1){for(let a in b)b!=null&&b.key&&await b[a].validate();for(let a of ne.value){if(a.levelData===""){it(X.value==="zh"?"请输入世界配置":"Please input world configure");return}if(a.shardMasterPort!==ne.value[0].shardMasterPort){it(X.value==="zh"?"主节点端口必须一致":"Master Port must be same");return}try{pt.parse(a.levelData)}catch{it(V("setting.luaError"));return}}_e.value++;return}if(_e.value===2)if(Y.value)try{pt.parse(Y.value.mod),_e.value++}catch{it(V("setting.luaError"))}else _e.value++},Je=Ae(),ae=Ae({clusterName:Te.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,password:"",token:""}),Qe={name:[{required:!0,message:V("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:V("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:V("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:V("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:V("setting.roomBaseFormRules.token"),trigger:"blur"}]},Y=Ae({mod:""}),ee=()=>{const a={clusterName:Te.selectedDstCluster};gt.cluster.get(a).then(s=>{if(ae.value=s.data.clusterSetting,s.data.worlds){ne.value=s.data.worlds;let P=1,K=999999;for(let ue of ne.value){let re=parseInt(ue.name.replace("World",""));re>P&&(P=re),re<K&&(K=re),ue.saved=!0}h.value=P,N.value="World"+K.toString()}else h.value=1,N.value="World1",ne.value=[{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+we.value*10,shardMasterPort:10888+we.value*10,steamMasterPort:27018+we.value*10,steamAuthenticationPort:8768+we.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0,saved:!1}];Y.value.mod=s.data.mod})},te=async a=>{switch(a){case"save":$e();break;case"saveAndRestart":at();break;case"generateNewWorld":st();break}},$e=()=>{const a={clusterSetting:ae.value,worlds:ne.value,mod:Y.value.mod,sysSetting:{}};ge.value=!0,gt.cluster.save.post(a).then(s=>{At(s.message),ge.value=!1,We()}).finally(()=>{ge.value=!1,ct(()=>{Be()})})},at=()=>{const a={clusterSetting:ae.value,worlds:ne.value,mod:Y.value.mod,sysSetting:{}};ge.value=!0,gt.cluster.saveRestart.post(a).then(s=>{At(s.message),ge.value=!1,We()}).finally(()=>{ge.value=!1,ct(()=>{Be()})})},st=()=>{const a={clusterSetting:ae.value,worlds:ne.value,mod:Y.value.mod,sysSetting:{}};ge.value=!0,gt.cluster.saveRegenerate.post(a).then(s=>{At(s.message),ge.value=!1,We()}).finally(()=>{ge.value=!1,ct(()=>{Be()})})},H=Ae({}),et=a=>{if(a==="")return;const s=pt.parse(a),P=ot(s);H.value=Q(P)};function ot(a){const P=a.body[0].arguments[0];for(const K of P.fields)if(K.key.type==="Identifier"&&K.key.name==="overrides")return K.value;return null}function Q(a){const s={};for(const P of a.fields){const K=P.key.name;s[K]=P.value.raw.replace(/"/g,"")}return s}const ye=a=>{let s=Lt.Beautify(a,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return s=s.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),s=s.replace(/ = /g,"="),s=s.replace(/\t/g,"  "),s=s.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),s=s.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),s=s.replace(/(.+)},\n/g,`$1
  },
`),s=s.replace(/^ +?\n/gm,""),s},oe=ut(a=>{const s=a.name,P=a.value;for(let K of ne.value)if(K.name===N.value){const ue=pt.parse(K.levelData),re=ot(ue);for(let Z of re.fields)Z.key.name===s&&(Z.value.raw=`"${P}"`);K.levelData=fe(ue);break}},100),fe=(a,s=0)=>{const P="    ".repeat(s);switch(a.type){case"Chunk":return a.body.map(K=>fe(K,s)).join(`
`);case"LocalStatement":return`${P}local ${a.variables.map(fe).join(", ")} = ${a.init.map(fe).join(", ")}`;case"FunctionDeclaration":return`${P}function ${fe(a.identifier)}(${a.parameters.map(fe).join(", ")}) 
${fe(a.body,s+1)}
${P}end`;case"ReturnStatement":return`${P}return ${a.arguments.map(fe).join(", ")}`;case"BinaryExpression":return`${fe(a.left)} ${a.operator} ${fe(a.right)}`;case"CallStatement":return`${P}${fe(a.expression)}`;case"Identifier":return a.name;case"StringLiteral":return`${a.raw}`;case"NumericLiteral":return a.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${P}{ ${a.fields.map(K=>fe(K,s+1)).join(`,
`+P)} }`;case"Field":return a.key?`${fe(a.key)} = ${fe(a.value)}`:fe(a.value);case"AssignmentStatement":return`${P}${a.variables.map(fe).join(", ")} = ${a.init.map(fe).join(", ")}`;case"CallExpression":return`${fe(a.base)}(${a.arguments.map(fe).join(", ")})`;case"TableKeyString":return`${fe(a.key)} = ${fe(a.value)}`;case"BooleanLiteral":return a.raw;case"TableKey":return`[${fe(a.key)}] = ${fe(a.value)}`;case"TableValue":return fe(a.value);default:throw new Error(`Unsupported node type: ${a.type}`)}},h=Ae(1),N=Ae("World1"),ne=Ae([{id:101,name:"World1",isMaster:!0,levelData:"",serverPort:11001+we.value*10,shardMasterPort:10888+we.value*10,steamMasterPort:27018+we.value*10,steamAuthenticationPort:8768+we.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}]),j={id:[{required:!0,message:V("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:V("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:V("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:V("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:V("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:V("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:V("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},b={},f=()=>{for(let a of ne.value){const s=ne.value.length;h.value=s,b[`World${s}`]=Ae()}},c=(a,s)=>{if(s==="add"){h.value++;const P=`World${h.value}`;b[P]=Ae(),ne.value.push({id:h.value+100,name:P,isMaster:!1,levelData:"",serverPort:11e3+h.value+we.value*10,shardMasterPort:10888+we.value*10,steamMasterPort:27017+h.value+we.value*10,steamAuthenticationPort:8767+h.value+we.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}),N.value=P}else if(s==="remove"){if(ne.value.length===1){it(X.value==="zh"?"每个房间至少含有一个世界":"Every room must include at least one world");return}const P=ne.value;let K=N.value;P.forEach((ue,re)=>{if(ue.name===a){const Z=P[re+1]||P[re-1];Z&&(K=Z.name)}}),N.value=K,ne.value=P.filter(ue=>ue.name!==a),delete b[a]}m.value="Code"},m=Ae("Code"),y=a=>{for(let s of ne.value)s.name===N.value&&(a.clusterType==="endless"&&(a.worldType==="ground"&&(s.levelData=Wt.master),a.worldType==="cave"&&(s.levelData=Wt.caves)),a.clusterType==="survival"&&(a.worldType==="ground"&&(s.levelData=$t.master),a.worldType==="cave"&&(s.levelData=$t.caves)))},e=Ae(""),T=async a=>{if(a==="Visualization")try{for(let s of ne.value)if(s.name===N.value){e.value=g(s.levelData),await et(s.levelData);break}}catch{it(X.value==="zh"?"可视化配置加载失败":"Visualization load failed")}a==="Code"&&await ct(()=>{for(let s of ne.value)if(s.name===N.value){s.levelData=ye(s.levelData);break}})},g=a=>{const s=/location\s*=\s*"([^"]*)"/,P=a.match(s);return P?P[1]:""},d=()=>{m.value="Code"},p=Ae(!1),S=Ae({}),t=Ae({}),o=()=>{S.value={},t.value={},p.value=!0},u=()=>{if(Object.keys(S.value).length!==ne.value.length){it(X.value==="zh"?"世界名为必填项":"World name is required");return}let a="";for(let re in S.value)a=a+`["${re}"]="${S.value[re]}",`;let s="";for(let re in t.value)s=s+`["${re}"]="${t.value[re]}",`;a=a.slice(0,-1),s=s.slice(0,-1);let P=`return {["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${s}},
      say_dest=true,
      world_name={${a}},
      world_prompt=true
    },
    enabled=true
  }}`;Y.value.mod===""&&(Y.value.mod="return {}");const K=pt.parse(Y.value.mod),ue=pt.parse(P);for(const[re,Z]of K.body[0].arguments[0].fields.entries())Z.key.raw==='"workshop-1438233888"'&&K.body[0].arguments[0].fields.splice(re,1);K.body[0].arguments[0].fields.push(ue.body[0].arguments[0].fields[0]),Y.value.mod=ye(fe(K)),p.value=!1};return gn(()=>Te.selectedDstCluster,a=>{a&&ct(()=>{Be()})},{immediate:!1}),(a,s)=>{const P=Se("el-step"),K=Se("el-steps"),ue=Se("el-card"),re=Se("el-col"),Z=Se("el-row"),x=Se("el-input"),z=Se("el-form-item"),he=Se("el-radio"),mt=Se("el-radio-group"),Ne=Se("el-switch"),xe=Se("el-slider"),ze=Se("el-link"),tt=Se("el-form"),dt=Se("el-scrollbar"),ft=Se("el-icon"),Ye=Se("el-button"),qe=Se("el-dropdown-item"),De=Se("el-dropdown-menu"),Ke=Se("el-dropdown"),Me=Se("el-tooltip"),C=Se("el-tab-pane"),v=Se("el-divider"),F=Se("el-tabs"),L=Se("el-result"),I=Se("el-tag"),W=Se("el-dialog");return U(),J("div",yn,[w(Z,{gutter:10},{default:M(()=>[w(re,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:M(()=>[w(ue,{shadow:"never"},{default:M(()=>[w(K,{active:_e.value,"align-center":"","finish-status":"success"},{default:M(()=>[w(P,{title:r(R)?r(V)("setting.roomSettingMobile"):r(V)("setting.roomSetting"),onClick:s[0]||(s[0]=k=>Fe(0))},null,8,["title"]),w(P,{title:r(R)?r(V)("setting.worldSettingMobile"):r(V)("setting.worldSetting"),onClick:s[1]||(s[1]=k=>Fe(1))},null,8,["title"]),w(P,{title:r(R)?r(V)("setting.modSettingMobile"):r(V)("setting.modSetting"),onClick:s[2]||(s[2]=k=>Fe(3))},null,8,["title"]),w(P,{title:r(R)?r(V)("setting.finishSettingMobile"):r(V)("setting.finishSetting"),onClick:s[3]||(s[3]=k=>Fe(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),w(Z,{gutter:10,style:{"margin-top":"5px"}},{default:M(()=>[w(re,{lg:24,md:24,sm:24,span:24,xs:24},{default:M(()=>[_e.value===0?(U(),se(ue,{key:0,shadow:"never"},{header:M(()=>[q("div",kn,[q("span",null,$(r(V)("setting.roomSetting")),1)])]),default:M(()=>[w(dt,{height:E.value-450},{default:M(()=>[w(tt,{ref_key:"clusterSettingFormRef",ref:Je,"label-position":r(R)?"top":"left","label-width":r(R)?"70":"auto",model:ae.value,rules:Qe,size:r(R)?"small":"large"},{default:M(()=>[w(z,{label:r(V)("setting.baseForm.room"),prop:"name",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(x,{modelValue:ae.value.name,"onUpdate:modelValue":s[4]||(s[4]=k=>ae.value.name=k)},null,8,["modelValue"])]),_:1},8,["label","style"]),r(R)?Pe("",!0):(U(),J("div",bn)),w(z,{label:r(V)("setting.baseForm.description"),prop:"description",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(x,{modelValue:ae.value.description,"onUpdate:modelValue":s[5]||(s[5]=k=>ae.value.description=k)},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.gameMode.name"),prop:"gameMode",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(mt,{modelValue:ae.value.gameMode,"onUpdate:modelValue":s[6]||(s[6]=k=>ae.value.gameMode=k)},{default:M(()=>[w(he,{label:r(V)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),w(he,{label:r(V)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),w(he,{label:r(V)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),w(he,{label:r(V)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.pvp"),prop:"pvp",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(Ne,{modelValue:ae.value.pvp,"onUpdate:modelValue":s[7]||(s[7]=k=>ae.value.pvp=k)},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.playerNum"),prop:"playerNum",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(xe,{modelValue:ae.value.playerNum,"onUpdate:modelValue":s[8]||(s[8]=k=>ae.value.playerNum=k),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.backDays"),prop:"backDays",style:Ze(r(R)?"padding-top: 0px":"padding-top: 25px")},{default:M(()=>[w(xe,{modelValue:ae.value.backDays,"onUpdate:modelValue":s[9]||(s[9]=k=>ae.value.backDays=k),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.vote"),prop:"vote",style:Ze(r(R)?"padding-top: 0px":"padding-top: 29px")},{default:M(()=>[w(Ne,{modelValue:ae.value.vote,"onUpdate:modelValue":s[10]||(s[10]=k=>ae.value.vote=k)},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.password"),style:Ze(r(R)?"padding-top: 0px":"padding-top: 30px")},{default:M(()=>[w(x,{modelValue:ae.value.password,"onUpdate:modelValue":s[11]||(s[11]=k=>ae.value.password=k),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),w(z,{label:r(V)("setting.baseForm.token"),prop:"token",style:Ze(r(R)?"padding-top: 0px":"padding-top: 30px")},{default:M(()=>[w(x,{modelValue:ae.value.token,"onUpdate:modelValue":s[12]||(s[12]=k=>ae.value.token=k),"show-password":""},null,8,["modelValue"]),q("div",Sn,[w(ze,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:M(()=>[le($(r(V)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):Pe("",!0),_e.value===1?(U(),se(ue,{key:1,shadow:"never"},{header:M(()=>[q("div",Ln,[q("span",null,$(r(V)("setting.worldSetting")),1),q("div",null,[w(Ke,{trigger:"click",onCommand:y},{dropdown:M(()=>[w(De,null,{default:M(()=>[w(qe,{command:{clusterType:"endless",worldType:"ground"},disabled:ae.value.gameMode!=="endless"},{default:M(()=>[le($(r(V)("setting.endless"))+"-"+$(r(V)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),w(qe,{command:{clusterType:"endless",worldType:"cave"},disabled:ae.value.gameMode!=="endless"},{default:M(()=>[le($(r(V)("setting.endless"))+"-"+$(r(V)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),w(qe,{command:{clusterType:"survival",worldType:"ground"},disabled:ae.value.gameMode!=="survival"},{default:M(()=>[le($(r(V)("setting.survival"))+"-"+$(r(V)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),w(qe,{command:{clusterType:"survival",worldType:"cave"},disabled:ae.value.gameMode!=="survival"},{default:M(()=>[le($(r(V)("setting.survival"))+"-"+$(r(V)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:M(()=>[w(Ye,{disabled:m.value!=="Code",type:"success"},{default:M(()=>[le($(r(V)("setting.oneClick"))+" ",1),w(ft,{class:"el-icon--right"},{default:M(()=>[w(r(Dt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:M(()=>[w(dt,{height:E.value-450},{default:M(()=>[w(F,{modelValue:N.value,"onUpdate:modelValue":s[14]||(s[14]=k=>N.value=k),editable:"",type:"card",onEdit:c,onTabChange:d},{default:M(()=>[(U(!0),J(be,null,Le(ne.value,k=>(U(),se(C,{key:k.name,label:X.value==="zh"?"世界":"World",name:k.name},{default:M(()=>[w(Z,null,{default:M(()=>[w(tt,{ref_for:!0,ref:l=>b[k.name]=l,"label-position":r(R)||X.value==="en"?"top":"left",model:k,rules:j,size:r(R)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:M(()=>[q("div",vn,[w(z,{label:r(V)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.isMasterTip"),effect:"light",placement:"top"},{default:M(()=>[w(Ne,{modelValue:k.isMaster,"onUpdate:modelValue":l=>k.isMaster=l,"active-text":X.value==="zh"?"是":"Y","inactive-text":X.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:M(()=>[w(Ne,{modelValue:k.encodeUserPath,"onUpdate:modelValue":l=>k.encodeUserPath=l,"active-text":X.value==="zh"?"是":"Y","inactive-text":X.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.idTip"),effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.id,"onUpdate:modelValue":l=>k.id=l,modelModifiers:{number:!0},disabled:k.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.serverPortTip"),effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.serverPort,"onUpdate:modelValue":l=>k.serverPort=l,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.noEdit")+"，cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.shardMasterPort,"onUpdate:modelValue":l=>k.shardMasterPort=l,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.noEdit")+"，server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.steamMasterPort,"onUpdate:modelValue":l=>k.steamMasterPort=l,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.noEdit")+"，server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.steamAuthenticationPort,"onUpdate:modelValue":l=>k.steamAuthenticationPort=l,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.shardMasterIp,"onUpdate:modelValue":l=>k.shardMasterIp=l,disabled:k.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),w(z,{label:r(V)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:M(()=>[w(Me,{"show-after":100,content:r(V)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:M(()=>[w(x,{modelValue:k.clusterKey,"onUpdate:modelValue":l=>k.clusterKey=l,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),q("div",Vn,[w(F,{modelValue:m.value,"onUpdate:modelValue":s[13]||(s[13]=l=>m.value=l),onTabChange:T},{default:M(()=>[w(C,{label:X.value==="zh"?"配置文件":"Code",name:"Code"},{default:M(()=>[q("div",Cn,[w(tt,{model:k},{default:M(()=>[w(z,null,{default:M(()=>[w(Ot,{modelValue:k.levelData,"onUpdate:modelValue":l=>k.levelData=l,height:E.value*.5,theme:de.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(ae.value.gameMode==="endless"||ae.value.gameMode==="survival")&&k.levelData!==""?(U(),se(C,{key:0,label:r(V)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:M(()=>[e.value==="forest"&&Object.keys(H.value).length!==0?(U(),J(be,{key:0},[w(v,{"content-position":"center"},{default:M(()=>[q("span",En,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),q("div",wn,[(U(!0),J(be,null,Le(r(lt).global,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Fn,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),q("div",An,[(U(!0),J(be,null,Le(r(lt).events,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Bn,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),q("div",Mn,[(U(!0),J(be,null,Le(r(lt).survivors,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Gn,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),q("div",Rn,[(U(!0),J(be,null,Le(r(lt).world,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",In,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),q("div",Pn,[(U(!0),J(be,null,Le(r(lt).resourceRegrowth,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Un,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),q("div",xn,[(U(!0),J(be,null,Le(r(lt).unnaturalPortalResource,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Nn,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),q("div",Dn,[(U(!0),J(be,null,Le(r(lt).creatures,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",On,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),q("div",Wn,[(U(!0),J(be,null,Le(r(lt).hostileCreatures,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",$n,$(r(V)("setting.groundVisualizationRule")),1),le(" - "+$(r(V)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),q("div",zn,[(U(!0),J(be,null,Le(r(lt).giants,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",qn,$(r(V)("setting.groundVisualizationGeneration")),1),le(" - "+$(r(V)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),q("div",Kn,[(U(!0),J(be,null,Le(r(ht).global,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",jn,$(r(V)("setting.groundVisualizationGeneration")),1),le(" - "+$(r(V)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),q("div",Hn,[(U(!0),J(be,null,Le(r(ht).world,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Jn,$(r(V)("setting.groundVisualizationGeneration")),1),le(" - "+$(r(V)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),q("div",Yn,[(U(!0),J(be,null,Le(r(ht).resources,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Zn,$(r(V)("setting.groundVisualizationGeneration")),1),le(" - "+$(r(V)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),q("div",Xn,[(U(!0),J(be,null,Le(r(ht).creaturesAndSpawners,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Qn,$(r(V)("setting.groundVisualizationGeneration")),1),le(" - "+$(r(V)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),q("div",el,[(U(!0),J(be,null,Le(r(ht).hostileCreaturesAndSpawners,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):Pe("",!0),e.value==="cave"&&Object.keys(H.value).length!==0?(U(),J(be,{key:1},[w(v,{"content-position":"center"},{default:M(()=>[q("span",tl,$(r(V)("setting.cavesVisualizationRule")),1),le(" - "+$(r(V)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),q("div",nl,[(U(!0),J(be,null,Le(r(Tt).world,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",ll,$(r(V)("setting.cavesVisualizationRule")),1),le(" - "+$(r(V)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),q("div",al,[(U(!0),J(be,null,Le(r(Tt).resourceRegrowth,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",ol,$(r(V)("setting.cavesVisualizationRule")),1),le(" - "+$(r(V)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),q("div",rl,[(U(!0),J(be,null,Le(r(Tt).creatures,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",il,$(r(V)("setting.cavesVisualizationRule")),1),le(" - "+$(r(V)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),q("div",ul,[(U(!0),J(be,null,Le(r(Tt).hostileCreatures,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",sl,$(r(V)("setting.cavesVisualizationRule")),1),le(" - "+$(r(V)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),q("div",dl,[(U(!0),J(be,null,Le(r(Tt).giants,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",fl,$(r(V)("setting.cavesVisualizationGeneration")),1),le(" - "+$(r(V)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),q("div",cl,[(U(!0),J(be,null,Le(r(bt).world,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(_t)[l].configs,customConfigsValue:r(_t)[l].customConfigsValue,defaultModelValue:r(_t)[l].modelValue,i18n:r(_t)[l].i18n,image:r(_t)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",pl,$(r(V)("setting.cavesVisualizationGeneration")),1),le(" - "+$(r(V)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),q("div",ml,[(U(!0),J(be,null,Le(r(bt).resources,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",gl,$(r(V)("setting.cavesVisualizationGeneration")),1),le(" - "+$(r(V)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),q("div",hl,[(U(!0),J(be,null,Le(r(bt).creaturesAndSpawners,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),w(v,{"content-position":"center"},{default:M(()=>[q("span",Tl,$(r(V)("setting.cavesVisualizationGeneration")),1),le(" - "+$(r(V)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),q("div",_l,[(U(!0),J(be,null,Le(r(bt).hostileCreaturesAndSpawners,(l,G)=>(U(),J("div",null,[(U(),se(Ve,{key:G,modelValue:H.value[l],"onUpdate:modelValue":D=>H.value[l]=D,configs:r(B)[l].configs,customConfigsValue:r(B)[l].customConfigsValue,defaultModelValue:r(B)[l].modelValue,i18n:r(B)[l].i18n,image:r(B)[l].image,name:l,onChangeModelValue:r(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):Pe("",!0)]),_:2},1032,["label"])):Pe("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):Pe("",!0),_e.value===2?(U(),se(ue,{key:2,shadow:"never"},{default:M(()=>[ne.value.length>2?(U(),J("div",yl,[q("div",kl,[q("span",null,$(r(V)("setting.multiWorldTip")),1),w(Ye,{size:"small",style:{"margin-left":"10px"},type:"warning",onClick:o},{default:M(()=>[le($(X.value==="zh"?"多层世界":"Multi-world"),1)]),_:1})])])):Pe("",!0),w(tt,{model:Y.value},{default:M(()=>[w(z,null,{default:M(()=>[w(Ot,{modelValue:Y.value.mod,"onUpdate:modelValue":s[15]||(s[15]=k=>Y.value.mod=k),height:E.value-400,theme:de.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):Pe("",!0),_e.value===3?(U(),se(ue,{key:3,shadow:"never"},{default:M(()=>[q("div",{style:Ze({height:`${E.value-400}px`}),class:"fcc"},[w(L,{"sub-title":r(V)("setting.finish.description"),title:r(V)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):Pe("",!0)]),_:1})]),_:1}),w(Z,{gutter:10},{default:M(()=>[w(re,{lg:24,md:24,sm:24,span:24,xs:24},{default:M(()=>[w(ue,{shadow:"never"},{default:M(()=>[q("div",bl,[_e.value>0?(U(),se(Ye,{key:0,onClick:He},{default:M(()=>[le($(r(V)("setting.button.prev")),1)]),_:1})):Pe("",!0),_e.value<3?(U(),se(Ye,{key:1,type:"primary",onClick:Ue},{default:M(()=>[le($(r(V)("setting.button.next")),1)]),_:1})):Pe("",!0),_e.value===3?(U(),se(Ke,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:te},{dropdown:M(()=>[w(De,null,{default:M(()=>[w(qe,{command:"save"},{default:M(()=>[le($(r(V)("setting.button.save")),1)]),_:1}),w(qe,{command:"saveAndRestart"},{default:M(()=>[le($(r(V)("setting.button.saveAndRestart")),1)]),_:1}),w(qe,{command:"generateNewWorld"},{default:M(()=>[le($(r(V)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:M(()=>[w(Ye,{loading:ge.value,type:"warning"},{default:M(()=>[le($(r(V)("setting.button.actions"))+" ",1),w(ft,{class:"el-icon--right"},{default:M(()=>[w(r(Dt))]),_:1})]),_:1},8,["loading"])]),_:1})):Pe("",!0)])]),_:1})]),_:1})]),_:1}),w(W,{modelValue:p.value,"onUpdate:modelValue":s[16]||(s[16]=k=>p.value=k),width:"50%"},{header:M(()=>[le($(r(V)("setting.multiWorldDialog.title")),1)]),default:M(()=>[q("div",Sl,$(r(V)("setting.multiWorldDialog.tip")),1),q("div",Ll,[w(tt,{model:S.value,"label-position":"top"},{default:M(()=>[(U(!0),J(be,null,Le(ne.value,k=>(U(),se(z,null,{label:M(()=>[q("div",vl,[q("span",Vl,$(k.name),1),g(k.levelData)==="forest"?(U(),se(I,{key:0,type:"primary"},{default:M(()=>[le($(X.value==="zh"?"地面":"Ground"),1)]),_:1})):Pe("",!0),g(k.levelData)==="cave"?(U(),se(I,{key:1,type:"info"},{default:M(()=>[le($(X.value==="zh"?"洞穴":"Cave"),1)]),_:1})):Pe("",!0)])]),default:M(()=>[w(x,{modelValue:S.value[`${parseInt(k.name.replace("World",""))}`],"onUpdate:modelValue":l=>S.value[`${parseInt(k.name.replace("World",""))}`]=l,placeholder:r(V)("setting.multiWorldDialog.placeholder1"),style:{width:"60%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),w(x,{modelValue:t.value[`${parseInt(k.name.replace("World",""))}`],"onUpdate:modelValue":l=>t.value[`${parseInt(k.name.replace("World",""))}`]=l,placeholder:r(V)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"3%",width:"37%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),q("div",Cl,[w(Ye,{type:"primary",onClick:u},{default:M(()=>[le($(X.value==="zh"?"生成配置":"Generate"),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}}}),Ml=on(wl,[["__scopeId","data-v-f8512661"]]);export{Ml as default};
