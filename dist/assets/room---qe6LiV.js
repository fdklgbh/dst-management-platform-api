import{aa as Ft,ab as an,_ as on,u as rn,o as un,r as Ae,a as sn,g as dn,c as At,D as fn,G as cn,b as pn,H as mn,a1 as ht,w as gn,I as pt,J as be,e as x,f as H,j as E,k as G,i,m as ue,l as q,t as O,x as Qe,q as xe,p as ne,ac as Dt,F as ke,v as Se,a0 as hn,C as mt,A as Bt}from"./index-EHyLukih.js";import{s as $t}from"./index-BuL9-_IC.js";import{g as at,_ as Le,o as B,a as Tt,c as _t,b as St,d as yt}from"./levelDataSetting-DPKaFh1i.js";var Lt={exports:{}};Lt.exports;(function(et,V){(function(ce,C,R){var pe=V&&!V.nodeType&&V,se=et&&!et.nodeType&&et,Z=pe&&se&&typeof Ft=="object"&&Ft,Ce=se&&se.exports===pe&&pe;Z&&(Z.global===Z||Z.window===Z||Z.self===Z)&&(ce=Z),R(pe&&se?Ce?se.exports:pe:ce[C]={})})(Ft,"luaparse",function(ce){ce.version="0.3.1";var C,R,pe,se,Z,Ce=ce.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function We(n,u){return u=u||0,n<128?String.fromCharCode(n):n<2048?String.fromCharCode(u|192|n>>6,u|128|n&63):n<65536?String.fromCharCode(u|224|n>>12,u|128|n>>6&63,u|128|n&63):n<1114112?String.fromCharCode(u|240|n>>18,u|128|n>>12&63,u|128|n>>6&63,u|128|n&63):null}function Je(n,u){for(var h=n.toString(16);h.length<u;)h="0"+h;return h}function it(n){return function(u){var h=n.exec(u);if(!h)return u;X(null,Y.invalidCodeUnit,Je(h[0].charCodeAt(0),4).toUpperCase())}}var ut={"pseudo-latin1":{fixup:it(/[^\x00-\xff]/),encodeByte:function(n){return n===null?"":String.fromCharCode(n)},encodeUTF8:function(n){return We(n)}},"x-user-defined":{fixup:it(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(n){return n===null?"":n>=128?String.fromCharCode(n|63232):String.fromCharCode(n)},encodeUTF8:function(n){return We(n,63232)}},none:{discardStrings:!0,fixup:function(n){return n},encodeByte:function(n){return""},encodeUTF8:function(n){return""}}},ze=1,Be=2,ge=4,Ee=8,Ye=16,Ne=32,Ze=64,le=128,tt=256;ce.tokenTypes={EOF:ze,StringLiteral:Be,Keyword:ge,Identifier:Ee,NumericLiteral:Ye,Punctuator:Ne,BooleanLiteral:Ze,NilLiteral:le,VarargLiteral:tt};var Y=ce.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},ee=ce.ast={labelStatement:function(n){return{type:"LabelStatement",label:n}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(n){return{type:"GotoStatement",label:n}},returnStatement:function(n){return{type:"ReturnStatement",arguments:n}},ifStatement:function(n){return{type:"IfStatement",clauses:n}},ifClause:function(n,u){return{type:"IfClause",condition:n,body:u}},elseifClause:function(n,u){return{type:"ElseifClause",condition:n,body:u}},elseClause:function(n){return{type:"ElseClause",body:n}},whileStatement:function(n,u){return{type:"WhileStatement",condition:n,body:u}},doStatement:function(n){return{type:"DoStatement",body:n}},repeatStatement:function(n,u){return{type:"RepeatStatement",condition:n,body:u}},localStatement:function(n,u){return{type:"LocalStatement",variables:n,init:u}},assignmentStatement:function(n,u){return{type:"AssignmentStatement",variables:n,init:u}},callStatement:function(n){return{type:"CallStatement",expression:n}},functionStatement:function(n,u,h,F){return{type:"FunctionDeclaration",identifier:n,isLocal:h,parameters:u,body:F}},forNumericStatement:function(n,u,h,F,D){return{type:"ForNumericStatement",variable:n,start:u,end:h,step:F,body:D}},forGenericStatement:function(n,u,h){return{type:"ForGenericStatement",variables:n,iterators:u,body:h}},chunk:function(n){return{type:"Chunk",body:n}},identifier:function(n){return{type:"Identifier",name:n}},literal:function(n,u,h){return n=n===Be?"StringLiteral":n===Ye?"NumericLiteral":n===Ze?"BooleanLiteral":n===le?"NilLiteral":"VarargLiteral",{type:n,value:u,raw:h}},tableKey:function(n,u){return{type:"TableKey",key:n,value:u}},tableKeyString:function(n,u){return{type:"TableKeyString",key:n,value:u}},tableValue:function(n){return{type:"TableValue",value:n}},tableConstructorExpression:function(n){return{type:"TableConstructorExpression",fields:n}},binaryExpression:function(n,u,h){var F=n==="and"||n==="or"?"LogicalExpression":"BinaryExpression";return{type:F,operator:n,left:u,right:h}},unaryExpression:function(n,u){return{type:"UnaryExpression",operator:n,argument:u}},memberExpression:function(n,u,h){return{type:"MemberExpression",indexer:u,identifier:h,base:n}},indexExpression:function(n,u){return{type:"IndexExpression",base:n,index:u}},callExpression:function(n,u){return{type:"CallExpression",base:n,arguments:u}},tableCallExpression:function(n,u){return{type:"TableCallExpression",base:n,arguments:u}},stringCallExpression:function(n,u){return{type:"StringCallExpression",base:n,argument:u}},comment:function(n,u){return{type:"Comment",value:n,raw:u}}};function te(n){if(a){var u=S.pop();u.complete(),u.bless(n)}return R.onCreateNode&&R.onCreateNode(n),n}var qe=Array.prototype.slice,ot=function(n,u){for(var h=0,F=n.length;h<F;++h)if(n[h]===u)return h;return-1};Array.prototype.indexOf&&(ot=function(n,u){return n.indexOf(u)});function st(n,u,h){for(var F=0,D=n.length;F<D;++F)if(n[F][u]===h)return F;return-1}function K(n){var u=qe.call(arguments,1);return n=n.replace(/%(\d)/g,function(h,F){return""+u[F-1]||""}),n}var nt=function(n){for(var u=qe.call(arguments,1),h,F,D=0,fe=u.length;D<fe;++D){h=u[D];for(F in h)Object.prototype.hasOwnProperty.call(h,F)&&(n[F]=h[F])}return n};Object.assign&&(nt=Object.assign),ce.SyntaxError=SyntaxError;function rt(n){return Object.create?Object.create(n,{line:{writable:!0,value:n.line},index:{writable:!0,value:n.index},column:{writable:!0,value:n.column}}):n}function X(n){var u=K.apply(null,qe.call(arguments,1)),h,F;throw n===null||typeof n.line>"u"?(F=m-d+1,h=rt(new SyntaxError(K("[%1:%2] %3",c,F,u))),h.index=m,h.line=c,h.column=F):(F=n.range[0]-n.lineStart,h=rt(new SyntaxError(K("[%1:%2] %3",n.line,F,u))),h.line=n.line,h.index=n.range[0],h.column=F),h}function he(n){var u=C.slice(n.range[0],n.range[1]);return u||n.value}function oe(n,u){X(u,Y.expectedToken,n,he(u))}function de(n){var u=he(Pe);if(typeof n.type<"u"){var h;switch(n.type){case Be:h="string";break;case ge:h="keyword";break;case Ee:h="identifier";break;case Ye:h="number";break;case Ne:h="symbol";break;case Ze:h="boolean";break;case le:return X(n,Y.unexpected,"symbol","nil",u);case ze:return X(n,Y.unexpectedEOF)}return X(n,Y.unexpected,h,he(n),u)}return X(n,Y.unexpected,"symbol",n,u)}var m,N,ie,Pe,z,y,c,d;ce.lex=T;function T(){for(e();C.charCodeAt(m)===45&&C.charCodeAt(m+1)===45;)ae(),e();if(m>=pe)return{type:ze,value:"<eof>",line:c,lineStart:d,range:[m,m]};var n=C.charCodeAt(m),u=C.charCodeAt(m+1);if(y=m,lt(n))return g();switch(n){case 39:case 34:return p();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t();case 46:return De(u)?t():u===46?C.charCodeAt(m+2)===46?s():f(".."):f(".");case 61:return f(u===61?"==":"=");case 62:return se.bitwiseOperators&&u===62?f(">>"):f(u===61?">=":">");case 60:return se.bitwiseOperators&&u===60?f("<<"):f(u===61?"<=":"<");case 126:if(u===61)return f("~=");if(!se.bitwiseOperators)break;return f("~");case 58:return se.labels&&u===58?f("::"):f(":");case 91:return u===91||u===61?L():f("[");case 47:return se.integerDivision&&u===47?f("//"):f("/");case 38:case 124:if(!se.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return f(C.charAt(m))}return de(C.charAt(m))}function _(){var n=C.charCodeAt(m),u=C.charCodeAt(m+1);return $e(n)?(n===10&&u===13&&++m,n===13&&u===10&&++m,++c,d=++m,!0):!1}function e(){for(;m<pe;){var n=C.charCodeAt(m);if(dt(n))++m;else if(!_())break}}function g(){for(var n,u;ft(C.charCodeAt(++m)););return n=Z.fixup(C.slice(y,m)),ct(n)?u=ge:n==="true"||n==="false"?(u=Ze,n=n==="true"):n==="nil"?(u=le,n=null):u=Ee,{type:u,value:n,line:c,lineStart:d,range:[y,m]}}function f(n){return m+=n.length,{type:Ne,value:n,line:c,lineStart:d,range:[y,m]}}function s(){return m+=3,{type:tt,value:"...",line:c,lineStart:d,range:[y,m]}}function p(){for(var n=C.charCodeAt(m++),u=c,h=d,F=m,D=Z.discardStrings?null:"",fe;fe=C.charCodeAt(m++),n!==fe;)if((m>pe||$e(fe))&&(D+=C.slice(F,m-1),X(null,Y.unfinishedString,C.slice(y,m-1))),fe===92){if(!Z.discardStrings){var _e=C.slice(F,m-1);D+=Z.fixup(_e)}var Ve=J();Z.discardStrings||(D+=Ve),F=m}return Z.discardStrings||(D+=Z.encodeByte(null),D+=Z.fixup(C.slice(F,m-1))),{type:Be,value:D,line:u,lineStart:h,lastLine:c,lastLineStart:d,range:[y,m]}}function L(){var n=c,u=d,h=ye(!1);return h===!1&&X(N,Y.expected,"[",he(N)),{type:Be,value:Z.discardStrings?null:Z.fixup(h),line:n,lineStart:u,lastLine:c,lastLineStart:d,range:[y,m]}}function t(){var n=C.charAt(m),u=C.charAt(m+1),h=n==="0"&&"xX".indexOf(u||null)>=0?o():k(),F=r(),D=l();return D&&(F||h.hasFractionPart)&&X(null,Y.malformedNumber,C.slice(y,m)),{type:Ye,value:h.value,line:c,lineStart:d,range:[y,m]}}function r(){if(se.imaginaryNumbers)return"iI".indexOf(C.charAt(m)||null)>=0?(++m,!0):!1}function l(){if(se.integerSuffixes){if("uU".indexOf(C.charAt(m)||null)>=0)if(++m,"lL".indexOf(C.charAt(m)||null)>=0){if(++m,"lL".indexOf(C.charAt(m)||null)>=0)return++m,"ULL";X(null,Y.malformedNumber,C.slice(y,m))}else X(null,Y.malformedNumber,C.slice(y,m));else if("lL".indexOf(C.charAt(m)||null)>=0){if(++m,"lL".indexOf(C.charAt(m)||null)>=0)return++m,"LL";X(null,Y.malformedNumber,C.slice(y,m))}}}function o(){var n=0,u=1,h=1,F,D,fe,_e;for(_e=m+=2,Ke(C.charCodeAt(m))||X(null,Y.malformedNumber,C.slice(y,m));Ke(C.charCodeAt(m));)++m;F=parseInt(C.slice(_e,m),16);var Ve=!1;if(C.charAt(m)==="."){for(Ve=!0,D=++m;Ke(C.charCodeAt(m));)++m;n=C.slice(D,m),n=D===m?0:parseInt(n,16)/Math.pow(16,m-D)}var bt=!1;if("pP".indexOf(C.charAt(m)||null)>=0){for(bt=!0,++m,"+-".indexOf(C.charAt(m)||null)>=0&&(h=C.charAt(m++)==="+"?1:-1),fe=m,De(C.charCodeAt(m))||X(null,Y.malformedNumber,C.slice(y,m));De(C.charCodeAt(m));)++m;u=C.slice(fe,m),u=Math.pow(2,u*h)}return{value:(F+n)*u,hasFractionPart:Ve||bt}}function k(){for(;De(C.charCodeAt(m));)++m;var n=!1;if(C.charAt(m)===".")for(n=!0,++m;De(C.charCodeAt(m));)++m;var u=!1;if("eE".indexOf(C.charAt(m)||null)>=0)for(u=!0,++m,"+-".indexOf(C.charAt(m)||null)>=0&&++m,De(C.charCodeAt(m))||X(null,Y.malformedNumber,C.slice(y,m));De(C.charCodeAt(m));)++m;return{value:parseFloat(C.slice(y,m)),hasFractionPart:n||u}}function W(){var n=m++;for(C.charAt(m++)!=="{"&&X(null,Y.braceExpected,"{","\\"+C.slice(n,m)),Ke(C.charCodeAt(m))||X(null,Y.hexadecimalDigitExpected,"\\"+C.slice(n,m));C.charCodeAt(m)===48;)++m;for(var u=m;Ke(C.charCodeAt(m));)++m,m-u>6&&X(null,Y.tooLargeCodepoint,"\\"+C.slice(n,m));var h=C.charAt(m++);h!=="}"&&(h==='"'||h==="'"?X(null,Y.braceExpected,"}","\\"+C.slice(n,m--)):X(null,Y.hexadecimalDigitExpected,"\\"+C.slice(n,m)));var F=parseInt(C.slice(u,m-1)||"0",16),D="\\"+C.slice(n,m);return F>1114111&&X(null,Y.tooLargeCodepoint,D),Z.encodeUTF8(F,D)}function J(){var n=m;switch(C.charAt(m)){case"a":return++m,"\x07";case"n":return++m,`
`;case"r":return++m,"\r";case"t":return++m,"	";case"v":return++m,"\v";case"b":return++m,"\b";case"f":return++m,"\f";case"\r":case`
`:return _(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;De(C.charCodeAt(m))&&m-n<3;)++m;var u=C.slice(n,m),h=parseInt(u,10);return h>255&&X(null,Y.decimalEscapeTooLarge,"\\"+h),Z.encodeByte(h,"\\"+u);case"z":if(se.skipWhitespaceEscape)return++m,e(),"";break;case"x":if(se.hexEscapes){if(Ke(C.charCodeAt(m+1))&&Ke(C.charCodeAt(m+2)))return m+=3,Z.encodeByte(parseInt(C.slice(n+1,m),16),"\\"+C.slice(n,m));X(null,Y.hexadecimalDigitExpected,"\\"+C.slice(n,m+2))}break;case"u":if(se.unicodeEscapes)return W();break;case"\\":case'"':case"'":return C.charAt(m++)}return se.strictEscapes&&X(null,Y.invalidEscape,"\\"+C.slice(n,m+1)),C.charAt(m++)}function ae(){y=m,m+=2;var n=C.charAt(m),u="",h=!1,F=m,D=d,fe=c;if(n==="["&&(u=ye(!0),u===!1?u=n:h=!0),!h){for(;m<pe&&!$e(C.charCodeAt(m));)++m;R.comments&&(u=C.slice(F,m))}if(R.comments){var _e=ee.comment(u,C.slice(y,m));R.locations&&(_e.loc={start:{line:fe,column:y-D},end:{line:c,column:m-d}}),R.ranges&&(_e.range=[y,m]),R.onCreateNode&&R.onCreateNode(_e),z.push(_e)}}function ye(n){var u=0,h="",F=!1,D,fe,_e=c;for(++m;C.charAt(m+u)==="=";)++u;if(C.charAt(m+u)!=="[")return!1;for(m+=u+1,$e(C.charCodeAt(m))&&_(),fe=m;m<pe;){for(;$e(C.charCodeAt(m));)_();if(D=C.charAt(m++),D==="]"){F=!0;for(var Ve=0;Ve<u;++Ve)C.charAt(m+Ve)!=="="&&(F=!1);C.charAt(m+u)!=="]"&&(F=!1)}if(F)return h+=C.slice(fe,m-1),m+=u+1,h}X(null,n?Y.unfinishedLongComment:Y.unfinishedLongString,_e,"<eof>")}function $(){ie=N,N=Pe,Pe=T()}function U(n){return n===N.value?($(),!0):!1}function j(n){n===N.value?$():X(N,Y.expected,n,he(N))}function dt(n){return n===9||n===32||n===11||n===12}function $e(n){return n===10||n===13}function De(n){return n>=48&&n<=57}function Ke(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function lt(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||se.extendedIdentifiers&&n>=128)}function ft(n){return!!(n>=65&&n<=90||n>=97&&n<=122||n===95||n>=48&&n<=57||se.extendedIdentifiers&&n>=128)}function ct(n){switch(n.length){case 2:return n==="do"||n==="if"||n==="in"||n==="or";case 3:return n==="and"||n==="end"||n==="for"||n==="not";case 4:return n==="else"||n==="then"?!0:se.labels&&!se.contextualGoto?n==="goto":!1;case 5:return n==="break"||n==="local"||n==="until"||n==="while";case 6:return n==="elseif"||n==="repeat"||n==="return";case 8:return n==="function"}return!1}function Xe(n){return Ne===n.type?"#-~".indexOf(n.value)>=0:ge===n.type?n.value==="not":!1}function je(n){if(ze===n.type)return!0;if(ge!==n.type)return!1;switch(n.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var Oe,He,Ge;function Fe(){var n=Oe[He++].slice();Oe.push(n),R.onCreateScope&&R.onCreateScope()}function b(){Oe.pop(),--He,R.onDestroyScope&&R.onDestroyScope()}function M(n){R.onLocalDeclaration&&R.onLocalDeclaration(n),ot(Oe[He],n)===-1&&Oe[He].push(n)}function w(n){M(n.name),v(n,!0)}function v(n,u){!u&&st(Ge,"name",n.name)===-1&&Ge.push(n),n.isLocal=u}function P(n){return ot(Oe[He],n)!==-1}var S=[],a;function A(){return new I(N)}function I(n){R.locations&&(this.loc={start:{line:n.line,column:n.range[0]-n.lineStart},end:{line:0,column:0}}),R.ranges&&(this.range=[n.range[0],0])}I.prototype.complete=function(){R.locations&&(this.loc.end.line=ie.lastLine||ie.line,this.loc.end.column=ie.range[1]-(ie.lastLineStart||ie.lineStart)),R.ranges&&(this.range[1]=ie.range[1])},I.prototype.bless=function(n){if(this.loc){var u=this.loc;n.loc={start:{line:u.start.line,column:u.start.column},end:{line:u.end.line,column:u.end.column}}}this.range&&(n.range=[this.range[0],this.range[1]])};function re(){a&&S.push(A())}function Q(n){a&&S.push(n)}function Te(){this.scopes=[],this.pendingGotos=[]}Te.prototype.isInLoop=function(){for(var n=this.scopes.length;n-- >0;)if(this.scopes[n].isLoop)return!0;return!1},Te.prototype.pushScope=function(n){var u={labels:{},locals:[],deferredGotos:[],isLoop:!!n};this.scopes.push(u)},Te.prototype.popScope=function(){for(var n=0;n<this.pendingGotos.length;++n){var u=this.pendingGotos[n];u.maxDepth>=this.scopes.length&&--u.maxDepth<=0&&X(u.token,Y.labelNotVisible,u.target)}this.scopes.pop()},Te.prototype.addGoto=function(n,u){for(var h=[],F=0;F<this.scopes.length;++F){var D=this.scopes[F];if(h.push(D.locals.length),Object.prototype.hasOwnProperty.call(D.labels,n))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:n,token:u,localCounts:h})},Te.prototype.addLabel=function(n,u){var h=this.currentScope();if(Object.prototype.hasOwnProperty.call(h.labels,n))X(u,Y.labelAlreadyDefined,n,h.labels[n].line);else{for(var F=[],D=0;D<this.pendingGotos.length;++D){var fe=this.pendingGotos[D];if(fe.maxDepth>=this.scopes.length&&fe.target===n){fe.localCounts[this.scopes.length-1]<h.locals.length&&h.deferredGotos.push(fe);continue}F.push(fe)}this.pendingGotos=F}h.labels[n]={localCount:h.locals.length,line:u.line}},Te.prototype.addLocal=function(n,u){this.currentScope().locals.push({name:n,token:u})},Te.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},Te.prototype.raiseDeferredErrors=function(){for(var n=this.currentScope(),u=n.deferredGotos,h=0;h<u.length;++h){var F=u[h];X(F.token,Y.gotoJumpInLocalScope,F.target,n.locals[F.localCounts[this.scopes.length-1]].name)}};function Re(){this.level=0,this.loopLevels=[]}Re.prototype.isInLoop=function(){return!!this.loopLevels.length},Re.prototype.pushScope=function(n){++this.level,n&&this.loopLevels.push(this.level)},Re.prototype.popScope=function(){var n=this.loopLevels,u=n.length;u&&n[u-1]===this.level&&n.pop(),--this.level},Re.prototype.addGoto=Re.prototype.addLabel=function(){throw new Error("This should never happen")},Re.prototype.addLocal=Re.prototype.raiseDeferredErrors=function(){};function me(){return se.labels?new Te:new Re}function Ue(){$(),re(),R.scope&&Fe();var n=me();n.allowVararg=!0,n.pushScope();var u=we(n);return n.popScope(),R.scope&&b(),ze!==N.type&&de(N),a&&!u.length&&(ie=N),te(ee.chunk(u))}function we(n){for(var u=[],h;!je(N);){if(N.value==="return"||!se.relaxedBreak&&N.value==="break"){u.push(Me(n));break}h=Me(n),U(";"),h&&u.push(h)}return u}function Me(n){if(re(),Ne===N.type&&U("::"))return zt(n);if(se.emptyStatement&&U(";")){a&&S.pop();return}if(n.raiseDeferredErrors(),ge===N.type)switch(N.value){case"local":return $(),Xt(n);case"if":return $(),Yt(n);case"return":return $(),Jt(n);case"function":$();var u=en();return Vt(u);case"while":return $(),jt(n);case"for":return $(),Zt(n);case"repeat":return $(),Ht(n);case"break":return $(),n.isInLoop()||X(N,Y.noLoopToBreak,N.value),qt();case"do":return $(),Kt(n);case"goto":return $(),Rt(n)}return se.contextualGoto&&N.type===Ee&&N.value==="goto"&&Pe.type===Ee&&Pe.value!=="goto"?($(),Rt(n)):(a&&S.pop(),Qt(n))}function zt(n){var u=N,h=Ie();return R.scope&&(M("::"+u.value+"::"),v(h,!0)),j("::"),n.addLabel(u.value,u),te(ee.labelStatement(h))}function qt(){return te(ee.breakStatement())}function Rt(n){var u=N.value,h=ie,F=Ie();return n.addGoto(u,h),te(ee.gotoStatement(F))}function Kt(n){R.scope&&Fe(),n.pushScope();var u=we(n);return n.popScope(),R.scope&&b(),j("end"),te(ee.doStatement(u))}function jt(n){var u=ve(n);j("do"),R.scope&&Fe(),n.pushScope(!0);var h=we(n);return n.popScope(),R.scope&&b(),j("end"),te(ee.whileStatement(u,h))}function Ht(n){R.scope&&Fe(),n.pushScope(!0);var u=we(n);j("until"),n.raiseDeferredErrors();var h=ve(n);return n.popScope(),R.scope&&b(),te(ee.repeatStatement(h,u))}function Jt(n){var u=[];if(N.value!=="end"){var h=kt(n);for(h!=null&&u.push(h);U(",");)h=ve(n),u.push(h);U(";")}return te(ee.returnStatement(u))}function Yt(n){var u=[],h,F,D;for(a&&(D=S[S.length-1],S.push(D)),h=ve(n),j("then"),R.scope&&Fe(),n.pushScope(),F=we(n),n.popScope(),R.scope&&b(),u.push(te(ee.ifClause(h,F))),a&&(D=A());U("elseif");)Q(D),h=ve(n),j("then"),R.scope&&Fe(),n.pushScope(),F=we(n),n.popScope(),R.scope&&b(),u.push(te(ee.elseifClause(h,F))),a&&(D=A());return U("else")&&(a&&(D=new I(ie),S.push(D)),R.scope&&Fe(),n.pushScope(),F=we(n),n.popScope(),R.scope&&b(),u.push(te(ee.elseClause(F)))),j("end"),te(ee.ifStatement(u))}function Zt(n){var u=Ie(),h;if(R.scope&&(Fe(),w(u)),U("=")){var F=ve(n);j(",");var D=ve(n),fe=U(",")?ve(n):null;return j("do"),n.pushScope(!0),h=we(n),n.popScope(),j("end"),R.scope&&b(),te(ee.forNumericStatement(u,F,D,fe,h))}else{for(var _e=[u];U(",");)u=Ie(),R.scope&&w(u),_e.push(u);j("in");var Ve=[];do{var bt=ve(n);Ve.push(bt)}while(U(","));return j("do"),n.pushScope(!0),h=we(n),n.popScope(),j("end"),R.scope&&b(),te(ee.forGenericStatement(_e,Ve,h))}}function Xt(n){var u,h=ie;if(Ee===N.type){var F=[],D=[];do u=Ie(),F.push(u),n.addLocal(u.name,h);while(U(","));if(U("="))do{var fe=ve(n);D.push(fe)}while(U(","));if(R.scope)for(var _e=0,Ve=F.length;_e<Ve;++_e)w(F[_e]);return te(ee.localStatement(F,D))}if(U("function"))return u=Ie(),n.addLocal(u.name,h),R.scope&&(w(u),Fe()),Vt(u,!0);oe("<name>",N)}function Qt(n){var u,h,F,D,fe,_e=[];a&&(h=A());do{if(a&&(u=A()),Ee===N.type)fe=N.value,D=Ie(),R.scope&&v(D,P(fe)),F=!0;else if(N.value==="(")$(),D=ve(n),j(")"),F=!1;else return de(N);e:for(;;){switch(Be===N.type?'"':N.value){case".":case"[":F=!0;break;case":":case"(":case"{":case'"':F=null;break;default:break e}D=Pt(D,u,n)}if(_e.push(D),N.value!==",")break;if(!F)return de(N);$()}while(!0);if(_e.length===1&&F===null)return Q(u),te(ee.callStatement(_e[0]));if(!F)return de(N);j("=");var Ve=[];do Ve.push(ve(n));while(U(","));return Q(h),te(ee.assignmentStatement(_e,Ve))}function Ie(){re();var n=N.value;return Ee!==N.type&&oe("<name>",N),$(),te(ee.identifier(n))}function Vt(n,u){var h=me();h.pushScope();var F=[];if(j("("),!U(")"))for(;;){if(Ee===N.type){var D=Ie();if(R.scope&&w(D),F.push(D),U(","))continue}else tt===N.type?(h.allowVararg=!0,F.push(wt(h))):oe("<name> or '...'",N);j(")");break}var fe=we(h);return h.popScope(),j("end"),R.scope&&b(),u=u||!1,te(ee.functionStatement(n,F,u,fe))}function en(){var n,u,h;for(a&&(h=A()),n=Ie(),R.scope&&(v(n,P(n.name)),Fe());U(".");)Q(h),u=Ie(),n=te(ee.memberExpression(n,".",u));return U(":")&&(Q(h),u=Ie(),n=te(ee.memberExpression(n,":",u)),R.scope&&M("self")),n}function It(n){for(var u=[],h,F;;){if(re(),Ne===N.type&&U("["))h=ve(n),j("]"),j("="),F=ve(n),u.push(te(ee.tableKey(h,F)));else if(Ee===N.type)Pe.value==="="?(h=Ie(),$(),F=ve(n),u.push(te(ee.tableKeyString(h,F)))):(F=ve(n),u.push(te(ee.tableValue(F))));else{if((F=kt(n))==null){S.pop();break}u.push(te(ee.tableValue(F)))}if(",;".indexOf(N.value)>=0){$();continue}break}return j("}"),te(ee.tableConstructorExpression(u))}function kt(n){var u=Ct(0,n);return u}function ve(n){var u=kt(n);if(u==null)oe("<expression>",N);else return u}function tn(n){var u=n.charCodeAt(0),h=n.length;if(h===1)switch(u){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(h===2)switch(u){case 47:return 10;case 46:return 8;case 60:case 62:return n==="<<"||n===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(u===97&&n==="and")return 2;return 0}function Ct(n,u){var h=N.value,F,D;if(a&&(D=A()),Xe(N)){re(),$();var fe=Ct(10,u);fe==null&&oe("<expression>",N),F=te(ee.unaryExpression(h,fe))}if(F==null&&(F=wt(u),F==null&&(F=nn(u))),F==null)return null;for(var _e;h=N.value,_e=Ne===N.type||ge===N.type?tn(h):0,!(_e===0||_e<=n);){(h==="^"||h==="..")&&--_e,$();var Ve=Ct(_e,u);Ve==null&&oe("<expression>",N),a&&S.push(D),F=te(ee.binaryExpression(h,F,Ve))}return F}function Pt(n,u,h){var F,D;if(Ne===N.type)switch(N.value){case"[":return Q(u),$(),F=ve(h),j("]"),te(ee.indexExpression(n,F));case".":return Q(u),$(),D=Ie(),te(ee.memberExpression(n,".",D));case":":return Q(u),$(),D=Ie(),n=te(ee.memberExpression(n,":",D)),Q(u),Et(n,h);case"(":case"{":return Q(u),Et(n,h)}else if(Be===N.type)return Q(u),Et(n,h);return null}function nn(n){var u,h,F;if(a&&(F=A()),Ee===N.type)h=N.value,u=Ie(),R.scope&&v(u,P(h));else if(U("("))u=ve(n),j(")");else return null;for(;;){var D=Pt(u,F,n);if(D===null)break;u=D}return u}function Et(n,u){if(Ne===N.type)switch(N.value){case"(":se.emptyStatement||N.line!==ie.line&&X(null,Y.ambiguousSyntax,N.value),$();var h=[],F=kt(u);for(F!=null&&h.push(F);U(",");)F=ve(u),h.push(F);return j(")"),te(ee.callExpression(n,h));case"{":re(),$();var D=It(u);return te(ee.tableCallExpression(n,D))}else if(Be===N.type)return te(ee.stringCallExpression(n,wt(u)));oe("function arguments",N)}function wt(n){var u=Be|Ye|Ze|le|tt,h=N.value,F=N.type,D;if(a&&(D=A()),F===tt&&!n.allowVararg&&X(N,Y.cannotUseVararg,N.value),F&u){Q(D);var fe=C.slice(N.range[0],N.range[1]);return $(),te(ee.literal(F,h,fe))}else{if(ge===F&&h==="function")return Q(D),$(),R.scope&&Fe(),Vt(null);if(U("{"))return Q(D),It(n)}}ce.parse=ln;var Ut={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function ln(n,u){if(typeof u>"u"&&typeof n=="object"&&(u=n,n=void 0),u||(u={}),C=n||"",R=nt({},Ce,u),m=0,c=1,d=0,pe=C.length,Oe=[[]],He=0,Ge=[],S=[],!Object.prototype.hasOwnProperty.call(Ut,R.luaVersion))throw new Error(K("Lua version '%1' not supported",R.luaVersion));if(se=nt({},Ut[R.luaVersion]),R.extendedIdentifiers!==void 0&&(se.extendedIdentifiers=!!R.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ut,R.encodingMode))throw new Error(K("Encoding mode '%1' not supported",R.encodingMode));return Z=ut[R.encodingMode],R.comments&&(z=[]),R.wait?ce:Nt()}ce.write=xt;function xt(n){return C+=String(n),pe=C.length,ce}ce.end=Nt;function Nt(n){typeof n<"u"&&xt(n),C&&C.substr(0,2)==="#!"&&(C=C.replace(/^.*/,function(h){return h.replace(/./g," ")})),pe=C.length,a=R.locations||R.ranges,Pe=T();var u=Ue();if(R.comments&&(u.comments=z),R.scope&&(u.globals=Ge),S.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return u}})})(Lt,Lt.exports);var Tn=Lt.exports;const gt=an(Tn);var vt={},Gt={exports:{}};Gt.exports;(function(et){function V(z){for(var y=0,c=z.length;c--;)y+=z.charCodeAt(c),y+=y<<10,y^=y>>6;return y+=y<<3,y^=y>>11,y+=y<<15,y}const ce=console.log,C=function(z,y){if(!z)throw y};function R(z,y){if(!z)return 0;var c=z.toString().split(".");return c.length>1?parseInt(c[0],y)+parseInt(c[1],y)/Math.pow(y,c[1].length):parseInt(c[0],y)}let pe=[" ",`
`,"	","\r"],se={r:"\r",n:`
`,t:"	",'"':'"',"'":"'","\\":"\\"};const Z=new Proxy(se,{get(z,y){return R(y)}});let Ce=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],We=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","_","a","b","c","d","e","f","g","t","u","v","w","h","i","j","k","l","m","n","o","p","q","r","s","x","y","z"],Je=["0","1","2","3","4","5","6","7","8","9"],it=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],ut=["0","1"],ze=["+","-","*",")",";","/","^","%","#",",","{","}",":","[","]","(",".","`"],Be=["~","=",">","<"],ge=["+","-","*","/","^","..","%","//"],Ee=["+=","-=","*=","/=","^=","..=","%=","//="],Ye=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","continue"],Ne=["else","elseif","until","end"],Ze=["-","not","#","~"],le=["+","-","*","/","%","^","#","//","&","|","~","<<",">>","..",".",":",">","<","<=",">=","~=","==","+=","-=","*=","/=","%=","^=","..=","//=","and","or"],tt=11,Y={"^":[13,12],"%":[10,10],"//":[10,10],"/":[10,10],"*":[10,10],"+":[9,9],"-":[9,9],"..":[8,7],">>":[7,7],"<<":[7,7],"&":[6,6],"~":[5,5],"|":[4,4],"==":[3,3],"~=":[3,3],">=":[3,3],"<=":[3,3],">":[3,3],"<":[3,3],"+=":[3,3],"-=":[3,3],"*=":[3,3],"/=":[3,3],"^=":[3,3],"%=":[3,3],"..=":[3,3],"//=":[3,3],and:[2,2],or:[1,1]};function ee(z){let y=0,c=z.length,d=[];function T(t){return t=t||0,y<=c?z.substr(y+t,1):""}function _(){if(y<=c){let t=z.substr(y,1);return y++,t}else return""}function e(t){let r=0,l=1,o=1;for(;r<=y;)z.substr(r,1)==`
`?(l++,o=1):o++;let k;for(k=0;k<d.length;k++){let W=d[k];ce(`${W.Type}<${W.Source}>`)}throw`file<${l}:${o}>: ${t}`}function g(t){for(;;){let r=_();if(r=="")e("Unfinished long string.");else if(r=="]"){let l=!0,o;for(o=1;o<=t;o++)if(T()=="=")y++;else{l=!1;break}if(l&&_()=="]")return}}}function f(){let t=y;for(;T()=="=";)y++;if(T()=="[")return y++,y-t-1;y=t}let s=0,p=0;function L(t){let r=z.substr(p,y-p),l=null;t=="Number"&&(r.substr(0,2).toLowerCase()=="0x"?(l="hex",parseInt(r,16)<999999999999&&(r=parseInt(r,16))):r.substr(0,2).toLowerCase()=="0b"&&(l="bin",parseInt(r.substr(2),2)<999999999999&&(r=parseInt(r.substr(2),2))));let o={Type:t,LeadingWhite:z.substr(s,p-s),Source:r};return l!==null&&(o.NType=l),d.push(o),s=y,p=y,o}for(;;){for(s=y;;){let r=T();if(r=="")break;if(r=="-")if(T(1)=="-")if(y+=2,T()=="["){y++;let l=f();if(l!=null)g(l),s=y;else for(;;){let o=_();if(o==""||o==`
`)break}}else for(;;){let l=_();if(l==""||l==`
`)break}else break;else if(pe.includes(r))y++;else break}z.substr(s,y-s),p=y;let t=_();if(t==""){L("Eof");break}else if(t=="'"||t=='"'){for(;;){let r=_();if(r=="\\"){let l=_();if(Z[l]==null)throw`Invalid Escape Sequence \`${l}\`.`}else{if(r==t)break;if(r=="")throw"Unfinished string!"}}L("String")}else if(t=="`"){for(;;){let r=_();if(r=="\\"){let l=_();if(Z[l]==null)throw`Invalid Escape Sequence \`${l}\`.`}else{if(r==t)break;if(r=="")throw"Unfinished string!"}}L("Hash")}else if(Ce.includes(t)){for(;We.includes(T());)y++;Ye.includes(z.substr(p,y-p))?L("Keyword"):L("Ident")}else if(Je.includes(t)||t=="."&&Je.includes(T())){if(t=="0"&&T().toLowerCase()=="x")for(y++;it.includes(T())||T()==="_";)y++;else if(t=="0"&&T().toLowerCase()=="b")for(y++;ut.includes(T())||T()==="_";)y++;else{for(;Je.includes(T())||T()==="_";)y++;if(T()==".")for(y++;Je.includes(T());)y++;if(T()=="e"||T()=="E")for(y++,(T()=="-"||T()=="+")&&y++;Je.includes(T());)y++}L("Number")}else if(t=="["){let r=f();r!=null?(g(r),L("String")):L("Symbol")}else if(t==".")T()=="."&&(_(),(T()=="."||T()=="=")&&_()),L("Symbol");else if(t+T()=="//")_(),T()=="="&&_(),L("Symbol");else if(t+T()=="::")_(),L("Symbol");else if(le.includes(t+T()))_(),L("Symbol");else if(Be.includes(t))T()=="="&&y++,L("Symbol");else if(ge.includes(t)&&T()=="=")_(),L("Symbol");else if(ze.includes(t))L("Symbol");else throw`Bad symbol \`${t}\` in source. ${y}`}return d}function te(z){let y=ee(z),c=0;function d(){let b=y[c];return c<y.length&&c++,b}function T(b){return b=c+(b||0),y[b]||y[y.length-1]}function _(b){let M=1,w=0,v=0;for(;;){let P=y[v],S;P==b?S=P.LeadingWhite:S=P.LeadingWhite+P.Source;let a;for(a=0;a<=S.length;a++)S.substr(a,1)==`
`?(M++,w=0):w++;if(P==b)break;v++}return`${M}:${w+1}`}function e(){let b=T();return`<${b.Type} \`${b.Source}\`> at: ${_(b)}`}function g(){let b=T();return b.Type=="Eof"||b.Type=="Keyword"&&Ne.includes(b.Source)}function f(){return Ze.includes(T().Source)||!1}function s(){return le.includes(T().Source)||!1}function p(b,M){let w=T();if(w.Type==b&&(M==null||w.Source==M))return d();{let v;for(v=-3;v<=3;v++)ce(`Tokens[${v}] = \`${T(v).Source}\``);throw M?`${_(w)}: \`${M}\` expected.`:`${_(w)}: ${b} expected.`}}function L(b){let M=b.GetFirstToken,w=b.GetLastToken,v=b;return b.GetFirstToken=function(){let P=M(v);return C(P),P},b.GetLastToken=function(){let P=w(v);return C(P),P},b}let t,r;function l(b,M){let w=[r(b,M)],v=[];for(;T().Source==",";)v.push(d()),w.push(r(b,M));return[w,v]}function o(b,M){var v,P,S,a;let w=T();if(w.Source=="("){let A=d(),I=r(b,M),re=p("Symbol",")"),Q;return Q=L({Type:"ParenExpr",Expression:I,Token_OpenParen:A,Token_CloseParen:re,GetFirstToken:()=>Q.Token_OpenParen,GetLastToken:()=>Q.Token_CloseParen}),Q}else if(w.Type=="Ident"){let A;return A=L({Type:"VariableExpr",Token:d(),GetFirstToken:()=>A.Token,GetLastToken:()=>A.Token}),b[A.Token.Source]!=null&&((P=(v=b[A.Token.Source])==null?void 0:v.Tokens)==null?void 0:P.push)!=null?(b[A.Token.Source].Tokens.push(A.Token),b[A.Token.Source].UseCountIncrease()):M[A.Token.Source]!=null&&((a=(S=M[A.Token.Source])==null?void 0:S.Tokens)==null?void 0:a.push)!=null&&(M[A.Token.Source].Tokens.push(A.Token),M[A.Token.Source].UseCountIncrease()),A}else throw ce(e()),`${_(w)}: Unexpected symbol. ${w.Type} ${w.Source}`}function k(b,M){let w=p("Symbol","{"),v=[],P=[];for(;T().Source!="}";){if(T().Source=="["){let A=d(),I=r(b,M),re=p("Symbol","]"),Q=p("Symbol","="),Te=r(b,M);I.Token&&I.Token.Source,v.push({EntryType:"Index",Index:I,Value:Te,Token_OpenBracket:A,Token_CloseBracket:re,Token_Equals:Q})}else if(T().Type=="Ident"&&T(1).Source=="="){let A=d(),I=d(),re=r(b,M);v.push({EntryType:"Field",Field:A,Value:re,Token_Equals:I})}else{let A=r(b,M);v.push({EntryType:"Value",Value:A})}if(T().Source==","||T().Source==";")P.push(d());else break}let S=p("Symbol","}"),a;return a=L({Type:"TableLiteral",EntryList:v,Token_SeperatorList:P,Token_OpenBrace:w,Token_CloseBrace:S,GetFirstToken:()=>a.Token_OpenBrace,GetLastToken:()=>a.Token_CloseBrace}),a}function W(b,M){let w=[],v=[];if(T().Type=="Ident"){let P=d();if(M&&T().Source=="<"&&T(2).Source==">"){let S=T(1).Source;P.Attribute={LeadingWhite:T().LeadingWhite,Source:`<${S}>`},d(),d(),d()}w.push(P)}else if(T().Source=="..."&&b)return[w,v,d()];for(;T().Source==",";){if(v.push(d()),T().Source=="..."&&b)return[w,v,d()];{let P=p("Ident");if(M&&T().Source=="<"&&T(2).Source==">"){let S=T(1).Source;P.Attribute={LeadingWhite:T().LeadingWhite,Source:`<${S}>`},d(),d(),d()}w.push(P)}}return[w,v]}function J(b,M,w){let v=t(M,w),P=T();if(P.Type=="Keyword"&&P.Source==b)return d(),[v,P];throw ce(P.Type,P.Source),`${_(P)}: ${b} expected.`}function ae(b,M,w,v){let P=d(),S,a;if(!b){S=[],a=[];let we=p("Ident");for(S.push(we);T().Source==".";)a.push(d()),S.push(p("Ident"));T().Source==":"&&(a.push(d()),S.push(p("Ident")))}let A=p("Symbol","("),[I,re,Q]=W(!0),Te=p("Symbol",")"),[Re,me]=J("end",M,w),Ue;return Ue=L({Type:b==!0?"FunctionLiteral":"FunctionStat",NameChain:S,ArgList:I,Body:Re,Token_Function:P,Token_NameChainSeperator:a,Token_OpenParen:A,Token_Varg:Q,Token_ArgCommaList:re,Token_CloseParen:Te,Token_End:me,GetFirstToken:()=>Ue.Token_Function,GetLastToken:()=>Ue.Token_End}),Ue}function ye(b,M){let w=T();if(w.Source=="("){let v=d(),P=[],S=[];for(;T().Source!=")"&&(P.push(r(b,M)),T().Source==",");)S.push(d());let a=p("Symbol",")"),A;return A=L({CallType:"ArgCall",ArgList:P,Token_CommaList:S,Token_OpenParen:v,Token_CloseParen:a,GetFirstToken:()=>A.Token_OpenParen,GetLastToken:()=>A.Token_CloseParen}),A}else if(w.Source=="{"){let v;return v=L({CallType:"TableCall",TableExpr:r(b,M),GetFirstToken:()=>v.TableExpr.GetFirstToken(),GetLastToken:()=>v.TableExpr.GetLastToken()}),v}else if(w.Type=="String"){let v;return v=L({CallType:"StringCall",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else throw"Function arguments expected."}function $(b,M){let w=o(b,M);for(C(w,"nil prefixexpr");;){let v=T();if(v.Source=="."){let P=d(),S=p("Ident"),a;a=L({Type:"FieldExpr",Base:w,Field:S,Token_Dot:P,GetFirstToken:()=>a.Base.GetFirstToken(),GetLastToken:()=>a.Field}),w=a}else if(v.Source==":"){let P=d(),S=p("Ident"),a=ye(b,M),A;A=L({Type:"MethodExpr",Base:w,Method:S,FunctionArguments:a,Token_Colon:P,GetFirstToken:()=>A.Base.GetFirstToken(),GetLastToken:()=>A.FunctionArguments.GetLastToken()}),w=A}else if(v.Source=="["){let P=d(),S=r(b,M),a=p("Symbol","]"),A;A=L({Type:"IndexExpr",Base:w,Index:S,Token_OpenBracket:P,Token_CloseBracket:a,GetFirstToken:()=>A.Base.GetFirstToken(),GetLastToken:()=>A.Token_CloseBracket}),w=A}else if(v.Source=="{"||v.Source=="("||v.Type=="String"){let P;P=L({Type:"CallExpr",Base:w,FunctionArguments:ye(b,M),GetFirstToken:()=>P.Base.GetFirstToken(),GetLastToken:()=>P.FunctionArguments.GetLastToken()}),w=P}else if(Ee.includes(v.Source)){let P=d(),S=r(b,M),a;a=L({Type:"CompoundStat",Base:w,Token_Compound:P,Rhs:S,Lhs:w,GetFirstToken:()=>a.Base.GetFirstToken(),GetLastToken:()=>a.Rhs.GetLastToken()}),w=a}else return w}}function U(b,M){let w=T();if(w.Type=="Number"){let v;return v=L({Type:"NumberLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else if(w.Type=="String"){let v;return v=L({Type:"StringLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else if(w.Type=="Hash"){let v;return v=L({Type:"HashLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else if(w.Source=="nil"){let v;return v=L({Type:"NilLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else if(w.Source=="true"||w.Source=="false"){let v;return v=L({Type:"BooleanLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else if(w.Source=="..."){let v;return v=L({Type:"VargLiteral",Token:d(),GetFirstToken:()=>v.Token,GetLastToken:()=>v.Token}),v}else return w.Source=="{"?k(b,M):w.Source=="function"?ae(!0,b,M):$(b,M)}function j(b,M,w){let v;if(f()){let P=d(),S=j(tt,M,w),a;a=L({Type:"UnopExpr",Token_Op:P,Rhs:S,GetFirstToken:()=>a.Token_Op,GetLastToken:()=>a.Rhs.GetLastToken()}),v=a}else v=U(M,w),C(v,"nil sipleexpr");for(;s()&&Y[T().Source]!=null&&Y[T().Source][0]>b;){let P=d(),S=j(Y[P.Source][1],M,w);C(S,"RhsNeeded");let a;a=L({Type:"BinopExpr",Lhs:v,Rhs:S,Token_Op:P,GetFirstToken:()=>a.Lhs.GetFirstToken(),GetLastToken:()=>a.Rhs.GetLastToken()}),v=a}return v}r=(b,M)=>j(0,b,M);function dt(b,M){let w=$(b,M);if(w.Type=="MethodExpr"||w.Type=="CallExpr"){let v;return v=L({Type:"CallExprStat",Expression:w,GetFirstToken:()=>v.Expression.GetFirstToken(),GetLastToken:()=>v.Expression.GetLastToken()}),v}else{if(w.Type=="CompoundStat")return w;{let v=[w],P=[];for(;T().Source==",";){P.push(d());let re=$(b,M);if(re.Type=="MethodExpr"||re.Type=="CallExpr")throw"Bad left hand side of asignment";v.push(re)}let S=p("Symbol","="),a=[r(b,M)],A=[];for(;T().Source==",";)A.push(d()),a.push(r(b,M));let I;return I=L({Type:"AssignmentStat",Rhs:a,Lhs:v,Token_Equals:S,Token_LhsSeperatorList:P,Token_RhsSeperatorList:A,GetFirstToken:()=>I.Lhs[0].GetFirstToken(),GetLastToken:()=>I.Rhs[I.Rhs.length-1].GetLastToken()}),I}}}function $e(b,M){let w=d(),v=r(b,M),P=p("Keyword","then"),S=t(b,M),a=[];for(;T().Source=="elseif"||T().Source=="else";){let re=d(),Q,Te;re.Source=="elseif"&&(Q=r(b,M),Te=p("Keyword","then"));let Re=t(b,M);if(a.push({Condition:Q,Body:Re,ClauseType:re.Source,Token:re,Token_Then:Te}),re.Source=="else")break}let A=p("Keyword","end"),I;return I=L({Type:"IfStat",Condition:v,Body:S,ElseClauseList:a,Token_If:w,Token_Then:P,Token_End:A,GetFirstToken:()=>I.Token_If,GetLastToken:()=>I.Token_End}),I}function De(b,M){let w=d(),[v,P]=J("end",b,M),S;return S=L({Type:"DoStat",Body:v,Token_Do:w,Token_End:P,GetFirstToken:()=>S.Token_Do,GetLastToken:()=>S.Token_End}),S}function Ke(b,M){let w=d(),v=r(b,M),P=p("Keyword","do"),[S,a]=J("end",b,M),A;return A=L({Type:"WhileStat",Condition:v,Body:S,Token_While:w,Token_Do:P,Token_End:a,GetFirstToken:()=>A.Token_While,GetLastToken:()=>A.Token_End}),A}function lt(b,M){let w=d(),[v,P]=W();if(T().Source=="="){let S=d(),[a,A]=l(b,M);if(a.length<2||a.length>3)throw"Expected 2 or 3 values for range bounds";let I=p("Keyword","do"),[re,Q]=J("end",b,M),Te;return Te=L({Type:"NumericForStat",VarList:v,RangeList:a,Body:re,Token_For:w,Token_VarCommaList:P,Token_Equals:S,Token_RangeCommaList:A,Token_Do:I,Token_End:Q,GetFirstToken:()=>Te.Token_For,GetLastToken:()=>Te.Token_End}),Te}else if(T().Source=="in"){let S=d(),[a,A]=l(b,M),I=p("Keyword","do"),[re,Q]=J("end",b,M),Te;return Te=L({Type:"GenericForStat",VarList:v,GeneratorList:a,Body:re,Token_For:w,Token_VarCommaList:P,Token_In:S,Token_GeneratorCommaList:A,Token_Do:I,Token_End:Q,GetFirstToken:()=>Te.Token_For,GetLastToken:()=>Te.Token_End}),Te}}function ft(b,M){let w=d(),[v,P]=J("until",b),S=r(b,M),a;return a=L({Type:"RepeatStat",Body:v,Condition:S,Token_Repeat:w,Token_Until:P,GetFirstToken:()=>a.Token_Repeat,GetLastToken:()=>a.Condition.GetLastToken()}),a}function ct(b,M){let w=d();if(T().Source=="function"){let v=ae(!1,b,M);if(v.NameChain.length>1)throw _(v.Token_NameChainSeperator[0])+": `(` expected.";let P;return P=L({Type:"LocalFunctionStat",FunctionStat:v,Token_Local:w,GetFirstToken:()=>P.Token_Local,GetLastToken:()=>P.FunctionStat.GetLastToken()}),P}else if(T().Type=="Ident"){let[v,P]=W(!1,!0),S=[],a=[],A;if(T().Source=="="){A=d();let[re,Q]=l(b,M);S=re,a=Q}let I;return I=L({Type:"LocalVarStat",VarList:v,ExprList:S,Token_Local:w,Token_Equals:A,Token_VarCommaList:P,Token_ExprCommaList:a,GetFirstToken:()=>I.Token_Local,GetLastToken:function(){return I.ExprList.length>0?I.ExprList[I.ExprList.length-1].GetLastToken():I.VarList[I.VarList.length-1]}}),I}else throw"`function` or ident expected"}function Xe(b,M){let w=d(),v,P;g()||T().Source==";"?(v=[],P=[]):[v,P]=l(b,M);let S;return S={Type:"ReturnStat",ExprList:v,Token_Return:w,Token_CommaList:P,GetFirstToken:()=>S.Token_Return,GetLastToken:function(){return S.ExprList.length>0?S.ExprList[S.ExprList.length-1].GetLastToken():S.Token_Return}},S}function je(b,M){let w=d(),v;return v={Type:"BreakStat",Token_Break:w,GetFirstToken:()=>v.Token_Break,GetLastToken:()=>v.Token_Break},v}function Oe(b,M){let w=d(),v;return v={Type:"ContinueStat",Token_Continue:w,GetFirstToken:()=>v.Token_Continue,GetLastToken:()=>v.Token_Continue},v}function He(){let b=d(),M;T().Type=="Keyword"?M=p("Keyword"):M=p("Ident");let w;return w={Type:"GotoStat",Token_Goto:b,Token_Label:M,GetFirstToken:()=>w.Token_Goto,GetLastToken:()=>w.Token_Label},w}function Ge(){let b=d(),M;T().Type=="Keyword"?M=p("Keyword"):M=p("Ident");let w=p("Symbol","::"),v;return v={Type:"LabelStat",Token_ColonsLeft:b,Token_Label:M,Token_ColonsRight:w,GetFirstToken:()=>v.Token_ColonsLeft,GetLastToken:()=>v.Token_ColonsRight},v}function Fe(b,M){let w=T();return w.Source=="if"?[!1,$e(b,M)]:w.Source=="while"?[!1,Ke(b,M)]:w.Source=="do"?[!1,De(b,M)]:w.Source=="for"?[!1,lt(b,M)]:w.Source=="repeat"?[!1,ft(b,M)]:w.Source=="function"?[!1,ae(!1,b,M)]:w.Source=="local"?[!1,ct(b,M)]:w.Source=="return"?[!0,Xe(b,M)]:w.Source=="break"?[!0,je()]:w.Source=="continue"?[!0,Oe()]:w.Source=="goto"?[!1,He()]:w.Source=="::"?[!1,Ge()]:[!1,dt(b,M)]}return t=function(b,M){let w=[],v=[],P={},S={};if(M!=null)for(let[re,Q]of Object.entries(M))S[re]=Q;if(b!=null)for(let[re,Q]of Object.entries(b))S[re]=Q;let a,A=0;for(;!g();){a&&a==T()&&ce(`INFINITE LOOP POSSIBLE ON STATEMENT ${a.Source} :`,a),a=T();let[re,Q]=Fe(P,S);if(Q)switch(w.push(Q),Q.Type){case"LocalVarStat":Q.VarList.forEach(me=>{me.UseCount=0,me.Number=A++,P[me.Source]=me;let Ue=[];function we(){me.UseCount++,Ue.forEach(Me=>{Me.UseCount=me.UseCount})}me.Tokens={},me.Tokens.push=Me=>{Me.UseCountIncrease=we,Me.UseCount=me.UseCount,Me.Tokens=me.Tokens,Ue.push(Me)},me.Tokens.get=()=>Ue,me.UseCountIncrease=we});break;case"LocalFunctionStat":let Re=Q.FunctionStat.NameChain;if(Re.length===1){let we=function(){me.UseCount++,Ue.forEach(Me=>{Me.UseCount=me.UseCount})},me=Re[0];me.UseCount=0,me.Number=A++,P[me.Source]=me;let Ue=[];me.Tokens={},me.Tokens.push=Me=>{Me.UseCountIncrease=we,Me.UseCount=me.UseCount,Me.Tokens=me.Tokens,Ue.push(Me)},me.Tokens.get=()=>Ue,me.UseCountIncrease=we}break}let Te=T();Te.Type=="Symbol"&&Te.Source==";"&&(v[w.length-1]=d())}let I;return I={Type:"StatList",StatementList:w,SemicolonList:v,GetFirstToken:function(){var re;if(I.StatementList.length!=0)return(re=I.StatementList[0])==null?void 0:re.GetFirstToken()},GetLastToken:function(){if(I.StatementList.length!=0)return I.SemicolonList[I.StatementList.length-1]?I.SemicolonList[I.StatementList.length-1]:I.StatementList[I.StatementList.length-1].GetLastToken()}},I},t([],[])}function qe(z,y){let c={BinopExpr:!0,UnopExpr:!0,NumberLiteral:!0,StringLiteral:!0,NilLiteral:!0,BooleanLiteral:!0,VargLiteral:!0,HashLiteral:!0,FieldExpr:!0,IndexExpr:!0,MethodExpr:!0,CallExpr:!0,FunctionLiteral:!0,VariableExpr:!0,ParenExpr:!0,TableLiteral:!0},d={StatList:!0,BreakStat:!0,ContinueStat:!0,LabelStat:!0,GotoStat:!0,ReturnStat:!0,LocalVarStat:!0,LocalFunctionStat:!0,FunctionStat:!0,RepeatStat:!0,GenericForStat:!0,NumericForStat:!0,WhileStat:!0,DoStat:!0,IfStat:!0,CallExprStat:!0,AssignmentStat:!0,CompoundStat:!0};for(var[T,_]of Object.entries(y))if(!d[T]&&!c[T])throw`Invalid visitor target: \`${T}\``;function e(p){if(p!=null){let L=y[p.Type];if(typeof L=="function")return L(p);if(L&&L.Pre)return L.Pre(p)}}function g(p){let L=y[p.Type];if(L&&typeof L=="object"&&L.Post)return L.Post(p)}let f,s;f=function(p){if(!e(p)){if(p.Type=="BinopExpr")f(p.Lhs),f(p.Rhs);else if(p.Type=="UnopExpr")f(p.Rhs);else if(!(p.Type=="NumberLiteral"||p.Type=="StringLiteral"||p.Type=="NilLiteral"||p.Type=="BooleanLiteral"||p.Type=="VargLiteral"||p.Type=="HashLiteral")){if(p.Type=="FieldExpr")f(p.Base);else if(p.Type=="IndexExpr")f(p.Base),f(p.Index);else if(p.Type=="MethodExpr"||p.Type=="CallExpr")f(p.Base),p.FunctionArguments.CallType=="ArgCall"?p.FunctionArguments.ArgList.forEach((L,t)=>{f(L)}):p.FunctionArguments.CallType=="TableCall"&&f(p.FunctionArguments.TableExpr);else if(p.Type=="FunctionLiteral")s(p.Body);else if(p.Type!="VariableExpr")if(p.Type=="ParenExpr")f(p.Expression);else if(p.Type=="TableLiteral")p.EntryList.forEach((L,t)=>{if(L.EntryType=="Field")f(L.Value);else if(L.EntryType=="Index")f(L.Index),f(L.Value);else if(L.EntryType=="Value")f(L.Value);else throw"unreachable"});else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else throw`unreachable, type: ${p.Type}: ${p}`}g(p)}},s=function(p){if(!e(p)){if(p.Type=="StatList")p.StatementList.forEach((L,t)=>{if(L!=null){if(L===null||L.Type===null)return;L.Remove=()=>{p.StatementList[t]=null},s(L)}});else if(p.Type!="BreakStat"){if(p.Type!="ContinueStat"){if(p.Type!="GotoStat"){if(p.Type!="LabelStat")if(p.Type=="ReturnStat")p.ExprList.forEach((L,t)=>{f(L)});else if(p.Type=="LocalVarStat")p.Token_Equals&&p.ExprList.forEach((L,t)=>{f(L)});else if(p.Type=="LocalFunctionStat")s(p.FunctionStat.Body);else if(p.Type=="FunctionStat")s(p.Body);else if(p.Type=="RepeatStat")s(p.Body),f(p.Condition);else if(p.Type=="GenericForStat")p.GeneratorList.forEach((L,t)=>{f(L)}),s(p.Body);else if(p.Type=="NumericForStat")p.RangeList.forEach((L,t)=>{f(L)}),s(p.Body);else if(p.Type=="WhileStat")f(p.Condition),s(p.Body);else if(p.Type=="DoStat")s(p.Body);else if(p.Type=="IfStat")f(p.Condition),s(p.Body),p.ElseClauseList.forEach(L=>{L.Condition!=null&&f(L.Condition),s(L.Body)});else if(p.Type=="CallExprStat")f(p.Expression);else if(p.Type=="CompoundStat")f(p.Lhs),f(p.Rhs);else if(p.Type=="AssignmentStat")p.Lhs.forEach(L=>{f(L)}),p.Rhs.forEach(L=>{f(L)});else throw"unreachable"}}}g(p)}},d[z.Type]?s(z):f(z)}function ot(z){let y=[],c,d=0;function T(){return d++,d}function _(){c={ParentScope:c,ChildScopeList:[],VariableList:[],BeginLocation:T(),Depth:null,GetVar:null},c.ParentScope?(c.Depth=c.ParentScope.Depth+1,c.ParentScope.ChildScopeList.push(c)):c.Depth=1;let r=c;c.GetVar=function(l){for(const o of r.VariableList)if(o.Name==l)return o;if(r.ParentScope)return r.ParentScope.GetVar(l);for(const o of y)if(o.Name==l)return o}}function e(){let r=c;return r.EndLocation=T(),r.VariableList.forEach(l=>{l.ScopeEndLocation=r.EndLocation}),c=r.ParentScope,r}_();function g(r,l,o){C(o,"MIssing localInfo"),C(r,"Missing local var name");let k={Type:"Local",Name:r,RenameList:[l],AssignedTo:!1,Info:o,Scope:c,BeginLocation:T(),EndLocation:T(),ReferenceLocationList:[T()]};return k.Rename=function(W){k.Name=W,k.RenameList.forEach(J=>{J(W)})},c.VariableList.push(k),k}function f(r){for(const o of y)if(o.Name==r)return o;let l={Type:"Global",Name:r,RenameList:[],AssignedTo:!1,Scope:null,BeginLocation:T(),EndLocation:T(),ReferenceLocationList:[]};return l.Rename=function(o){l.Name=o,l.RenameList.forEach(k=>{k(o)})},y.push(l),l}function s(r,l){C(r,"Missing var name");let o=f(r);return o.RenameList.push(l),o}function p(r,l){let o;for(o=r.VariableList.length-1;o>=0;o--)if(r.VariableList[o].Name==l)return r.VariableList[o];if(r.ParentScope){let k=p(r.ParentScope,l);if(k)return k}}function L(r,l){C(r,"Missing var name");let o=p(c,r);o?o.RenameList.push(l):o=s(r,l);let k=T();return o.EndLocation=k,o.ReferenceLocationList.push(o.EndLocation),o}let t={};return t.FunctionLiteral={Pre:function(r){_(),r.ArgList.forEach((l,o)=>{let k=g(l.Source,function(W,J){J||(l.Source=W)},{Type:"Argument",Index:o});l.var=k})},Post:function(r){e()}},t.VariableExpr=function(r){r.Variable=L(r.Token.Source,function(l){r.Token.Source=l})},t.StatList={Pre:function(r){_()},Post:function(r){r.SkipPop||e()}},t.LocalVarStat={Post:function(r){r.VarList.forEach((l,o)=>{g(l.Source,function(k){r.VarList[o].Source=k},{Type:"Local"})})}},t.LocalFunctionStat={Pre:function(r){g(r.FunctionStat.NameChain[0].Source,function(l){r.FunctionStat.NameChain[0].Source=l},{Type:"LocalFunction"}),_(),r.FunctionStat.ArgList.forEach((l,o)=>{g(l.Source,function(k){l.Source=k},{Type:"Argument",Index:o})})},Post:function(){e()}},t.FunctionStat={Pre:function(r){let l=r.NameChain,o;l.length==1?p(c,l[0].Source)?o=L(l[0].Source,function(k){l[0].Source=k}):o=s(l[0].Source,function(k){l[0].Source=k}):o=L(l[0].Source,function(k){l[0].Source=k}),o.AssignedTo=!0,_(),r.ArgList.forEach((k,W)=>{g(k.Source,function(J){k.Source=J},{Type:"Argument",Index:W})})},Post:function(){e()}},t.GenericForStat={Pre:function(r){return r.GeneratorList.forEach(l=>{qe(l,t)}),_(),r.VarList.forEach((l,o)=>{g(l.Source,function(k){l.Source=k},{Type:"ForRange",Index:o})}),qe(r.Body,t),e(),!0}},t.NumericForStat={Pre:function(r){return r.RangeList.forEach(l=>{qe(l,t)}),_(),r.VarList.forEach((l,o)=>{g(l.Source,function(k){l.Source=k},{Type:"ForRange",Index:o})}),qe(r.Body,t),e(),!0}},t.RepeatStat={Pre:function(r){r.Body.SkipPop=!0},Post:function(r){e()}},t.AssignmentStat={Post:function(r){r.Lhs.forEach(l=>{l.Variable!=null&&(l.Variable.AssignedTo=!0)})}},qe(z,t),[y,e()]}function st(z){let y,c,d="",T=e=>typeof(e==null?void 0:e.LeadingWhite)!="string"?" ":e.LeadingWhite;function _(e){if(e.LeadingWhite==null||e.Source==null)throw`Bad token: tk=${e} | lwhite=${e.LeadingWhite} | source=${e.Source}`;d=`${d}${e.LeadingWhite}${e.Source}`}return c=function(e){if(e.Type=="BinopExpr")c(e.Lhs),_(e.Token_Op),c(e.Rhs);else if(e.Type=="UnopExpr")_(e.Token_Op),c(e.Rhs);else if(e.Type=="NumberLiteral"||e.Type=="StringLiteral"||e.Type=="NilLiteral"||e.Type=="BooleanLiteral"||e.Type=="VargLiteral"||e.Type=="HashLiteral")_(e.Token);else if(e.Type=="FieldExpr")c(e.Base),_(e.Token_Dot),_(e.Field);else if(e.Type=="IndexExpr")c(e.Base),_(e.Token_OpenBracket),c(e.Index),_(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")c(e.Base),e.Type=="MethodExpr"&&(_(e.Token_Colon),_(e.Method)),e.FunctionArguments.CallType=="StringCall"?_(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(_(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((g,f)=>{c(g);let s=e.FunctionArguments.Token_CommaList[f];s!=null&&_(s)}),_(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&c(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")_(e.Token_Function),_(e.Token_OpenParen),e.ArgList.forEach((g,f)=>{_(g);let s=e.Token_ArgCommaList[f];s!=null&&_(s)}),e.Token_Varg!=null&&_(e.Token_Varg),_(e.Token_CloseParen),y(e.Body),_(e.Token_End);else if(e.Type=="VariableExpr")_(e.Token);else if(e.Type=="ParenExpr")_(e.Token_OpenParen),c(e.Expression),_(e.Token_CloseParen);else if(e.Type=="TableLiteral")_(e.Token_OpenBrace),e.EntryList.forEach((g,f)=>{if(g.EntryType=="Field")_(g.Field),_(g.Token_Equals),c(g.Value);else if(g.EntryType=="Index")_(g.Token_OpenBracket),c(g.Index),_(g.Token_CloseBracket),_(g.Token_Equals),c(g.Value);else if(g.EntryType=="Value")c(g.Value);else throw"unreachable";let s=e.Token_SeperatorList[f];s!=null&&_(s)}),_(e.Token_CloseBrace);else if(e.Type=="CompoundStat")y(e);else throw`unreachable, type: ${e.Type}: ${e}`},y=function(e){if(e==null)throw`STAT IS NIL! ${e}`;if(!(e.Type==="StatList"&&e.StatementList.length===0)){if(e.WrapInDo){let g=T(e.GetFirstToken());e.GetFirstToken().LeadingWhite="",d+=`${g}do `}e.Type=="StatList"?e.StatementList.forEach((g,f)=>{g===null||g.Type===null||(g.Remove=()=>{e.StatementList[f]=null},y(g),e.SemicolonList[f]&&_(e.SemicolonList[f]))}):e.Type=="BreakStat"?_(e.Token_Break):e.Type=="ContinueStat"?_(e.Token_Continue):e.Type=="GotoStat"?(_(e.Token_Goto),_(e.Token_Label)):e.Type=="LabelStat"?(_(e.Token_ColonsLeft),_(e.Token_Label),_(e.Token_ColonsRight)):e.Type=="ReturnStat"?(_(e.Token_Return),e.ExprList.forEach((g,f)=>{c(g),e.Token_CommaList[f]&&_(e.Token_CommaList[f])})):e.Type=="LocalVarStat"?(_(e.Token_Local),e.VarList.forEach((g,f)=>{_(g),g.Attribute!=null&&_(g.Attribute);let s=e.Token_VarCommaList[f];s!=null&&_(s)}),e.Token_Equals!=null&&(_(e.Token_Equals),e.ExprList.forEach((g,f)=>{c(g);let s=e.Token_ExprCommaList[f];s!=null&&_(s)}))):e.Type=="LocalFunctionStat"?(_(e.Token_Local),_(e.FunctionStat.Token_Function),_(e.FunctionStat.NameChain[0]),_(e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((g,f)=>{_(g);let s=e.FunctionStat.Token_ArgCommaList[f];s!=null&&_(s)}),e.FunctionStat.Token_Varg&&_(e.FunctionStat.Token_Varg),_(e.FunctionStat.Token_CloseParen),y(e.FunctionStat.Body),_(e.FunctionStat.Token_End)):e.Type=="FunctionStat"?(_(e.Token_Function),e.NameChain.forEach((g,f)=>{_(g);let s=e.Token_NameChainSeperator[f];s!=null&&_(s)}),_(e.Token_OpenParen),e.ArgList.forEach((g,f)=>{_(g);let s=e.Token_ArgCommaList[f];s!=null&&_(s)}),e.Token_Varg&&_(e.Token_Varg),_(e.Token_CloseParen),y(e.Body),_(e.Token_End)):e.Type=="RepeatStat"?(_(e.Token_Repeat),y(e.Body),_(e.Token_Until),c(e.Condition)):e.Type=="GenericForStat"?(_(e.Token_For),e.VarList.forEach((g,f)=>{_(g);let s=e.Token_VarCommaList[f];s!=null&&_(s)}),_(e.Token_In),e.GeneratorList.forEach((g,f)=>{c(g);let s=e.Token_GeneratorCommaList[f];s!=null&&_(s)}),_(e.Token_Do),y(e.Body),_(e.Token_End)):e.Type=="NumericForStat"?(_(e.Token_For),e.VarList.forEach((g,f)=>{_(g);let s=e.Token_VarCommaList[f];s!=null&&_(s)}),_(e.Token_Equals),e.RangeList.forEach((g,f)=>{c(g);let s=e.Token_RangeCommaList[f];s!=null&&_(s)}),_(e.Token_Do),y(e.Body),_(e.Token_End)):e.Type=="WhileStat"?(_(e.Token_While),c(e.Condition),_(e.Token_Do),y(e.Body),_(e.Token_End)):e.Type=="DoStat"?(_(e.Token_Do),y(e.Body),_(e.Token_End)):e.Type=="IfStat"?(_(e.Token_If),c(e.Condition),_(e.Token_Then),y(e.Body),e.ElseClauseList.forEach(g=>{_(g.Token),g.Condition!=null&&(c(g.Condition),_(g.Token_Then)),y(g.Body)}),_(e.Token_End)):e.Type=="CallExprStat"?c(e.Expression):e.Type=="CompoundStat"?(c(e.Lhs),_(e.Token_Compound),c(e.Rhs),e.Type="CompoundStat"):e.Type=="AssignmentStat"?(e.Lhs.forEach((g,f)=>{c(g);let s=e.Token_LhsSeperatorList[f];s!=null&&_(s)}),_(e.Token_Equals),e.Rhs.forEach((g,f)=>{c(g);let s=e.Token_RhsSeperatorList[f];s!=null&&_(s)})):C(!1,"unreachable"),e.WrapInDo&&(d+=" end ")}},y(z),d}function K(z){let y,c,d=0;function T(t){if(t===void 0)return;let r=`
${"	".repeat(d)}`;if(t.LeadingWhite==""||t.LeadingWhite.substr(-r.length,r.length)!=r){let l="",o;for(o=t.LeadingWhite.length;o>=0;o--){let k=t.LeadingWhite.substr(o,1);if(!(k==""||k.match(/\s/g))){l=t.LeadingWhite.substr(0,o+1);break}}t.LeadingWhite=`${l}${r}`}}function _(){d++}function e(){d--,C(d>=0,"Undented too far")}function g(t){return t.LeadingWhite.length>0?t.LeadingWhite.substr(0,1):t.Source.toString().substr(0,1)}function f(t){t.LeadingWhite=t.LeadingWhite.trim()}function s(t){f(t),pe.includes(g(t))||(t.LeadingWhite=" "+t.LeadingWhite)}function p(t){s(t.GetFirstToken())}function L(t,r,l){_(),y(r),e(),T(l)}c=function(t){if(t.Type=="BinopExpr")c(t.Lhs),c(t.Rhs),p(t.Rhs),s(t.Token_Op);else if(t.Type=="UnopExpr")f(t.Token_Op),c(t.Rhs),t.Token_Op.Source[0]&&s(t.Rhs.GetFirstToken());else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")f(t.Token),t.Type=="HashLiteral"&&(t.Token.Source='"'+V(`${t.Token.Source.substring(1,t.Token.Source.length-1)}`)+'"',t.Type="StringLiteral",t.Token.Type="String");else if(t.Type=="FieldExpr")c(t.Base);else if(t.Type=="IndexExpr")c(t.Base),c(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr")c(t.Base),f(t.FunctionArguments.GetFirstToken()),f(t.FunctionArguments.GetLastToken()),t.Type=="MethodExpr",t.FunctionArguments.CallType=="StringCall"||(t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((r,l)=>{c(r),l>0&&p(r);let o=t.FunctionArguments.Token_CommaList[l];o!=null&&f(o)}):t.FunctionArguments.CallType=="TableCall"&&c(t.FunctionArguments.TableExpr));else if(t.Type=="FunctionLiteral")t.ArgList.forEach((r,l)=>{l>0&&s(r),t.Token_ArgCommaList[l]}),t.ArgList.length>0&&t.Token_Varg!=null&&s(t.Token_Varg),L(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr")f(t.Token_OpenParen),f(t.Token_CloseParen),c(t.Expression);else if(t.Type=="TableLiteral"){if(t.EntryList.length!=0){_();let r=100;t.EntryList.forEach((l,o)=>{l.EntryType=="Field"?(t.EntryList.length>r?nt(l.Value):T(l.Field),s(l.Token_Equals),c(l.Value),p(l.Value)):l.EntryType=="Index"?(t.EntryList.length>r?f(l.Token_OpenBracket):T(l.Token_OpenBracket),c(l.Index),s(l.Token_Equals),c(l.Value),p(l.Value)):l.EntryType=="Value"?(c(l.Value),t.EntryList.length>r?nt(l.Value):T(l.Value.GetFirstToken())):C(!1,"unreachable");let k=t.Token_SeperatorList[o];k!=null&&(t.EntryList.length>r?k.LeadingWhite="":f(k))}),e(),t.EntryList.length>r?t.Token_CloseBrace.LeadingWhite="":T(t.Token_CloseBrace)}}else if(t.Type=="CompoundStat")y(t);else throw ce(t),`unreachable, type: ${t.Type}:`+t},y=function(t){if(t.Type=="StatList")t.StatementList.forEach((r,l)=>{r===null||r.Type===null||r.Type==="StatList"&&r.StatementList.length===0||(r.Remove=()=>{r.StatementList[l]=null},y(r),T(r.GetFirstToken()))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat"){if(t.Type!="GotoStat"){if(t.Type!="LabelStat")if(t.Type=="ReturnStat")t.ExprList.forEach((r,l)=>{c(r),p(r),t.Token_CommaList[l]});else if(t.Type=="LocalVarStat"){if(t.VarList.forEach((r,l)=>{s(r),r.Attribute&&(r.Attribute.LeadingWhite=" "),t.Token_VarCommaList[l]}),t.Token_Equals){f(t.Token_Equals),s(t.Token_Equals);let r=[],l=[];t.ExprList.forEach((o,k)=>{o!=null&&(k<t.VarList.length||o.Type=="CallExpr"||o.Type=="ParenExpr"||o.Type=="VargLiteral"||o.Type=="BinopExpr"||o.Type=="UnopExpr")&&(r.push(o),l.push(t.Token_ExprCommaList[k]))}),t.ExprList=r,t.CommaList=l,t.ExprList.forEach((o,k)=>{o!=null&&(c(o),p(o),t.Token_ExprCommaList[k]!=null&&t.ExprList.length-1==k&&(t.Token_ExprCommaList[k]=null))})}}else if(t.Type=="LocalFunctionStat")s(t.FunctionStat.Token_Function),s(t.FunctionStat.NameChain[0]),t.FunctionStat.ArgList.forEach((r,l)=>{l>0?s(r):f(r);let o=t.FunctionStat.Token_ArgCommaList[l];o&&f(o)}),t.FunctionStat.ArgList.length>0&&t.FunctionStat.Token_Varg?(f(t.FunctionStat.Token_Varg),s(t.FunctionStat.Token_Varg)):t.FunctionStat.Token_Varg&&f(t.FunctionStat.Token_Varg),f(t.FunctionStat.Token_OpenParen),f(t.FunctionStat.Token_CloseParen),L(t.FunctionStat.Token_CloseParen,t.FunctionStat.Body,t.FunctionStat.Token_End);else if(t.Type=="FunctionStat")t.NameChain.forEach((r,l)=>{l==0&&s(r),t.Token_NameChainSeperator[l]}),t.ArgList.forEach((r,l)=>{l>0&&s(r),t.Token_ArgCommaList[l]}),t.ArgList.length>0&&t.Token_Varg&&s(t.Token_Varg),L(t.Token_CloseParen,t.Body,t.Token_End);else if(t.Type=="RepeatStat")L(t.Token_Repeat,t.Body,t.Token_Until),c(t.Condition),p(t.Condition);else if(t.Type=="GenericForStat")t.VarList.forEach((r,l)=>{s(r),t.Token_VarCommaList[l]}),s(t.Token_In),t.GeneratorList.forEach((r,l)=>{c(r),p(r),t.Token_GeneratorCommaList[l]}),s(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="NumericForStat")t.VarList.forEach((r,l)=>{s(r),t.Token_VarCommaList[l]}),s(t.Token_Equals),t.RangeList.forEach((r,l)=>{c(r),p(r),t.Token_RangeCommaList[l]}),s(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="WhileStat")c(t.Condition),p(t.Condition),s(t.Token_Do),L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="DoStat")L(t.Token_Do,t.Body,t.Token_End);else if(t.Type=="IfStat"){c(t.Condition),p(t.Condition),s(t.Token_Then);let r=t.Token_Then,l=t.Body;t.ElseClauseList.forEach(o=>{L(r,l,o.Token),r=o.Token,o.Condition!=null&&(c(o.Condition),p(o.Condition),s(o.Token_Then),r=o.Token_Then),l=o.Body}),L(r,l,t.Token_End)}else t.Type=="CallExprStat"?c(t.Expression):t.Type=="CompoundStat"?(c(t.Lhs),c(t.Rhs),p(t.Lhs),p(t.Rhs),s(t.Token_Compound)):t.Type=="AssignmentStat"?(t.Lhs.forEach((r,l)=>{c(r),l>0&&p(r),t.Token_LhsSeperatorList[l]}),s(t.Token_Equals),t.Rhs.forEach((r,l)=>{c(r),p(r),t.Token_RhsSeperatorList[l]})):C(!1,"Unreachable")}}}},y(z)}function nt(z){let y,c;function d(e){e&&(e.LeadingWhite="")}function T(e,g,f=!1){d(g);let s=(typeof e.Source=="string"?e.Source:e.Source.toString()).substr(e.Source.length-1,1),p=(typeof g.Source=="string"?g.Source:g.Source.toString()).substr(0,1);s=="-"&&p=="-"||We.includes(s)&&We.includes(p)||f&&s==")"&&p=="("?g.LeadingWhite=f?";":" ":g.LeadingWhite=""}function _(e,g,f){y(g),d(f);let s=g.GetFirstToken(),p=g.GetLastToken();s!=null?(T(e,s),T(p,f)):T(e,f)}c=function(e){if(e.Type==="BinopExpr")c(e.Lhs),c(e.Rhs),e.Lhs.Type=="NumberLiteral"&&e.Token_Op.Source==".."?e.Token_Op.LeadingWhite=" ":(d(e.Token_Op),T(e.Lhs.GetLastToken(),e.Token_Op)),T(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="UnopExpr")d(e.Token_Op),c(e.Rhs),T(e.Token_Op,e.Rhs.GetFirstToken());else if(e.Type==="NumberLiteral"||e.Type==="StringLiteral"||e.Type==="NilLiteral"||e.Type==="BooleanLiteral"||e.Type==="VargLiteral"||e.Type==="HashLiteral")d(e.Token);else if(e.Type=="FieldExpr")c(e.Base),d(e.Token_Dot),d(e.Field);else if(e.Type=="IndexExpr")c(e.Base),d(e.Token_OpenBracket),c(e.Index),d(e.Token_CloseBracket);else if(e.Type=="MethodExpr"||e.Type=="CallExpr")c(e.Base),e.Type=="MethodExpr"&&(d(e.Token_Colon),d(e.Method)),e.FunctionArguments.CallType=="StringCall"?d(e.FunctionArguments.Token):e.FunctionArguments.CallType=="ArgCall"?(d(e.FunctionArguments.Token_OpenParen),e.FunctionArguments.ArgList.forEach((g,f)=>{c(g);let s=e.FunctionArguments.Token_CommaList[f];s!=null&&d(s)}),d(e.FunctionArguments.Token_CloseParen)):e.FunctionArguments.CallType=="TableCall"&&c(e.FunctionArguments.TableExpr);else if(e.Type=="FunctionLiteral")d(e.Token_Function),d(e.Token_OpenParen),e.ArgList.forEach((g,f)=>{d(g);let s=e.Token_ArgCommaList[f];s!=null&&d(s)}),e.Token_Varg!=null&&d(e.Token_Varg),d(e.Token_CloseParen),_(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="VariableExpr")d(e.Token);else if(e.Type=="ParenExpr")d(e.Token_OpenParen),c(e.Expression),d(e.Token_CloseParen);else if(e.Type=="TableLiteral")d(e.Token_OpenBrace),e.EntryList.forEach((g,f)=>{g.EntryType=="Field"?(d(g.Field),d(g.Token_Equals),c(g.Value)):g.EntryType=="Index"?(d(g.Token_OpenBracket),c(g.Index),d(g.Token_CloseBracket),d(g.Token_Equals),c(g.Value)):g.EntryType=="Value"?c(g.Value):C(!1,"unreachable");let s=e.Token_SeperatorList[f];s!=null&&d(s)}),e.Token_SeperatorList[e.EntryList.length-1]=null,d(e.Token_CloseBrace);else throw`unreachable, type: ${e.Type}:${e}  undefined`},y=function(e){if(e.Type=="StatList"){let g;for(g=0;g<=e.StatementList.length;g++){let f=e.StatementList[g];if(f==null)continue;y(f),d(f.GetFirstToken());let s=e.StatementList[g-1];if(s!=null){let p={")":["(","["],"]":["(","["]};if(e.SemicolonList[g-1]){let L=s.GetLastToken().Source,t=f.GetFirstToken().Source;(p[L]===null||p[L]===void 0||!p[L].includes(t))&&(e.SemicolonList[g-1]=null)}e.SemicolonList[g-1]||T(s.GetLastToken(),f.GetFirstToken(),!0)}}e.SemicolonList[e.StatementList.length-1]=null,e.StatementList.length>0&&d(e.StatementList[0].GetFirstToken())}else if(e.Type=="BreakStat")d(e.Token_Break);else if(e.Type=="ContinueStat")d(e.Token_Continue);else if(e.Type=="GotoStat")d(e.Token_Goto),T(e.Token_Goto,e.Token_Label);else if(e.Type=="LabelStat")d(e.Token_ColonsLeft),d(e.Token_Label),d(e.Token_ColonsRight);else if(e.Type=="ReturnStat")d(e.Token_Return),e.ExprList.forEach((g,f)=>{c(g),e.Token_CommaList[f]!=null&&d(e.Token_CommaList[f])}),e.ExprList.length>0&&T(e.Token_Return,e.ExprList[0].GetFirstToken());else if(e.Type=="LocalVarStat"){d(e.Token_Local);let g=!1;e.VarList.forEach((f,s)=>{s==0?T(e.Token_Local,f):d(f),f.Attribute&&(d(f.Attribute),s+1==e.VarList.length&&(g=!0));let p=e.Token_VarCommaList[s];p!=null&&d(p)}),e.Token_Equals!=null&&(g||d(e.Token_Equals),e.ExprList.forEach((f,s)=>{c(f);let p=e.Token_ExprCommaList[s];p!=null&&d(p)}))}else if(e.Type=="LocalFunctionStat")d(e.Token_Local),T(e.Token_Local,e.FunctionStat.Token_Function),T(e.FunctionStat.Token_Function,e.FunctionStat.NameChain[0]),T(e.FunctionStat.NameChain[0],e.FunctionStat.Token_OpenParen),e.FunctionStat.ArgList.forEach((g,f)=>{d(g);let s=e.FunctionStat.Token_ArgCommaList[f];s!=null&&d(s)}),e.FunctionStat.Token_Varg&&d(e.FunctionStat.Token_Varg),d(e.FunctionStat.Token_CloseParen),_(e.FunctionStat.Token_CloseParen,e.FunctionStat.Body,e.FunctionStat.Token_End);else if(e.Type=="FunctionStat")d(e.Token_Function),e.NameChain.forEach((g,f)=>{f==0?T(e.Token_Function,g):d(g);let s=e.Token_NameChainSeperator[f];s!=null&&d(s)}),d(e.Token_OpenParen),e.ArgList.forEach((g,f)=>{d(g);let s=e.Token_ArgCommaList[f];s!=null&&d(s)}),e.Token_Varg&&d(e.Token_Varg),d(e.Token_CloseParen),_(e.Token_CloseParen,e.Body,e.Token_End);else if(e.Type=="RepeatStat")d(e.Token_Repeat),_(e.Token_Repeat,e.Body,e.Token_Until),c(e.Condition),T(e.Token_Until,e.Condition.GetFirstToken());else if(e.Type=="GenericForStat")d(e.Token_For),e.VarList.forEach((g,f)=>{f==0?T(e.Token_For,g):d(g);let s=e.Token_VarCommaList[f];s!=null&&d(s)}),T(e.VarList[e.VarList.length-1],e.Token_In),e.GeneratorList.forEach((g,f)=>{c(g),f==0&&T(e.Token_In,g.GetFirstToken());let s=e.Token_GeneratorCommaList[f];s!=null&&d(s)}),T(e.GeneratorList[e.GeneratorList.length-1].GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="NumericForStat")d(e.Token_For),e.VarList.forEach((g,f)=>{f==0?T(e.Token_For,g):d(g);let s=e.Token_VarCommaList[f];s!=null&&d(s)}),T(e.VarList[e.VarList.length-1],e.Token_Equals),e.RangeList.forEach((g,f)=>{c(g),f==0&&T(e.Token_Equals,g.GetFirstToken());let s=e.Token_RangeCommaList[f];s!=null&&d(s)}),T(e.RangeList[e.RangeList.length-1].GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="WhileStat")d(e.Token_While),c(e.Condition),d(e.Token_Do),T(e.Token_While,e.Condition.GetFirstToken()),T(e.Condition.GetLastToken(),e.Token_Do),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="DoStat")d(e.Token_Do),d(e.Token_End),_(e.Token_Do,e.Body,e.Token_End);else if(e.Type=="IfStat"){d(e.Token_If),c(e.Condition),T(e.Token_If,e.Condition.GetFirstToken()),T(e.Condition.GetLastToken(),e.Token_Then);let g=e.Token_Then,f=e.Body;e.ElseClauseList.forEach((s,p)=>{_(g,f,s.Token),g=s.Token,s.Condition!=null&&(c(s.Condition),T(s.Token,s.Condition.GetFirstToken()),T(s.Condition.GetLastToken(),s.Token_Then),g=s.Token_Then),y(s.Body),f=s.Body}),_(g,f,e.Token_End)}else if(e.Type=="CallExprStat")c(e.Expression);else if(e.Type=="CompoundStat")c(e.Lhs),d(e.Token_Compound),c(e.Rhs),T(e.Lhs.GetLastToken(),e.Token_Compound),T(e.Token_Compound,e.Rhs.GetFirstToken());else if(e.Type=="AssignmentStat")e.Lhs.forEach((g,f)=>{c(g);let s=e.Token_LhsSeperatorList[f];s!=null&&d(s)}),d(e.Token_Equals),e.Rhs.forEach((g,f)=>{c(g);let s=e.Token_RhsSeperatorList[f];s!=null&&d(s)});else return c(e)},y(z)}function rt(z){let y,c,d={NumberLiteral:!0,BooleanLiteral:!0,StringLiteral:!0,HashLiteral:!0,NilLiteral:!0,TableLiteral:!0,ParenExpr:!0,BinopExpr:!0};function T(t,r,l=null){let o;return o={Type:t,Token:{Type:l??"Number",LeadingWhite:"",Source:r},GetFirstToken:()=>o.Token,GetLastToken:()=>o.Token},o}function _(t,r,l){let o;return o={Type:"BinopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Lhs:r,Rhs:l,GetFirstToken:()=>o.Lhs.GetFirstToken(),GetLastToken:()=>o.Rhs.GetLastToken()},o}function e(t,r){let l;return l={Type:"UnopExpr",Token_Op:{Type:"Symbol",LeadingWhite:"",Source:t},Rhs:r,GetFirstToken:()=>l.Token_Op,GetLastToken:()=>l.Rhs.GetLastToken()},l}function g(t,r){if(r!=null)for(var[l,o]of Object.entries(r))t[l]=o}function f(t){if(t==null||t.substr==null)return;let r=t.substr(0,1),l;if((r=='"'||r=="'")&&(l=t.substr(1,t.length-2)),r=="["){let W=0,J=1;for(;t.substr(J,1)=="=";)W++,J++;l=t.substr(2+W,t.length-4-W-2)}if(l==null)return"";let o="",k;for(k=0;k<=l.length;k++){let W=l.substr(k,1);W=="'"||W=='"'?o+=`\\${W}`:o+=W}return o}function s(t){if(typeof t=="object"&&t.Type=="ParenExpr")return g(t,t.Expression)}function p(t,r,l){let o=r,k=l;if(r&&r.Type=="ParenExpr"&&(o=r.Expression),l&&l.Type=="ParenExpr"&&(k=l.Expression),o==null||k==null||o.Type==null||k.Type==null||o.Type=="VariableExpr"||o.Type=="CallExpr"||o.Type=="BinopExpr"||k.Type=="CallExpr"||k.Type=="BinopExpr"||k.Type=="VariableExpr")return;let W=o.Token||o.Expression!=null&&o.Expression.Token||null,J=k.Token||k.Expression!=null&&k.Expression.Token||null,ae=W!=null?W.Source:null,ye=J!=null?J.Source:null,$,U;if(o.Type=="BooleanLiteral"&&($=ae=="true"),k.Type=="BooleanLiteral"&&(U=ye=="true"),!(o.Type=="NumberLiteral"&&($=R(ae),$==null))&&!(k.Type=="NumberLiteral"&&(U=R(ye),U==null))&&((o.Type=="StringLiteral"||o.Type=="HashLiteral")&&($=ae.toString()),(k.Type=="StringLiteral"||k.Type=="HashLiteral")&&(U=ye.toString()),$!=null&&U!=null)){if(t=="==")return $==U;if(t=="~=")return $!=U;if(t=="and")return $&&U;if(t=="or")return $||U;if(t==".."&&o.Type=="StringLiteral"&&k.Type=="StringLiteral")return`"${f(ae)+f(ye)}"`;if(o.Type=="StringLiteral"&&($=R(f($))),k.Type=="StringLiteral"&&(U=R(f(U))),$==null||U==null)return;let j;if(t=="+"&&(j=$+U),t=="-"&&(j=$-U),t=="*"&&(j=$*U),t=="/"&&(j=$/U),t=="^"&&(j=$**U),t=="%"&&(j=$%U),t==">"&&(j=$>U),t=="<"&&(j=$<U),t==">="&&(j=$>=U),t=="<="&&(j=$<=U),j==!1||j==!0||isFinite(j)&&j>-(10**6)&&j<10**6)return j}}function L(t,r){let l=r.Token||r.Expression||r.EntryList||r;if(l==null||l.Source==null&&r.Type!="TableLiteral"||r.Type=="VariableExpr"||r.Type=="CallExpr"||r.Type=="BinopExpr")return;let o=l.Source,k;if(r.Type=="TableLiteral"&&l!=null){let W=[],J=0,ae=!1,ye=!1,$=0;if(l.forEach((U,j)=>{if(ae)W.push(U);else if(U.EntryType=="Value"||U.EntryType=="Index")if((U.Index==null||U.Index.Type=="NumberLiteral")&&U.Value){if((U.Index!=null&&U.Index.Token!=null&&U.Index.Token.Source!==null?U.Index.Token.Source:$+1).toString()!==(++$).toString())return ae=!0,ye=!0,W.push(U);U.Value.Type!="CallExpr"?J++:(ae=!0,W.push(U))}else W.push(U)}),ye)return;if(t=="#")return r.EntryList=W,r.EntryList.length<=0?T("NumberLiteral",J!==null?J:r.EntryList.length):J<=0?e("#",r):_("+",T("NumberLiteral",J),e("#",r))}if(r.Type=="BooleanLiteral"&&(k=o=="true"),!(r.Type=="NumberLiteral"&&(k=R(o),k===null))){if(r.Type=="StringLiteral"&&(k=o.substr(1,o.length-2)),t=="not"&&r.Type!==null)return r.Type=="NilLiteral"||r.Type=="BooleanLiteral"&&k===!1;if(k!=null){if(t=="#")return k.length;if(t=="-")return-k}}}c=function(t){if(t.Type=="BinopExpr"){if(c(t.Lhs),c(t.Rhs),t.Lhs!=null&&t.Rhs!=null){let r=t.Token_Op;if(r!=null&&r.Source!=null){let l=p(r.Source,t.Lhs,t.Rhs);if(l!=null){if(typeof l=="boolean"){let o=T("BooleanLiteral",l.toString(),"Keyword");g(t,o);return}else if(typeof l=="number"){if(isFinite(l)==!0){let o=T("NumberLiteral",l.toString(),"Number");g(t,o);return}}else if(typeof l=="string"){let o=T("StringLiteral",l,"String");g(t,o);return}else if(typeof l=="object"){g(t,l);return}return}}if(t.Lhs.Type=="ParenExpr"){let o=t.Lhs.Expression;o.Type=="NumberLiteral"||o.Type=="StringLiteral"||o.Type=="NilLiteral"||o.Type=="BooleanLiteral"||o.Type=="HashLiteral"}if(t.Rhs.Type=="ParenExpr"){let o=t.Rhs.Expression;o.Type=="NumberLiteral"||o.Type=="StringLiteral"||o.Type=="NilLiteral"||o.Type=="BooleanLiteral"||o.Type=="HashLiteral"}}}else if(t.Type=="UnopExpr"){if(c(t.Rhs),t.Rhs!=null&&d[t.Rhs.Type]==!0){let r=t.Token_Op;if(r!=null&&r.Source!=null){let l=t.Rhs.Expression!=null?t.Rhs.Expression:t.Rhs,o=L(r.Source,l);if(o!=null){if(typeof o=="boolean"){let k=T("BooleanLiteral",o.toString(),"Keyword");g(t,k);return}else if(typeof o=="number"){if(isFinite(o)==!0){let k=T("NumberLiteral",o,"Number");g(t,k);return}}else if(typeof o=="string"){let k=T("StringLiteral",o,"String");g(t,k);return}else if(typeof o=="object"){g(t,o);return}return}}}}else if(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral"){let r=t.Token;if(r!=null){if(r.Type=="Number"){let l=r.Source.toString().split("e");if(l.length===2){let o=R(l[0]),k=R(l[1]);isFinite(o)&&isFinite(k)&&o**k<999999999&&!r.Source.includes("+")&&r.Source.includes(".")&&!r.Source.includes("-")&&(r.Source=(o**k).toString())}}r.Type=="String"&&(r.Source=r.Source.replace(/\\\d+/gi,l=>{let o=R(l.substr(1,l.length-1));return o&&isFinite(o)&&(o>=97&&o<=122||o>=65&&o<=90||o>=33&&o<=47||o>=58&&o<=64||o>=91&&o<=96||o>=123&&o<=126)&&o!==34&&o!==39&&o!==92?String.fromCharCode(o):l}))}}else if(t.Type=="FieldExpr")c(t.Base);else if(t.Type=="IndexExpr")c(t.Base),c(t.Index);else if(t.Type=="MethodExpr"||t.Type=="CallExpr"){if(c(t.Base),t.FunctionArguments.CallType=="ArgCall"?t.FunctionArguments.ArgList.forEach((r,l)=>{c(r)}):t.FunctionArguments.CallType=="TableCall"&&c(t.FunctionArguments.TableExpr),t.Base.Type==="ParenExpr"&&t.Base.Expression.Type==="FunctionLiteral"&&t.FunctionArguments.CallType==="ArgCall"){let r=t.Base.Expression;t.FunctionArguments.ArgList.forEach((l,o)=>{let k=t.FunctionArguments.ArgList[o];if(k!==void 0&&(k.Type=="NumberLiteral"||k.Type=="StringLiteral"||k.Type=="NilLiteral"||k.Type=="BooleanLiteral"||k.Type=="HashLiteral")){let W=r.ArgList[o];W&&W.var.RenameList.forEach(J=>{J(k.Token.Source,!0)})}})}}else if(t.Type=="FunctionLiteral")y(t.Body);else if(t.Type!="VariableExpr")if(t.Type=="ParenExpr"){let r=t.Expression;r!=null&&r.Type=="ParenExpr"&&(t.Expression=r.Expression),c(t.Expression),(t.Type=="NumberLiteral"||t.Type=="StringLiteral"||t.Type=="NilLiteral"||t.Type=="BooleanLiteral"||t.Type=="VargLiteral"||t.Type=="HashLiteral")&&s(t)}else t.Type=="TableLiteral"&&t.EntryList.forEach((r,l)=>{r.EntryType=="Field"?c(r.Value):r.EntryType=="Index"?(c(r.Index),c(r.Value)):r.EntryType=="Value"?c(r.Value):C(!1,"unreachable")})},y=function(t){if(t.Type=="StatList")t.StatementList.forEach((r,l)=>{r===null||r.Type===null||(r.Remove=()=>{t.StatementList[l]=null},y(r))});else if(t.Type!="BreakStat"){if(t.Type!="ContinueStat")if(t.Type=="ReturnStat")t.ExprList.forEach((r,l)=>{c(r)});else if(t.Type=="LocalVarStat")t.Token_Equals!=null&&t.ExprList.forEach((r,l)=>{c(r)});else if(t.Type=="LocalFunctionStat")y(t.FunctionStat.Body),t.FunctionStat.NameChain.length===1&&t.FunctionStat.NameChain[0].UseCount;else if(t.Type=="FunctionStat")y(t.Body);else if(t.Type=="RepeatStat")y(t.Body),c(t.Condition),t.Body.Type=="StatList"&&t.Body.StatementList.length;else if(t.Type=="GenericForStat")t.GeneratorList.forEach((r,l)=>{c(r)}),y(t.Body);else if(t.Type=="NumericForStat"){t.RangeList.forEach((U,j)=>{c(U)}),y(t.Body);let r=t.RangeList[0],l=t.RangeList[1],o=t.RangeList[2];if(r==null||l==null)return t.Remove();if(s(r),s(l),s(o),r.Type!="NumberLiteral"||l.Type!="NumberLiteral"||o!=null&&o.Type!="NumberLiteral"||o==null)return;let k=R(r.Token.Source),W=R(l.Token.Source),J=o!=null&&R(o.Token.Source)||1,ae=J>0&&k<=W||J<0&&k>=W,ye=(W-k+J)/J;if(!(ae&&ye>=0)||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove()}else if(t.Type=="WhileStat"){c(t.Condition),y(t.Body);let r=t.Condition;switch(r.Type){case"ParenExpr":r=r.Expression;case"BooleanLiteral":if(r==null||r.Token==null||r.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else if(t.Type=="DoStat"){if(y(t.Body),t.Body===null||t.Body.Type=="StatList"&&t.Body.StatementList.length===0)return t.Remove();if(t.Body.StatementList.length===1){let r=t.Body.StatementList[0];r.Type!=="ContinueStat"&&r.Type!=="BreakStat"&&r.Type!=="ReturnStat"&&g(t,r)}}else if(t.Type=="IfStat"){c(t.Condition),y(t.Body),t.ElseClauseList.forEach((l,o)=>{l.Condition!=null&&c(l.Condition),y(l.Body)});let r=t.Condition;switch(r.Type){case"ParenExpr":r=r.Expression;case"BooleanLiteral":if(t.ElseClauseList.length>=1||r==null||r.Token==null||r.Token.Source!=="false")break;case"NilLiteral":t.Remove();break}}else t.Type=="CallExprStat"?c(t.Expression):t.Type=="CompoundStat"?(c(t.Lhs),c(t.Rhs)):t.Type=="AssignmentStat"&&(t.Lhs.forEach((r,l)=>{c(r)}),t.Rhs.forEach((r,l)=>{c(r)}))}},y(z)}let X=[],he;for(he=97;he<=122;he++)X.push(String.fromCharCode(he));for(he=65;he<=90;he++)X.push(String.fromCharCode(he));for(he=48;he<=57;he++)X.push(String.fromCharCode(he));X.push("_");let oe=[];for(he=97;he<=122;he++)oe.push(String.fromCharCode(he));for(he=65;he<=90;he++)oe.push(String.fromCharCode(he));function de(z){let y="",c=z%oe.length;for(z=(z-c)/oe.length,y=`${y}${oe[c]}`;z>0;){let d=z%X.length;z=(z-d)/X.length,y=`${y}${X[d]}`}return y}function m(z,y,c){let d=[];for(var[T,_]of Object.entries(Ye))d[T]=!0;let e=[];z.forEach(L=>{L.AssignedTo&&c?e.push(L):d[L.Name]=!0});function g(L){L.VariableList.forEach(t=>{e.push(t)}),L.ChildScopeList.forEach(t=>{g(t)})}g(y),e.forEach(L=>{L.UsedNameArray=[]}),e.sort((L,t)=>L-t);let f=0,s=[];function p(L){let t=s[L];if(t==null){for(t=de(f),f++;d[t];)t=de(f),f++;s[L]=t}return t}e.forEach((L,t)=>{L.Renamed=!0;let r=0;for(;L.UsedNameArray[r];)r++;L.Rename(p(r)),L.Scope?e.forEach(l=>{l.Renamed||(!l.Scope||l.Scope.Depth<L.Scope.Depth?l.ReferenceLocationList.some(o=>o>=L.BeginLocation&&o<=L.ScopeEndLocation?(l.UsedNameArray[r]=!0,!0):!1):l.Scope.Depth>L.Scope.Depth?L.ReferenceLocationList.some(o=>o>=l.BeginLocation&&o<=l.ScopeEndLocation?(l.UsedNameArray[r]=!0,!0):!1):L.BeginLocation<l.EndLocation&&L.EndLocation>l.BeginLocation&&(l.UsedNameArray[r]=!0))}):e.forEach(l=>{if(!l.Renamed)if(l.Type=="Global")l.UsedNameArray[r]=!0;else if(l.Type=="Local")L.ReferenceLocationList.some(o=>o>=l.BeginLocation&&o<=l.ScopeEndLocation?(l.UsedNameArray[r]=!0,!0):!1);else throw"Unreachable"})})}function N(z,y,c){let d=[];z.forEach(f=>{(!f.AssignedTo||!c)&&(d[f.Name]=!0)});let T=1,_=1;function e(f,s){f.Name=s,f.RenameList.forEach(p=>{p(s)})}if(c){let f={};z.forEach(s=>{s.AssignedTo&&!s.ChangedName&&(f[s.Name]=f[s.Name]||`G_${_}_`,s.ChangedName=!0,e(s,f[s.Name]),_++)})}function g(f){f.VariableList.forEach(s=>{let p=`L_${T}_`;s.Info.Type=="Argument"?p=`${p}arg${s.Info.Index}`:s.Info.Type=="LocalFunction"?p=`${p}func`:s.Info.Type=="ForRange"&&(p=`${p}forvar${s.Info.Index}`),e(s,p),T++}),f.ChildScopeList.forEach(s=>{g(s)})}g(y)}let ie=`--[[
	Code generated using github.com/Herrtt/luamin.js
	An open source Lua beautifier and minifier.
--]]

`,Pe={};Pe.Minify=function(z,y){let c=te(z),[d,T]=ot(c);y.RenameVariables==!0&&m(d,T,y.RenameGlobals),y.SolveMath==!0&&rt(c),nt(c);let _=st(c);return _=`${ie}

${_}`,_},Pe.Beautify=function(z,y){let c=te(z),[d,T]=ot(c);return y.RenameVariables&&N(d,T,y.RenameGlobals),y.SolveMath==!0&&rt(c),K(c),st(c)};try{et!=null&&et.exports!=null&&(et.exports.Beautify=Pe.Beautify,et.exports.Minify=Pe.Minify)}catch{}})(Gt);var _n=Gt.exports;const Mt=_n;vt.Beautify=Mt.Beautify;vt.Minify=Mt.Minify;vt.Uglify=Mt.Uglify;const Ot={master:`return {
  desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  hideminimap=false,
  id="ENDLESS",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="无尽",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="always",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="always",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="none",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="endless",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  settings_id="ENDLESS",
  settings_name="无尽",
  substitutes={  },
  version=4,
  worldgen_desc="永不结束的饥荒沙盒模式。\\
永远可以在绚丽之门复活。",
  worldgen_id="ENDLESS",
  worldgen_name="无尽" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="always",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="none",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="always",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="none",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},Wt={master:`return {
  desc="标准《饥荒》体验。",
  hideminimap=false,
  id="SURVIVAL_TOGETHER",
  location="forest",
  max_playlist_position=999,
  min_playlist_position=0,
  name="生存",
  numrandom_set_pieces=4,
  override_level_string=false,
  overrides={
    alternatehunt="default",
    angrybees="default",
    antliontribute="default",
    autumn="default",
    bananabush_portalrate="default",
    basicresource_regrowth="none",
    bats_setting="default",
    bearger="default",
    beefalo="default",
    beefaloheat="default",
    beequeen="default",
    bees="default",
    bees_setting="default",
    berrybush="default",
    birds="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen_setting="default",
    butterfly="default",
    buzzard="default",
    cactus="default",
    cactus_regrowth="default",
    carrot="default",
    carrots_regrowth="default",
    catcoon="default",
    catcoons="default",
    chess="default",
    cookiecutters="default",
    crabking="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker2="default",
    deciduousmonster="default",
    deciduoustree_regrowth="default",
    deerclops="default",
    dragonfly="default",
    dropeverythingondespawn="default",
    evergreen_regrowth="default",
    extrastartingitems="default",
    eyeofterror="default",
    fishschools="default",
    flint="default",
    flowers="default",
    flowers_regrowth="default",
    frograin="default",
    frogs="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    gnarwail="default",
    goosemoose="default",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    has_ocean=true,
    healthpenalty="always",
    hound_mounds="default",
    houndmound="default",
    hounds="default",
    hunger="default",
    hunt="default",
    junkyard="default",
    keep_disconnected_tiles=true,
    klaus="default",
    krampus="default",
    layout_mode="LinkNodesByKeys",
    lessdamagetaken="none",
    liefs="default",
    lightcrab_portalrate="default",
    lightning="default",
    lightninggoat="default",
    loop="default",
    lunarhail_frequency="default",
    lureplants="default",
    malbatross="default",
    marshbush="default",
    merm="default",
    merms="default",
    meteorshowers="default",
    meteorspawner="default",
    moles="default",
    moles_setting="default",
    monkeytail_portalrate="default",
    moon_berrybush="default",
    moon_bullkelp="default",
    moon_carrot="default",
    moon_fissure="default",
    moon_fruitdragon="default",
    moon_hotspring="default",
    moon_rock="default",
    moon_sapling="default",
    moon_spider="default",
    moon_spiders="default",
    moon_starfish="default",
    moon_tree="default",
    moon_tree_regrowth="default",
    mosquitos="default",
    mushroom="default",
    mutated_hounds="default",
    no_joining_islands=true,
    no_wormholes_to_disconnected_tiles=true,
    ocean_bullkelp="default",
    ocean_otterdens="default",
    ocean_seastack="ocean_default",
    ocean_shoal="default",
    ocean_waterplant="ocean_default",
    ocean_wobsterden="default",
    otters_setting="default",
    palmcone_seed_portalrate="default",
    palmconetree="default",
    palmconetree_regrowth="default",
    penguins="default",
    penguins_moon="default",
    perd="default",
    petrification="default",
    pigs="default",
    pigs_setting="default",
    pirateraids="default",
    ponds="default",
    portal_spawnrate="default",
    portalresurection="none",
    powder_monkey_portalrate="default",
    prefabswaps_start="default",
    rabbits="default",
    rabbits_setting="default",
    reeds="default",
    reeds_regrowth="default",
    regrowth="default",
    resettime="default",
    rifts_enabled="default",
    rifts_frequency="default",
    roads="default",
    rock="default",
    rock_ice="default",
    saltstack_regrowth="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    sharkboi="default",
    sharks="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    spring="default",
    squid="default",
    stageplays="default",
    start_location="default",
    summer="default",
    summerhounds="default",
    tallbirds="default",
    task_set="default",
    temperaturedamage="default",
    tentacles="default",
    terrariumchest="default",
    touchstone="default",
    trees="default",
    tumbleweed="default",
    twiggytrees_regrowth="default",
    walrus="default",
    walrus_setting="default",
    wasps="default",
    weather="default",
    wildfires="default",
    winter="default",
    winterhounds="default",
    winters_feast="default",
    wobsters="default",
    world_size="default",
    wormhole_prefab="wormhole",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  playstyle="survival",
  random_set_pieces={
    "Sculptures_2",
    "Sculptures_3",
    "Sculptures_4",
    "Sculptures_5",
    "Chessy_1",
    "Chessy_2",
    "Chessy_3",
    "Chessy_4",
    "Chessy_5",
    "Chessy_6",
    "Maxwell1",
    "Maxwell2",
    "Maxwell3",
    "Maxwell4",
    "Maxwell6",
    "Maxwell7",
    "Warzone_1",
    "Warzone_2",
    "Warzone_3" 
  },
  required_prefabs={ "multiplayer_portal" },
  required_setpieces={ "Sculptures_1", "Maxwell5" },
  settings_desc="标准《饥荒》体验。",
  settings_id="SURVIVAL_TOGETHER",
  settings_name="生存",
  substitutes={  },
  version=4,
  worldgen_desc="标准《饥荒》体验。",
  worldgen_id="SURVIVAL_TOGETHER",
  worldgen_name="生存" 
}`,caves:`return {
  background_node_range={ 0, 1 },
  desc="探查洞穴…… 一起！",
  hideminimap=false,
  id="DST_CAVE",
  location="cave",
  max_playlist_position=999,
  min_playlist_position=0,
  name="洞穴",
  numrandom_set_pieces=0,
  override_level_string=false,
  overrides={
    acidrain_enabled="always",
    atriumgate="default",
    banana="default",
    basicresource_regrowth="none",
    bats="default",
    bats_setting="default",
    beefaloheat="default",
    berrybush="default",
    boons="default",
    branching="default",
    brightmarecreatures="default",
    bunnymen="default",
    bunnymen_setting="default",
    cave_ponds="default",
    cave_spiders="default",
    cavelight="default",
    chess="default",
    chest_mimics="default",
    crow_carnival="default",
    darkness="default",
    day="default",
    daywalker="default",
    dropeverythingondespawn="default",
    dustmoths="default",
    earthquakes="default",
    extrastartingitems="default",
    fern="default",
    fissure="default",
    flint="default",
    flower_cave="default",
    flower_cave_regrowth="default",
    fruitfly="default",
    ghostenabled="always",
    ghostsanitydrain="always",
    grass="default",
    grassgekkos="default",
    hallowed_nights="default",
    healthpenalty="always",
    hunger="default",
    itemmimics="default",
    krampus="default",
    layout_mode="RestrictNodesByKey",
    lessdamagetaken="none",
    lichen="default",
    liefs="default",
    lightflier_flower_regrowth="default",
    lightfliers="default",
    loop="default",
    marshbush="default",
    merms="default",
    molebats="default",
    moles_setting="default",
    monkey="default",
    monkey_setting="default",
    mushgnome="default",
    mushroom="default",
    mushtree="default",
    mushtree_moon_regrowth="default",
    mushtree_regrowth="default",
    nightmarecreatures="default",
    pigs_setting="default",
    portalresurection="none",
    prefabswaps_start="default",
    reeds="default",
    regrowth="default",
    resettime="default",
    rifts_enabled_cave="default",
    rifts_frequency_cave="default",
    roads="never",
    rock="default",
    rocky="default",
    rocky_setting="default",
    sapling="default",
    season_start="default",
    seasonalstartingitems="default",
    shadowcreatures="default",
    slurper="default",
    slurtles="default",
    slurtles_setting="default",
    snurtles="default",
    spawnmode="fixed",
    spawnprotection="default",
    specialevent="default",
    spider_dropper="default",
    spider_hider="default",
    spider_spitter="default",
    spider_warriors="default",
    spiderqueen="default",
    spiders="default",
    spiders_setting="default",
    start_location="caves",
    task_set="cave_default",
    temperaturedamage="default",
    tentacles="default",
    toadstool="default",
    touchstone="default",
    trees="default",
    weather="default",
    winters_feast="default",
    world_size="default",
    wormattacks="default",
    wormattacks_boss="default",
    wormhole_prefab="tentacle_pillar",
    wormlights="default",
    worms="default",
    year_of_the_beefalo="default",
    year_of_the_bunnyman="default",
    year_of_the_carrat="default",
    year_of_the_catcoon="default",
    year_of_the_dragonfly="default",
    year_of_the_gobbler="default",
    year_of_the_pig="default",
    year_of_the_snake="default",
    year_of_the_varg="default" 
  },
  required_prefabs={ "multiplayer_portal" },
  settings_desc="探查洞穴…… 一起！",
  settings_id="DST_CAVE",
  settings_name="洞穴",
  substitutes={  },
  version=4,
  worldgen_desc="探查洞穴…… 一起！",
  worldgen_id="DST_CAVE",
  worldgen_name="洞穴" 
}`},yn={class:"page-div"},kn={class:"card-header"},bn={key:0},Sn={class:"el-form-item-msg"},Ln={class:"card-header"},vn={style:{display:"flex","flex-wrap":"wrap"}},Vn={style:{width:"99%"}},Cn={style:{width:"100%"}},En={style:{"font-weight":"bolder"}},wn={class:"item-container"},Fn={style:{"font-weight":"bolder"}},An={class:"item-container"},Bn={style:{"font-weight":"bolder"}},Gn={class:"item-container"},Mn={style:{"font-weight":"bolder"}},Rn={class:"item-container"},In={style:{"font-weight":"bolder"}},Pn={class:"item-container"},Un={style:{"font-weight":"bolder"}},xn={class:"item-container"},Nn={style:{"font-weight":"bolder"}},Dn={class:"item-container"},$n={style:{"font-weight":"bolder"}},On={class:"item-container"},Wn={style:{"font-weight":"bolder"}},zn={class:"item-container"},qn={style:{"font-weight":"bolder"}},Kn={class:"item-container"},jn={style:{"font-weight":"bolder"}},Hn={class:"item-container"},Jn={style:{"font-weight":"bolder"}},Yn={class:"item-container"},Zn={style:{"font-weight":"bolder"}},Xn={class:"item-container"},Qn={style:{"font-weight":"bolder"}},el={class:"item-container"},tl={style:{"font-weight":"bolder"}},nl={class:"item-container"},ll={style:{"font-weight":"bolder"}},al={class:"item-container"},ol={style:{"font-weight":"bolder"}},rl={class:"item-container"},il={style:{"font-weight":"bolder"}},ul={class:"item-container"},sl={style:{"font-weight":"bolder"}},dl={class:"item-container"},fl={style:{"font-weight":"bolder"}},cl={class:"item-container"},pl={style:{"font-weight":"bolder"}},ml={class:"item-container"},gl={style:{"font-weight":"bolder"}},hl={class:"item-container"},Tl={style:{"font-weight":"bolder"}},_l={class:"item-container"},yl={key:0,class:"tip_warning"},kl={style:{display:"flex","align-items":"center"}},bl={style:{display:"flex","justify-content":"flex-end"}},Sl={class:"tip_warning"},Ll={style:{margin:"50px"}},vl={style:{display:"flex","align-items":"center"}},Vl={style:{"margin-right":"10px"}},Cl={style:{display:"flex","justify-content":"flex-end","padding-top":"10px"}},El=hn({name:"settingsRoom"}),wl=Object.assign(El,{setup(et){const{t:V}=rn();un(async()=>{C.value=window.innerHeight,window.addEventListener("resize",()=>{C.value=window.innerHeight}),await ee(),y()});const ce=Ae(!1),C=Ae(0),{isMobile:R}=sn(),pe=dn(),se=At(()=>pe.isDark),Z=At(()=>pe.language),Ce=At(()=>{const o=(pe.dstClusters||[]).findIndex(k=>k.clusterName===pe.selectedDstCluster);return o!==-1?o:0}),We=fn();cn();const Je=pn(),it=mn("refresh"),ut=(l,o)=>{let k=null;return(...W)=>{k&&clearTimeout(k),k=setTimeout(()=>l(...W),o)}},ze=()=>{ht.clusters.get().then(l=>{pe.dstClusters=l.data,pe.selectedDstCluster===null&&pe.dstClusters!==null&&(pe.selectedDstCluster=pe.dstClusters[0].clusterName)})},Be=()=>{setTimeout(()=>{We.meta.isKeepAlive&&Je.removeKeepAliveName(We.name),it(!1),pt(()=>{We.meta.isKeepAlive&&Je.addKeepAliveName(We.name),it(!0)})},0)},ge=Ae(0),Ee=l=>{ge.value>l&&(ge.value=l)},Ye=()=>{ge.value--},Ne=async()=>{if(ge.value===0&&Ze.value.validate(l=>{l&&ge.value++}),ge.value===1){for(let l in z)z!=null&&z.key&&await z[l].validate();for(let l of ie.value){if(l.levelData===""){mt(Z.value==="zh"?"请输入世界配置":"Please input world configure");return}try{gt.parse(l.levelData)}catch{mt(V("setting.luaError"));return}}ge.value++;return}if(ge.value===2)if(Y.value)try{gt.parse(Y.value.mod),ge.value++}catch{mt(V("setting.luaError"))}else ge.value++},Ze=Ae(),le=Ae({clusterName:pe.selectedDstCluster,name:"",description:"",gameMode:"",pvp:!1,playerNum:6,backDays:10,vote:!1,password:"",token:""}),tt={name:[{required:!0,message:V("setting.roomBaseFormRules.name"),trigger:"blur"}],masterPort:[{required:!0,message:V("setting.roomBaseFormRules.masterPort"),trigger:"blur"}],cavesPort:[{required:!0,message:V("setting.roomBaseFormRules.cavesPort"),trigger:"blur"}],gameMode:[{required:!0,message:V("setting.roomBaseFormRules.gameMode"),trigger:"change"}],token:[{required:!0,message:V("setting.roomBaseFormRules.token"),trigger:"blur"}]},Y=Ae({mod:""}),ee=()=>{const l={clusterName:pe.selectedDstCluster};ht.cluster.get(l).then(o=>{if(le.value=o.data.clusterSetting,o.data.worlds){ie.value=o.data.worlds;let k=1,W=999999;for(let J of ie.value){let ae=parseInt(J.name.replace("World",""));ae>k&&(k=ae),ae<W&&(W=ae),J.saved=!0}m.value=k,N.value="World"+W.toString()}else m.value=1,N.value="World1",ie.value=[{id:1,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Ce.value*10,shardMasterPort:10888+Ce.value*10,steamMasterPort:27018+Ce.value*10,steamAuthenticationPort:8768+Ce.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0,saved:!1}];Y.value.mod=o.data.mod})},te=async l=>{switch(l){case"save":qe();break;case"saveAndRestart":ot();break;case"generateNewWorld":st();break}},qe=()=>{const l={clusterSetting:le.value,worlds:ie.value,mod:Y.value.mod,sysSetting:{}};ce.value=!0,ht.cluster.save.post(l).then(o=>{Bt(o.message),ce.value=!1,ze()}).finally(()=>{ce.value=!1,pt(()=>{Be()})})},ot=()=>{const l={clusterSetting:le.value,worlds:ie.value,mod:Y.value.mod,sysSetting:{}};ce.value=!0,ht.cluster.saveRestart.post(l).then(o=>{Bt(o.message),ce.value=!1,ze()}).finally(()=>{ce.value=!1,pt(()=>{Be()})})},st=()=>{const l={clusterSetting:le.value,worlds:ie.value,mod:Y.value.mod,sysSetting:{}};ce.value=!0,ht.cluster.saveRegenerate.post(l).then(o=>{Bt(o.message),ce.value=!1,ze()}).finally(()=>{ce.value=!1,pt(()=>{Be()})})},K=Ae({}),nt=l=>{if(l==="")return;const o=gt.parse(l),k=rt(o);K.value=X(k)};function rt(l){const k=l.body[0].arguments[0];for(const W of k.fields)if(W.key.type==="Identifier"&&W.key.name==="overrides")return W.value;return null}function X(l){const o={};for(const k of l.fields){const W=k.key.name;o[W]=k.value.raw.replace(/"/g,"")}return o}const he=l=>{let o=vt.Beautify(l,{RenameVariables:!1,RenameGlobals:!1,SolveMath:!1});return o=o.replace(/--\[\[\n\t.+\n\t.+\n--]]\n\n\n\n\n/g,""),o=o.replace(/ = /g,"="),o=o.replace(/\t/g,"  "),o=o.replace(/overrides=\{ +(.+)\n/g,`overrides={
    $1
`),o=o.replace(/^(\w+)=(.+)\n/gm,`    $1=$2
`),o=o.replace(/(.+)},\n/g,`$1
  },
`),o=o.replace(/^ +?\n/gm,""),o},oe=ut(l=>{const o=l.name,k=l.value;for(let W of ie.value)if(W.name===N.value){const J=gt.parse(W.levelData),ae=rt(J);for(let ye of ae.fields)ye.key.name===o&&(ye.value.raw=`"${k}"`);W.levelData=de(J);break}},100),de=(l,o=0)=>{const k="    ".repeat(o);switch(l.type){case"Chunk":return l.body.map(W=>de(W,o)).join(`
`);case"LocalStatement":return`${k}local ${l.variables.map(de).join(", ")} = ${l.init.map(de).join(", ")}`;case"FunctionDeclaration":return`${k}function ${de(l.identifier)}(${l.parameters.map(de).join(", ")}) 
${de(l.body,o+1)}
${k}end`;case"ReturnStatement":return`${k}return ${l.arguments.map(de).join(", ")}`;case"BinaryExpression":return`${de(l.left)} ${l.operator} ${de(l.right)}`;case"CallStatement":return`${k}${de(l.expression)}`;case"Identifier":return l.name;case"StringLiteral":return`${l.raw}`;case"NumericLiteral":return l.raw;case"VarargLiteral":return"...";case"TableConstructorExpression":return`${k}{ ${l.fields.map(W=>de(W,o+1)).join(`,
`+k)} }`;case"Field":return l.key?`${de(l.key)} = ${de(l.value)}`:de(l.value);case"AssignmentStatement":return`${k}${l.variables.map(de).join(", ")} = ${l.init.map(de).join(", ")}`;case"CallExpression":return`${de(l.base)}(${l.arguments.map(de).join(", ")})`;case"TableKeyString":return`${de(l.key)} = ${de(l.value)}`;case"BooleanLiteral":return l.raw;case"TableKey":return`[${de(l.key)}] = ${de(l.value)}`;case"TableValue":return de(l.value);default:throw new Error(`Unsupported node type: ${l.type}`)}},m=Ae(1),N=Ae("World1"),ie=Ae([{id:1,name:"World1",isMaster:!0,levelData:"",serverPort:11001+Ce.value*10,shardMasterPort:10888+Ce.value*10,steamMasterPort:27018+Ce.value*10,steamAuthenticationPort:8768+Ce.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}]),Pe={id:[{required:!0,message:V("setting.roomWorldFormRules.id"),trigger:"blur"}],isMaster:[{required:!0,trigger:"change"}],encodeUserPath:[{required:!0,trigger:"change"}],serverPort:[{required:!0,message:V("setting.roomWorldFormRules.masterPort"),trigger:"blur"}],shardMasterPort:[{required:!0,message:V("setting.roomWorldFormRules.shardMasterPort"),trigger:"blur"}],steamMasterPort:[{required:!0,message:V("setting.roomWorldFormRules.steamMasterPort"),trigger:"blur"}],steamAuthenticationPort:[{required:!0,message:V("setting.roomWorldFormRules.steamAuthenticationPort"),trigger:"blur"}],shardMasterIp:[{required:!0,message:V("setting.roomWorldFormRules.shardMasterIp"),trigger:"blur"}],clusterKey:[{required:!0,message:V("setting.roomWorldFormRules.clusterKey"),trigger:"blur"}]},z={},y=()=>{for(let l of ie.value){const o=ie.value.length;m.value=o,z[`World${o}`]=Ae()}},c=(l,o)=>{if(o==="add"){m.value++;const k=`World${m.value}`;z[k]=Ae(),ie.value.push({id:m.value,name:k,isMaster:!1,levelData:"",serverPort:11e3+m.value+Ce.value*10,shardMasterPort:10887+m.value+Ce.value*10,steamMasterPort:27017+m.value+Ce.value*10,steamAuthenticationPort:8767+m.value+Ce.value*10,shardMasterIp:"127.0.0.1",clusterKey:"supersecretkey",encodeUserPath:!0}),N.value=k}else if(o==="remove"){if(ie.value.length===1){mt(Z.value==="zh"?"每个房间至少含有一个世界":"Every room must include at least one world");return}const k=ie.value;let W=N.value;k.forEach((J,ae)=>{if(J.name===l){const ye=k[ae+1]||k[ae-1];ye&&(W=ye.name)}}),N.value=W,ie.value=k.filter(J=>J.name!==l),delete z[l]}d.value="Code"},d=Ae("Code"),T=l=>{for(let o of ie.value)o.name===N.value&&(l.clusterType==="endless"&&(l.worldType==="ground"&&(o.levelData=Ot.master),l.worldType==="cave"&&(o.levelData=Ot.caves)),l.clusterType==="survival"&&(l.worldType==="ground"&&(o.levelData=Wt.master),l.worldType==="cave"&&(o.levelData=Wt.caves)))},_=Ae(""),e=async l=>{if(l==="Visualization")try{for(let o of ie.value)if(o.name===N.value){_.value=g(o.levelData),await nt(o.levelData);break}}catch{mt(Z.value==="zh"?"可视化配置加载失败":"Visualization load failed")}l==="Code"&&await pt(()=>{for(let o of ie.value)if(o.name===N.value){o.levelData=he(o.levelData);break}})},g=l=>{const o=/location\s*=\s*"([^"]*)"/,k=l.match(o);return k?k[1]:""},f=()=>{d.value="Code"},s=Ae(!1),p=Ae({}),L=Ae({}),t=()=>{p.value={},L.value={},s.value=!0},r=()=>{if(Object.keys(p.value).length!==ie.value.length){mt(Z.value==="zh"?"世界名为必填项":"World name is required");return}let l="";for(let ae in p.value)l=l+`["${ae}"]="${p.value[ae]}",`;let o="";for(let ae in L.value)o=o+`["${ae}"]="${L.value[ae]}",`;l=l.slice(0,-1),o=o.slice(0,-1);let k=`return {["workshop-1438233888"]={
    configuration_options={
      auto_balancing=true,
      extra_worlds={},
      ignore_sinkholes=false,
      invisible_worlds={},
      language="auto",
      migration_postern=false,
      no_bat=true,
      population_limit={${o}},
      say_dest=true,
      world_name={${l}},
      world_prompt=true
    },
    enabled=true
  }}`;Y.value.mod===""&&(Y.value.mod="return {}");const W=gt.parse(Y.value.mod),J=gt.parse(k);for(const[ae,ye]of W.body[0].arguments[0].fields.entries())ye.key.raw==='"workshop-1438233888"'&&W.body[0].arguments[0].fields.splice(ae,1);W.body[0].arguments[0].fields.push(J.body[0].arguments[0].fields[0]),Y.value.mod=he(de(W)),s.value=!1};return gn(()=>pe.selectedDstCluster,l=>{l&&pt(()=>{Be()})},{immediate:!1}),(l,o)=>{const k=be("el-step"),W=be("el-steps"),J=be("el-card"),ae=be("el-col"),ye=be("el-row"),$=be("el-input"),U=be("el-form-item"),j=be("el-radio"),dt=be("el-radio-group"),$e=be("el-switch"),De=be("el-slider"),Ke=be("el-link"),lt=be("el-form"),ft=be("el-scrollbar"),ct=be("el-icon"),Xe=be("el-button"),je=be("el-dropdown-item"),Oe=be("el-dropdown-menu"),He=be("el-dropdown"),Ge=be("el-tooltip"),Fe=be("el-tab-pane"),b=be("el-divider"),M=be("el-tabs"),w=be("el-result"),v=be("el-tag"),P=be("el-dialog");return x(),H("div",yn,[E(ye,{gutter:10},{default:G(()=>[E(ae,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:G(()=>[E(J,{shadow:"never"},{default:G(()=>[E(W,{active:ge.value,"align-center":"","finish-status":"success"},{default:G(()=>[E(k,{title:i(R)?i(V)("setting.roomSettingMobile"):i(V)("setting.roomSetting"),onClick:o[0]||(o[0]=S=>Ee(0))},null,8,["title"]),E(k,{title:i(R)?i(V)("setting.worldSettingMobile"):i(V)("setting.worldSetting"),onClick:o[1]||(o[1]=S=>Ee(1))},null,8,["title"]),E(k,{title:i(R)?i(V)("setting.modSettingMobile"):i(V)("setting.modSetting"),onClick:o[2]||(o[2]=S=>Ee(3))},null,8,["title"]),E(k,{title:i(R)?i(V)("setting.finishSettingMobile"):i(V)("setting.finishSetting"),onClick:o[3]||(o[3]=S=>Ee(2))},null,8,["title"])]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),E(ye,{gutter:10,style:{"margin-top":"5px"}},{default:G(()=>[E(ae,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[ge.value===0?(x(),ue(J,{key:0,shadow:"never"},{header:G(()=>[q("div",kn,[q("span",null,O(i(V)("setting.roomSetting")),1)])]),default:G(()=>[E(ft,{height:C.value-450},{default:G(()=>[E(lt,{ref_key:"clusterSettingFormRef",ref:Ze,"label-position":i(R)?"top":"left","label-width":i(R)?"70":"auto",model:le.value,rules:tt,size:i(R)?"small":"large"},{default:G(()=>[E(U,{label:i(V)("setting.baseForm.room"),prop:"name",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E($,{modelValue:le.value.name,"onUpdate:modelValue":o[4]||(o[4]=S=>le.value.name=S)},null,8,["modelValue"])]),_:1},8,["label","style"]),i(R)?xe("",!0):(x(),H("div",bn)),E(U,{label:i(V)("setting.baseForm.description"),prop:"description",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E($,{modelValue:le.value.description,"onUpdate:modelValue":o[5]||(o[5]=S=>le.value.description=S)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.gameMode.name"),prop:"gameMode",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(dt,{modelValue:le.value.gameMode,"onUpdate:modelValue":o[6]||(o[6]=S=>le.value.gameMode=S)},{default:G(()=>[E(j,{label:i(V)("setting.baseForm.gameMode.endless"),value:"endless"},null,8,["label"]),E(j,{label:i(V)("setting.baseForm.gameMode.survival"),value:"survival"},null,8,["label"]),E(j,{label:i(V)("setting.baseForm.gameMode.lavaarena"),value:"lavaarena"},null,8,["label"]),E(j,{label:i(V)("setting.baseForm.gameMode.quagmire"),value:"quagmire"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.pvp"),prop:"pvp",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E($e,{modelValue:le.value.pvp,"onUpdate:modelValue":o[7]||(o[7]=S=>le.value.pvp=S)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.playerNum"),prop:"playerNum",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(De,{modelValue:le.value.playerNum,"onUpdate:modelValue":o[8]||(o[8]=S=>le.value.playerNum=S),max:100,min:2,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.backDays"),prop:"backDays",style:Qe(i(R)?"padding-top: 0px":"padding-top: 25px")},{default:G(()=>[E(De,{modelValue:le.value.backDays,"onUpdate:modelValue":o[9]||(o[9]=S=>le.value.backDays=S),max:50,min:5,"show-input":"",size:"small"},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.vote"),prop:"vote",style:Qe(i(R)?"padding-top: 0px":"padding-top: 29px")},{default:G(()=>[E($e,{modelValue:le.value.vote,"onUpdate:modelValue":o[10]||(o[10]=S=>le.value.vote=S)},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.password"),style:Qe(i(R)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[E($,{modelValue:le.value.password,"onUpdate:modelValue":o[11]||(o[11]=S=>le.value.password=S),autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1},8,["label","style"]),E(U,{label:i(V)("setting.baseForm.token"),prop:"token",style:Qe(i(R)?"padding-top: 0px":"padding-top: 30px")},{default:G(()=>[E($,{modelValue:le.value.token,"onUpdate:modelValue":o[12]||(o[12]=S=>le.value.token=S),"show-password":""},null,8,["modelValue"]),q("div",Sn,[E(Ke,{underline:!1,href:"https://accounts.klei.com",target:"_blank"},{default:G(()=>[ne(O(i(V)("setting.baseForm.tokenHelp")),1)]),_:1})])]),_:1},8,["label","style"])]),_:1},8,["label-position","label-width","model","size"])]),_:1},8,["height"])]),_:1})):xe("",!0),ge.value===1?(x(),ue(J,{key:1,shadow:"never"},{header:G(()=>[q("div",Ln,[q("span",null,O(i(V)("setting.worldSetting")),1),q("div",null,[E(He,{trigger:"click",onCommand:T},{dropdown:G(()=>[E(Oe,null,{default:G(()=>[E(je,{command:{clusterType:"endless",worldType:"ground"},disabled:le.value.gameMode!=="endless"},{default:G(()=>[ne(O(i(V)("setting.endless"))+"-"+O(i(V)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),E(je,{command:{clusterType:"endless",worldType:"cave"},disabled:le.value.gameMode!=="endless"},{default:G(()=>[ne(O(i(V)("setting.endless"))+"-"+O(i(V)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"]),E(je,{command:{clusterType:"survival",worldType:"ground"},disabled:le.value.gameMode!=="survival"},{default:G(()=>[ne(O(i(V)("setting.survival"))+"-"+O(i(V)("setting.groundSettingMobile")),1)]),_:1},8,["disabled"]),E(je,{command:{clusterType:"survival",worldType:"cave"},disabled:le.value.gameMode!=="survival"},{default:G(()=>[ne(O(i(V)("setting.survival"))+"-"+O(i(V)("setting.caveSettingMobile")),1)]),_:1},8,["disabled"])]),_:1})]),default:G(()=>[E(Xe,{disabled:d.value!=="Code",type:"success"},{default:G(()=>[ne(O(i(V)("setting.oneClick"))+" ",1),E(ct,{class:"el-icon--right"},{default:G(()=>[E(i(Dt))]),_:1})]),_:1},8,["disabled"])]),_:1})])])]),default:G(()=>[E(ft,{height:C.value-450},{default:G(()=>[E(M,{modelValue:N.value,"onUpdate:modelValue":o[14]||(o[14]=S=>N.value=S),editable:"",type:"card",onEdit:c,onTabChange:f},{default:G(()=>[(x(!0),H(ke,null,Se(ie.value,S=>(x(),ue(Fe,{key:S.name,label:Z.value==="zh"?"世界":"World",name:S.name},{default:G(()=>[E(ye,null,{default:G(()=>[E(lt,{ref_for:!0,ref:a=>z[S.name]=a,"label-position":i(R)||Z.value==="en"?"top":"left",model:S,rules:Pe,size:i(R)?"small":"large",inline:"","label-width":"120px",style:{"margin-top":"10px"}},{default:G(()=>[q("div",vn,[E(U,{label:i(V)("setting.isMaster"),prop:"isMaster",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.isMasterTip"),effect:"light",placement:"top"},{default:G(()=>[E($e,{modelValue:S.isMaster,"onUpdate:modelValue":a=>S.isMaster=a,"active-text":Z.value==="zh"?"是":"Y","inactive-text":Z.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.system.encodeUserPath.divider"),prop:"encodeUserPath",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.encodeUserPathTip"),effect:"light",placement:"top"},{default:G(()=>[E($e,{modelValue:S.encodeUserPath,"onUpdate:modelValue":a=>S.encodeUserPath=a,"active-text":Z.value==="zh"?"是":"Y","inactive-text":Z.value==="zh"?"否":"N","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.roomWorldForm.id"),prop:"id",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.idTip"),effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.id,"onUpdate:modelValue":a=>S.id=a,modelModifiers:{number:!0},disabled:S.saved,size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.serverPort"),prop:"serverPort",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.serverPortTip"),effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.serverPort,"onUpdate:modelValue":a=>S.serverPort=a,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.roomWorldForm.shardMasterPort"),prop:"shardMasterPort",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.noEdit")+"，cluster.ini -> [SHARD] -> master_port",effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.shardMasterPort,"onUpdate:modelValue":a=>S.shardMasterPort=a,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.roomWorldForm.steamMasterPort"),prop:"steamMasterPort",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.noEdit")+"，server.ini -> [STEAM] -> server_master_port",effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.steamMasterPort,"onUpdate:modelValue":a=>S.steamMasterPort=a,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.roomWorldForm.steamAuthenticationPort"),prop:"steamAuthenticationPort",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.noEdit")+"，server.ini -> [STEAM] -> authentication_port",effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.steamAuthenticationPort,"onUpdate:modelValue":a=>S.steamAuthenticationPort=a,modelModifiers:{number:!0},size:"default",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.shardMasterIp"),prop:"shardMasterIp",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.shardMasterIpTip"),effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.shardMasterIp,"onUpdate:modelValue":a=>S.shardMasterIp=a,disabled:S.isMaster,size:"default"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["content"])]),_:2},1032,["label"]),E(U,{label:i(V)("setting.roomWorldForm.clusterKey"),prop:"clusterKey",style:{width:"250px"}},{default:G(()=>[E(Ge,{"show-after":100,content:i(V)("setting.clusterKeyTip"),effect:"light",placement:"top"},{default:G(()=>[E($,{modelValue:S.clusterKey,"onUpdate:modelValue":a=>S.clusterKey=a,autocomplete:"new-password","show-password":"",size:"default",type:"password"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])]),_:2},1032,["label"])])]),_:2},1032,["label-position","model","size"])]),_:2},1024),q("div",Vn,[E(M,{modelValue:d.value,"onUpdate:modelValue":o[13]||(o[13]=a=>d.value=a),onTabChange:e},{default:G(()=>[E(Fe,{label:Z.value==="zh"?"配置文件":"Code",name:"Code"},{default:G(()=>[q("div",Cn,[E(lt,{model:S},{default:G(()=>[E(U,null,{default:G(()=>[E($t,{modelValue:S.levelData,"onUpdate:modelValue":a=>S.levelData=a,height:C.value*.5,theme:se.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","height","theme"])]),_:2},1024)]),_:2},1032,["model"])])]),_:2},1032,["label"]),(le.value.gameMode==="endless"||le.value.gameMode==="survival")&&S.levelData!==""?(x(),ue(Fe,{key:0,label:i(V)("setting.tabVisualization"),lazy:"",name:"Visualization"},{default:G(()=>[_.value==="forest"&&Object.keys(K.value).length!==0?(x(),H(ke,{key:0},[E(b,{"content-position":"center"},{default:G(()=>[q("span",En,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.global")),1)]),_:1}),q("div",wn,[(x(!0),H(ke,null,Se(i(at).global,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Fn,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.events")),1)]),_:1}),q("div",An,[(x(!0),H(ke,null,Se(i(at).events,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Bn,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.survivors")),1)]),_:1}),q("div",Gn,[(x(!0),H(ke,null,Se(i(at).survivors,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Mn,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.world")),1)]),_:1}),q("div",Rn,[(x(!0),H(ke,null,Se(i(at).world,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",In,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),q("div",Pn,[(x(!0),H(ke,null,Se(i(at).resourceRegrowth,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Un,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.unnaturalPortalResource")),1)]),_:1}),q("div",xn,[(x(!0),H(ke,null,Se(i(at).unnaturalPortalResource,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Nn,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.creatures")),1)]),_:1}),q("div",Dn,[(x(!0),H(ke,null,Se(i(at).creatures,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",$n,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.hostileCreatures")),1)]),_:1}),q("div",On,[(x(!0),H(ke,null,Se(i(at).hostileCreatures,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Wn,O(i(V)("setting.groundVisualizationRule")),1),ne(" - "+O(i(V)("setting.groundVisualizationRuleItem.giants")),1)]),_:1}),q("div",zn,[(x(!0),H(ke,null,Se(i(at).giants,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",qn,O(i(V)("setting.groundVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.groundVisualizationGenerationItem.global")),1)]),_:1}),q("div",Kn,[(x(!0),H(ke,null,Se(i(Tt).global,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",jn,O(i(V)("setting.groundVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.groundVisualizationGenerationItem.world")),1)]),_:1}),q("div",Hn,[(x(!0),H(ke,null,Se(i(Tt).world,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Jn,O(i(V)("setting.groundVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.groundVisualizationGenerationItem.resources")),1)]),_:1}),q("div",Yn,[(x(!0),H(ke,null,Se(i(Tt).resources,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Zn,O(i(V)("setting.groundVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.groundVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),q("div",Xn,[(x(!0),H(ke,null,Se(i(Tt).creaturesAndSpawners,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Qn,O(i(V)("setting.groundVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.groundVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),q("div",el,[(x(!0),H(ke,null,Se(i(Tt).hostileCreaturesAndSpawners,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):xe("",!0),_.value==="cave"&&Object.keys(K.value).length!==0?(x(),H(ke,{key:1},[E(b,{"content-position":"center"},{default:G(()=>[q("span",tl,O(i(V)("setting.cavesVisualizationRule")),1),ne(" - "+O(i(V)("setting.cavesVisualizationRuleItem.world")),1)]),_:1}),q("div",nl,[(x(!0),H(ke,null,Se(i(_t).world,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",ll,O(i(V)("setting.cavesVisualizationRule")),1),ne(" - "+O(i(V)("setting.cavesVisualizationRuleItem.resourceRegrowth")),1)]),_:1}),q("div",al,[(x(!0),H(ke,null,Se(i(_t).resourceRegrowth,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",ol,O(i(V)("setting.cavesVisualizationRule")),1),ne(" - "+O(i(V)("setting.cavesVisualizationRuleItem.creatures")),1)]),_:1}),q("div",rl,[(x(!0),H(ke,null,Se(i(_t).creatures,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",il,O(i(V)("setting.cavesVisualizationRule")),1),ne(" - "+O(i(V)("setting.cavesVisualizationRuleItem.hostileCreatures")),1)]),_:1}),q("div",ul,[(x(!0),H(ke,null,Se(i(_t).hostileCreatures,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",sl,O(i(V)("setting.cavesVisualizationRule")),1),ne(" - "+O(i(V)("setting.cavesVisualizationRuleItem.giants")),1)]),_:1}),q("div",dl,[(x(!0),H(ke,null,Se(i(_t).giants,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",fl,O(i(V)("setting.cavesVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.cavesVisualizationGenerationItem.world")),1)]),_:1}),q("div",cl,[(x(!0),H(ke,null,Se(i(St).world,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(yt)[a].configs,customConfigsValue:i(yt)[a].customConfigsValue,defaultModelValue:i(yt)[a].modelValue,i18n:i(yt)[a].i18n,image:i(yt)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",pl,O(i(V)("setting.cavesVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.cavesVisualizationGenerationItem.resources")),1)]),_:1}),q("div",ml,[(x(!0),H(ke,null,Se(i(St).resources,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",gl,O(i(V)("setting.cavesVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.cavesVisualizationGenerationItem.creaturesAndSpawners")),1)]),_:1}),q("div",hl,[(x(!0),H(ke,null,Se(i(St).creaturesAndSpawners,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))]),E(b,{"content-position":"center"},{default:G(()=>[q("span",Tl,O(i(V)("setting.cavesVisualizationGeneration")),1),ne(" - "+O(i(V)("setting.cavesVisualizationGenerationItem.hostileCreaturesAndSpawners")),1)]),_:1}),q("div",_l,[(x(!0),H(ke,null,Se(i(St).hostileCreaturesAndSpawners,(a,A)=>(x(),H("div",null,[(x(),ue(Le,{key:A,modelValue:K.value[a],"onUpdate:modelValue":I=>K.value[a]=I,configs:i(B)[a].configs,customConfigsValue:i(B)[a].customConfigsValue,defaultModelValue:i(B)[a].modelValue,i18n:i(B)[a].i18n,image:i(B)[a].image,name:a,onChangeModelValue:i(oe)},null,8,["modelValue","onUpdate:modelValue","configs","customConfigsValue","defaultModelValue","i18n","image","name","onChangeModelValue"]))]))),256))])],64)):xe("",!0)]),_:2},1032,["label"])):xe("",!0)]),_:2},1032,["modelValue"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["height"])]),_:1})):xe("",!0),ge.value===2?(x(),ue(J,{key:2,shadow:"never"},{default:G(()=>[ie.value.length>2?(x(),H("div",yl,[q("div",kl,[q("span",null,O(i(V)("setting.multiWorldTip")),1),E(Xe,{size:"small",style:{"margin-left":"10px"},type:"warning",onClick:t},{default:G(()=>[ne(O(Z.value==="zh"?"多层世界":"Multi-world"),1)]),_:1})])])):xe("",!0),E(lt,{model:Y.value},{default:G(()=>[E(U,null,{default:G(()=>[E($t,{modelValue:Y.value.mod,"onUpdate:modelValue":o[15]||(o[15]=S=>Y.value.mod=S),height:C.value-400,theme:se.value?"darcula":"idea",mode:"lua",style:{width:"100%"}},null,8,["modelValue","height","theme"])]),_:1})]),_:1},8,["model"])]),_:1})):xe("",!0),ge.value===3?(x(),ue(J,{key:3,shadow:"never"},{default:G(()=>[q("div",{style:Qe({height:`${C.value-400}px`}),class:"fcc"},[E(w,{"sub-title":i(V)("setting.finish.description"),title:i(V)("setting.finish.title"),icon:"success"},null,8,["sub-title","title"])],4)]),_:1})):xe("",!0)]),_:1})]),_:1}),E(ye,{gutter:10},{default:G(()=>[E(ae,{lg:24,md:24,sm:24,span:24,xs:24},{default:G(()=>[E(J,{shadow:"never"},{default:G(()=>[q("div",bl,[ge.value>0?(x(),ue(Xe,{key:0,onClick:Ye},{default:G(()=>[ne(O(i(V)("setting.button.prev")),1)]),_:1})):xe("",!0),ge.value<3?(x(),ue(Xe,{key:1,type:"primary",onClick:Ne},{default:G(()=>[ne(O(i(V)("setting.button.next")),1)]),_:1})):xe("",!0),ge.value===3?(x(),ue(He,{key:2,style:{"margin-left":"12px"},trigger:"click",onCommand:te},{dropdown:G(()=>[E(Oe,null,{default:G(()=>[E(je,{command:"save"},{default:G(()=>[ne(O(i(V)("setting.button.save")),1)]),_:1}),E(je,{command:"saveAndRestart"},{default:G(()=>[ne(O(i(V)("setting.button.saveAndRestart")),1)]),_:1}),E(je,{command:"generateNewWorld"},{default:G(()=>[ne(O(i(V)("setting.button.generateNewWorld")),1)]),_:1})]),_:1})]),default:G(()=>[E(Xe,{loading:ce.value,type:"warning"},{default:G(()=>[ne(O(i(V)("setting.button.actions"))+" ",1),E(ct,{class:"el-icon--right"},{default:G(()=>[E(i(Dt))]),_:1})]),_:1},8,["loading"])]),_:1})):xe("",!0)])]),_:1})]),_:1})]),_:1}),E(P,{modelValue:s.value,"onUpdate:modelValue":o[16]||(o[16]=S=>s.value=S),width:"50%"},{header:G(()=>[ne(O(i(V)("setting.multiWorldDialog.title")),1)]),default:G(()=>[q("div",Sl,O(i(V)("setting.multiWorldDialog.tip")),1),q("div",Ll,[E(lt,{model:p.value,"label-position":"top"},{default:G(()=>[(x(!0),H(ke,null,Se(ie.value,S=>(x(),ue(U,null,{label:G(()=>[q("div",vl,[q("span",Vl,O(S.name),1),g(S.levelData)==="forest"?(x(),ue(v,{key:0,type:"primary"},{default:G(()=>[ne(O(Z.value==="zh"?"地面":"Ground"),1)]),_:1})):xe("",!0),g(S.levelData)==="cave"?(x(),ue(v,{key:1,type:"info"},{default:G(()=>[ne(O(Z.value==="zh"?"洞穴":"Cave"),1)]),_:1})):xe("",!0)])]),default:G(()=>[E($,{modelValue:p.value[`${parseInt(S.name.replace("World",""))}`],"onUpdate:modelValue":a=>p.value[`${parseInt(S.name.replace("World",""))}`]=a,placeholder:i(V)("setting.multiWorldDialog.placeholder1"),style:{width:"60%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),E($,{modelValue:L.value[`${parseInt(S.name.replace("World",""))}`],"onUpdate:modelValue":a=>L.value[`${parseInt(S.name.replace("World",""))}`]=a,placeholder:i(V)("setting.multiWorldDialog.placeholder2"),type:"number",style:{"margin-left":"3%",width:"37%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),q("div",Cl,[E(Xe,{type:"primary",onClick:r},{default:G(()=>[ne(O(Z.value==="zh"?"生成配置":"Generate"),1)]),_:1})])]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}}}),Gl=on(wl,[["__scopeId","data-v-9b8c6eb0"]]);export{Gl as default};
