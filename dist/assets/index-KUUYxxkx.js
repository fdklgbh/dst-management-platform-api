import{_ as I,r as v,D as b,c as S,g as M,G as j,H as C,I as E,J as V,K as h,d as y,e as H,f as e,w as l,i as s,L as O,M as G,j as m,t as r,q as P,N as W,O as J,l as Q,k as R,m as N,P as z,Q as X,B as i,C as Y,S as Z,R as ee,y as se,T as te,U as oe,V as le,W as ae}from"./index-C_KKoqVJ.js";const ne={class:"h-full"},re={class:"absolute top-10px right-10px flex flex-items-center"},ie={class:"absolute text-center select-none"},ce={class:"font-bold text-3xl chroma-text mb-6px text-center <lg:text-2xl <md:hidden"},de={class:"chroma-text text-lg text-center <md:hidden"},ue={style:{"margin-bottom":"-50px"}},pe={class:"flex items-center"},me={class:"ml-6px font-bold text-xl"},ge={class:"flex items-center space-x-3 text-gray-400 mt-16px mb-16px"},_e={class:"text-center"},fe={__name:"index",setup(xe){const g=v(b.loginTitle);g.value=S(()=>z(_.language,b.loginTitle,b.loginEnTitle));const _=M(),d=j(),q=C(),L=E(),k=X(),U=V("images/logo/logo.svg"),A=V("images/login/bg.png"),f=v(),u=v(!1),a=h({username:"",password:""}),B=S(()=>_.language==="en"?h({username:[{required:!0,message:"The user name cannot be empty",trigger:"blur"}],password:[{required:!0,message:"The password cannot be empty",trigger:"blur"}]}):h({username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]})),T=()=>{f.value&&f.value.validate(async(o,t)=>{const p=Z(a.password);if(o){u.value=!0;try{const c={username:a.username,password:p},n=await ee.login.post({loginForm:c});if(se(n.message),d.setToken(n.data.token),d!=null&&d.token)await te();else{oe("请重新登录"),await k.replace(le);return}await q.setTab([]),await L.setKeepAliveName([]),_.needUpdatePassword=a.password==="123456",await k.replace(ae)}catch{let n=1;setInterval(()=>{n--,n===0&&(u.value=!1)},1e3)}}})};return(o,t)=>{const p=i("el-image"),c=i("el-col"),n=i("el-input"),x=i("el-form-item"),$=i("el-button"),D=i("el-form"),F=i("el-row"),K=Y("throttle");return y(),H("div",ne,[e(F,{class:"h-100%"},{default:l(()=>[s("div",re,[e(O),e(G)]),e(c,{lg:16,md:12,sm:15,xs:0,class:"flex items-center justify-center"},{default:l(()=>[t[2]||(t[2]=s("div",{class:"login-background w-85% h-100%"},null,-1)),s("div",ie,[e(p,{class:"w-400px h-360px mb-50px animate-float <md:hidden <lg:w-360px h-320px",src:m(A)},null,8,["src"]),s("div",ce,r(o.$t("login.welcome"))+" "+r(g.value),1),s("div",de,r(o.$t("login.description")),1)])]),_:1}),e(c,{lg:8,md:12,sm:9,xs:24,class:"dark:bg-#161616 bg-gray-100 flex items-center justify-center flex-col"},{default:l(()=>[s("div",ue,[e(p,{src:m(U),style:{width:"200px"}},null,8,["src"])]),s("div",pe,[s("div",me,r(g.value),1)]),s("div",ge,[t[3]||(t[3]=s("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1)),s("span",_e,r(o.$t("login.account")),1),t[4]||(t[4]=s("span",{class:"h-1px w-16 bg-gray-300 inline-block"},null,-1))]),e(D,{ref_key:"loginFormRef",ref:f,model:a,rules:B.value,class:"w-260px","validate-on-rule-change":!1,onKeyup:P(T,["enter"])},{default:l(()=>[e(x,{prop:"username"},{default:l(()=>[e(n,{type:"text",placeholder:o.$t("login.loginName"),"prefix-icon":m(W),modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=w=>a.username=w)},null,8,["placeholder","prefix-icon","modelValue"])]),_:1}),e(x,{prop:"password"},{default:l(()=>[e(n,{type:"password",placeholder:o.$t("login.password"),"show-password":"","prefix-icon":m(J),modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=w=>a.password=w)},null,8,["placeholder","prefix-icon","modelValue"])]),_:1}),e(x,null,{default:l(()=>[u.value?(y(),R($,{key:1,type:"primary",class:"w-245px bg-[--el-color-primary]",round:"",loading:u.value},{default:l(()=>[N(r(o.$t("login.center")),1)]),_:1},8,["loading"])):Q((y(),R($,{key:0,type:"primary",class:"w-245px bg-[--el-color-primary]",round:""},{default:l(()=>[N(r(o.$t("login.in")),1)]),_:1})),[[K,T,"3000"]])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}},ve=I(fe,[["__scopeId","data-v-c42cf2ee"]]);export{ve as default};
