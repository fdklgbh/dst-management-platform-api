import{_ as H,u as Z,a as J,g as W,D as O,G as Q,b as X,H as Y,c as S,r as f,w as h,I as R,J as r,K as ee,e as U,f as te,j as a,k as o,x as le,i as s,l as t,p as l,t as d,n as se,m as ae,a7 as oe,C as ie,a8 as A,A as ne}from"./index-C-KsYsfv.js";const re={class:"page-div"},de={class:"card-header"},ue={style:{"line-height":"30px"}},pe={class:"tip custom-block"},me={class:"bolder"},ve={class:"card-footer"},ce={class:"el-upload__text"},ge={class:"el-upload__tip"},fe={__name:"import",setup(be){const{t:i}=Z(),{isMobile:N}=J(),n=W(),m=O();Q();const w=X(),y=Y("refresh"),K=S(()=>n.isDark),B=S(()=>n.language),b=f(!1),p=f(!1),v=f(!1),x=f(),M=()=>{x.value&&x.value.clearFiles(),v.value=!0},I=u=>/\.zip$/i.test(u.name)?!0:(ie(B.value==="zh"?"请上传zip文件":"Please upload a zip file"),!1),L=u=>{p.value=!0;const e=new FormData;e.append("file",u.file),e.append("clusterName",n.selectedDstCluster),A.import.upload.post(e).then(c=>{P(),ne(c.message)}).finally(()=>{v.value=!1,p.value=!1})},P=()=>{A.clusters.get().then(u=>{n.dstClusters=u.data,n.selectedDstCluster===null&&n.dstClusters!==null&&(n.selectedDstCluster=n.dstClusters[0].clusterName)})},C=new URL("/assets/zip-image-DCIK-Up-.png",import.meta.url).href,D=new URL("/assets/zip-image-master-BqrqyRWw.png",import.meta.url).href,q=new URL("/assets/help-lSGot43l.gif",import.meta.url).href,F=()=>{setTimeout(()=>{m.meta.isKeepAlive&&w.removeKeepAliveName(m.name),y(!1),R(()=>{m.meta.isKeepAlive&&w.addKeepAliveName(m.name),y(!0)})},0)};return h(()=>n.selectedDstCluster,u=>{u&&R(()=>{F()})},{immediate:!1}),(u,e)=>{const c=r("el-button"),_=r("el-col"),k=r("el-image"),z=r("el-row"),G=r("el-card"),T=r("el-icon"),$=r("el-upload"),V=r("el-dialog"),j=r("el-alert"),E=ee("loading");return U(),te("div",re,[a(z,{gutter:10},{default:o(()=>[a(_,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:o(()=>[a(G,{style:le(s(N)?"min-height: 400px":"min-height: 600px"),shadow:"never"},{header:o(()=>[t("div",de,[l(d(s(i)("setting.import.title"))+" ",1),a(c,{type:"success",onClick:e[0]||(e[0]=g=>b.value=!0)},{default:o(()=>[l(d(s(i)("setting.import.buttonHelp")),1)]),_:1})])]),footer:o(()=>[t("div",ve,[a(c,{type:"primary",onClick:M},{default:o(()=>[l(d(s(i)("setting.import.button")),1)]),_:1})])]),default:o(()=>[t("div",null,[t("div",ue,d(s(i)("setting.import.text1")),1),t("div",null,[a(z,{gutter:20},{default:o(()=>[a(_,{lg:12,md:12,sm:24,span:12,xs:24},{default:o(()=>[t("div",pe,[t("div",null,[t("span",me,d(s(i)("setting.import.text2")),1)]),e[3]||(e[3]=t("div",null,".",-1)),e[4]||(e[4]=t("div",null,"├── adminlist.txt",-1)),e[5]||(e[5]=t("div",null,"├── blocklist.txt",-1)),e[6]||(e[6]=t("div",null,"├── Caves",-1)),e[7]||(e[7]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── backup")],-1)),e[8]||(e[8]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── leveldataoverride.lua")],-1)),e[9]||(e[9]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── modoverrides.lua")],-1)),e[10]||(e[10]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── save")],-1)),e[11]||(e[11]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server_chat_log.txt")],-1)),e[12]||(e[12]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server.ini")],-1)),e[13]||(e[13]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   └── server_log.txt")],-1)),e[14]||(e[14]=t("div",null,[t("span",{class:"bolder"},"├── cluster.ini")],-1)),e[15]||(e[15]=t("div",null,[t("span",{class:"bolder"},"├── cluster_token.txt")],-1)),e[16]||(e[16]=t("div",{class:"bolder"},"├── Master",-1)),e[17]||(e[17]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── backup")],-1)),e[18]||(e[18]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── leveldataoverride.lua")],-1)),e[19]||(e[19]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── modoverrides.lua")],-1)),e[20]||(e[20]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── save")],-1)),e[21]||(e[21]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   ├── server_chat_log.txt")],-1)),e[22]||(e[22]=t("div",{class:"bolder"},[t("span",{class:"tree-tab"},"│"),l("   ├── server.ini")],-1)),e[23]||(e[23]=t("div",null,[t("span",{class:"tree-tab"},"│"),l("   └── server_log.txt")],-1)),e[24]||(e[24]=t("div",null,"└── whitelist.txt",-1))])]),_:1}),a(_,{lg:12,md:12,sm:24,span:12,xs:24},{default:o(()=>[t("div",null,[a(k,{"hide-on-click-modal":!0,"initial-index":4,"max-scale":7,"min-scale":.2,"preview-src-list":[s(C)],src:s(C),"zoom-rate":1.2,fit:"cover",style:{"margin-top":"10px","margin-bottom":"10px"}},null,8,["preview-src-list","src"])]),t("div",null,[a(k,{"hide-on-click-modal":!0,"initial-index":4,"max-scale":7,"min-scale":.2,"preview-src-list":[s(D)],src:s(D),"zoom-rate":1.2,fit:"cover",style:{"margin-top":"10px","margin-bottom":"10px"}},null,8,["preview-src-list","src"])])]),_:1})]),_:1})])])]),_:1},8,["style"])]),_:1})]),_:1}),a(V,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=g=>v.value=g),"close-on-click-modal":!p.value,"close-on-press-escape":!p.value,"show-close":!p.value,title:s(i)("setting.import.dialog.title"),width:"45%"},{default:o(()=>[se((U(),ae($,{ref_key:"uploadRef",ref:x,"before-upload":I,"http-request":L,limit:1,drag:""},{tip:o(()=>[t("div",ge,d(s(i)("setting.import.dialog.tip")),1)]),default:o(()=>[a(T,{class:"el-icon--upload"},{default:o(()=>[a(s(oe))]),_:1}),t("div",ce,[l(d(s(i)("setting.import.dialog.text1"))+" ",1),t("em",null,d(s(i)("setting.import.dialog.text2")),1)])]),_:1})),[[E,p.value]])]),_:1},8,["modelValue","close-on-click-modal","close-on-press-escape","show-close","title"]),a(V,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=g=>b.value=g),title:s(i)("setting.import.dialog2.title"),width:"70%"},{default:o(()=>[a(j,{closable:!1,effect:K.value?"light":"dark",type:"error"},{default:o(()=>[l(d(s(i)("setting.import.dialog2.text1")),1)]),_:1},8,["effect"]),a(k,{src:s(q),class:"fcc",fit:"fill",loading:"lazy",style:{"margin-top":"10px"}},null,8,["src"])]),_:1},8,["modelValue","title"])])}}},_e=H(fe,[["__scopeId","data-v-8a26ed29"]]);export{_e as default};
